(this["webpackJsonphypertube-frontend-ts"]=this["webpackJsonphypertube-frontend-ts"]||[]).push([[0],{164:function(e,t,n){},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(48),r=n(13),c=n(55),o=n(73),i=n(24),s=n(33),l=n(27),u=n(75),d=Object(c.c)({UI:o.b,movies:i.a,filter:s.b,user:l.b,snack:u.b}),f=Object(a.a)({reducer:d});var b=function(){return Object(r.b)()};t.a=f},213:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(1),c=n(0),o=n.n(c),i=n(254),s=n(260),l=n(77),u=n(28),d=n(13),f=n(18),b=n(298),j=n(3),m=n(83),p=function(e){var t=e||window.location.search,n=t?decodeURI(t):null;return n?n.replaceAll("%3A",":").replaceAll("%2C",",").replaceAll("+"," ").slice(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]="error"===n[0]?JSON.parse(n[1]):n[1],e}),{}):null},h=function(e){return null!==e&&void 0!==e},O=n(17),g=n(27),v=n(75),x=n(295),w=function(){var e=Object(O.b)();return{toast:Object(c.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(v.a)({key:Object(x.a)(),text:t.text,header:t.header,variant:n||"default",options:Object(j.a)({autoHideDuration:3e3},a)}))}),[e])}},y=n(9),k=n.n(y),S=n(8),C=n(16),N=n(10),I=n(256),L=n(26),E=n(215),T=n(255),R=n(147),P=Object(i.a)({root:{position:"relative"},Paper:{padding:20},Open:{transform:"rotate(180deg)"},Item:{fontSize:"1.0rem",margin:5}}),M={onClose:function(){}},z=Object(c.createContext)(M),W=function(e){var t=e.heroText,n=void 0===t?null:t,a=e.icon,o=e.items,i=e.img,s=void 0===i?"":i,l=e.buttonProps,d=e.children,f=Object(c.useState)(!1),b=Object(N.a)(f,2),m=b[0],p=b[1],h=Object(c.useRef)(null),O=P(),g=function(){return p(!1)},v={onClose:g},x=s?{backgroundImage:"url(".concat(s,")"),height:"2rem",backgroundSize:"cover",backgroundOrigin:"padding-box",backgroundPositionY:"center",backgroundColor:s?"currentcolor":u.c.palette.background.default}:{};return Object(r.jsxs)("div",{className:O.root,children:[Object(r.jsx)(E.a,Object(j.a)(Object(j.a)({style:Object(j.a)({margin:"0 10px"},x),ref:h,variant:"text",onClick:function(){return p((function(e){return!e}))},endIcon:s?null:n&&a},l),{},{children:s?null:n||a})),Object(r.jsx)(T.a,{open:m,anchorEl:h.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:g,children:Object(r.jsx)(R.a,{className:O.Paper,children:Object(r.jsxs)(I.a,{container:!0,direction:"column",alignItems:"center",children:[o&&o.map((function(e){var t=e.text,n=e.name,a=e.onClick;return Object(r.jsx)(E.a,{variant:"text",name:n,className:O.Item,onClick:function(e){return function(e,t){t&&t(e),p(!1)}(e,a)},children:t},t)})),Object(r.jsx)(z.Provider,{value:v,children:d})]})})})]})},B=n(94),A=n(258),D=n(217),F=n(293),U=Object(i.a)({ButtonListItem:{justifyContent:"center"},Input:{width:"100%"},SmallSelector:{minWidth:"100px",padding:"10px"},FormControl:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start"},RadioGroup:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}}),_=function(e){var t=e.type,n=void 0===t?"text":t,a=e.name,i=(e.values,e.value),s=e.onValidate,l=e.onChange,u=(e.className,e.rules),d=e.ignoreUntouched,f=Object(B.a)(e,["type","name","values","value","onValidate","onChange","className","rules","ignoreUntouched"]),b=U(),m=Object(c.useState)(!1),p=Object(N.a)(m,2),h=p[0],O=p[1],g=Object(c.useState)(!1),v=Object(N.a)(g,2),x=v[0],w=v[1],y=Object(c.useState)(""),k=Object(N.a)(y,2),S=k[0],C=k[1],I=o.a.useMemo((function(){return u?Object(j.a)({},u):Object(j.a)({},{helperText:"",rule:null})}),[u]),L=I.helperText,E=I.rule;switch(Object(c.useEffect)((function(){var e;e=!!E&&!function(e,t,n){var a=!t.regex||!!e.match(t.regex),r=!t.checkFn||t.checkFn();return!n||e.length>=t.minLength&&e.length<=t.maxLength&&a&&r}(i,E,d||h),C(e?L:""),s&&s((d||h||!!i.length)&&!e),x!==e&&w(e)}),[i,h,E,L,s,d,x]),n){case"text":case"email":case"password":return Object(r.jsx)(F.a,Object(j.a)({id:a,error:x,helperText:S,type:n,value:i,name:a,className:b.Input,onFocus:function(){return O(!0)},onChange:function(e){return l(e)}},f));default:return null}},V=n(56),H=n.n(V),$=n(34),X=Object(i.a)({root:{width:"100%"},Button:{width:"100%"},List:{width:"100%"},Buttons:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},Link:{textDecoration:"none",color:"inherit",width:"100%"},margin:{marginBottom:10},padding:{padding:"5px 10px"}}),q=function(e){var t=e.inputs,n=e.buttons,a=e.className,c=e.children,o=X();return Object(r.jsx)("form",{className:H()(a,o.root),children:Object(r.jsxs)(A.a,{className:o.List,children:[t.map((function(e){return Object(r.jsx)(D.a,{children:Object(r.jsx)(_,Object(j.a)(Object(j.a)({},e),{},{className:o.margin}))},e.name||e.type)})),n&&Object(r.jsx)(D.a,{className:o.Buttons,children:n.map((function(e){var t=e.variant,n=e.type,a=e.text,c=e.onClick,i=e.to,s=Object(B.a)(e,["variant","type","text","onClick","to"]);return i?Object(r.jsx)($.c,{to:i,className:H()(o.Link,o.margin),children:Object(r.jsx)(E.a,Object(j.a)(Object(j.a)({className:o.Button,variant:t,onClick:c},s),{},{children:a}))},a):Object(r.jsx)(E.a,Object(j.a)(Object(j.a)({className:H()(o.Button,o.margin),variant:t,type:n,onClick:c},s),{},{children:a}),a)}))}),c]})})},G=n(259),Y=Object(i.a)({OAuthButton:{width:"6rem"}}),K={42:{url:"https://api.intra.42.fr/oauth/authorize",queryParams:[{name:"client_id",value:"96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauth42"},{name:"scope",value:"public"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"code"}]},facebook:{url:"https://www.facebook.com/v10.0/dialog/oauth",queryParams:[{name:"client_id",value:"737140593612593"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauthFb"},{name:"scope",value:"email+public_profile"},{name:"response_type",value:"code"}]},vk:{url:"https://oauth.vk.com/authorize",queryParams:[{name:"client_id",value:"7781054"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauthVk"},{name:"scope",value:"offline+photos"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"code"}]},google:{url:"https://accounts.google.com/o/oauth2/v2/auth",queryParams:[{name:"client_id",value:"96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53"},{name:"redirect_uri",value:"http://localhost:4000/user/auth/oauthGoogle"},{name:"scope",value:"https://www.googleapis.com/auth/drive.metadata.readonly"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"token"}]}},Z=function(){return Object(r.jsx)("img",{height:"30",width:"30",src:"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg",alt:"42 auth",style:{filter:"invert(1)"}})},J=function(){return Object(r.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 409 409",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("path",{fill:"#475993",d:"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085 h147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882 v-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955 l-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087 c-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085 C408.786,24.662,384.124,0,353.701,0z"})})},Q=function(){return Object(r.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 112 112",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsxs)("g",{children:[Object(r.jsx)("circle",{id:"XMLID_11_",fill:"#4D76A1",cx:"56.098",cy:"56.098",r:"56.098"}),Object(r.jsx)("path",{fill:"#FFFFFF",fillRule:"evenodd",clipRule:"evenodd",d:"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878 c0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235 c2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463 c-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069 c0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297 c-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514 c-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644 c1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446 c-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069 c0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993 C44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z"})]})})},ee=function(){return Object(r.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(r.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),Object(r.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),Object(r.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),Object(r.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),Object(r.jsx)("path",{d:"M20 20h472v472H20V20z"})]})})},te=function(e){var t=e.variant,n=Y(),a=Object(c.useState)(!1),o=Object(N.a)(a,2),i=o[0],s=o[1],l=Object(c.useMemo)((function(){switch(t){case"42":return Object(r.jsx)(Z,{});case"facebook":return Object(r.jsx)(J,{});case"vk":return Object(r.jsx)(Q,{});case"google":return Object(r.jsx)(ee,{})}}),[t]);return Object(r.jsx)(E.a,{type:"submit",disabled:i,onClick:function(e){s(!0);var n=K[t].queryParams.reduce((function(e,t){return e[t.name]=t.value,e}),{}),a=new URLSearchParams(n).toString(),r="".concat(K[t].url,"?").concat(a);window.location.href=r},className:n.OAuthButton,"aria-label":"".concat(t," oauth"),children:i?Object(r.jsx)(G.a,{}):l})};function ne(){var e=Object(S.a)(["Server error"]);return ne=function(){return e},e}var ae=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"},Form:{width:"100%"},margin:{marginBottom:10},padding:{padding:"5px 10px"},Link:{textDecoration:"none"}}),re=function(){var e=ae(),t=Object(c.useState)({email:"",password:""}),n=Object(N.a)(t,2),i=n[0],s=n[1],l=Object(c.useState)({email:!1,password:!1}),u=Object(N.a)(l,2),d=u[0],m=u[1],p=d.email&&d.password,h=o.a.useContext(z).onClose,v=Object(b.a)(),x=v.t,y=v.i18n,S=w().toast,E=Object(f.f)(),T=Object(O.b)(),R=Object(c.useCallback)((function(e){e.preventDefault(),s(Object(j.a)(Object(j.a)({},i),{},Object(a.a)({},e.target.name,e.target.value)))}),[i]),P=Object(c.useCallback)(function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[Login] handleSubmit",i),n="Basic "+btoa(encodeURI(i.email)+":"+encodeURI(i.password)),e.prev=3,e.next=6,Object(L.a)("basic",{headers:{Authorization:n}});case 6:(a=e.sent).data.accessToken?(Object(g.f)(a.data.accessToken),T(Object(g.c)()),E.push("/")):S({text:a.data[y.language]},"error"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),S({text:x(ne())},"error");case 14:h();case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),[i,S,y.language,T,E,h,x]),M=Object(c.useCallback)((function(){console.log("[Login] handleForgot"),E.push("forgot_password"),h()}),[h,E]),W=Object(c.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:x("Email"),placeholder:x("Enter email"),value:i.email,onChange:R,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{email:e})}))},rules:{helperText:x("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"password",type:"password",label:x("Password"),placeholder:x("Enter password"),value:i.password,onChange:R,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{password:e})}))},rules:{helperText:x("passwordError"),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}}],buttons:[{type:"submit",variant:"contained",onClick:P,text:x("Login"),disabled:!p},{variant:"outlined",onClick:M,text:x("Forgot password?")},{to:"/register",variant:"outlined",text:x("Register"),onClick:h}]}}),[i,R,P,M,h,p,x]);return Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(r.jsx)(q,Object(j.a)(Object(j.a)({},W),{},{children:Object(r.jsxs)(I.a,{container:!0,alignItems:"center",justify:"space-evenly",children:[Object(r.jsx)(te,{variant:"42"}),Object(r.jsx)(te,{variant:"facebook"}),Object(r.jsx)(te,{variant:"vk"})]})}))})},ce=Object(i.a)({root:{}}),oe=function(){var e=ce();return Object(r.jsx)(s.a,{className:e.root,children:Object(r.jsx)(re,{})})},ie=n(148),se=n(66),le=n(296),ue=n(24),de=n(33),fe=Object(i.a)((function(e){return Object(le.a)({root:{padding:0,position:"relative",borderRadius:5,overflow:"hidden"},Scroller:{display:"inline-flex",flexWrap:"nowrap",overflowX:"scroll","&::-webkit-scrollbar":{display:"none"}},ShadowLeft:{position:"absolute",height:"100%",left:0,width:"50px",background:"linear-gradient(90deg, #00000033, transparent)"},ShadowRight:{position:"absolute",height:"100%",right:0,width:"50px",background:"linear-gradient(-90deg, #00000033, transparent)"},Link:{color:e.palette.grey[700],fontSize:"1.5rem",textDecoration:"none",flex:"1 0 50px",margin:10,display:"flex",justifyContent:"center",alignItems:"center",border:"3px solid transparent",borderRadius:"50%","&:before":{content:"''",paddingTop:"100%",float:"left"}},Active:{borderColor:u.b.main}})})),be=function(){var e=Object(f.g)(),t=fe(u.c),n=Object(c.useState)({shadowLeft:!1,shadowRight:!0}),a=Object(N.a)(n,2),o=a[0],i=a[1],l=Object(O.b)(),d=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget.innerText,!window.location.href.match(/byname/)){e.next=6;break}if(!(a=window.location.href.split("/").pop())||n!==a){e.next=6;break}return e.abrupt("return");case 6:l(Object(ue.f)()),l(Object(ue.i)({byName:[]})),l(Object(de.i)()),l(Object(ue.e)({filter:{letter:n,limit:se.LIMIT}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Object(m.throttle)((function(e){e.stopPropagation();var t=e.target;t&&(0===t.scrollLeft?i(Object(j.a)(Object(j.a)({},o),{},{shadowLeft:!1})):t.scrollLeft>0&&!o.shadowLeft&&i(Object(j.a)(Object(j.a)({},o),{},{shadowLeft:!0})),t.scrollWidth-t.scrollLeft<t.offsetWidth+1?i(Object(j.a)(Object(j.a)({},o),{},{shadowRight:!1})):!o.shadowRight&&i(Object(j.a)(Object(j.a)({},o),{},{shadowRight:!0})))}),100);return Object(r.jsxs)(s.a,{className:t.root,children:[o.shadowLeft&&Object(r.jsx)("div",{className:t.ShadowLeft}),o.shadowRight&&Object(r.jsx)("div",{className:t.ShadowRight}),Object(r.jsxs)(s.a,{onScroll:b,onWheel:function(e){e.currentTarget.scrollTo({top:0,left:e.currentTarget.scrollLeft+4*e.deltaY,behavior:"smooth"})},className:t.Scroller,children:["ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("").map((function(n){return Object(r.jsx)($.c,{to:"/byname/".concat(n),onClick:d,className:(a="/byname/".concat(n),-1!==e.pathname.search(a)?H()(t.Link,t.Active):t.Link),children:n},n);var a})),Object(r.jsx)("div",{className:t.Link})]})]})},je=n(40),me=n(262),pe=n(261),he=n(139),Oe=n.n(he),ge=n(302),ve=n(138),xe=n.n(ve),we=Object(i.a)({Typography:{padding:5,marginRight:5,border:"1px solid #ddd",borderRadius:5}}),ye=function(e){var t=e.movieId,n=e.imdbRating,a=e.ourRating,o=we(),i=Object(c.useState)(a),s=Object(N.a)(i,2),l=s[0],u=s[1],f=Object(d.c)((function(e){return e.user})).isAuth,b=function(){var e=Object(C.a)(k.a.mark((function e(n,a){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),null===a){e.next=7;break}return console.log(a),e.next=5,L.c.patch("/rating",{movieId:t,rating:a},{headers:{accessToken:Object(g.d)()}});case 5:(r=e.sent).data.status&&u(+r.data.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsxs)(I.a,{container:!0,alignItems:"center",justify:"flex-end",children:[Object(r.jsx)(ie.a,{className:o.Typography,children:"IMDB"}),Object(r.jsx)(ie.a,{children:n}),Object(r.jsx)(ge.a,{disabled:!f,value:l||n/2,name:"".concat(t,"-rating"),emptyIcon:Object(r.jsx)(xe.a,{color:"disabled",fontSize:"inherit"}),onChange:b})]})},ke=Object(i.a)({Paper:{display:"flex",marginBottom:20,padding:10},Img:{position:"relative",cursor:"pointer","& img":{height:"15rem",width:"10rem",maxWidth:"15rem",objectFit:"cover",marginRight:20,borderRadius:5},"&:hover $PlayIconWrapper":{opacity:1}},PlayIconWrapper:{position:"absolute",left:"calc(50% - 3.5rem)",top:"calc(50% - 3rem)",fontSize:"1rem",padding:"1rem",borderRadius:"50%",backgroundColor:"#000000aa",color:"#fff",opacity:0,transition:"0.3s"},PlayIcon:{width:"4rem",height:"4rem"},Info:{height:"15rem",flexWrap:"nowrap"},Caption:{fontSize:"1.5rem",textDecoration:"none",color:"inherit",marginBottom:10},Text:{fontSize:"1rem",fontWeight:200},Description:{maxHeight:"8rem",paddingTop:10,fontSize:"0.9rem",position:"relative",flexGrow:2,overflow:"hidden"},Shadow:{height:40,width:"100%",position:"absolute",bottom:0,background:"linear-gradient(0deg, #ffffff, #ffffff33)"},Link:{marginLeft:5,fontSize:"inherit",fontWeight:"inherit",color:"inherit",textTransform:"capitalize","&:hover":{color:u.a.light}}}),Se=function(e){var t,n=e.card,a=ke(),c=Object(b.a)(),o=c.t,i=c.i18n,s=n.en,l=s.id,u=s.img,d=s.info,f=n[i.language].title,j=n[i.language].info.description;return Object(r.jsxs)(R.a,{className:a.Paper,children:[Object(r.jsxs)($.c,{to:"/movies/".concat(l),className:a.Img,children:[Object(r.jsx)("img",{src:u,alt:"".concat(f," poster")}),Object(r.jsx)("div",{className:a.PlayIconWrapper,children:Object(r.jsx)(Oe.a,{className:a.PlayIcon,fontSize:"large"})})]}),Object(r.jsxs)(I.a,{container:!0,direction:"column",className:a.Info,children:[Object(r.jsxs)(I.a,{container:!0,alignItems:"baseline",justify:"space-between",children:[Object(r.jsx)($.c,{to:"/movies/".concat(l),className:a.Caption,children:Object(r.jsx)(ie.a,{variant:"caption",className:a.Caption,children:f})}),Object(r.jsx)(ye,{movieId:l,imdbRating:d.imdbRating,ourRating:d.rating})]}),Object(r.jsxs)(I.a,{container:!0,className:a.Text,children:[o("Year"),": ",d.year]}),Object(r.jsxs)(I.a,{container:!0,className:a.Text,children:[o("Genres"),": ",(t=d.genres,t&&t.length?t.map((function(e){var t="string"===typeof e?e:e.name;return Object(r.jsx)($.b,{to:"/genres/".concat(t),className:a.Link,children:o(t)},t)})):o("No info"))]}),Object(r.jsxs)(I.a,{container:!0,className:a.Text,children:[o("Length"),": ",d.length?"".concat(d.length).concat(o("min")):"unknown"]}),Object(r.jsx)(pe.a,{}),Object(r.jsxs)(I.a,{container:!0,className:a.Description,children:[j,Object(r.jsx)("div",{className:a.Shadow})]})]})]})},Ce=Object(i.a)({root:{},Grid:{maxWidth:150,marginRight:"1rem",marginBottom:"1rem"},Media:{height:220,width:150},Name:{fontSize:"1rem",fontWeight:800}}),Ne=function(e){var t=e.display,n=void 0===t?"image":t,a=e.className,c=e.id,o=Ce(),i=Object(b.a)().i18n,s=Object(d.c)((function(e){return e.movies})).movies.find((function(e){return e.en.id===c}));return Object(r.jsx)(I.a,{item:!0,container:!0,wrap:"wrap",direction:"lines"===n?"column":"row",className:"lines"===n?H()(o.root,a):H()(o.root,a,o.Grid),children:function(){if(!s)return null;if("lines"===n)return Object(r.jsx)(Se,{card:s});var e=s.en.img||s.ru.img;return Object(r.jsxs)($.c,{to:"/movies/".concat(s.en.id),className:o.root,children:[Object(r.jsx)(me.a,{style:{height:"fit-content"},children:Object(r.jsx)("div",{className:o.Media,style:{background:"url(".concat(e,")"),backgroundSize:"cover"}})}),"image"!==n&&Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",children:"grid"===n&&Object(r.jsx)(ie.a,{className:o.Name,children:s[i.language].title})})]})}()})},Ie=n(263),Le=Object(i.a)({Paper:{display:"flex",marginBottom:20,padding:10,width:"100%"},Img:{borderRadius:5,height:"15rem",width:"13rem",marginRight:"1rem"},Header:{width:"90%",marginBottom:10,fontSize:30},Line:{marginBottom:15,height:10,width:"".concat(Math.floor(100*Math.random()),"%")},Info:{height:"15rem",flexWrap:"nowrap"},Text:{fontSize:"1rem",height:10,marginBottom:15,display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase"}}),Ee=["line0","line1","line2","line3","line4","line5","line6"],Te=function(e){var t=e.display,n=Le(),a=Object(c.useState)(0),o=Object(N.a)(a,2),i=o[0],s=o[1],l=Object(b.a)().t;return Object(c.useEffect)((function(){var e=setInterval((function(){s((function(e){return(e+1)%Ee.length}))}),3e3);return function(){return clearInterval(e)}})),"lines"===t?Object(r.jsxs)(R.a,{className:n.Paper,children:[Object(r.jsx)(Ie.a,{animation:"wave",variant:"rect",className:n.Img}),Object(r.jsxs)(I.a,{container:!0,direction:"column",className:n.Info,children:[Object(r.jsx)(Ie.a,{animation:"wave",className:n.Header}),Object(r.jsx)(Ie.a,{animation:"wave",width:"50%",className:n.Line}),Object(r.jsx)(Ie.a,{animation:"wave",width:"60%",className:n.Line}),Object(r.jsx)(Ie.a,{animation:"wave",width:"53%",className:n.Line}),Object(r.jsx)(ie.a,{className:n.Text,children:l(Ee[i])}),Object(r.jsx)(Ie.a,{animation:"wave",width:"40%",className:n.Line}),Object(r.jsx)(Ie.a,{animation:"wave",width:"70%",className:n.Line}),Object(r.jsx)(Ie.a,{animation:"wave",width:"47%",className:n.Line})]})]}):Object(r.jsx)(me.a,{style:{height:"fit-content"},children:Object(r.jsx)("div",{className:n.Img,style:{backgroundSize:"cover"},children:Object(r.jsx)(Ie.a,{animation:"wave",variant:"rect",className:n.Img})})})},Re=function(e){var t=e.movies,n=Object(d.c)((function(e){return e.UI})),a=n.sortBy,o=n.view,i=Object(d.c)((function(e){return e.filter})),s=i.genres,l=i.years,u=i.countries,f=Object(d.c)((function(e){return e.movies})),b=f.loading,j=f.isEndOfMovies,p=Object(c.useState)(t),h=Object(N.a)(p,2),g=h[0],v=h[1],x=Object(O.b)(),w=Object(c.useRef)(null),y=window.location.href,k=y.match(/byname/)?y.split("/").pop():void 0,S=y.match(/genres/)?y.split("/").pop():void 0,C=y.match(/search/)?y.split("/").pop():void 0;return console.log("[Cards] letter, search, genre",k,C,S),Object(c.useEffect)((function(){console.log("useEffect track scroll");var e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return Object(m.throttle)((function(){e&&(window.pageYOffset+window.innerHeight>e.offsetTop+e.offsetHeight-r?t&&t():n&&n())}),a)}(w.current,(function(){j||b||(console.log("endOfMoviesCallback"),x(Object(ue.e)({filter:{search:C,letter:k,genre:S,limit:se.LIMIT,offset:t.length}})).then((function(e){console.log("[Cards] loadMovies response",e),e&&e.length<se.LIMIT&&x(Object(ue.h)())})))}));return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[t.length,x,k,C,S,j,b]),Object(c.useEffect)((function(){var e=Object(de.f)(l)?t:t.filter((function(e){return Object(de.k)(e.en.info.year,l)}));e=Object(de.e)(s)?e:e.filter((function(e){return Object(de.c)(e.en.info.genres,s)})),e=Object(de.d)(u)?e:e.filter((function(e){return!e.en.info.countries||Object(de.a)(e.en.info.countries,u)})),console.log("[Cards] filter useEffect",e),v(e)}),[s,u,l,t]),Object(c.useEffect)((function(){console.log("[Cards] sort useEffect"),"name"===a?v((function(e){return function(e){return Object(je.a)(e).sort((function(e,t){return e.en.title.localeCompare(t.en.title)}))}(e)})):"year"===a?v((function(e){return function(e){return Object(je.a)(e).sort((function(e,t){return t.en.info.year-e.en.info.year}))}(e)})):"rating"===a?v((function(e){return function(e){return Object(je.a)(e).sort((function(e,t){return t.en.info.rating-e.en.info.rating||t.en.info.imdbRating-e.en.info.imdbRating}))}(e)})):"avalibility"===a&&v((function(e){return function(e){return Object(je.a)(e).sort((function(e,t){return t.en.info.avalibility-e.en.info.avalibility}))}(e)}))}),[a,t]),Object(r.jsxs)(I.a,{ref:w,container:!0,justify:"space-evenly",children:[g.map((function(e){return Object(r.jsx)(Ne,{id:e.en.id,display:o},e.en.id)})),b&&Object(r.jsx)(Te,{display:o})]})},Pe=Object(i.a)({root:{overflow:"hidden",flexWrap:"nowrap",margin:"20px 0",padding:10,background:"#fafafa",transform:"translateZ(0)",overflowX:"scroll",overflowY:"hidden",transition:"0.3s","&::-webkit-scrollbar":{display:"none"}},Movie:{transition:"0.3s",marginRight:20}}),Me=function(e){var t=e.display,n=void 0===t?"image":t,a=Pe(),c=Object(d.c)((function(e){return e.movies})).popular;return Object(r.jsx)(I.a,{container:!0,alignItems:"center",className:a.root,children:c.map((function(e){return Object(r.jsx)(Ne,{display:n,className:a.Movie,id:e},e)}))})},ze=n(264),We=n(294),Be=n(299),Ae=n(268),De=n(269),Fe=n(270),Ue=n(271),_e=n(266),Ve=Object(i.a)({"@media (orientation: portrait)":{root:{width:"80vw",height:"60vh"}},root:{minWidth:300,minHeight:300,width:"80vw",height:"60vh","@media (max-width: 600px)":{width:"90vw",height:"90vh"}},Actions:{justifyContent:"center"}}),He=["genres","years","countries"],$e=function(){var e=Ve(),t=Object(O.b)(),n=Object(c.useState)(!1),a=Object(N.a)(n,2),o=a[0],i=a[1],s=Object(c.useState)("genres"),l=Object(N.a)(s,2),u=l[0],f=l[1],j=Object(d.c)((function(e){return e.filter})),m=Object(b.a)().t,p=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[Filter] handleShow",j),t(Object(de.h)()),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){switch(u){case"genres":case"years":case"countries":return t(Object(de.j)({filter:{category:u,name:e.currentTarget.name,value:e.currentTarget.checked}}));default:return}};return Object(r.jsxs)("div",{children:[Object(r.jsx)(E.a,{variant:"text",onClick:function(){return i(!0)},startIcon:Object(r.jsx)(_e.a,{}),children:m("filterRoot")}),Object(r.jsxs)(Be.a,{open:o,onClose:function(){return i(!1)},"aria-labelledby":"filter-dialog",classes:{paper:e.root},children:[Object(r.jsx)(Ae.a,{id:"filter-dialog-title",children:m("filterRoot")}),Object(r.jsxs)(De.a,{children:[Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",children:Object(r.jsx)(Fe.a,{style:{marginBottom:20},children:He.map((function(e){return Object(r.jsx)(E.a,{color:"primary",variant:e===u?"contained":"outlined",onClick:function(){return f(e)},children:m(e)},e)}))})}),Object(r.jsx)(I.a,{container:!0,wrap:"wrap",children:function(e){switch(e){case"genres":return de.g.genres.map((function(e){return Object(r.jsx)(I.a,{item:!0,xs:6,sm:4,children:Object(r.jsx)(ze.a,{control:Object(r.jsx)(We.a,{style:{marginLeft:20},checked:j.genres[e],onChange:h,name:e,color:"primary"}),label:m(e)})},e)}));case"years":return de.g.years.map((function(e){return Object(r.jsx)(I.a,{item:!0,xs:6,sm:4,children:Object(r.jsx)(ze.a,{control:Object(r.jsx)(We.a,{style:{marginLeft:20},checked:j.years[e],onChange:h,name:e,color:"primary"}),label:m(e)})},e)}));case"countries":return de.g.countries.map((function(e){return Object(r.jsx)(I.a,{item:!0,xs:6,sm:4,children:Object(r.jsx)(ze.a,{control:Object(r.jsx)(We.a,{style:{marginLeft:20},checked:j.countries[e],onChange:h,name:e,color:"primary"}),label:m(e)})},e)}));default:return null}}(u)})]}),Object(r.jsxs)(Ue.a,{className:e.Actions,children:[Object(r.jsx)(E.a,{onClick:function(){t(Object(de.i)())},color:"primary",children:"Reset filters"}),Object(r.jsx)(E.a,{onClick:p,color:"secondary",children:"Show results"})]})]})]})},Xe=n(272),qe=n(73),Ge=function(){var e=Object(O.b)(),t=Object(b.a)().t,n=function(t){return e(Object(qe.c)({sortBy:t.currentTarget.name}))},a=[{text:t("By rating"),name:"rating",onClick:n},{text:t("By name"),name:"name",onClick:n},{text:t("By year"),name:"year",onClick:n},{text:t("By avalibility"),name:"avalibility",onClick:n}];return Object(r.jsx)(W,{heroText:t("Sort"),icon:Object(r.jsx)(Xe.a,{}),items:a})},Ye=n(273),Ke=n(274),Ze=Object(i.a)({right:{grow:1,marginLeft:"auto"}}),Je=function(){var e=Ze(),t=Object(O.b)(),n=Object(d.c)((function(e){return e.UI})).view;return Object(r.jsx)(E.a,{className:e.right,variant:"text",size:"large",onClick:function(){t(Object(qe.a)())},children:"grid"===n?Object(r.jsx)(Ye.a,{}):Object(r.jsx)(Ke.a,{})})},Qe=Object(i.a)({root:{padding:"10px 30px"}}),et=function(){var e=Qe();return Object(r.jsxs)(I.a,{container:!0,className:e.root,alignItems:"center",children:[Object(r.jsx)($e,{}),Object(r.jsx)(Ge,{}),Object(r.jsx)(Je,{})]})};function tt(){var e=Object(S.a)(["NoMoviesSearch"]);return tt=function(){return e},e}var nt=function(e){var t=e.match,n=Object(b.a)().t,a=Object(O.b)(),o=Object(d.c)((function(e){return e.movies})),i=o.movies,l=o.search,u=o.byName,f=o.popular,j=Object(c.useState)([]),m=Object(N.a)(j,2),p=m[0],g=m[1];return Object(c.useEffect)((function(){var e=t.url.match(/genres|byname/),n=e?e[0]:"";console.log("route",n);var r={limit:se.LIMIT};switch(n){case"genres":r.genre=t.params.id;break;case"byname":r.letter=t.params.id}console.log("[MainPage] useEffect. movies, filter, route",i,r,n),a(Object(ue.e)({filter:r}))}),[t.url]),Object(c.useEffect)((function(){var e=null;e=t.url.includes("byname")?u:t.url.match(/search|genres/)?l:f,console.log(e);var n=e.map((function(e){return i.find((function(t){return t.en.id===e}))})).filter(h);console.log(n),g(n)}),[u,l,f,t.url,i]),Object(r.jsxs)(s.a,{children:[Object(r.jsx)(be,{}),Object(r.jsx)(et,{}),Object(r.jsx)(Me,{}),p.length?Object(r.jsx)(Re,{movies:p}):Object(r.jsx)(ie.a,{variant:"h5",style:{width:"100%",textAlign:"center"},children:n(tt())})]})};function at(){var e=Object(S.a)(["Check your email"]);return at=function(){return e},e}var rt=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),ct=function(){var e=Object(c.useState)({email:"",username:"",password:"",confirm:""}),t=Object(N.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)({email:!1,password:!1,confirm:!1}),s=Object(N.a)(i,2),l=s[0],u=s[1],d=l.email&&l.password,m=rt(),p=Object(b.a)(),h=p.t,v=p.i18n,x=Object(f.f)(),y=Object(O.b)(),S=w().toast,E=Object(c.useCallback)((function(e){e.preventDefault(),o(Object(j.a)(Object(j.a)({},n),{},Object(a.a)({},e.target.name,e.target.value)))}),[n]),T=Object(c.useCallback)(function(){var e=Object(C.a)(k.a.mark((function e(t){var a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[Register] handleSubmit",n),a={email:n.email,username:n.username,passwd:n.password},e.next=5,L.e.put("create",a);case 5:r=e.sent,console.log(r),r.data.email?(y(Object(g.g)({user:r.data})),x.push("/"),S({text:h(at())})):S({text:r.data[v.language]},"error");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,S,h,v.language,y,x]),R=Object(c.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:h("Email"),placeholder:h("Enter email"),value:n.email,onChange:E,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return u((function(t){return Object(j.a)(Object(j.a)({},t),{},{email:e})}))},rules:{helperText:h("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"username",type:"text",label:h("Username"),placeholder:h("Enter username"),value:n.username,onChange:E,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return u((function(t){return Object(j.a)(Object(j.a)({},t),{},{username:e})}))},rules:{helperText:h("usernameError"),rule:{minLength:3,maxLength:20,regex:/^[\w-+.]+$/}}},{name:"password",type:"password",label:h("Password"),placeholder:h("Enter password"),value:n.password,onChange:E,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return u((function(t){return Object(j.a)(Object(j.a)({},t),{},{password:e})}))},rules:{helperText:h("passwordError"),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}},{name:"confirm",type:"password",label:h("Confirm"),placeholder:h("Confirm password"),value:n.confirm,onChange:E,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return u((function(t){return Object(j.a)(Object(j.a)({},t),{},{confirm:e})}))},rules:{helperText:h("confirmError"),rule:{minLength:3,maxLength:25,regex:new RegExp("^".concat(n.password,"$"))}}}],buttons:[{type:"submit",variant:"contained",onClick:T,text:h("Register"),disabled:!d},{to:"/login",variant:"outlined",text:h("Login")}]}}),[n,E,T,d,h]);return Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:m.root,children:Object(r.jsx)(q,Object(j.a)({},R))})},ot=Object(i.a)({root:{}}),it=function(){var e=ot();return Object(r.jsx)(s.a,{className:e.root,children:Object(r.jsx)(ct,{})})},st=function(){var e=Object(f.f)(),t=Object(O.b)();return o.a.useEffect((function(){console.log("cookie",document.cookie),console.log(window.location.href);var n=decodeURI(window.location.search);console.log("queryParams",n);var a=n.slice(1).split("&").find((function(e){return e.startsWith("accessToken")}));if(a){var r=a.search(/=(.+)/),c=a.slice(r+1);console.log("tokenStart",c),Object(g.f)(c),t(Object(g.c)()),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(j.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var a=encodeURIComponent(e)+"="+encodeURIComponent(t);Object.keys(n).forEach((function(e){a+="; "+e;var t=n[e];!0!==t&&(a+="="+t)})),document.cookie=a}("accessToken",c,{path:"/"}),e.push("/")}}),[t,e]),null};function lt(){var e=Object(S.a)(["footerCreated"]);return lt=function(){return e},e}var ut=Object(i.a)({root:{width:"100%",padding:10,position:"fixed",bottom:0,right:0,background:"linear-gradient(0deg, #ccc, transparent)"}}),dt=function(){var e=ut(),t=Object(b.a)().t;return Object(r.jsx)(I.a,{container:!0,alignItems:"flex-end",justify:"flex-end",className:e.root,children:t(lt())})},ft=n(276),bt=n(277),jt=n(257),mt=n(297),pt=n(218),ht=n(267),Ot=n(275),gt=Object(i.a)({root:Object(a.a)({margin:"10px",border:"1px solid ".concat(u.c.palette.grey[500]),borderRadius:5,maxWidth:300},u.c.breakpoints.down("xs"),{display:"none"}),Input:{padding:"5px 1rem",flex:1},BaseInput:{padding:0},Icon:Object(a.a)({fontSize:"2rem",color:u.c.palette.grey[700],paddingRight:5},u.c.breakpoints.down("xs"),{fontSize:"1.6rem",paddingRight:0}),Button:Object(a.a)({margin:"10px"},u.c.breakpoints.up("sm"),{display:"none"}),Popper:Object(a.a)({},u.c.breakpoints.up("sm"),{display:"none"})}),vt=function(){var e=gt(),t=Object(O.b)(),n=Object(c.useState)(""),a=Object(N.a)(n,2),o=a[0],i=a[1],s=Object(c.useState)(null),l=Object(N.a)(s,2),u=l[0],m=l[1],p=Object(d.c)((function(e){return e.movies.loading})),h=Object(f.f)(),g=Object(b.a)().t,v=function(e){i(e.target.value)},x=function(){var e=Object(C.a)(k.a.mark((function e(n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===n.key&&(console.log("Searching for: ".concat(o)),a={search:o},t(Object(ue.e)({filter:a})),h.push(encodeURI("/search/".concat(o))),i(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Boolean(u),y=w?"search-popover":void 0;return Object(r.jsxs)(jt.a,{children:[Object(r.jsxs)(I.a,{container:!0,alignItems:"center",justify:"flex-end",className:e.root,children:[Object(r.jsx)(mt.a,{className:e.Input,inputProps:{"aria-label":"search for a movie"},value:o,classes:{input:e.BaseInput},onChange:v,onKeyPress:x,placeholder:g("search"),disabled:p}),Object(r.jsx)(Ot.a,{className:e.Icon})]}),Object(r.jsx)(E.a,{"aria-describedby":y,className:e.Button,onClick:function(e){e.stopPropagation(),m(u?null:e.currentTarget)},variant:"outlined",children:Object(r.jsx)(Ot.a,{className:e.Icon})}),Object(r.jsx)(pt.a,{open:w,anchorEl:u,placement:"bottom-end",transition:!0,className:e.Popper,children:function(t){var n=t.TransitionProps;return Object(r.jsx)(ht.a,Object(j.a)(Object(j.a)({},n),{},{timeout:250,children:Object(r.jsx)(R.a,{children:Object(r.jsx)(F.a,{size:"small",className:e.Input,inputProps:{"aria-label":"search for a movie"},value:o,classes:{root:e.BaseInput},onChange:v,onKeyPress:x,placeholder:g("search")})})}))}})]})},xt=["en","ru"],wt=Object(i.a)({Button:Object(a.a)({},u.c.breakpoints.down("sm"),{fontSize:"0.7rem"})}),yt=function(){var e=wt(),t=Object(c.useState)(0),n=Object(N.a)(t,2),a=n[0],o=n[1],i=(a+1)%xt.length,s=Object(b.a)(),l=s.t,u=s.i18n;return Object(r.jsx)("div",{children:Object(r.jsx)(E.a,{onClick:function(){u.changeLanguage(xt[i]),o(i)},className:e.Button,children:"".concat(l("translate")," ").concat(l(xt[i]))})})},kt=n(300);function St(){var e=Object(S.a)(["Email"]);return St=function(){return e},e}function Ct(){var e=Object(S.a)(["Username"]);return Ct=function(){return e},e}function Nt(){var e=Object(S.a)(["Logout"]);return Nt=function(){return e},e}function It(){var e=Object(S.a)(["Update info"]);return It=function(){return e},e}var Lt=Object(i.a)({Type:{fontWeight:100,marginRight:10},Text:{fontWeight:300},marginAuto:{marginLeft:"auto",marginRight:10}}),Et=function(){var e=Lt(),t=Object(f.f)(),n=Object(O.b)(),a=Object(b.a)().t,c=o.a.useContext(z).onClose,i=Object(d.c)((function(e){return e.user})),s=i.username,l=i.email,u=i.imageBody||void 0;return Object(r.jsxs)(I.a,{container:!0,children:[Object(r.jsxs)(I.a,{item:!0,container:!0,wrap:"nowrap",alignItems:"center",children:[Object(r.jsx)(kt.a,{src:u,alt:s}),Object(r.jsx)(E.a,{onClick:function(){c(),t.push("/settings")},className:e.marginAuto,children:a(It())}),Object(r.jsx)(E.a,{onClick:function(){Object(g.e)(),n(Object(g.a)()),c()},children:a(Nt())})]}),Object(r.jsxs)(I.a,{item:!0,container:!0,alignItems:"center",children:[Object(r.jsx)(ie.a,{className:e.Type,children:a(Ct())}),Object(r.jsx)(ie.a,{className:e.Text,children:s})]}),Object(r.jsxs)(I.a,{item:!0,container:!0,alignItems:"center",children:[Object(r.jsx)(ie.a,{className:e.Type,children:a(St())}),Object(r.jsx)(ie.a,{className:e.Text,children:l})]})]})},Tt=n(145),Rt=Object(i.a)({root:{color:"#035263","&:hover>":{"& $_0":{animation:"$forward 1s infinite ease-in-out"},"& $_1":{animation:"$stretch1 1s infinite ease-out"},"& $_2":{animation:"$stretch2 0.9s infinite ease-out"},"& $_3":{animation:"$stretch1 1.1s infinite ease-out"},"& $_4":{animation:"$stretch1 0.8s infinite ease-out"}}},_0:{},_1:{},_2:{},_3:{},_4:{},"@keyframes stretch1":{"0%":{opacity:.8,transform:"translateX(0) scaleX(1)"},"10%":{opacity:1,transform:"translateX(-10px) scaleX(1)"},"70%":{opacity:.8},"80%":{opacity:.2,transform:"translateX(-80px) scaleX(1.5)"},"100%":{opacity:0}},"@keyframes forward":{"0%":{transform:"translateX(0)"},"10%":{transform:"translateX(10px) translateY(3px)"},"50%":{transform:"translateX(0px) translateY(-3px)"},"80%":{transform:"translateX(-7px) translateY(4px)"},"100%":{transform:"translateX(0px) translateY(0)"}},"@keyframes stretch2":{"0%":{opacity:.2,transform:"translateX(0) scaleX(1)"},"10%":{opacity:1,transform:"translateX(-15px) scaleX(1.2)"},"80%":{opacity:.6},"90%":{opacity:.2,transform:"translateX(-40px) scaleX(1.4)"},"100%":{opacity:0}}}),Pt=function(e){var t=e.width,n=void 0===t?70:t,a=e.height,c=void 0===a?50:a,o=Rt();return Object(r.jsxs)(Tt.a,{style:{width:n,height:c},className:o.root,viewBox:"-100 0 584 384",children:[Object(r.jsx)("path",{className:o._0,d:"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z"}),Object(r.jsx)("path",{className:o._1,d:"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z"}),Object(r.jsx)("path",{className:o._2,d:"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z"}),Object(r.jsx)("path",{className:o._3,d:"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z"}),Object(r.jsx)("path",{className:o._4,d:"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z"})]})},Mt=Object(i.a)({root:{},Avatar:{height:"1.5rem",width:"1.5rem"}}),zt=function(){var e=Mt(),t=Object(O.b)(),n=Object(d.c)((function(e){return e.user})),a=n.isAuth,c=n.imageBody,o={variant:"outlined"};return Object(r.jsxs)(I.a,{container:!0,alignItems:"center",className:e.root,children:[Object(r.jsx)(I.a,{item:!0,xs:2,children:Object(r.jsx)($.c,{onClick:function(){return t(Object(ue.f)())},to:"/",children:Object(r.jsx)(Pt,{})})}),Object(r.jsxs)(I.a,{container:!0,justify:"flex-end",alignItems:"center",wrap:"nowrap",item:!0,xs:8,children:[Object(r.jsx)(yt,{}),Object(r.jsx)(vt,{})]}),Object(r.jsx)(I.a,{container:!0,alignItems:"center",justify:"center",item:!0,xs:1}),Object(r.jsx)(I.a,{container:!0,alignItems:"center",justify:"center",item:!0,xs:1,children:a?Object(r.jsx)(W,{img:c||"",icon:Object(r.jsx)(ft.a,{"aria-label":"user-profile"}),buttonProps:o,children:Object(r.jsx)(Et,{})}):Object(r.jsx)(W,{icon:Object(r.jsx)(bt.a,{"aria-label":"user-profile"}),buttonProps:o,children:Object(r.jsx)(re,{})})})]})},Wt=Object(i.a)({h3:{fontSize:"1.6rem",textTransform:"uppercase",margin:"10px 0",fontWeight:900}}),Bt=function(e){var t=e.text,n=Wt();return Object(r.jsx)(ie.a,{variant:"h3",className:n.h3,children:t})};function At(){var e=Object(S.a)(["No info"]);return At=function(){return e},e}var Dt=Object(i.a)((function(e){return{root:{padding:"10px 0"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},HorizontalScroll:{overflowX:"auto"},Image:{height:"10rem",marginRight:10}}})),Ft=function(e){var t=e.src,n=e.name,a=e.type,c=Dt();switch(a){case"photo":return Object(r.jsx)("img",{src:t,alt:n,className:c.Image});case"video":return Object(r.jsx)("video",{controls:!0,src:t,className:c.Image});default:return null}},Ut=function(e){var t=e.sources,n=e.name,a=e.type,c=Dt(),o=Object(b.a)().t;return Object(r.jsxs)(I.a,{container:!0,direction:"column",className:c.root,children:[Object(r.jsx)(Bt,{text:o("".concat(a,"s"))}),Object(r.jsx)(I.a,{container:!0,wrap:"nowrap",className:c.HorizontalScroll,children:(null===t||void 0===t?void 0:t.length)?t.map((function(e,t){return Object(r.jsx)(Ft,{src:e,name:n,type:a},e+t)})):o(At())})]})},_t=Object(i.a)({root:{width:"100%",padding:10,marginBottom:5},h4:{fontWeight:700,fontSize:"1rem",marginBottom:10},Image:{marginRight:10,background:u.a.main},Text:{width:"100%",textAlign:"justify"}}),Vt=function(e){var t=e.username,n=e.text,a=e.avatar,c=_t();return Object(r.jsxs)(I.a,{container:!0,wrap:"nowrap",className:c.root,children:[Object(r.jsx)(kt.a,{src:a,alt:"".concat(t,"'s avatar"),className:c.Image,children:t.substr(0,2)}),Object(r.jsxs)(I.a,{children:[Object(r.jsx)(ie.a,{variant:"h4",className:c.h4,children:t}),Object(r.jsx)(ie.a,{variant:"body2",className:c.Text,children:n})]})]})};function Ht(){var e=Object(S.a)(["Send"]);return Ht=function(){return e},e}function $t(){var e=Object(S.a)(["Leave a comment!"]);return $t=function(){return e},e}var Xt=Object(i.a)({root:{margin:"1rem 0",minWidth:"30rem"},Form:{width:"100%"},margin:{marginBottom:10}}),qt=function(){var e=Xt(),t=Object(d.c)((function(e){return e.user})).userId,n=o.a.useState(""),a=Object(N.a)(n,2),c=a[0],i=a[1],s=Object(b.a)().t,l=Object(O.b)(),u=function(){var e=Object(C.a)(k.a.mark((function e(){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.length){e.next=2;break}return e.abrupt("return");case 2:return console.log(c),n=window.location.href.split("/").pop(),e.next=6,L.c.post("/comment",{userid:"".concat(t),movieid:n,text:c,time:(new Date).getTime()});case 6:(a=e.sent).data.status&&l(Object(ue.j)({id:n,comments:[a.data.data]})),i("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(I.a,{container:!0,direction:"column",className:e.root,children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u()},className:e.Form,children:[Object(r.jsx)(F.a,{fullWidth:!0,multiline:!0,name:"comment",type:"textarea",placeholder:s($t()),className:e.margin,size:"small",onChange:function(e){return i(e.currentTarget.value)},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&u()},value:c}),Object(r.jsx)(E.a,{type:"submit",className:e.margin,variant:"contained",children:s(Ht())})]})})};function Gt(){var e=Object(S.a)(["Comments"]);return Gt=function(){return e},e}function Yt(){var e=Object(S.a)(["No comments"]);return Yt=function(){return e},e}var Kt=function(e){var t,n,a=e.movie,o=Object(c.useRef)(null),i=Object(O.b)(),s=Object(b.a)().t,l=Object(c.useRef)(0),u=Object(d.c)((function(e){return e.user})).isAuth;if(Object(c.useEffect)((function(){var e;(null===a||void 0===a?void 0:a.info.maxComments)&&((!a.info.comments||a.info.comments&&a.info.comments.length<a.info.maxComments)&&i(Object(ue.c)({movieId:a.id,offset:null===(e=a.info.comments)||void 0===e?void 0:e.length},(function(e){return l.current+=e}))))}),[]),Object(c.useEffect)((function(){if(a&&a.info.maxComments){var e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return Object(m.debounce)((function(){e&&(window.pageYOffset+window.innerHeight>e.offsetTop+e.offsetHeight-r?t&&t():n&&n())}),a)}(o.current,(function(){var e,t,n;(null===(e=a.info.comments)||void 0===e?void 0:e.length)&&(null===(t=a.info.comments)||void 0===t?void 0:t.length)<a.info.maxComments&&i(Object(ue.c)({movieId:a.id,limit:5,offset:(null===(n=a.info.comments)||void 0===n?void 0:n.length)||0}))}));return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}}),[a,null===(t=a.info.comments)||void 0===t?void 0:t.length,a.info.maxComments,a.id,i]),!a)return null;console.log("[Comments]",a.info.comments);var f=(null===(n=a.info.comments)||void 0===n?void 0:n.length)?a.info.comments.map((function(e){return Object(c.createElement)(Vt,Object(j.a)(Object(j.a)({},e),{},{key:e.commentid}))})):Object(r.jsx)(ie.a,{variant:"body1",style:{fontSize:"1.3rem"},children:s(Yt())});return Object(r.jsxs)(I.a,{ref:o,style:{marginTop:10},container:!0,direction:"column",children:[Object(r.jsx)(Bt,{text:s(Gt())}),u&&Object(r.jsx)(qt,{}),f]})},Zt=n(141),Jt=n.n(Zt),Qt=n(96),en=n.n(Qt),tn=n(278),nn=n(6),an=n(301),rn=n(265),cn=n(143),on=n(287),sn=n(279),ln=n(280),un=n(281),dn=n(282),fn=n(283),bn=n(284),jn=n(285),mn=n(286),pn=n(288),hn=Object(i.a)({controlsWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(0,0,0,0.6)",display:"flex",flexDirection:"column",justifyContent:"space-between",zIndex:1},controlIcons:{color:"#777",fontSize:50,transform:"scale(0.9)","&:hover":{color:"white",transform:"scale(1)"}},bottomIcons:{color:"#999","&:hover":{color:"white"}},volumeSlider:{width:100},Subtitles:{fontSize:"1.5rem"}}),On=function(e){var t=e.children,n=e.open,a=e.value;return Object(r.jsx)(tn.a,{open:n,enterTouchDelay:0,placement:"top",title:a,children:t})},gn=Object(nn.a)({root:{height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(an.a),vn=Object(c.forwardRef)((function(e,t){var n,a=hn(),o=Object(c.useState)(null),i=Object(N.a)(o,2),s=i[0],l=i[1],u=Object(c.useState)(null),d=Object(N.a)(u,2),f=d[0],b=d[1],m=function(){b(null)},p=Boolean(s),h=p?"playbackrate-popover":void 0;return Object(r.jsxs)("div",{className:a.controlsWrapper,ref:t,children:[Object(r.jsx)(I.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",style:{padding:16},children:Object(r.jsx)(I.a,{item:!0,children:Object(r.jsx)(ie.a,{variant:"h5",style:{color:"white"},children:e.title})})}),Object(r.jsx)(I.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:e.loading?Object(r.jsx)(G.a,{color:"primary"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(rn.a,{onClick:e.onRewind,className:a.controlIcons,"aria-label":"reqind",children:Object(r.jsx)(sn.a,{fontSize:"inherit"})}),Object(r.jsx)(rn.a,{onClick:e.onPlayPause,className:a.controlIcons,"aria-label":"reqind",children:e.playing?Object(r.jsx)(ln.a,{fontSize:"inherit"}):Object(r.jsx)(un.a,{fontSize:"inherit"})}),Object(r.jsx)(rn.a,{onClick:e.onFastForward,className:a.controlIcons,"aria-label":"reqind",children:Object(r.jsx)(dn.a,{fontSize:"inherit"})})]})}),Object(r.jsxs)(I.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",style:{padding:16},children:[Object(r.jsx)(I.a,{item:!0,xs:12,children:Object(r.jsx)(gn,{min:0,max:100,ValueLabelComponent:function(t){return Object(r.jsx)(On,Object(j.a)(Object(j.a)({},t),{},{value:e.elapsedTime}))},value:100*e.played,onChange:function(t,n){return e.onSeek(n)},onMouseDown:e.onSeekMouseDown,onChangeCommitted:e.onSeekMouseUp})}),Object(r.jsx)(I.a,{item:!0,children:Object(r.jsxs)(I.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(r.jsx)(rn.a,{disabled:e.loading,onClick:e.onPlayPause,className:a.bottomIcons,children:e.playing?Object(r.jsx)(ln.a,{fontSize:"large"}):Object(r.jsx)(un.a,{fontSize:"large"})}),Object(r.jsx)(rn.a,{onClick:e.onMuted,className:a.bottomIcons,children:e.muted?Object(r.jsx)(fn.a,{fontSize:"large"}):Object(r.jsx)(bn.a,{fontSize:"large"})}),Object(r.jsx)(an.a,{min:0,max:100,value:100*e.volume,className:a.volumeSlider,onChange:e.onVolumeChange,onChangeCommitted:e.onVolumeSeekUp}),Object(r.jsx)(E.a,{onClick:e.onChangeDisplayFormat,variant:"text",style:{color:"#fff",marginLeft:16},children:Object(r.jsxs)(ie.a,{children:[e.elapsedTime,"/",e.totalDuration]})})]})}),Object(r.jsxs)(I.a,{item:!0,children:[Object(r.jsx)(E.a,{onClick:function(e){l(e.currentTarget)},variant:"text",className:a.bottomIcons,children:Object(r.jsxs)(ie.a,{children:[e.playbackRate,"X"]})}),Object(r.jsx)(T.a,{id:h,open:p,anchorEl:s,onClose:function(){l(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:Object(r.jsx)(I.a,{container:!0,direction:"column-reverse",children:[.5,1,1.5,2].map((function(t){return Object(r.jsx)(E.a,{onClick:function(){return e.onPlaybackRateChange(t)},variant:"text",children:Object(r.jsx)(ie.a,{color:t===e.playbackRate?"secondary":void 0,children:t})},t)}))})}),Object(r.jsx)(rn.a,{onClick:e.onChangeSubtitles,className:a.bottomIcons,children:Object(r.jsx)(jn.a,{style:{color:e.showSubtitles?"#999":"#99999955"},fontSize:"large"})}),Object(r.jsx)(rn.a,{onClick:function(e){b(e.currentTarget)},className:a.bottomIcons,children:Object(r.jsx)(mn.a,{"aria-label":"player-settings"})}),Object(r.jsx)(cn.a,{id:"subtitle-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:m,children:null===(n=e.tracks)||void 0===n?void 0:n.map((function(t,n){return Object(r.jsx)(on.a,{className:a.Subtitles,onClick:function(){return function(t){e.onSwitchSubtitles(t),m()}(n)},children:t.label},t.label)}))}),Object(r.jsx)(rn.a,{onClick:e.onToggleFullScreen,className:a.bottomIcons,children:Object(r.jsx)(pn.a,{fontSize:"large"})})]})]})]})}));function xn(){var e=Object(S.a)(["Cannot load movie"]);return xn=function(){return e},e}function wn(){var e=Object(S.a)(["movieError"]);return wn=function(){return e},e}var yn=Object(i.a)({playerWrapper:{position:"relative",width:"100%",minWidth:610},Error:{width:"100%",height:"100%",padding:10,display:"flex",alignItems:"center",justifyContent:"center",background:"#ddd",borderRadius:5}}),kn=function(e){if(isNaN(e))return"00:00";var t=new Date(1e3*e),n=t.getUTCHours(),a=t.getUTCMinutes(),r=t.getUTCSeconds().toString().padStart(2,"0");return n?"".concat(n,":").concat(a.toString().padStart(2,"0"),":").concat(r):"".concat(a,":").concat(r)};var Sn=function(e){var t=e.title,n=e.id,a=e.tracksProps,i=yn(),s=Object(c.useState)({playing:!1,muted:!1,volume:1,playbackRate:1,played:0,seeking:!1,controlsVisible:!0,error:!1,showSubtitles:!0,loading:!1}),l=Object(N.a)(s,2),u=l[0],d=l[1],f=Object(c.useState)(0),m=Object(N.a)(f,2),h=m[0],O=m[1],g=o.a.useState(),v=Object(N.a)(g,2),x=v[0],y=v[1],k=Object(c.useState)("normal"),S=Object(N.a)(k,2),C=S[0],I=S[1],L=u.playing,E=u.muted,T=u.volume,R=u.playbackRate,P=u.played,M=u.seeking,z=u.controlsVisible,W=u.error,B=u.showSubtitles,A=u.loading,D=Object(c.useRef)(null),F=Object(c.useRef)(null),U=Object(c.useRef)(null),_=Object(c.useRef)(),V="/api/storage/load/".concat(n,"/video"),H=w().toast,$=Object(b.a)().t;Object(c.useEffect)((function(){var e=p();if(console.log(e),null===e||void 0===e?void 0:e.time){var t=parseFloat(e.time);d((function(e){return Object(j.a)(Object(j.a)({},e),{},{played:t})}))}}),[]),Object(c.useEffect)((function(){if(D&&D.current){console.log("[Player] <save internal player> useEffect");var e=D.current.getInternalPlayer();y(e),console.log("[Player] <save internal player> player",e)}}),[D]),Object(c.useEffect)((function(){if(x){console.log("[Player] <add listners> useEffect");var e=x.addEventListener("play",(function(){console.log("play")})),t=x.addEventListener("emptied",(function(){console.log("emptied")})),n=x.addEventListener("durationchange",(function(){console.log("durationchange")})),a=x.addEventListener("ended",(function(){console.log("ended")})),r=x.addEventListener("stalled",(function(){console.log("stalled")})),c=x.addEventListener("suspend",(function(){console.log("suspend")})),o=x.addEventListener("waiting",(function(){console.log("waiting")}));return function(){x.removeEventListener("play",e),x.removeEventListener("emptied",t),x.removeEventListener("ended",a),x.removeEventListener("durationchange",n),x.removeEventListener("stalled",r),x.removeEventListener("suspend",c),x.removeEventListener("waiting",o)}}}),[x]);var X=function(){console.log("onBufferEnd"),d(Object(j.a)(Object(j.a)({},u),{},{loading:!1}))},q=D&&D.current?D.current.getCurrentTime():0,G=D&&D.current?D.current.getDuration():0,Y="normal"===C?kn(q):"-".concat(kn(G-q)),K=kn(G),Z=a?{file:{tracks:Object(je.a)(a)}}:{};return console.log("[Player] tracks, config",a,Z),W?Object(r.jsx)("div",{className:i.Error,children:$(xn())}):Object(r.jsxs)("div",{ref:F,className:i.playerWrapper,onMouseMove:function(){U&&U.current&&(U.current.style.visibility="visible",_.current&&clearTimeout(_.current))},children:[Object(r.jsx)(Jt.a,{ref:D,width:"100%",height:"100%",url:V,muted:E,playing:L,volume:T,controls:!1,playbackRate:R,onProgress:function(e){var t=e.played;console.log("handleProgress",t),d(Object(j.a)(Object(j.a)({},u),{},{loading:!1})),U&&U.current&&(_.current=setTimeout((function(){U&&U.current&&(U.current.style.visibility="hidden")}),1e3),u.seeking||d(Object(j.a)(Object(j.a)({},u),{},{played:t})))},onError:function(e){console.log("handleError",e),H({text:$(wn())},"error",{autoHideDuration:7e3})},onBuffer:function(){console.log("onBuffer"),d(Object(j.a)(Object(j.a)({},u),{},{loading:!0}))},onBufferEnd:X,onReady:X,config:Z}),z&&Object(r.jsx)(vn,{ref:U,onPlayPause:function(){d(Object(j.a)(Object(j.a)({},u),{},{playing:!u.playing}))},onMuted:function(){d(Object(j.a)(Object(j.a)({},u),{},{muted:!u.muted}))},playing:L,muted:E,volume:T,played:P,seeking:M,loading:A,showSubtitles:B,onRewind:function(){null!==D&&null!==D.current&&D.current.seekTo(D.current.getCurrentTime()-10)},onFastForward:function(){null!==D&&null!==D.current&&D.current.seekTo(D.current.getCurrentTime()+10)},onVolumeChange:function(e,t){var n="number"===typeof t?t:t[0];d(Object(j.a)(Object(j.a)({},u),{},{volume:n/100,muted:0===n}))},onVolumeSeekUp:function(e,t){var n="number"===typeof t?t:t[0];d(Object(j.a)(Object(j.a)({},u),{},{volume:n/100,muted:0===n}))},playbackRate:R,onPlaybackRateChange:function(e){d(Object(j.a)(Object(j.a)({},u),{},{playbackRate:e}))},onToggleFullScreen:function(){F&&F.current&&en.a&&en.a.isEnabled&&null!==F&&en.a.toggle(F.current)},onSeek:function(e){if(D&&D.current){var t="number"===typeof e?e/100:e[0]/100;t!==u.played&&(d(Object(j.a)(Object(j.a)({},u),{},{played:t})),D.current.seekTo(t,"fraction"))}},onSeekMouseDown:function(){d(Object(j.a)(Object(j.a)({},u),{},{seeking:!0}))},onSeekMouseUp:function(){d(Object(j.a)(Object(j.a)({},u),{},{seeking:!1}))},elapsedTime:Y,totalDuration:K,onChangeSubtitles:function(){if(null!==D&&null!==D.current){if(!x){var e=D.current.getInternalPlayer();y((function(){return e}))}console.log("[Player] <handleChangeSubtitles> player",x);var t=null===x||void 0===x?void 0:x.textTracks;if(console.log("[Player] <handleChangeSubtitles> tracks",t),t&&t.length){var n="showing"===t[h].mode;console.log("[Player] <handleChangeSubtitles> track, showing, showSubtitles",h,n,B),t[h].mode=n?"disabled":"showing",d(Object(j.a)(Object(j.a)({},u),{},{showSubtitles:!n}))}}},onSwitchSubtitles:function(e){O(e)},onChangeDisplayFormat:function(){I("normal"===C?"remaining":"normal")},title:t,tracks:a})]})};function Cn(){var e=Object(S.a)(["loadingTimeoutWarning"]);return Cn=function(){return e},e}var Nn={activePeers:0,loadedPercent:0},In=function(e){var t=e.movieId,n=Object(c.useState)(Nn),a=Object(N.a)(n,2),o=a[0],i=a[1],s=w().toast,l=Object(b.a)().t;return Object(c.useEffect)((function(){if(t){var e=setTimeout((function(){o.activePeers||s({text:l(Cn())},"warning",{autoHideDuration:7e3})}),3e4),n=setInterval(Object(C.a)(k.a.mark((function n(){var a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ue.b)("".concat(t));case 2:(a=n.sent)&&i(a),((null===a||void 0===a?void 0:a.activePeers)||100===(null===a||void 0===a?void 0:a.loadedPercent))&&clearTimeout(e);case 5:case"end":return n.stop()}}),n)}))),1e4);return function(){clearInterval(n),clearTimeout(e)}}}),[]),Object(r.jsxs)(I.a,{container:!0,children:[Object(r.jsxs)(ie.a,{style:{marginRight:5},children:["Active peers: ",o.activePeers]}),Object(r.jsxs)(ie.a,{children:["Percent loaded: ",o.loadedPercent,"%"]})]})},Ln=n(42),En=n.n(Ln);function Tn(){var e=Object(S.a)(["No info"]);return Tn=function(){return e},e}function Rn(){var e=Object(S.a)(["About movie"]);return Rn=function(){return e},e}function Pn(){var e=Object(S.a)(["Actors"]);return Pn=function(){return e},e}function Mn(){var e=Object(S.a)(["Directed"]);return Mn=function(){return e},e}function zn(){var e=Object(S.a)(["PG rating"]);return zn=function(){return e},e}function Wn(){var e=Object(S.a)(["Views"]);return Wn=function(){return e},e}function Bn(){var e=Object(S.a)(["unknown"]);return Bn=function(){return e},e}function An(){var e=Object(S.a)(["Length"]);return An=function(){return e},e}function Dn(){var e=Object(S.a)(["Genres"]);return Dn=function(){return e},e}function Fn(){var e=Object(S.a)(["Year"]);return Fn=function(){return e},e}function Un(){var e=Object(S.a)(["AuthOnly"]);return Un=function(){return e},e}var _n=Object(i.a)({root:{fontSize:"1.3rem",padding:"10px 0"},Header:{fontSize:"2rem",margin:"0 10px",fontWeight:700},Divider:{margin:"10px 0"},Poster:{height:"23rem",marginRight:10},MainInfoText:{margin:5,width:"100%",display:"flex",alignItems:"flex-end",fontSize:"inherit",fontWeight:200},Link:{marginLeft:5,fontSize:"inherit",color:"inherit",fontWeight:"inherit",textTransform:"capitalize","&:hover":{color:u.a.light}},Description:{marginTop:10,fontSize:"inherit"},Video:{margin:"15px 0"},AdditionalInfo:{margin:"10px 0"}}),Vn=function(e){var t=e.match,n=_n(),a=Object(O.b)(),i=Object(b.a)(),s=i.t,l=i.i18n,u=Object(f.f)(),j=w().toast,m=Object(c.useState)([]),p=Object(N.a)(m,2),h=p[0],g=p[1],v=Object(c.useState)(!1),x=Object(N.a)(v,2),y=x[0],S=x[1],L=Object(d.c)((function(e){return e.user})).isAuth,E=Object(d.c)((function(e){return e.movies})),T=E.movies,R=E.error,P=T.find((function(e){return e.en.id===t.params.id})),M=o.a.useRef(null);console.log("[MovieFullInfo] movie"),Object(c.useEffect)((function(){a(Object(ue.k)(t.params.id))}),[]),Object(c.useEffect)((function(){P||a(Object(ue.d)(t.params.id))}),[]),Object(c.useEffect)((function(){R&&(u.push("/"),j({text:s(R)},"error"),a(Object(ue.g)()))}),[R,a,u,s,j,l.language]),Object(c.useEffect)((function(){M&&M.current&&M.current.scrollIntoView(!0)}),[]),Object(c.useEffect)((function(){console.log("[Player] <load subtitles> useEffect"),function(){var e=Object(C.a)(k.a.mark((function e(){var t,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return t=P.en.id,e.prev=3,e.next=6,En()("/api/loader/subtitles/".concat(t));case 6:if(n=e.sent,console.log(n.data),n.data.data.length){e.next=10;break}return e.abrupt("return");case 10:a=n.data.data.map((function(e,n){return{kind:"subtitles",src:"/api/storage/load/".concat(t,"/subtitles/").concat(e.id),srcLang:"unknown"===e.language?n?"lng".concat(n):"en":e.language,label:n?"lng".concat(n):"en",default:!n}})),g((function(e){return Object(je.a)(a)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:return e.prev=17,S(!0),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(){return e.apply(this,arguments)}}()()}),[P]);var z,W,B=function(e,t){return e&&e.length?e.map((function(e){return"string"===typeof e?e:e.name})).join(", "):t||s("No info")};return L?P?Object(r.jsxs)(I.a,{container:!0,direction:"column",className:n.root,children:[Object(r.jsx)(ie.a,{variant:"h2",className:n.Header,ref:M,children:P[l.language].title}),Object(r.jsx)(pe.a,{className:n.Divider}),Object(r.jsxs)(I.a,{container:!0,wrap:"nowrap",children:[Object(r.jsx)("img",{className:n.Poster,src:P.en.img,alt:"".concat(P.en.title," poster")}),Object(r.jsxs)(I.a,{item:!0,container:!0,direction:"column",children:[Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(Fn()),": ",P.en.info.year]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(Dn()),": ",(z=P.en.info.genres,z&&z.length?z.map((function(e){var t="string"===typeof e?e:e.name;return Object(r.jsx)($.b,{to:"/genres/".concat(t),className:n.Link,children:s(t)},t)})):W||s("No info"))]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(An()),":"," ",P.en.info.length>0?"".concat(P.en.info.length).concat(s("min")):s(Bn())]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(Wn()),": ",P.en.info.views]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(zn()),": ",P.en.info.pgRating]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(Mn()),":"," ",B(P.en.info.directorList,P.en.info.directors)]}),Object(r.jsxs)(I.a,{container:!0,className:n.MainInfoText,children:[s(Pn()),": ",B(P.en.info.cast,P.en.info.stars)]})]})]}),Object(r.jsxs)(I.a,{container:!0,className:n.Video,children:[Object(r.jsx)(In,{movieId:P.en.id}),y?Object(r.jsx)(Sn,{id:P.en.id,tracksProps:h,title:P[l.language].title}):null]}),Object(r.jsxs)(I.a,{container:!0,direction:"column",className:n.AdditionalInfo,children:[Object(r.jsx)(Bt,{text:s(Rn())}),Object(r.jsx)(ie.a,{variant:"body1",className:n.Description,children:P[l.language].info.description||s(Tn())}),Object(r.jsx)(pe.a,{className:n.Divider}),P.en.info.photos&&Object(r.jsx)(Ut,{sources:P.en.info.photos,name:P.en.title,type:"photo"}),P.en.info.videos&&Object(r.jsx)(Ut,{sources:P.en.info.videos,name:P.en.title,type:"video"}),Object(r.jsx)(Kt,{movie:P.en})]})]}):null:Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:n.root,children:Object(r.jsx)(ie.a,{className:n.Description,children:s(Un())})})},Hn=n(289),$n=n(142),Xn=n.n($n),qn=Object(i.a)((function(e){return{root:Object(a.a)({},e.breakpoints.up("sm"),{minWidth:"344px !important"}),card:{display:"flex",width:"100%"},default:{backgroundColor:e.palette.grey[800]},prompt:{backgroundColor:e.palette.grey[800],width:550},info:{backgroundColor:e.palette.info.main},success:{backgroundColor:e.palette.success.main},warning:{backgroundColor:e.palette.warning.dark},error:{backgroundColor:e.palette.error.main},header:{display:"block",fontWeight:"bold",color:e.palette.common.white},actionRoot:{padding:"8px 8px 8px 26px"},close:{marginLeft:"auto !important",color:e.palette.common.white},text:{fontSize:"1rem",color:e.palette.common.white}}})),Gn=o.a.forwardRef((function(e,t){var n=e.id,a=qn(),c=Object(l.b)().closeSnackbar,o=Object(d.c)((function(e){return e.snack.notifications})).find((function(e){return e.key===n})),i=Object(j.a)({},o),s=i.text,u=i.variant,f=i.header;return Object(r.jsx)(R.a,{ref:t,className:a.root,children:Object(r.jsxs)(me.a,{className:H()(a.card,a[u]),children:[Object(r.jsxs)(Hn.a,{classes:{root:a.actionRoot},children:[f&&Object(r.jsxs)(ie.a,{variant:"subtitle2",className:a.header,children:[f,":"]}),s&&Object(r.jsx)(ie.a,{variant:"body1",className:a.text,children:s})]}),Object(r.jsx)(rn.a,{className:a.close,onClick:function(){c(n)},children:Object(r.jsx)(Xn.a,{color:"inherit"})})]})})})),Yn=[],Kn=function(){var e=Object(O.b)(),t=Object(d.c)((function(e){return e.snack.notifications})),n=Object(l.b)(),a=n.enqueueSnackbar,r=n.closeSnackbar;return Object(c.useEffect)((function(){t.forEach((function(t){var n,c=t.key,o=t.text,i=t.options,s=void 0===i?{}:i,l=t.dismissed;void 0!==l&&l?r(c):Yn.includes(c)||(a(o,Object(j.a)(Object(j.a)({key:c},s),{},{onClose:function(e,t,n){s.onClose&&s.onClose(e,t,n)},onExited:function(t,n){var a;e(Object(v.c)({key:n})),a=n,Yn=Yn.filter((function(e){return a!==e}))}})),n=c,Yn=[].concat(Object(je.a)(Yn),[n]))}))}),[t,a,e,r]),null};function Zn(){var e=Object(S.a)(["Restore password"]);return Zn=function(){return e},e}function Jn(){var e=Object(S.a)(["Server error"]);return Jn=function(){return e},e}function Qn(){var e=Object(S.a)(["Server error"]);return Qn=function(){return e},e}function ea(){var e=Object(S.a)(["Check your email"]);return ea=function(){return e},e}var ta=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),na=function(){var e=ta(),t=Object(c.useState)({email:""}),n=Object(N.a)(t,2),o=n[0],i=n[1],s=Object(c.useState)({email:!1}),l=Object(N.a)(s,2),u=l[0],d=l[1],f=Object(b.a)(),m=f.t,p=f.i18n,h=u.email,O=w().toast,g=Object(c.useCallback)((function(e){e.stopPropagation(),i(Object(j.a)(Object(j.a)({},o),{},Object(a.a)({},e.target.name,e.target.value)))}),[o]),v=Object(c.useCallback)(function(){var e=Object(C.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[ForgotPassword] handleSubmit",o),e.prev=2,e.next=5,L.d.post("repair",{email:o.email});case 5:n=e.sent,console.log(n),n.status<400?O({text:m(ea())}):(console.log(n.data[p.language]),O({text:n.data[p.language]||m(Qn())},"error")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),O(m(Jn()),"error");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[o,O,m,p.language]),x=Object(c.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:m("Email"),placeholder:m("Enter email"),value:o.email,onChange:g,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{email:e})}))},rules:{helperText:m("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],buttons:[{type:"submit",variant:"contained",onClick:v,text:m(Zn()),disabled:!h},{to:"/login",variant:"outlined",text:m("Login")},{to:"/register",variant:"outlined",text:m("Register")}]}}),[o.email,g,v,h,m]);return Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(r.jsx)(q,Object(j.a)({},x))})};function aa(){var e=Object(S.a)(["Save new password"]);return aa=function(){return e},e}function ra(){var e=Object(S.a)(["confirmError"]);return ra=function(){return e},e}function ca(){var e=Object(S.a)(["Confirm password"]);return ca=function(){return e},e}function oa(){var e=Object(S.a)(["Confirm"]);return oa=function(){return e},e}function ia(){var e=Object(S.a)(["passwordError"]);return ia=function(){return e},e}function sa(){var e=Object(S.a)(["Enter password"]);return sa=function(){return e},e}function la(){var e=Object(S.a)(["New password"]);return la=function(){return e},e}function ua(){var e=Object(S.a)(["Server error"]);return ua=function(){return e},e}function da(){var e=Object(S.a)(["Server error"]);return da=function(){return e},e}function fa(){var e=Object(S.a)(["Password changed"]);return fa=function(){return e},e}function ba(){var e=Object(S.a)(["ServerErrorTry"]);return ba=function(){return e},e}var ja=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),ma=function(){var e=ja(),t=Object(c.useState)({password:"",confirm:""}),n=Object(N.a)(t,2),o=n[0],i=n[1],s=Object(c.useState)({password:!1,confirm:!1}),l=Object(N.a)(s,2),u=l[0],d=l[1],m=Object(b.a)(),h=m.t,O=m.i18n,g=u.password&&u.confirm,v=w().toast,x=Object(f.f)(),y=Object(c.useMemo)((function(){var e=function(e){e.stopPropagation(),i(Object(j.a)(Object(j.a)({},o),{},Object(a.a)({},e.target.name,e.target.value)))},t=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("[ForgotPassword] handleSubmit",o),null===(n=p())||void 0===n?void 0:n.repairToken){e.next=7;break}return v({text:h(ba())},"error"),x.push("/forgot_password"),e.abrupt("return");case 7:return e.prev=7,a=n.repairToken.replaceAll("%3D","="),e.next=11,L.d.patch("/repair/patch",{passwd:o.password},{headers:{repairToken:a}});case 11:r=e.sent,console.log(r),r.status<400?(v({text:h(fa())}),x.push("/login")):v({text:null!==(c=r.data[O.language])&&void 0!==c?c:h(da())},"error"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),v(h(ua()),"error");case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}();return{inputs:[{name:"password",type:"password",label:h(la()),placeholder:h(sa()),value:o.password,onChange:e,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{password:e})}))},rules:{helperText:h(ia()),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}},{name:"confirm",type:"password",label:h(oa()),placeholder:h(ca()),value:o.confirm,onChange:e,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(j.a)(Object(j.a)({},t),{},{confirm:e})}))},rules:{helperText:h(ra()),rule:{minLength:6,maxLength:25,regex:new RegExp("^".concat(o.password,"$"))}}}],buttons:[{type:"submit",variant:"contained",onClick:t,text:h(aa()),disabled:!g}]}}),[o,g,h,O.language,v,x]);return Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(r.jsx)(q,Object(j.a)({},y))})};function pa(){var e=Object(S.a)(["Save new email"]);return pa=function(){return e},e}function ha(){var e=Object(S.a)(["Server error"]);return ha=function(){return e},e}function Oa(){var e=Object(S.a)(["Server error"]);return Oa=function(){return e},e}function ga(){var e=Object(S.a)(["Check your email"]);return ga=function(){return e},e}var va=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),xa=function(){var e=va(),t=Object(c.useState)({email:""}),n=Object(N.a)(t,2),o=n[0],i=n[1],s=Object(c.useState)({email:!1}),l=Object(N.a)(s,2),u=l[0],d=l[1],f=Object(b.a)(),m=f.t,p=f.i18n,h=u.email,O=w().toast,g=Object(c.useCallback)((function(e){e.stopPropagation(),i(Object(j.a)(Object(j.a)({},o),{},Object(a.a)({},e.target.name,e.target.value)))}),[o]),v=Object(c.useCallback)(function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[ChangeEmail] handleSubmit",o),e.prev=2,e.next=5,L.b.post("patch",{body:{email:o.email}});case 5:n=e.sent,console.log(n),n.status<400?O(m(ga())):(console.log(n.data[p.language]),r={text:null!==(a=n.data[p.language])&&void 0!==a?a:m(Oa())},O(r,"error")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),O(m(ha()),"error");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[o,m,p.language,O]),x=Object(c.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:m("Email"),placeholder:m("Enter email"),value:o.email,onChange:g,size:"small",fullWidth:!0,required:!0,onValidate:function(e){d((function(t){return Object(j.a)(Object(j.a)({},t),{},{email:e})}))},rules:{helperText:m("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],buttons:[{type:"submit",variant:"contained",onClick:v,text:m(pa()),disabled:!h}]}}),[o.email,h,g,v,m]);return Object(r.jsx)(I.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(r.jsx)(q,Object(j.a)({},x))})},wa=n.p+"static/media/defaultAvatar.41c95564.png",ya=n(290);function ka(){var e=Object(S.a)(["Back"]);return ka=function(){return e},e}function Sa(){var e=Object(S.a)(["User info updated"]);return Sa=function(){return e},e}function Ca(){var e=Object(S.a)(["Update error"]);return Ca=function(){return e},e}function Na(){var e=Object(S.a)(["User info updated"]);return Na=function(){return e},e}function Ia(){var e=Object(S.a)(["Update error"]);return Ia=function(){return e},e}function La(){var e=Object(S.a)(["Check your email"]);return La=function(){return e},e}function Ea(){var e=Object(S.a)(["Update error"]);return Ea=function(){return e},e}function Ta(){var e=Object(S.a)(["Avatar uploaded"]);return Ta=function(){return e},e}function Ra(){var e=Object(S.a)(["Avatar upload error"]);return Ra=function(){return e},e}var Pa=Object(i.a)({root:{padding:"2rem 1rem",minWidth:"30rem"},avatarWrapper:{position:"relative","&:hover":{cursor:"pointer","& $uploadIcon":{opacity:.7},"& $avatarImage":{opacity:.5}}},avatarImage:{width:"100px",height:"100px",border:"2px solid rgba(3, 82, 99, 0.5)",opacity:1,transition:"0.2s"},inputNone:{display:"none"},uploadIcon:{position:"absolute",transition:"0.2s",top:20,left:20,width:60,height:60,opacity:0,zIndex:2}}),Ma=function(){var e=Object(d.c)((function(e){return e.user})),t=Object(c.useState)({email:e.email,username:e.username,newPassword:"",currentPassword:"",confirm:"",avatarImage:e.imageBody}),n=Object(N.a)(t,2),o=n[0],i=n[1],s=Object(c.useState)({email:!0,newPassword:!0,currentPassword:!0,confirm:!0,username:!0}),l=Object(N.a)(s,2),u=l[0],m=l[1],p=Pa(),h=Object(b.a)(),v=h.t,x=h.i18n,y=Object(c.useRef)(null),S=w().toast,E=Object(O.b)(),T=Object(f.f)(),R=function(){var e=u.email,t=u.username,n=u.currentPassword,a=u.confirm;return o.newPassword?n&&a&&(e||t):e||t}(),P=Object(c.useMemo)((function(){var t=function(e){e.preventDefault(),i((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(a.a)({},e.target.name,e.target.value))}))},n=function(){var t=Object(C.a)(k.a.mark((function t(){var n,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={email:o.email},t.next=3,L.b.patch("patch",n,{headers:{accessToken:Object(g.d)()}});case 3:a=t.sent,console.log(a.data),a.status>=400?S({text:a.data[x.language]||v(Ea())},"error"):(E(Object(g.g)({user:Object(j.a)(Object(j.a)({},e),{},{email:o.email})})),S({text:v(La())}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(C.a)(k.a.mark((function t(){var n,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:o.username},t.next=3,L.e.patch("patch",n,{headers:{accessToken:Object(g.d)()}});case 3:a=t.sent,console.log(a.data),a.status>=400?S({text:a.data[x.language]||v(Ia())},"error"):(E(Object(g.g)({user:Object(j.a)(Object(j.a)({},e),{},{username:o.username})})),S({text:v(Na())}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={passwd:o.currentPassword,newPasswd:o.newPassword},e.next=3,L.d.patch("patch",t,{headers:{accessToken:Object(g.d)()}});case 3:n=e.sent,console.log(n.data),n.status>=400?S({text:n.data[x.language]||v(Ca())},"error"):(S({text:v(Sa())}),i(Object(j.a)(Object(j.a)({},o),{},{currentPassword:"",confirm:"",newPassword:""})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var t=Object(C.a)(k.a.mark((function t(a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),o.email!==e.email&&n(),o.username!==e.username&&r(),o.newPassword&&c(),console.log("[Settings] handleSubmit",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{inputs:[{name:"email",type:"email",label:v("Email"),placeholder:v("Enter email"),value:o.email,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("emailError"),rule:{minLength:0,maxLength:40,regex:/^(([\w%+-.]+)@([\w-]+\.)+([\w]{2,}))?$/i}}},{name:"username",type:"text",label:v("Username"),placeholder:v("Enter username"),value:o.username,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("usernameError"),rule:{minLength:0,maxLength:20,regex:/^([\w-+.]+)?$/}}},{name:"newPassword",type:"password",label:v("New password"),placeholder:v("Enter new password"),value:o.newPassword,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("passwordError"),rule:{minLength:0,maxLength:25,regex:/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/}}},{name:"confirm",type:"password",label:v("Confirm"),placeholder:v("Confirm password"),value:o.confirm,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{confirm:e})}))},rules:{helperText:v("confirmError"),rule:{minLength:0,maxLength:25,regex:new RegExp("^".concat(o.newPassword,"$"))}}},{name:"currentPassword",type:"password",label:v("Current password"),placeholder:v("Enter current password"),value:o.currentPassword,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(j.a)(Object(j.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("currentPasswordError"),rule:{minLength:o.newPassword.length?1:0,maxLength:25}}}],buttons:[{type:"submit",variant:"contained",onClick:s,text:v("Save"),disabled:!R},{variant:"outlined",onClick:function(){return T.goBack()},text:v(ka())}]}}),[o,R,v,E,x.language,S,e,T]);return Object(r.jsxs)(I.a,{container:!0,direction:"column",alignItems:"center",className:p.root,children:[Object(r.jsx)(ie.a,{children:v("Settings").toUpperCase()}),Object(r.jsxs)("div",{className:p.avatarWrapper,onClick:function(){y&&y.current&&y.current.click()},children:[Object(r.jsx)(kt.a,{className:p.avatarImage,alt:"profile image",src:o.avatarImage||wa}),Object(r.jsx)(ya.a,{className:p.uploadIcon}),Object(r.jsx)("input",{className:p.inputNone,type:"file",accept:"image/png, image/jpeg, image/jpg",ref:y,onChange:function(t){if(t.target.files){var n=t.target.files[0];if(!function(e){return"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type}(n))return t.target.value="",S({text:"Please add image only!"});if(n.size>2e6)return t.target.value="",S({text:"Please upload picture size less then 2 mb!"});var a=new FileReader;a.onload=function(){var t=Object(C.a)(k.a.mark((function t(n){var a,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.target&&n.target.result){t.next=2;break}return t.abrupt("return");case 2:return a=n.target.result.toString(),i(Object(j.a)(Object(j.a)({},o),{},{avatarImage:a})),r={imageBody:a},t.next=7,L.e.patch("patch",r,{headers:{accessToken:Object(g.d)()}});case 7:t.sent.status>=400?S({text:v(Ra())},"error"):(E(Object(g.g)({user:Object(j.a)(Object(j.a)({},e),{},{imageBody:a})})),S({text:v(Ta())}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.readAsDataURL(n)}}})]}),Object(r.jsx)(q,Object(j.a)({},P))]})},za=function(){var e=Object(d.c)((function(e){return e.movies})),t=e.movies,n=e.search,a=e.loading,c=e.error,o=Object(f.f)(),i=w().toast,l=Object(b.a)().t;a||0!==t.length||o.push("/"),c&&(o.push("/"),i({text:l(c)},"error"));var u=n.map((function(e){return t.find((function(t){return t.en.id===e}))})).filter(h),j=a?Object(r.jsx)(Te,{display:"lines"}):Object(r.jsx)(Re,{movies:u});return Object(r.jsxs)(s.a,{children:[Object(r.jsx)(et,{}),j]})},Wa=Object(i.a)({root:Object(a.a)({maxWidth:"100%",minWidth:500,margin:0},u.c.breakpoints.down("xs"),{padding:0}),Wrapper:Object(a.a)({maxWidth:840},u.c.breakpoints.down("xs"),{padding:0,margin:0}),Slider:{height:400,minHeight:300}});t.default=function(){var e=Wa(),t=Object(O.b)(),n=Object(d.c)((function(e){return e.user})).isAuth,a=w().toast,o=Object(b.a)().i18n;Object(c.useEffect)((function(){var e=p();if(console.log(e),null===e||void 0===e?void 0:e.error){var t=o.language;a({text:e.error[t]},"error")}}),[]),Object(c.useEffect)((function(){Object(g.d)()&&t(Object(g.c)())}),[t]);var i=n?Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{path:"/settings",component:Ma}),Object(r.jsx)(f.a,{path:"/forgot_password",component:na}),Object(r.jsx)(f.a,{path:"/change_email",component:xa}),Object(r.jsx)(f.a,{path:"/search/:id",component:za}),Object(r.jsx)(f.a,{path:"/movies/:id",component:Vn}),Object(r.jsx)(f.a,{path:"/genres/:id",component:nt}),Object(r.jsx)(f.a,{path:"/byname/:id",component:nt}),Object(r.jsx)(f.a,{path:"/",component:nt})]}):Object(r.jsxs)(f.c,{children:[Object(r.jsx)(f.a,{path:"/auth",component:st}),Object(r.jsx)(f.a,{path:"/register",component:it}),Object(r.jsx)(f.a,{path:"/login",component:oe}),Object(r.jsx)(f.a,{path:"/reset_password",component:ma}),Object(r.jsx)(f.a,{path:"/forgot_password",component:na}),Object(r.jsx)(f.a,{path:"/search/:id",component:za}),Object(r.jsx)(f.a,{path:"/movies/:id",component:Vn}),Object(r.jsx)(f.a,{path:"/genres/:id",component:nt}),Object(r.jsx)(f.a,{path:"/byname/:id",component:nt}),Object(r.jsx)(f.a,{path:"/",component:nt})]});return Object(r.jsx)(s.a,{className:e.root,children:Object(r.jsx)(s.a,{className:e.Wrapper,children:Object(r.jsxs)(l.a,{maxSnack:3,classes:{containerRoot:e.root},content:function(e){return Object(r.jsx)(Gn,{id:e})},children:[Object(r.jsx)(zt,{}),i,Object(r.jsx)(dt,{}),Object(r.jsx)(Kn,{})]})})})}},24:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"k",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return w})),n.d(t,"h",(function(){return y})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return C}));var a=n(9),r=n.n(a),c=n(16),o=n(40),i=n(48),s=n(42),l=n.n(s),u=n(26),d=Object(i.b)({name:"movies",initialState:{loading:!1,error:null,movies:[],search:[],popular:[],byName:[],isEndOfMovies:!1},reducers:{addMovies:function(e,t){var n=t.payload,a=function(t){var a;if(console.log("[loadMovies] payload, moviesLength",n,e.movies.length),n[t]&&(null===(a=n[t])||void 0===a?void 0:a.length))if(e.movies.length){var r,c=null===(r=n[t])||void 0===r?void 0:r.filter((function(t){return!e.movies.find((function(e){return e.en.id===t.en.id}))}));console.log("[loadMovies] newMovies",c),(null===c||void 0===c?void 0:c.length)&&(e.movies=e.movies.concat(c));var o=new Set(e[t].concat((n[t]||[]).map((function(e){return e.en.id}))));e[t]=Array.from(o)}else{var i=n[t]||[];e.movies=i,e[t]=i.map((function(e){return e.en.id}))}};if(e.loading=!1,n.search)a("search");else if(n.byName)a("byName");else{if(!n.popular)throw new Error("[movies:addMovies] no movies in payload");a("popular")}},setMovies:function(e,t){var n=t.payload,a=function(t){var a;if(n[t]){var r,c=null===(a=n[t])||void 0===a?void 0:a.filter((function(t){return!e.movies.find((function(e){return e.en.id===t.en.id}))}));if(c)e.movies=e.movies.concat(c),e[t]=(null===(r=n[t])||void 0===r?void 0:r.map((function(e){return e.en.id})))||[]}};if(e.loading=!1,n.search)a("search");else if(n.byName)a("byName");else{if(!n.popular)throw new Error("[movies:setMovies] no movies in payload");a("popular")}},updateMovie:function(e,t){var n=t.payload,a=n.id,r=n.views,c=e.movies.find((function(e){return e.en.id===a}));c&&(c.en.info.views=r)},updateComments:function(e,t){var n=t.payload;if(e.loading=!1,!n.id)throw new Error("[movies:updateComments] no id in payload");if(!n.comments)throw new Error("[movies:updateComments] no comments in payload");var a=e.movies.find((function(e){return e.en.id===n.id}));if(!a)throw new Error("[movies:updateComments] no movie found");var r=n.comments.filter((function(e){return!a.en.info.comments||!a.en.info.comments.find((function(t){return t.commentid===e.commentid}))}));console.log("[updateComments] newComments",r,n.comments),a.en.info.comments=a.en.info.comments?[].concat(Object(o.a)(a.en.info.comments),Object(o.a)(r)):Object(o.a)(r)},setEndOfMovies:function(e){e.isEndOfMovies=!0},resetEndOfMovies:function(e){e.isEndOfMovies=!1},setError:function(e,t){var n=t.payload;e.error=n.error,e.loading=!1},resetError:function(e){e.error=null,e.loading=!1},startLoading:function(e){e.loading=!0},stopLoading:function(e){e.loading=!1}}}),f=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("[loadMoviesAsync] params",t),n=null,!(null===t||void 0===t?void 0:t.search)){e.next=9;break}return e.next=6,Object(u.f)("find",{params:{category:"All",search:null===t||void 0===t?void 0:t.search}});case 6:n=e.sent,e.next=24;break;case 9:if(!(null===t||void 0===t?void 0:t.letter)){e.next=15;break}return e.next=12,Object(u.c)("byname",{params:t});case 12:n=e.sent,e.next=24;break;case 15:if(!(null===t||void 0===t?void 0:t.genre)){e.next=21;break}return e.next=18,Object(u.c)("bygenre",{params:t});case 18:n=e.sent,e.next=24;break;case 21:return e.next=23,Object(u.c)("movies",{params:t});case 23:n=e.sent;case 24:if(404!==n.status){e.next=28;break}return e.abrupt("return",{data:[],status:!1});case 28:if(!(n.status>=400)){e.next=32;break}return e.abrupt("return",null);case 32:return e.abrupt("return",n.data);case 33:e.next=39;break;case 35:return e.prev=35,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 39:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.filter,n=void 0===t?{limit:20,offset:0}:t,a=e.callback;return function(){var e=Object(c.a)(r.a.mark((function e(t){var c,o,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N()),o=n.limit||20,console.log("[loadMovies] filter",n),e.next=5,f(n);case 5:if(i=e.sent,console.log("[loadMovies] res",i),!i||i.status||0!==(null===(c=i.data)||void 0===c?void 0:c.length)){e.next=13;break}return t(I()),t(S({error:"Cannot find movies"})),e.abrupt("return",null);case 13:if(!(null===i||void 0===i?void 0:i.status)||!i.data){e.next=22;break}return i.data.length<o&&t(y()),l=null===(s=i.data)||void 0===s?void 0:s.map((function(e){return e.ru?e:{en:e.en,ru:e.en}})),console.log("[loadMovies] removedNulls:",l),n.letter?t(g({byName:l})):n.search||n.genre?n.offset&&n.offset>0?t(g({search:l})):t(v({search:l})):t(g({popular:l})),a&&a(!i||!i.data||i.data.length<o),e.abrupt("return",l);case 22:return t(I()),t(S({error:"Loading error"})),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,l()("/api/loader/stats/".concat(t));case 4:(a=e.sent).status<400&&a.data.status&&(n=a.data.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(N()),t.next=3,f({id:e});case 3:c=t.sent,console.log("loadMovie",c),c&&!c.status&&0===(null===(a=c.data)||void 0===a?void 0:a.length)?n(S({error:"Cannot load movie"})):(null===c||void 0===c?void 0:c.status)&&c.data?n(g({search:c.data})):n(S({error:"Loading error"}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.patch("/api/movies/views",{movieId:e});case 2:a=t.sent,console.log(a.data),a.data.status&&n(x({id:e,views:+a.data.data[0].views}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e,t){var n=e.movieId,a=e.limit,o=void 0===a?5:a,i=e.offset,s=void 0===i?0:i;return function(){var e=Object(c.a)(r.a.mark((function e(a){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(N()),e.next=3,Object(u.c)("comments",{params:{movieId:n,limit:o,offset:s}});case 3:c=e.sent,console.log("loadComments",c.data),c.data.status&&((i=c.data.data).length&&a(w({comments:i,id:n})),t&&t(i.length));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=d.actions,g=O.addMovies,v=O.setMovies,x=O.updateMovie,w=O.updateComments,y=O.setEndOfMovies,k=O.resetEndOfMovies,S=O.setError,C=O.resetError,N=O.startLoading,I=O.stopLoading;t.a=d.reducer},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(42),r=n.n(a),c=(r.a.CancelToken,r.a.create({baseURL:"/api/auth/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}})),o=r.a.create({baseURL:"/api/profile/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),i=r.a.create({baseURL:"/api/passwd/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),s=r.a.create({baseURL:"/api/email/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),l=r.a.create({baseURL:"/api/search/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),u=r.a.create({baseURL:"/api/movies/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}});r.a.create({baseURL:"/api/test/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),r.a.create({baseURL:"/api/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}})},27:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return h}));var a=n(9),r=n.n(a),c=n(16),o=n(48),i=n(26),s="hypertubeAuthToken",l=Object(o.b)({name:"user",initialState:{isAuth:!1,isLoading:!1,userId:0,email:"",username:"",firstName:"",lastName:"",imageBody:null},reducers:{saveUserState:function(e,t){var n=t.payload;if(!n.user)throw new Error("[userSlice:saveState] no user in payload");return{isAuth:e.isAuth,isLoading:e.isLoading,userId:n.user.userId||e.userId,email:n.user.email||e.email,username:n.user.username||e.username,firstName:n.user.firstName||e.firstName,lastName:n.user.lastName||e.lastName,imageBody:n.user.imageBody||e.imageBody}},authSuccess:function(e){e.isAuth=!0},authFail:function(e){e.isAuth=!1},startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1}}}),u=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,e.next=4,Object(i.e)("get",{headers:{accessToken:b()}});case 4:n=e.sent,console.log(n.data),n.data.en?(t(h()),f()):(t(m({user:n.data})),t(p())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:t(g());case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){localStorage.setItem(s,e)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;localStorage.removeItem(e)},b=function(){return localStorage.getItem(s)},j=l.actions,m=j.saveUserState,p=j.authSuccess,h=j.authFail,O=j.startLoading,g=j.stopLoading;t.b=l.reducer},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o}));var a=n(107),r={light:"#05829E",main:"#035263",dark:"#02313B",contrastText:"#fff"},c={light:"#F19941",main:"#EE851B",dark:"#D17010",contrastText:"#fff",contrastTextLighter:"#333"},o=Object(a.a)({palette:{primary:r,secondary:c,background:{light:"#FFFFFF",default:"#FAFAFA",dark:"#DDDDDD",contrastText:"#121212"}},typography:{fontFamily:['"Quicksand"','"Helvetica Neue"',"Roboto","Arial","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},props:{MuiButton:{variant:"outlined",color:"primary"},MuiTextField:{variant:"outlined",color:"primary"}}})},33:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"j",(function(){return k})),n.d(t,"i",(function(){return S}));var a=n(104),r=n(9),c=n.n(r),o=n(16),i=n(21),s=n(3),l=n(48),u=n(24),d={genres:["Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","Film Noir","History","Horror","Music","Mystery","Romance","Sci-Fi","Short","Sport","Superhero","Thriller","War","Western"],years:["before 1980","1980-1990","1990-2000","2000-2010","2010-2020"],countries:["Australia","Canada","France","Germany","Great Britain","India","Japan","Russia","Spain","USA","USSR","other"]},f={genres:{Action:!1,Adventure:!1,Animation:!1,Biography:!1,Comedy:!1,Crime:!1,Documentary:!1,Drama:!1,Family:!1,Fantasy:!1,"Film Noir":!1,History:!1,Horror:!1,Music:!1,Mystery:!1,Romance:!1,"Sci-Fi":!1,Short:!1,Sport:!1,Superhero:!1,Thriller:!1,War:!1,Western:!1},years:{"before 1980":!1,"1980-1990":!1,"1990-2000":!1,"2000-2010":!1,"2010-2020":!1},countries:{Australia:!1,Canada:!1,France:!1,Germany:!1,"Great Britain":!1,India:!1,Japan:!1,Russia:!1,Spain:!1,USA:!1,USSR:!1,other:!1}},b=Object(l.b)({name:"filter",initialState:f,reducers:{setFilterState:function(e,t){var n=t.payload.filter,a=n.category,r=n.name,c=n.value;return Object(s.a)(Object(s.a)({},e),{},Object(i.a)({},a,Object(s.a)(Object(s.a)({},e[a]),{},Object(i.a)({},r,c))))},resetFilterState:function(){return f}}}),j=function(e){return-1!==d.countries.filter((function(e){return"other"!==e})).indexOf(e)},m=function(e){for(var t in e)if(j(t)&&e[t])return!1;return!0},p=function(e){for(var t in e)if(n=t,-1!==d.years.indexOf(n)&&e[t])return!1;var n;return!0},h=function(e){for(var t in e)if(n=t,-1!==d.genres.indexOf(n)&&e[t])return!1;var n;return!0},O=function(e){var t=d.years.filter((function(t){return e[t]&&[t,e[t]]})),n=[];return t.forEach((function(e){if(e.startsWith("before"))n.push([0,1980]);else if(n.length>0&&e.match("".concat(n[n.length-1][1]))){var t=e.split("-");n[n.length-1][1]=+t[1]}else{var a=e.split("-");n.push([+a[0],+a[1]])}})),console.log(n),n},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0};return function(){var t=Object(o.a)(c.a.mark((function t(n,a){var r,o,i,l,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a().filter,o=d.genres.filter((function(e){return r.genres[e]&&[e,r.genres[e]]})),i=O(r.years),l=d.countries.filter((function(e){return r.countries[e]&&[e,r.countries[e]]})),f=Object(s.a)(Object(s.a)({},e),{},{genres:o,years:i,countries:l}),console.log(f),n(Object(u.e)({filter:f}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},v=function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=a[n];if(r[1]){var c=r[0].startsWith("before")?[0,+r[0].split(" ")[1]]:r[0].split("-").map((function(e){return+e}));if(e>=c[0]&&e<c[1])return!0}}return!1},x=function(e,t){var n,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){if(t[n.value])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},w=function(e,t){var n,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;return j(c)?t[c]:t.other}}catch(o){r.e(o)}finally{r.f()}return!1},y=b.actions,k=y.setFilterState,S=y.resetFilterState;t.b=b.reducer},66:function(e,t,n){"use strict";n.r(t),n.d(t,"LIMIT",(function(){return h}));var a=n(1),r=n(0),c=n(19),o=n.n(c),i=(n(164),n(34)),s=n(291),l=n(292),u=n(28),d=n(13),f=n(17),b=n(108),j=n(132),m=n(134),p=n(84);b.a.use(j.a).use(m.a).use(p.e).init({lng:"en",fallbackLng:"en",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:["queryString","cookie"],cache:["cookie"],debug:!1,interpolation:{escapeValue:!1}});b.a;console.log=function(){},console.error=function(){},console.warn=function(){},console.info=function(){},console.debug=function(){};var h=+(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LOAD_LIMIT||5);!function(){var e=n(213).default;o.a.render(Object(a.jsx)(d.a,{store:f.a,children:Object(a.jsx)(s.a,{theme:u.c,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(e,{})]})})})}),document.getElementById("root"))}()},73:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(48),r=Object(a.b)({name:"UI",initialState:{sortBy:null,view:"lines"},reducers:{setSortingBy:function(e,t){var n=t.payload;e.sortBy=n.sortBy},changeView:function(e){e.view="grid"===e.view?"lines":"grid"}}}),c=r.actions,o=c.setSortingBy,i=c.changeView;t.b=r.reducer},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var a=n(3),r=n(48),c=Object(r.b)({name:"snack",initialState:{notifications:[]},reducers:{addSnack:function(e,t){var n=t.payload;e.notifications.find((function(e){return e.text===n.text&&e.variant===n.variant}))||e.notifications.push(n)},dismissSnack:function(e,t){var n=t.payload;e.notifications=e.notifications.map((function(e){return n.dismissAll||e.key===n.key?Object(a.a)(Object(a.a)({},e),{},{dismissed:!0}):e}))},removeSnack:function(e,t){var n=t.payload;e.notifications=e.notifications.filter((function(e){return e.key!==n.key}))}}}),o=Object(a.a)({},c.actions),i=o.addSnack,s=(o.dismissSnack,o.removeSnack);t.b=c.reducer}},[[66,1,2]]]);
//# sourceMappingURL=main.4f00e034.chunk.js.map
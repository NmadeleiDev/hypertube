(this["webpackJsonphypertube-frontend-ts"]=this["webpackJsonphypertube-frontend-ts"]||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(46),r=n(16),c=n(53),o=n(73),i=n(23),s=n(33),l=n(26),u=n(75),d=Object(c.c)({UI:o.b,movies:i.a,filter:s.b,user:l.b,snack:u.b}),f=Object(a.a)({reducer:d});var b=function(){return Object(r.b)()};t.a=f},163:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(21),c=n(1),o=n(0),i=n.n(o),s=n(251),l=n(258),u=n(77),d=n(29),f=n(16),b=n(20),j=n(292),m=n(83),h=function(e){var t=e||window.location.search,n=t?decodeURI(t):null;return n?n.replaceAll("%3A",":").replaceAll("%2C",",").replaceAll("+"," ").slice(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]="error"===n[0]?JSON.parse(n[1]):n[1],e}),{}):null},p=n(15),O=n(26),g=n(75),v=n(289),x=function(){var e=Object(p.b)();return{toast:Object(o.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(g.a)({key:Object(v.a)(),text:t.text,header:t.header,variant:n||"default",options:Object(a.a)(Object(a.a)({},r),{},{autoHideDuration:3e3})}))}),[e])}},w=n(9),y=n.n(w),k=n(8),C=n(18),S=n(11),N=n(253),I=n(25),T=n(214),L=n(252),E=n(146),R=Object(s.a)({root:{position:"relative"},Paper:{padding:20},Open:{transform:"rotate(180deg)"},Item:{fontSize:"1.0rem",margin:5}}),M={onClose:function(){}},P=Object(o.createContext)(M),z=function(e){var t=e.heroText,n=void 0===t?null:t,r=e.icon,i=e.items,s=e.buttonProps,l=e.children,u=Object(o.useState)(!1),d=Object(S.a)(u,2),f=d[0],b=d[1],j=Object(o.useRef)(null),m=R(),h=function(){return b(!1)},p={onClose:h};return Object(c.jsxs)("div",{className:m.root,children:[Object(c.jsx)(T.a,Object(a.a)(Object(a.a)({style:{margin:"0 10px"},ref:j,variant:"text",onClick:function(){return b((function(e){return!e}))},endIcon:n&&r},s),{},{children:n||r})),Object(c.jsx)(L.a,{open:f,anchorEl:j.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:h,children:Object(c.jsx)(E.a,{className:m.Paper,children:Object(c.jsxs)(N.a,{container:!0,direction:"column",alignItems:"center",children:[i&&i.map((function(e){var t=e.text,n=e.name,a=e.onClick;return Object(c.jsx)(T.a,{variant:"text",name:n,className:m.Item,onClick:function(e){return function(e,t){t&&t(e),b(!1)}(e,a)},children:t},t)})),Object(c.jsx)(P.Provider,{value:p,children:l})]})})})]})},W=n(94),B=n(255),A=n(256),F=n(287),D=Object(s.a)({ButtonListItem:{justifyContent:"center"},Input:{width:"100%"},SmallSelector:{minWidth:"100px",padding:"10px"},FormControl:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start"},RadioGroup:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}}),U=function(e){var t=e.type,n=void 0===t?"text":t,r=e.name,s=(e.values,e.value),l=e.onValidate,u=e.onChange,d=(e.className,e.rules),f=e.ignoreUntouched,b=Object(W.a)(e,["type","name","values","value","onValidate","onChange","className","rules","ignoreUntouched"]),j=D(),m=Object(o.useState)(!1),h=Object(S.a)(m,2),p=h[0],O=h[1],g=Object(o.useState)(!1),v=Object(S.a)(g,2),x=v[0],w=v[1],y=Object(o.useState)(""),k=Object(S.a)(y,2),C=k[0],N=k[1],I=i.a.useMemo((function(){return d?Object(a.a)({},d):Object(a.a)({},{helperText:"",rule:null})}),[d]),T=I.helperText,L=I.rule;switch(Object(o.useEffect)((function(){var e;e=!!L&&!function(e,t,n){var a=!t.regex||!!e.match(t.regex),r=!t.checkFn||t.checkFn();return!n||e.length>=t.minLength&&e.length<=t.maxLength&&a&&r}(s,L,f||p),N(e?T:""),l&&l((f||p||!!s.length)&&!e),x!==e&&w(e)}),[s,p,L,T,l,f,x]),n){case"text":case"email":case"password":return Object(c.jsx)(F.a,Object(a.a)({id:r,error:x,helperText:C,type:n,value:s,name:r,className:j.Input,onFocus:function(){return O(!0)},onChange:function(e){return u(e)}},b));default:return null}},_=n(54),V=n.n(_),H=n(34),$=Object(s.a)({root:{width:"100%"},Button:{width:"100%"},List:{width:"100%"},Buttons:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},Link:{textDecoration:"none",color:"inherit",width:"100%"},margin:{marginBottom:10},padding:{padding:"5px 10px"}}),X=function(e){var t=e.inputs,n=e.buttons,r=e.className,o=e.children,i=$();return Object(c.jsx)("form",{className:V()(r,i.root),children:Object(c.jsxs)(B.a,{className:i.List,children:[t.map((function(e){return Object(c.jsx)(A.a,{children:Object(c.jsx)(U,Object(a.a)(Object(a.a)({},e),{},{className:i.margin}))},e.name||e.type)})),n&&Object(c.jsx)(A.a,{className:i.Buttons,children:n.map((function(e){var t=e.variant,n=e.type,r=e.text,o=e.onClick,s=e.to,l=Object(W.a)(e,["variant","type","text","onClick","to"]);return s?Object(c.jsx)(H.c,{to:s,className:V()(i.Link,i.margin),children:Object(c.jsx)(T.a,Object(a.a)(Object(a.a)({className:i.Button,variant:t,onClick:o},l),{},{children:r}))},r):Object(c.jsx)(T.a,Object(a.a)(Object(a.a)({className:V()(i.Button,i.margin),variant:t,type:n,onClick:o},l),{},{children:r}),r)}))}),o]})})},q=n(257),G=Object(s.a)({OAuthButton:{width:"6rem"}}),Y={42:{url:"https://api.intra.42.fr/oauth/authorize",queryParams:[{name:"client_id",value:"96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauth42"},{name:"scope",value:"public"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"code"}]},facebook:{url:"https://www.facebook.com/v10.0/dialog/oauth",queryParams:[{name:"client_id",value:"737140593612593"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauthFb"},{name:"scope",value:"email+public_profile"},{name:"response_type",value:"code"}]},vk:{url:"https://oauth.vk.com/authorize",queryParams:[{name:"client_id",value:"7781054"},{name:"redirect_uri",value:"http://localhost:4000/api/auth/oauthVk"},{name:"scope",value:"offline+photos"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"code"}]},google:{url:"https://accounts.google.com/o/oauth2/v2/auth",queryParams:[{name:"client_id",value:"96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53"},{name:"redirect_uri",value:"http://localhost:4000/user/auth/oauthGoogle"},{name:"scope",value:"https://www.googleapis.com/auth/drive.metadata.readonly"},{name:"state",value:"bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d"},{name:"response_type",value:"token"}]}},K=function(){return Object(c.jsx)("img",{height:"30",width:"30",src:"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg",alt:"42 auth",style:{filter:"invert(1)"}})},Z=function(){return Object(c.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 409 409",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{fill:"#475993",d:"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085 h147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882 v-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955 l-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087 c-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085 C408.786,24.662,384.124,0,353.701,0z"})})},J=function(){return Object(c.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 112 112",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsxs)("g",{children:[Object(c.jsx)("circle",{id:"XMLID_11_",fill:"#4D76A1",cx:"56.098",cy:"56.098",r:"56.098"}),Object(c.jsx)("path",{fill:"#FFFFFF",fillRule:"evenodd",clipRule:"evenodd",d:"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878 c0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235 c2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463 c-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069 c0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297 c-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514 c-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644 c1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446 c-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069 c0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993 C44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z"})]})})},Q=function(){return Object(c.jsx)("svg",{height:"30",width:"30",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(c.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),Object(c.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),Object(c.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),Object(c.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),Object(c.jsx)("path",{d:"M20 20h472v472H20V20z"})]})})},ee=function(e){var t=e.variant,n=G(),a=Object(o.useState)(!1),r=Object(S.a)(a,2),i=r[0],s=r[1],l=Object(o.useMemo)((function(){switch(t){case"42":return Object(c.jsx)(K,{});case"facebook":return Object(c.jsx)(Z,{});case"vk":return Object(c.jsx)(J,{});case"google":return Object(c.jsx)(Q,{})}}),[t]);return Object(c.jsx)(T.a,{type:"submit",disabled:i,onClick:function(e){s(!0);var n=Y[t].queryParams.reduce((function(e,t){return e[t.name]=t.value,e}),{}),a=new URLSearchParams(n).toString(),r="".concat(Y[t].url,"?").concat(a);window.location.href=r},className:n.OAuthButton,"aria-label":"".concat(t," oauth"),children:i?Object(c.jsx)(q.a,{}):l})};function te(){var e=Object(k.a)(["Server error"]);return te=function(){return e},e}var ne=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"},Form:{width:"100%"},margin:{marginBottom:10},padding:{padding:"5px 10px"},Link:{textDecoration:"none"}}),ae=function(){var e=ne(),t=Object(o.useState)({email:"",password:""}),n=Object(S.a)(t,2),s=n[0],l=n[1],u=Object(o.useState)({email:!1,password:!1}),d=Object(S.a)(u,2),f=d[0],m=d[1],h=f.email&&f.password,g=i.a.useContext(P).onClose,v=Object(j.a)(),w=v.t,k=v.i18n,T=x().toast,L=Object(b.f)(),E=Object(p.b)(),R=Object(o.useCallback)((function(e){e.preventDefault(),l(Object(a.a)(Object(a.a)({},s),{},Object(r.a)({},e.target.name,e.target.value)))}),[s]),M=Object(o.useCallback)(function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[Login] handleSubmit",s),n="Basic "+btoa(encodeURI(s.email)+":"+encodeURI(s.password)),e.prev=3,e.next=6,Object(I.a)("basic",{headers:{Authorization:n}});case 6:(a=e.sent).data.accessToken?(Object(O.f)(a.data.accessToken),E(Object(O.c)()),L.push("/")):T({text:a.data[k.language]},"error"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),T({text:w(te())},"error");case 14:g();case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),[s,T,k.language,E,L,g,w]),z=Object(o.useCallback)((function(){console.log("[Login] handleForgot"),L.push("forgot_password"),g()}),[g,L]),W=Object(o.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:w("Email"),placeholder:w("Enter email"),value:s.email,onChange:R,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{email:e})}))},rules:{helperText:w("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"password",type:"password",label:w("Password"),placeholder:w("Enter password"),value:s.password,onChange:R,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{password:e})}))},rules:{helperText:w("passwordError"),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}}],buttons:[{type:"submit",variant:"contained",onClick:M,text:w("Login"),disabled:!h},{variant:"outlined",onClick:z,text:w("Forgot password?")},{to:"/register",variant:"outlined",text:w("Register"),onClick:g}]}}),[s,R,M,z,g,h,w]);return Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(c.jsx)(X,Object(a.a)(Object(a.a)({},W),{},{children:Object(c.jsxs)(N.a,{container:!0,alignItems:"center",justify:"space-evenly",children:[Object(c.jsx)(ee,{variant:"42"}),Object(c.jsx)(ee,{variant:"facebook"}),Object(c.jsx)(ee,{variant:"vk"}),Object(c.jsx)(ee,{variant:"google"})]})}))})},re=Object(s.a)({root:{}}),ce=function(){var e=re();return Object(c.jsx)(l.a,{className:e.root,children:Object(c.jsx)(ae,{})})},oe=n(62),ie=n(290),se=n(23),le=n(33),ue=Object(s.a)((function(e){return Object(ie.a)({root:{padding:0,position:"relative",borderRadius:5,overflow:"hidden"},Scroller:{display:"inline-flex",flexWrap:"nowrap",overflowX:"scroll","&::-webkit-scrollbar":{display:"none"}},ShadowLeft:{position:"absolute",height:"100%",left:0,width:"50px",background:"linear-gradient(90deg, #00000033, transparent)"},ShadowRight:{position:"absolute",height:"100%",right:0,width:"50px",background:"linear-gradient(-90deg, #00000033, transparent)"},Link:{color:e.palette.grey[700],fontSize:"1.5rem",textDecoration:"none",flex:"1 0 50px",margin:10,display:"flex",justifyContent:"center",alignItems:"center",border:"3px solid transparent",borderRadius:"50%","&:before":{content:"''",paddingTop:"100%",float:"left"}},Active:{borderColor:d.b.main}})})),de=function(){var e=Object(b.g)(),t=ue(d.c),n=Object(o.useState)({shadowLeft:!1,shadowRight:!0}),r=Object(S.a)(n,2),i=r[0],s=r[1],u=Object(p.b)(),f=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget.innerText,!window.location.href.match(/byname/)){e.next=6;break}if(!(a=window.location.href.split("/").pop())||n!==a){e.next=6;break}return e.abrupt("return");case 6:u(Object(se.e)()),u(Object(se.h)({byName:[]})),u(Object(le.i)()),u(Object(se.d)({filter:{letter:n,limit:oe.LIMIT}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(m.throttle)((function(e){e.stopPropagation();var t=e.target;t&&(0===t.scrollLeft?s(Object(a.a)(Object(a.a)({},i),{},{shadowLeft:!1})):t.scrollLeft>0&&!i.shadowLeft&&s(Object(a.a)(Object(a.a)({},i),{},{shadowLeft:!0})),t.scrollWidth-t.scrollLeft<t.offsetWidth+1?s(Object(a.a)(Object(a.a)({},i),{},{shadowRight:!1})):!i.shadowRight&&s(Object(a.a)(Object(a.a)({},i),{},{shadowRight:!0})))}),100);return Object(c.jsxs)(l.a,{className:t.root,children:[i.shadowLeft&&Object(c.jsx)("div",{className:t.ShadowLeft}),i.shadowRight&&Object(c.jsx)("div",{className:t.ShadowRight}),Object(c.jsxs)(l.a,{onScroll:j,onWheel:function(e){e.currentTarget.scrollTo({top:0,left:e.currentTarget.scrollLeft+4*e.deltaY,behavior:"smooth"})},className:t.Scroller,children:["ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("").map((function(n){return Object(c.jsx)(H.c,{to:"/byname/".concat(n),onClick:f,className:(a="/byname/".concat(n),-1!==e.pathname.search(a)?V()(t.Link,t.Active):t.Link),children:n},n);var a})),Object(c.jsx)("div",{className:t.Link})]})]})},fe=n(55),be=n(260),je=n(147),me=n(259),he=n(139),pe=n.n(he),Oe=n(296),ge=n(138),ve=n.n(ge),xe=Object(s.a)({Typography:{padding:5,marginRight:5,border:"1px solid #ddd",borderRadius:5}}),we=function(e){var t=e.movieId,n=e.imdbRating,a=e.ourRating,r=xe(),i=Object(o.useState)(a),s=Object(S.a)(i,2),l=s[0],u=s[1],d=Object(f.c)((function(e){return e.user})).isAuth,b=function(){var e=Object(C.a)(y.a.mark((function e(n,a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),null===a){e.next=7;break}return console.log(a),e.next=5,I.c.patch("/rating",{movieId:t,rating:a},{headers:{accessToken:Object(O.d)()}});case 5:(r=e.sent).data.status&&u(+r.data.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsxs)(N.a,{container:!0,alignItems:"center",justify:"flex-end",children:[Object(c.jsx)(je.a,{className:r.Typography,children:"IMDB"}),Object(c.jsx)(je.a,{children:n}),Object(c.jsx)(Oe.a,{disabled:!d,value:l||n/2,name:"".concat(t,"-rating"),emptyIcon:Object(c.jsx)(ve.a,{color:"disabled",fontSize:"inherit"}),onChange:b})]})},ye=Object(s.a)({Paper:{display:"flex",marginBottom:20,padding:10},Img:{position:"relative",cursor:"pointer","& img":{height:"15rem",width:"10rem",maxWidth:"15rem",objectFit:"cover",marginRight:20,borderRadius:5},"&:hover $PlayIconWrapper":{opacity:1}},PlayIconWrapper:{position:"absolute",left:"calc(50% - 3.5rem)",top:"calc(50% - 3rem)",fontSize:"1rem",padding:"1rem",borderRadius:"50%",backgroundColor:"#000000aa",color:"#fff",opacity:0,transition:"0.3s"},PlayIcon:{width:"4rem",height:"4rem"},Info:{height:"15rem",flexWrap:"nowrap"},Caption:{fontSize:"1.5rem",textDecoration:"none",color:"inherit",marginBottom:10},Text:{fontSize:"1rem",fontWeight:200},Description:{maxHeight:"8rem",paddingTop:10,fontSize:"0.9rem",position:"relative",flexGrow:2,overflow:"hidden"},Shadow:{height:40,width:"100%",position:"absolute",bottom:0,background:"linear-gradient(0deg, #ffffff, #ffffff33)"},Link:{marginLeft:5,fontSize:"inherit",fontWeight:"inherit",color:"inherit",textTransform:"capitalize","&:hover":{color:d.a.light}}}),ke=function(e){var t,n=e.card,a=ye(),r=Object(j.a)(),o=r.t,i=r.i18n,s=n.en,l=s.id,u=s.img,d=s.info,f=n[i.language].title,b=n[i.language].info.description;return Object(c.jsxs)(E.a,{className:a.Paper,children:[Object(c.jsxs)(H.c,{to:"/movies/".concat(l),className:a.Img,children:[Object(c.jsx)("img",{src:u,alt:"".concat(f," poster")}),Object(c.jsx)("div",{className:a.PlayIconWrapper,children:Object(c.jsx)(pe.a,{className:a.PlayIcon,fontSize:"large"})})]}),Object(c.jsxs)(N.a,{container:!0,direction:"column",className:a.Info,children:[Object(c.jsxs)(N.a,{container:!0,alignItems:"baseline",justify:"space-between",children:[Object(c.jsx)(H.c,{to:"/movies/".concat(l),className:a.Caption,children:Object(c.jsx)(je.a,{variant:"caption",className:a.Caption,children:f})}),Object(c.jsx)(we,{movieId:l,imdbRating:d.imdbRating,ourRating:d.rating})]}),Object(c.jsxs)(N.a,{container:!0,className:a.Text,children:[o("Year"),": ",d.year]}),Object(c.jsxs)(N.a,{container:!0,className:a.Text,children:[o("Genres"),": ",(t=d.genres,t&&t.length?t.map((function(e){var t="string"===typeof e?e:e.name;return Object(c.jsx)(H.b,{to:"/genres/".concat(t),className:a.Link,children:o(t)},t)})):o("No info"))]}),Object(c.jsxs)(N.a,{container:!0,className:a.Text,children:[o("Length"),": ",d.length?"".concat(d.length).concat(o("min")):"unknown"]}),Object(c.jsx)(me.a,{}),Object(c.jsxs)(N.a,{container:!0,className:a.Description,children:[b,Object(c.jsx)("div",{className:a.Shadow})]})]})]})},Ce=Object(s.a)({root:{},Grid:{maxWidth:150,marginRight:"1rem",marginBottom:"1rem"},Media:{height:220,width:150},Name:{fontSize:"1rem",fontWeight:800}}),Se=function(e){var t=e.display,n=void 0===t?"image":t,a=e.className,r=e.id,o=Ce(),i=Object(j.a)().i18n,s=Object(f.c)((function(e){return e.movies})).movies.find((function(e){return e.en.id===r}));return Object(c.jsx)(N.a,{item:!0,container:!0,wrap:"wrap",direction:"lines"===n?"column":"row",className:"lines"===n?V()(o.root,a):V()(o.root,a,o.Grid),children:function(){if(!s)return null;if("lines"===n)return Object(c.jsx)(ke,{card:s});var e=s.en.img||s.ru.img;return Object(c.jsxs)(H.c,{to:"/movies/".concat(s.en.id),className:o.root,children:[Object(c.jsx)(be.a,{style:{height:"fit-content"},children:Object(c.jsx)("div",{className:o.Media,style:{background:"url(".concat(e,")"),backgroundSize:"cover"}})}),"image"!==n&&Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",children:"grid"===n&&Object(c.jsx)(je.a,{className:o.Name,children:s[i.language].title})})]})}()})},Ne=n(261),Ie=Object(s.a)({Paper:{display:"flex",marginBottom:20,padding:10,width:"100%"},Img:{borderRadius:5,height:"15rem",width:"13rem",marginRight:"1rem"},Header:{width:"90%",marginBottom:10,fontSize:30},Text:{marginTop:15,height:10,width:"".concat(Math.floor(100*Math.random()),"%")},Info:{height:"15rem",flexWrap:"nowrap"}}),Te=function(e){var t=e.display,n=Ie();return"lines"===t?Object(c.jsxs)(E.a,{className:n.Paper,children:[Object(c.jsx)(Ne.a,{animation:"wave",variant:"rect",className:n.Img}),Object(c.jsxs)(N.a,{container:!0,direction:"column",className:n.Info,children:[Object(c.jsx)(Ne.a,{animation:"wave",className:n.Header}),Object(c.jsx)(Ne.a,{animation:"wave",width:"50%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"60%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"53%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"30%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"40%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"70%",className:n.Text}),Object(c.jsx)(Ne.a,{animation:"wave",width:"47%",className:n.Text})]})]}):Object(c.jsx)(be.a,{style:{height:"fit-content"},children:Object(c.jsx)("div",{className:n.Img,style:{backgroundSize:"cover"},children:Object(c.jsx)(Ne.a,{animation:"wave",variant:"rect",className:n.Img})})})},Le=function(e){var t=e.movies,n=Object(f.c)((function(e){return e.UI})),a=n.sortBy,r=n.view,i=Object(f.c)((function(e){return e.filter})),s=i.genres,l=i.years,u=i.countries,d=Object(f.c)((function(e){return e.movies})),b=d.loading,j=d.isEndOfMovies,h=Object(o.useState)(t),O=Object(S.a)(h,2),g=O[0],v=O[1],x=Object(p.b)(),w=Object(o.useRef)(null),y=window.location.href,k=y.search(/byname/)?y.split("/").pop():void 0,C=y.match(/search/)?y.split("/").pop():void 0;return Object(o.useEffect)((function(){console.log("useEffect track scroll");var e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return Object(m.throttle)((function(){e&&(window.pageYOffset+window.innerHeight>e.offsetTop+e.offsetHeight-r?t&&t():n&&n())}),a)}(w.current,(function(){j||b||(console.log("endOfMoviesCallback"),x(Object(se.d)({filter:{search:C,letter:k,limit:oe.LIMIT,offset:t.length}})).then((function(e){console.log("[Cards] loadMovies response",e),e&&e.length<oe.LIMIT&&x(Object(se.g)())})))}));return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[t.length,x,k,C,j,b]),Object(o.useEffect)((function(){var e=Object(le.f)(l)?t:t.filter((function(e){return Object(le.k)(e.en.info.year,l)}));e=Object(le.e)(s)?e:e.filter((function(e){return Object(le.c)(e.en.info.genres,s)})),e=Object(le.d)(u)?e:e.filter((function(e){return!e.en.info.countries||Object(le.a)(e.en.info.countries,u)})),console.log("[Cards] filter useEffect",e),v(e)}),[s,u,l,t]),Object(o.useEffect)((function(){console.log("[Cards] sort useEffect",t,g),t.length>g.length||("name"===a?v(function(e){return Object(fe.a)(e).sort((function(e,t){return e.en.title.localeCompare(t.en.title)}))}(g)):"year"===a?v(function(e){return Object(fe.a)(e).sort((function(e,t){return t.en.info.year-e.en.info.year}))}(g)):"rating"===a?v(function(e){return Object(fe.a)(e).sort((function(e,t){return t.en.info.rating-e.en.info.rating||t.en.info.imdbRating-e.en.info.imdbRating}))}(g)):"avalibility"===a&&v(function(e){return Object(fe.a)(e).sort((function(e,t){return t.en.info.avalibility-e.en.info.avalibility}))}(g)))}),[a,t,g]),Object(c.jsxs)(N.a,{ref:w,container:!0,justify:"space-evenly",children:[g.map((function(e){return Object(c.jsx)(Se,{id:e.en.id,display:r},e.en.id)})),b&&Object(c.jsx)(Te,{display:r})]})},Ee=Object(s.a)({root:{overflow:"hidden",flexWrap:"nowrap",margin:"20px 0",padding:10,background:"#fafafa",transform:"translateZ(0)",overflowX:"scroll",overflowY:"hidden",transition:"0.3s","&::-webkit-scrollbar":{display:"none"}},Movie:{transition:"0.3s",marginRight:20}}),Re=function(e){var t=e.display,n=void 0===t?"image":t,a=Ee(),r=Object(f.c)((function(e){return e.movies})).popular;return Object(c.jsx)(N.a,{container:!0,alignItems:"center",className:a.root,children:r.map((function(e){return Object(c.jsx)(Se,{display:n,className:a.Movie,id:e},e)}))})},Me=n(262),Pe=n(288),ze=n(293),We=n(266),Be=n(267),Ae=n(268),Fe=n(269),De=n(264),Ue=Object(s.a)({"@media (orientation: portrait)":{root:{width:"80vw",height:"60vh"}},root:{minWidth:300,minHeight:300,width:"80vw",height:"60vh","@media (max-width: 600px)":{width:"90vw",height:"90vh"}},Actions:{justifyContent:"center"}}),_e=["genres","years","countries"],Ve=function(){var e=Ue(),t=Object(p.b)(),n=Object(o.useState)(!1),a=Object(S.a)(n,2),r=a[0],i=a[1],s=Object(o.useState)("genres"),l=Object(S.a)(s,2),u=l[0],d=l[1],b=Object(f.c)((function(e){return e.filter})),m=Object(j.a)().t,h=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[Filter] handleShow",b),t(Object(le.h)()),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){switch(u){case"genres":case"years":case"countries":return t(Object(le.j)({filter:{category:u,name:e.currentTarget.name,value:e.currentTarget.checked}}));default:return}};return Object(c.jsxs)("div",{children:[Object(c.jsx)(T.a,{variant:"text",onClick:function(){return i(!0)},startIcon:Object(c.jsx)(De.a,{}),children:m("filterRoot")}),Object(c.jsxs)(ze.a,{open:r,onClose:function(){return i(!1)},"aria-labelledby":"filter-dialog",classes:{paper:e.root},children:[Object(c.jsx)(We.a,{id:"filter-dialog-title",children:m("filterRoot")}),Object(c.jsxs)(Be.a,{children:[Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",children:Object(c.jsx)(Ae.a,{style:{marginBottom:20},children:_e.map((function(e){return Object(c.jsx)(T.a,{color:"primary",variant:e===u?"contained":"outlined",onClick:function(){return d(e)},children:m(e)},e)}))})}),Object(c.jsx)(N.a,{container:!0,wrap:"wrap",children:function(e){switch(e){case"genres":return le.g.genres.map((function(e){return Object(c.jsx)(N.a,{item:!0,xs:6,sm:4,children:Object(c.jsx)(Me.a,{control:Object(c.jsx)(Pe.a,{style:{marginLeft:20},checked:b.genres[e],onChange:O,name:e,color:"primary"}),label:m(e)})},e)}));case"years":return le.g.years.map((function(e){return Object(c.jsx)(N.a,{item:!0,xs:6,sm:4,children:Object(c.jsx)(Me.a,{control:Object(c.jsx)(Pe.a,{style:{marginLeft:20},checked:b.years[e],onChange:O,name:e,color:"primary"}),label:m(e)})},e)}));case"countries":return le.g.countries.map((function(e){return Object(c.jsx)(N.a,{item:!0,xs:6,sm:4,children:Object(c.jsx)(Me.a,{control:Object(c.jsx)(Pe.a,{style:{marginLeft:20},checked:b.countries[e],onChange:O,name:e,color:"primary"}),label:m(e)})},e)}));default:return null}}(u)})]}),Object(c.jsxs)(Fe.a,{className:e.Actions,children:[Object(c.jsx)(T.a,{onClick:function(){t(Object(le.i)())},color:"primary",children:"Reset filters"}),Object(c.jsx)(T.a,{onClick:h,color:"secondary",children:"Show results"})]})]})]})},He=n(270),$e=n(73),Xe=function(){var e=Object(p.b)(),t=Object(j.a)().t,n=function(t){return e(Object($e.c)({sortBy:t.currentTarget.name}))},a=[{text:t("By rating"),name:"rating",onClick:n},{text:t("By name"),name:"name",onClick:n},{text:t("By year"),name:"year",onClick:n},{text:t("By avalibility"),name:"avalibility",onClick:n}];return Object(c.jsx)(z,{heroText:t("Sort"),icon:Object(c.jsx)(He.a,{}),items:a})},qe=n(271),Ge=n(272),Ye=Object(s.a)({right:{grow:1,marginLeft:"auto"}}),Ke=function(){var e=Ye(),t=Object(p.b)(),n=Object(f.c)((function(e){return e.UI})).view;return Object(c.jsx)(T.a,{className:e.right,variant:"text",size:"large",onClick:function(){t(Object($e.a)())},children:"grid"===n?Object(c.jsx)(qe.a,{}):Object(c.jsx)(Ge.a,{})})},Ze=Object(s.a)({root:{padding:"10px 30px"}}),Je=function(){var e=Ze();return Object(c.jsxs)(N.a,{container:!0,className:e.root,alignItems:"center",children:[Object(c.jsx)(Ve,{}),Object(c.jsx)(Xe,{}),Object(c.jsx)(Ke,{})]})},Qe=function(e){var t=e.route,n=e.match,a=Object(p.b)(),r=Object(f.c)((function(e){return e.movies})),i=r.movies,s=r.search,u=r.byName,d=r.popular,b=Object(o.useState)([]),j=Object(S.a)(b,2),m=j[0],h=j[1];return console.log(n,t),Object(o.useEffect)((function(){var e=window.location.href,n={limit:oe.LIMIT};switch(t){case"search":n.search=e.split("/").pop();break;case"byname":n.letter=e.split("/").pop()}console.log("[MainPage] useEffect. movies, filter",i,n),a(Object(se.d)({filter:{limit:oe.LIMIT+10}})),"search"===t?a(Object(se.d)({filter:n})).then((function(e){return h(e||[])})):"byname"===t&&a(Object(se.d)({filter:n})).then((function(e){console.log("[MainPage] useEffect. res, byName",e,u),h(e||[])}))}),[]),Object(o.useEffect)((function(){var e=null;e=n.path.includes("byname")?u:n.path.includes("search")?s:d,console.log(e);var t=[];e.forEach((function(e){var n=i.find((function(t){return t.en.id===e}));n&&t.push(n)})),console.log(t),h(t)}),[u,s,d,n.path,i]),Object(c.jsxs)(l.a,{children:[Object(c.jsx)(de,{}),Object(c.jsx)(Je,{}),Object(c.jsx)(Re,{}),Object(c.jsx)(Le,{movies:m})]})};function et(){var e=Object(k.a)(["Check your email"]);return et=function(){return e},e}var tt=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),nt=function(){var e=Object(o.useState)({email:"",username:"",password:"",confirm:""}),t=Object(S.a)(e,2),n=t[0],i=t[1],s=Object(o.useState)({email:!1,password:!1,confirm:!1}),l=Object(S.a)(s,2),u=l[0],d=l[1],f=u.email&&u.password,m=tt(),h=Object(j.a)(),g=h.t,v=h.i18n,w=Object(b.f)(),k=Object(p.b)(),T=x().toast,L=Object(o.useCallback)((function(e){e.preventDefault(),i(Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},e.target.name,e.target.value)))}),[n]),E=Object(o.useCallback)(function(){var e=Object(C.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[Register] handleSubmit",n),a={email:n.email,username:n.username,passwd:n.password},e.next=5,I.e.put("create",a);case 5:r=e.sent,console.log(r),r.data.email?(k(Object(O.g)({user:r.data})),w.push("/"),T({text:g(et())})):T({text:r.data[v.language]},"error");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,T,g,v.language,k,w]),R=Object(o.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:g("Email"),placeholder:g("Enter email"),value:n.email,onChange:L,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(a.a)(Object(a.a)({},t),{},{email:e})}))},rules:{helperText:g("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"username",type:"text",label:g("Username"),placeholder:g("Enter username"),value:n.username,onChange:L,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(a.a)(Object(a.a)({},t),{},{username:e})}))},rules:{helperText:g("usernameError"),rule:{minLength:3,maxLength:20,regex:/^[\w-+.]+$/}}},{name:"password",type:"password",label:g("Password"),placeholder:g("Enter password"),value:n.password,onChange:L,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(a.a)(Object(a.a)({},t),{},{password:e})}))},rules:{helperText:g("passwordError"),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}},{name:"confirm",type:"password",label:g("Confirm"),placeholder:g("Confirm password"),value:n.confirm,onChange:L,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return d((function(t){return Object(a.a)(Object(a.a)({},t),{},{confirm:e})}))},rules:{helperText:g("confirmError"),rule:{minLength:3,maxLength:25,regex:new RegExp("^".concat(n.password,"$"))}}}],buttons:[{type:"submit",variant:"contained",onClick:E,text:g("Register"),disabled:!f},{to:"/login",variant:"outlined",text:g("Login")}]}}),[n,L,E,f,g]);return Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",className:m.root,children:Object(c.jsx)(X,Object(a.a)({},R))})},at=Object(s.a)({root:{}}),rt=function(){var e=at();return Object(c.jsx)(l.a,{className:e.root,children:Object(c.jsx)(nt,{})})},ct=function(){var e=Object(b.f)(),t=Object(p.b)();return i.a.useEffect((function(){console.log("cookie",document.cookie),console.log(window.location.href);var n=decodeURI(window.location.search);console.log("queryParams",n);var r=n.slice(1).split("&").find((function(e){return e.startsWith("accessToken")}));if(r){var c=r.search(/=(.+)/),o=r.slice(c+1);console.log("tokenStart",o),Object(O.f)(o),t(Object(O.c)()),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(a.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);Object.keys(n).forEach((function(e){r+="; "+e;var t=n[e];!0!==t&&(r+="="+t)})),document.cookie=r}("accessToken",o,{path:"/"}),e.push("/")}}),[t,e]),null};function ot(){var e=Object(k.a)(["footerCreated"]);return ot=function(){return e},e}var it=Object(s.a)({root:{width:"100%",padding:10,position:"fixed",bottom:0,right:0,background:"linear-gradient(0deg, #ccc, transparent)"}}),st=function(){var e=it(),t=Object(j.a)().t;return Object(c.jsx)(N.a,{container:!0,alignItems:"flex-end",justify:"flex-end",className:e.root,children:t(ot())})},lt=n(274),ut=n(254),dt=n(291),ft=n(216),bt=n(265),jt=n(273);function mt(){var e=Object(k.a)(["Loading error"]);return mt=function(){return e},e}var ht=Object(s.a)({root:Object(r.a)({margin:"10px",border:"1px solid ".concat(d.c.palette.grey[500]),borderRadius:5,maxWidth:300},d.c.breakpoints.down("xs"),{display:"none"}),Input:{padding:"5px 1rem",flex:1},BaseInput:{padding:0},Icon:Object(r.a)({fontSize:"2rem",color:d.c.palette.grey[700],paddingRight:5},d.c.breakpoints.down("xs"),{fontSize:"1.6rem",paddingRight:0}),Button:Object(r.a)({margin:"10px"},d.c.breakpoints.up("sm"),{display:"none"}),Popper:Object(r.a)({},d.c.breakpoints.up("sm"),{display:"none"})}),pt=function(){var e=ht(),t=Object(p.b)(),n=Object(o.useState)(""),r=Object(S.a)(n,2),i=r[0],s=r[1],l=Object(o.useState)(null),u=Object(S.a)(l,2),d=u[0],f=u[1],m=Object(b.f)(),h=x().toast,O=Object(j.a)().t,g=function(e){s(e.target.value)},v=function(){var e=Object(C.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===n.key&&(console.log("Searching for: ".concat(i)),a={search:i},t(Object(se.d)({filter:a})).then((function(e){console.log(e),e?m.push(encodeURI("/search/".concat(i))):h(O(mt()),"error")})),s(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Boolean(d),k=w?"search-popover":void 0;return Object(c.jsxs)(ut.a,{children:[Object(c.jsxs)(N.a,{container:!0,alignItems:"center",justify:"flex-end",className:e.root,children:[Object(c.jsx)(dt.a,{className:e.Input,inputProps:{"aria-label":"search for a movie"},value:i,classes:{input:e.BaseInput},onChange:g,onKeyPress:v,placeholder:O("search")}),Object(c.jsx)(jt.a,{className:e.Icon})]}),Object(c.jsx)(T.a,{"aria-describedby":k,className:e.Button,onClick:function(e){e.stopPropagation(),f(d?null:e.currentTarget)},variant:"outlined",children:Object(c.jsx)(jt.a,{className:e.Icon})}),Object(c.jsx)(ft.a,{open:w,anchorEl:d,placement:"bottom-end",transition:!0,className:e.Popper,children:function(t){var n=t.TransitionProps;return Object(c.jsx)(bt.a,Object(a.a)(Object(a.a)({},n),{},{timeout:250,children:Object(c.jsx)(E.a,{children:Object(c.jsx)(F.a,{size:"small",className:e.Input,inputProps:{"aria-label":"search for a movie"},value:i,classes:{root:e.BaseInput},onChange:g,onKeyPress:v,placeholder:O("search")})})}))}})]})},Ot=["en","ru"],gt=Object(s.a)({Button:Object(r.a)({},d.c.breakpoints.down("sm"),{fontSize:"0.7rem"})}),vt=function(){var e=gt(),t=Object(o.useState)(0),n=Object(S.a)(t,2),a=n[0],r=n[1],i=(a+1)%Ot.length,s=Object(j.a)(),l=s.t,u=s.i18n;return Object(c.jsx)("div",{children:Object(c.jsx)(T.a,{onClick:function(){u.changeLanguage(Ot[i]),r(i)},className:e.Button,children:"".concat(l("translate")," ").concat(l(Ot[i]))})})},xt=n(294);function wt(){var e=Object(k.a)(["Email"]);return wt=function(){return e},e}function yt(){var e=Object(k.a)(["Username"]);return yt=function(){return e},e}function kt(){var e=Object(k.a)(["Logout"]);return kt=function(){return e},e}function Ct(){var e=Object(k.a)(["Update info"]);return Ct=function(){return e},e}var St=Object(s.a)({Type:{fontWeight:100,marginRight:10},Text:{fontWeight:300},marginAuto:{marginLeft:"auto",marginRight:10}}),Nt=function(){var e=St(),t=Object(b.f)(),n=Object(p.b)(),a=Object(j.a)().t,r=i.a.useContext(P).onClose,o=Object(f.c)((function(e){return e.user})),s=o.username,l=o.email,u=o.imageBody||void 0;return Object(c.jsxs)(N.a,{container:!0,children:[Object(c.jsxs)(N.a,{item:!0,container:!0,wrap:"nowrap",alignItems:"center",children:[Object(c.jsx)(xt.a,{src:u,alt:s}),Object(c.jsx)(T.a,{onClick:function(){r(),t.push("/settings")},className:e.marginAuto,children:a(Ct())}),Object(c.jsx)(T.a,{onClick:function(){Object(O.e)(),n(Object(O.a)()),r()},children:a(kt())})]}),Object(c.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",children:[Object(c.jsx)(je.a,{className:e.Type,children:a(yt())}),Object(c.jsx)(je.a,{className:e.Text,children:s})]}),Object(c.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",children:[Object(c.jsx)(je.a,{className:e.Type,children:a(wt())}),Object(c.jsx)(je.a,{className:e.Text,children:l})]})]})},It=n(144),Tt=Object(s.a)({root:{color:"#035263","&:hover>":{"& $_0":{animation:"$forward 1s infinite ease-in-out"},"& $_1":{animation:"$stretch1 1s infinite ease-out"},"& $_2":{animation:"$stretch2 0.9s infinite ease-out"},"& $_3":{animation:"$stretch1 1.1s infinite ease-out"},"& $_4":{animation:"$stretch1 0.8s infinite ease-out"}}},_0:{},_1:{},_2:{},_3:{},_4:{},"@keyframes stretch1":{"0%":{opacity:.8,transform:"translateX(0) scaleX(1)"},"10%":{opacity:1,transform:"translateX(-10px) scaleX(1)"},"70%":{opacity:.8},"80%":{opacity:.2,transform:"translateX(-80px) scaleX(1.5)"},"100%":{opacity:0}},"@keyframes forward":{"0%":{transform:"translateX(0)"},"10%":{transform:"translateX(10px) translateY(3px)"},"50%":{transform:"translateX(0px) translateY(-3px)"},"80%":{transform:"translateX(-7px) translateY(4px)"},"100%":{transform:"translateX(0px) translateY(0)"}},"@keyframes stretch2":{"0%":{opacity:.2,transform:"translateX(0) scaleX(1)"},"10%":{opacity:1,transform:"translateX(-15px) scaleX(1.2)"},"80%":{opacity:.6},"90%":{opacity:.2,transform:"translateX(-40px) scaleX(1.4)"},"100%":{opacity:0}}}),Lt=function(e){var t=e.width,n=void 0===t?70:t,a=e.height,r=void 0===a?50:a,o=Tt();return Object(c.jsxs)(It.a,{style:{width:n,height:r},className:o.root,viewBox:"-100 0 584 384",children:[Object(c.jsx)("path",{className:o._0,d:"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z"}),Object(c.jsx)("path",{className:o._1,d:"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z"}),Object(c.jsx)("path",{className:o._2,d:"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z"}),Object(c.jsx)("path",{className:o._3,d:"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z"}),Object(c.jsx)("path",{className:o._4,d:"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z"})]})},Et=Object(s.a)({root:{}}),Rt=function(){var e=Et(),t=Object(p.b)(),n=Object(f.c)((function(e){return e.user})).isAuth;return Object(c.jsxs)(N.a,{container:!0,alignItems:"center",className:e.root,children:[Object(c.jsx)(N.a,{item:!0,xs:2,children:Object(c.jsx)(H.c,{onClick:function(){return t(Object(se.e)())},to:"/",children:Object(c.jsx)(Lt,{})})}),Object(c.jsxs)(N.a,{container:!0,justify:"flex-end",alignItems:"center",wrap:"nowrap",item:!0,xs:8,children:[Object(c.jsx)(vt,{}),Object(c.jsx)(pt,{})]}),Object(c.jsx)(N.a,{container:!0,alignItems:"center",justify:"center",item:!0,xs:1}),Object(c.jsx)(N.a,{container:!0,alignItems:"center",justify:"center",item:!0,xs:1,children:Object(c.jsx)(z,{icon:Object(c.jsx)(lt.a,{}),buttonProps:{variant:"outlined"},children:n?Object(c.jsx)(Nt,{}):Object(c.jsx)(ae,{})})})]})},Mt=Object(s.a)({h3:{fontSize:"1.6rem",textTransform:"uppercase",margin:"10px 0",fontWeight:900}}),Pt=function(e){var t=e.text,n=Mt();return Object(c.jsx)(je.a,{variant:"h3",className:n.h3,children:t})};function zt(){var e=Object(k.a)(["No info"]);return zt=function(){return e},e}var Wt=Object(s.a)((function(e){return{root:{padding:"10px 0"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},HorizontalScroll:{overflowX:"auto"},Image:{height:"10rem",marginRight:10}}})),Bt=function(e){var t=e.src,n=e.name,a=e.type,r=Wt();switch(a){case"photo":return Object(c.jsx)("img",{src:t,alt:n,className:r.Image});case"video":return Object(c.jsx)("video",{controls:!0,src:t,className:r.Image});default:return null}},At=function(e){var t=e.sources,n=e.name,a=e.type,r=Wt(),o=Object(j.a)().t;return Object(c.jsxs)(N.a,{container:!0,direction:"column",className:r.root,children:[Object(c.jsx)(Pt,{text:o("".concat(a,"s"))}),Object(c.jsx)(N.a,{container:!0,wrap:"nowrap",className:r.HorizontalScroll,children:(null===t||void 0===t?void 0:t.length)?t.map((function(e,t){return Object(c.jsx)(Bt,{src:e,name:n,type:a},e+t)})):o(zt())})]})},Ft=Object(s.a)({root:{width:"100%",padding:10,marginBottom:5},h4:{fontWeight:700,fontSize:"1rem",marginBottom:10},Image:{marginRight:10,background:d.a.main},Text:{width:"100%",textAlign:"justify"}}),Dt=function(e){var t=e.username,n=e.text,a=e.avatar,r=Ft();return Object(c.jsxs)(N.a,{container:!0,wrap:"nowrap",className:r.root,children:[Object(c.jsx)(xt.a,{src:a,alt:"".concat(t,"'s avatar"),className:r.Image,children:t.substr(0,2)}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(je.a,{variant:"h4",className:r.h4,children:t}),Object(c.jsx)(je.a,{variant:"body2",className:r.Text,children:n})]})]})};function Ut(){var e=Object(k.a)(["Send"]);return Ut=function(){return e},e}function _t(){var e=Object(k.a)(["Leave a comment!"]);return _t=function(){return e},e}var Vt=Object(s.a)({root:{margin:"1rem 0",minWidth:"30rem"},Form:{width:"100%"},margin:{marginBottom:10}}),Ht=function(){var e=Vt(),t=Object(f.c)((function(e){return e.user})).userId,n=i.a.useState(""),a=Object(S.a)(n,2),r=a[0],o=a[1],s=Object(j.a)().t,l=Object(p.b)(),u=function(){var e=Object(C.a)(y.a.mark((function e(){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length){e.next=2;break}return e.abrupt("return");case 2:return console.log(r),n=window.location.href.split("/").pop(),e.next=6,I.c.post("/comment",{userid:"".concat(t),movieid:n,text:r,time:(new Date).getTime()});case 6:(a=e.sent).data.status&&l(Object(se.i)({id:n,comments:[a.data.data]})),o("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(N.a,{container:!0,direction:"column",className:e.root,children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u()},className:e.Form,children:[Object(c.jsx)(F.a,{fullWidth:!0,multiline:!0,name:"comment",type:"textarea",placeholder:s(_t()),className:e.margin,size:"small",onChange:function(e){return o(e.currentTarget.value)},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&u()},value:r}),Object(c.jsx)(T.a,{type:"submit",className:e.margin,variant:"contained",children:s(Ut())})]})})};function $t(){var e=Object(k.a)(["Comments"]);return $t=function(){return e},e}function Xt(){var e=Object(k.a)(["No comments"]);return Xt=function(){return e},e}var qt=function(e){var t,n,r=e.movie,i=Object(o.useRef)(null),s=Object(p.b)(),l=Object(j.a)().t,u=Object(o.useRef)(0),d=Object(f.c)((function(e){return e.user})).isAuth;if(Object(o.useEffect)((function(){var e;(null===r||void 0===r?void 0:r.info.maxComments)&&((!r.info.comments||r.info.comments&&r.info.comments.length<r.info.maxComments)&&s(Object(se.b)({movieId:r.id,offset:null===(e=r.info.comments)||void 0===e?void 0:e.length},(function(e){return u.current+=e}))))}),[]),Object(o.useEffect)((function(){if(r&&r.info.maxComments){var e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return Object(m.debounce)((function(){e&&(window.pageYOffset+window.innerHeight>e.offsetTop+e.offsetHeight-r?t&&t():n&&n())}),a)}(i.current,(function(){var e,t,n;(null===(e=r.info.comments)||void 0===e?void 0:e.length)&&(null===(t=r.info.comments)||void 0===t?void 0:t.length)<r.info.maxComments&&s(Object(se.b)({movieId:r.id,limit:5,offset:(null===(n=r.info.comments)||void 0===n?void 0:n.length)||0}))}));return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}}),[r,null===(t=r.info.comments)||void 0===t?void 0:t.length,r.info.maxComments,r.id,s]),!r)return null;var b=(null===(n=r.info.comments)||void 0===n?void 0:n.length)?r.info.comments.map((function(e){return Object(o.createElement)(Dt,Object(a.a)(Object(a.a)({},e),{},{key:e.commentid}))})):Object(c.jsx)(je.a,{variant:"body1",style:{fontSize:"1.3rem"},children:l(Xt())});return Object(c.jsxs)(N.a,{ref:i,style:{marginTop:10},container:!0,direction:"column",children:[Object(c.jsx)(Pt,{text:l($t())}),d&&Object(c.jsx)(Ht,{}),b]})},Gt=n(141),Yt=n.n(Gt),Kt=n(96),Zt=n.n(Kt),Jt=(n(275),n(6)),Qt=n(295),en=n(263),tn=n(276),nn=n(277),an=n(278),rn=n(279),cn=n(280),on=n(281),sn=n(282),ln=Object(s.a)({controlsWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(0,0,0,0.6)",display:"flex",flexDirection:"column",justifyContent:"space-between",zIndex:1},controlIcons:{color:"#777",fontSize:50,transform:"scale(0.9)","&:hover":{color:"white",transform:"scale(1)"}},bottomIcons:{color:"#999","&:hover":{color:"white"}},volumeSlider:{width:100}}),un=(Object(Jt.a)({root:{height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(Qt.a),Object(o.forwardRef)((function(e,t){var n=ln(),a=i.a.useState(null),r=Object(S.a)(a,2),o=r[0],s=r[1],l=Boolean(o),u=l?"playbackrate-popover":void 0;return Object(c.jsxs)("div",{className:n.controlsWrapper,ref:t,children:[Object(c.jsx)(N.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",style:{padding:16},children:Object(c.jsx)(N.a,{item:!0,children:Object(c.jsx)(je.a,{variant:"h5",style:{color:"white"},children:e.title})})}),Object(c.jsxs)(N.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:[Object(c.jsx)(en.a,{onClick:e.onRewind,className:n.controlIcons,"aria-label":"reqind",children:Object(c.jsx)(tn.a,{fontSize:"inherit"})}),Object(c.jsx)(en.a,{onClick:e.onPlayPause,className:n.controlIcons,"aria-label":"reqind",children:e.playing?Object(c.jsx)(nn.a,{fontSize:"inherit"}):Object(c.jsx)(an.a,{fontSize:"inherit"})}),Object(c.jsx)(en.a,{onClick:e.onFastForward,className:n.controlIcons,"aria-label":"reqind",children:Object(c.jsx)(rn.a,{fontSize:"inherit"})})]}),Object(c.jsxs)(N.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",style:{padding:16},children:[Object(c.jsx)(N.a,{item:!0,xs:12,children:Object(c.jsx)(Qt.a,{min:0,max:100,value:100*e.played,onChange:function(t,n){return e.onSeek(n)},onMouseDown:e.onSeekMouseDown,onChangeCommitted:e.onSeekMouseUp})}),Object(c.jsx)(N.a,{item:!0,children:Object(c.jsxs)(N.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(c.jsx)(en.a,{onClick:e.onPlayPause,className:n.bottomIcons,children:e.playing?Object(c.jsx)(nn.a,{fontSize:"large"}):Object(c.jsx)(an.a,{fontSize:"large"})}),Object(c.jsx)(en.a,{onClick:e.onMuted,className:n.bottomIcons,children:e.muted?Object(c.jsx)(cn.a,{fontSize:"large"}):Object(c.jsx)(on.a,{fontSize:"large"})}),Object(c.jsx)(Qt.a,{min:0,max:100,value:100*e.volume,className:n.volumeSlider,onChange:e.onVolumeChange,onChangeCommitted:e.onVolumeSeekUp}),Object(c.jsx)(T.a,{onClick:e.onChangeDisplayFormat,variant:"text",style:{color:"#fff",marginLeft:16},children:Object(c.jsxs)(je.a,{children:[e.elapsedTime,"/",e.totalDuration]})})]})}),Object(c.jsxs)(N.a,{item:!0,children:[Object(c.jsx)(T.a,{onClick:function(e){s(e.currentTarget)},variant:"text",className:n.bottomIcons,children:Object(c.jsxs)(je.a,{children:[e.playbackRate,"X"]})}),Object(c.jsx)(L.a,{id:u,open:l,anchorEl:o,onClose:function(){s(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:Object(c.jsx)(N.a,{container:!0,direction:"column-reverse",children:[.5,1,1.5,2].map((function(t){return Object(c.jsx)(T.a,{onClick:function(){return e.onPlaybackRateChange(t)},variant:"text",children:Object(c.jsx)(je.a,{color:t===e.playbackRate?"secondary":void 0,children:t})},t)}))})}),Object(c.jsx)(en.a,{onClick:e.onToggleFullScreen,className:n.bottomIcons,children:Object(c.jsx)(sn.a,{fontSize:"large"})})]})]})]})})));function dn(){var e=Object(k.a)(["Cannot load movie"]);return dn=function(){return e},e}var fn=Object(s.a)({playerWrapper:{position:"relative",width:"100%"},Error:{width:"100%",height:"100%",padding:10,display:"flex",alignItems:"center",justifyContent:"center",background:"#ddd",borderRadius:5}}),bn=function(e){if(isNaN(e))return"00:00";var t=new Date(1e3*e),n=t.getUTCHours(),a=t.getUTCMinutes(),r=t.getUTCSeconds().toString().padStart(2,"0");return n?"".concat(n,":").concat(a.toString().padStart(2,"0"),":").concat(r):"".concat(a,":").concat(r)};var jn=function(e){var t=e.title,n=e.id,r=e.src,i=fn(),s=Object(o.useState)({playing:!0,muted:!0,volume:.5,playbackRate:1,played:0,seeking:!1,controlsVisible:!0,error:!1}),l=Object(S.a)(s,2),u=l[0],d=l[1],f=Object(o.useState)("normal"),b=Object(S.a)(f,2),m=b[0],h=b[1],p=u.playing,O=u.muted,g=u.volume,v=u.playbackRate,x=u.played,w=u.seeking,y=u.controlsVisible,k=u.error,C=Object(o.useRef)(null),N=Object(o.useRef)(null),I=Object(o.useRef)(null),T=Object(o.useRef)(),L=n?"/api/loader/".concat(n):r,E=Object(j.a)().t,R=C&&C.current?C.current.getCurrentTime():0,M=C&&C.current?C.current.getDuration():0,P="normal"===m?bn(R):"-".concat(bn(M-R)),z=bn(M);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{ref:N,className:i.playerWrapper,onMouseMove:function(){I&&I.current&&(I.current.style.visibility="visible",T.current&&clearTimeout(T.current))},children:k?Object(c.jsx)("div",{className:i.Error,children:E(dn())}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Yt.a,{ref:C,width:"100%",height:"100%",url:L,muted:O,playing:p,volume:g,controls:!1,playbackRate:v,onProgress:function(e){var t=e.played;I&&I.current&&(T.current=setTimeout((function(){I&&I.current&&(I.current.style.visibility="hidden")}),3e3),u.seeking||d(Object(a.a)(Object(a.a)({},u),{},{played:t})))},onError:function(e){console.log("handleError",e),d(Object(a.a)(Object(a.a)({},u),{},{error:!0}))}}),y&&Object(c.jsx)(un,{ref:I,onPlayPause:function(){d(Object(a.a)(Object(a.a)({},u),{},{playing:!u.playing}))},onMuted:function(){d(Object(a.a)(Object(a.a)({},u),{},{muted:!u.muted}))},playing:p,muted:O,volume:g,played:x,seeking:w,onRewind:function(){null!==C&&null!==C.current&&C.current.seekTo(C.current.getCurrentTime()-10)},onFastForward:function(){null!==C&&null!==C.current&&C.current.seekTo(C.current.getCurrentTime()+10)},onVolumeChange:function(e,t){var n="number"===typeof t?t:t[0];d(Object(a.a)(Object(a.a)({},u),{},{volume:n/100,muted:0===n}))},onVolumeSeekUp:function(e,t){var n="number"===typeof t?t:t[0];d(Object(a.a)(Object(a.a)({},u),{},{volume:n/100,muted:0===n}))},playbackRate:v,onPlaybackRateChange:function(e){d(Object(a.a)(Object(a.a)({},u),{},{playbackRate:e}))},onToggleFullScreen:function(){N&&N.current&&Zt.a&&Zt.a.isEnabled&&null!==N&&Zt.a.toggle(N.current)},onSeek:function(e){if(C&&C.current){var t="number"===typeof e?e/100:e[0]/100;t!==u.played&&(d(Object(a.a)(Object(a.a)({},u),{},{played:t})),C.current.seekTo(t,"fraction"))}},onSeekMouseDown:function(){d(Object(a.a)(Object(a.a)({},u),{},{seeking:!0}))},onSeekMouseUp:function(){d(Object(a.a)(Object(a.a)({},u),{},{seeking:!1}))},elapsedTime:P,totalDuration:z,onChangeDisplayFormat:function(){h("normal"===m?"remaining":"normal")},title:t})]})})})},mn=Object(s.a)({root:{width:"100%",height:"100%"}}),hn=function(e){var t=e.src,n=e.id,a=mn(),r=Object(o.useRef)(null),i=n?"/api/loader/".concat(n):t;return Object(c.jsx)("div",{children:Object(c.jsxs)("video",{controls:!0,ref:r,className:a.root,children:[Object(c.jsx)("source",{src:i}),Object(c.jsx)("p",{children:"This is fallback content"})]})})};function pn(){var e=Object(k.a)(["No info"]);return pn=function(){return e},e}function On(){var e=Object(k.a)(["About movie"]);return On=function(){return e},e}function gn(){var e=Object(k.a)(["Actors"]);return gn=function(){return e},e}function vn(){var e=Object(k.a)(["Directed"]);return vn=function(){return e},e}function xn(){var e=Object(k.a)(["PG rating"]);return xn=function(){return e},e}function wn(){var e=Object(k.a)(["Views"]);return wn=function(){return e},e}function yn(){var e=Object(k.a)(["unknown"]);return yn=function(){return e},e}function kn(){var e=Object(k.a)(["Length"]);return kn=function(){return e},e}function Cn(){var e=Object(k.a)(["Genres"]);return Cn=function(){return e},e}function Sn(){var e=Object(k.a)(["Year"]);return Sn=function(){return e},e}var Nn=Object(s.a)({root:{fontSize:"1.3rem",padding:"10px 0"},Header:{fontSize:"2rem",margin:"0 10px",fontWeight:700},Divider:{margin:"10px 0"},Poster:{height:"23rem",marginRight:10},MainInfoText:{margin:5,width:"100%",display:"flex",alignItems:"flex-end",fontSize:"inherit",fontWeight:200},Link:{marginLeft:5,fontSize:"inherit",color:"inherit",fontWeight:"inherit",textTransform:"capitalize","&:hover":{color:d.a.light}},Description:{marginTop:10,fontSize:"inherit"},Video:{margin:"15px 0"},AdditionalInfo:{margin:"10px 0"}}),In=function(e){var t=e.match,n=Nn(),a=Object(p.b)(),r=Object(j.a)(),s=r.t,l=r.i18n,u=Object(b.f)(),d=x().toast,m=(Object(f.c)((function(e){return e.user})).isAuth,Object(f.c)((function(e){return e.movies}))),h=m.movies,O=m.error,g=h.find((function(e){return e.en.id===t.params.id})),v=i.a.useRef(null);Object(o.useEffect)((function(){g||a(Object(se.c)(t.params.id))}),[]),Object(o.useEffect)((function(){O&&(u.push("/"),d({text:O[l.language]},"error"),a(Object(se.f)()))}),[O,a,u,s,d,l.language]),Object(o.useEffect)((function(){v&&v.current&&v.current.scrollIntoView(!0)}),[]);var w,y,k=function(e,t){return e&&e.length?e.map((function(e){return"string"===typeof e?e:e.name})).join(", "):t||s("No info")};return g?Object(c.jsxs)(N.a,{container:!0,direction:"column",className:n.root,children:[Object(c.jsx)(je.a,{variant:"h2",className:n.Header,ref:v,children:g[l.language].title}),Object(c.jsx)(me.a,{className:n.Divider}),Object(c.jsxs)(N.a,{container:!0,wrap:"nowrap",children:[Object(c.jsx)("img",{className:n.Poster,src:g.en.img,alt:"".concat(g.en.title," poster")}),Object(c.jsxs)(N.a,{item:!0,container:!0,direction:"column",children:[Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(Sn()),": ",g.en.info.year]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(Cn()),": ",(w=g.en.info.genres,w&&w.length?w.map((function(e){var t="string"===typeof e?e:e.name;return Object(c.jsx)(H.b,{to:"/genres/".concat(t),className:n.Link,children:s(t)},t)})):y||s("No info"))]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(kn()),":"," ",g.en.info.length>0?"".concat(g.en.info.length).concat(s("min")):s(yn())]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(wn()),": ",g.en.info.views]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(xn()),": ",g.en.info.pgRating]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(vn()),":"," ",k(g.en.info.directorList,g.en.info.directors)]}),Object(c.jsxs)(N.a,{container:!0,className:n.MainInfoText,children:[s(gn()),": ",k(g.en.info.cast,g.en.info.stars)]})]})]}),Object(c.jsxs)(N.a,{container:!0,className:n.Video,children:[Object(c.jsx)(hn,{id:g.en.id}),Object(c.jsx)(hn,{src:"/api/test/".concat(g.en.id)}),Object(c.jsx)(jn,{src:"/api/test/".concat(g.en.id),title:g[l.language].title})]}),Object(c.jsxs)(N.a,{container:!0,direction:"column",className:n.AdditionalInfo,children:[Object(c.jsx)(Pt,{text:s(On())}),Object(c.jsx)(je.a,{variant:"body1",className:n.Description,children:g[l.language].info.description||s(pn())}),Object(c.jsx)(me.a,{className:n.Divider}),g.en.info.photos&&Object(c.jsx)(At,{sources:g.en.info.photos,name:g.en.title,type:"photo"}),g.en.info.videos&&Object(c.jsx)(At,{sources:g.en.info.videos,name:g.en.title,type:"video"}),Object(c.jsx)(qt,{movie:g.en})]})]}):null},Tn=n(283),Ln=n(142),En=n.n(Ln),Rn=Object(s.a)((function(e){return{root:Object(r.a)({},e.breakpoints.up("sm"),{minWidth:"344px !important"}),card:{display:"flex",width:"100%"},default:{backgroundColor:e.palette.grey[800]},prompt:{backgroundColor:e.palette.grey[800],width:550},info:{backgroundColor:e.palette.info.main},success:{backgroundColor:e.palette.success.main},warning:{backgroundColor:e.palette.warning.dark},error:{backgroundColor:e.palette.error.main},header:{display:"block",fontWeight:"bold",color:e.palette.common.white},actionRoot:{padding:"8px 8px 8px 26px"},close:{marginLeft:"auto !important",color:e.palette.common.white},text:{fontSize:"1rem",color:e.palette.common.white}}})),Mn=i.a.forwardRef((function(e,t){var n=e.id,r=Rn(),o=Object(u.b)().closeSnackbar,i=Object(f.c)((function(e){return e.snack.notifications})).find((function(e){return e.key===n})),s=Object(a.a)({},i),l=s.text,d=s.variant,b=s.header;return Object(c.jsx)(E.a,{ref:t,className:r.root,children:Object(c.jsxs)(be.a,{className:V()(r.card,r[d]),children:[Object(c.jsxs)(Tn.a,{classes:{root:r.actionRoot},children:[b&&Object(c.jsxs)(je.a,{variant:"subtitle2",className:r.header,children:[b,":"]}),l&&Object(c.jsx)(je.a,{variant:"body1",className:r.text,children:l})]}),Object(c.jsx)(en.a,{className:r.close,onClick:function(){o(n)},children:Object(c.jsx)(En.a,{color:"inherit"})})]})})})),Pn=[],zn=function(){var e=Object(p.b)(),t=Object(f.c)((function(e){return e.snack.notifications})),n=Object(u.b)(),r=n.enqueueSnackbar,c=n.closeSnackbar;return Object(o.useEffect)((function(){t.forEach((function(t){var n,o=t.key,i=t.text,s=t.options,l=void 0===s?{}:s,u=t.dismissed;void 0!==u&&u?c(o):Pn.includes(o)||(r(i,Object(a.a)(Object(a.a)({key:o},l),{},{onClose:function(e,t,n){l.onClose&&l.onClose(e,t,n)},onExited:function(t,n){var a;e(Object(g.c)({key:n})),a=n,Pn=Pn.filter((function(e){return a!==e}))}})),n=o,Pn=[].concat(Object(fe.a)(Pn),[n]))}))}),[t,r,e,c]),null};function Wn(){var e=Object(k.a)(["Restore password"]);return Wn=function(){return e},e}function Bn(){var e=Object(k.a)(["Server error"]);return Bn=function(){return e},e}function An(){var e=Object(k.a)(["Server error"]);return An=function(){return e},e}function Fn(){var e=Object(k.a)(["Check your email"]);return Fn=function(){return e},e}var Dn=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),Un=function(){var e=Dn(),t=Object(o.useState)({email:""}),n=Object(S.a)(t,2),i=n[0],s=n[1],l=Object(o.useState)({email:!1}),u=Object(S.a)(l,2),d=u[0],f=u[1],b=Object(j.a)(),m=b.t,h=b.i18n,p=d.email,O=x().toast,g=Object(o.useCallback)((function(e){e.stopPropagation(),s(Object(a.a)(Object(a.a)({},i),{},Object(r.a)({},e.target.name,e.target.value)))}),[i]),v=Object(o.useCallback)(function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[ForgotPassword] handleSubmit",i),e.prev=2,e.next=5,I.d.post("repair",{email:i.email});case 5:n=e.sent,console.log(n),n.status<400?O({text:m(Fn())}):(console.log(n.data[h.language]),O({text:n.data[h.language]||m(An())},"error")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),O(m(Bn()),"error");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[i,O,m,h.language]),w=Object(o.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:m("Email"),placeholder:m("Enter email"),value:i.email,onChange:g,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return f((function(t){return Object(a.a)(Object(a.a)({},t),{},{email:e})}))},rules:{helperText:m("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],buttons:[{type:"submit",variant:"contained",onClick:v,text:m(Wn()),disabled:!p},{to:"/login",variant:"outlined",text:m("Login")},{to:"/register",variant:"outlined",text:m("Register")}]}}),[i.email,g,v,p,m]);return Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(c.jsx)(X,Object(a.a)({},w))})};function _n(){var e=Object(k.a)(["Save new password"]);return _n=function(){return e},e}function Vn(){var e=Object(k.a)(["confirmError"]);return Vn=function(){return e},e}function Hn(){var e=Object(k.a)(["Confirm password"]);return Hn=function(){return e},e}function $n(){var e=Object(k.a)(["Confirm"]);return $n=function(){return e},e}function Xn(){var e=Object(k.a)(["passwordError"]);return Xn=function(){return e},e}function qn(){var e=Object(k.a)(["Enter password"]);return qn=function(){return e},e}function Gn(){var e=Object(k.a)(["New password"]);return Gn=function(){return e},e}function Yn(){var e=Object(k.a)(["Server error"]);return Yn=function(){return e},e}function Kn(){var e=Object(k.a)(["Server error"]);return Kn=function(){return e},e}function Zn(){var e=Object(k.a)(["Password changed"]);return Zn=function(){return e},e}function Jn(){var e=Object(k.a)(["ServerErrorTry"]);return Jn=function(){return e},e}var Qn=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),ea=function(){var e=Qn(),t=Object(o.useState)({password:"",confirm:""}),n=Object(S.a)(t,2),i=n[0],s=n[1],l=Object(o.useState)({password:!1,confirm:!1}),u=Object(S.a)(l,2),d=u[0],f=u[1],m=Object(j.a)(),p=m.t,O=m.i18n,g=d.password&&d.confirm,v=x().toast,w=Object(b.f)(),k=Object(o.useMemo)((function(){var e=function(e){e.stopPropagation(),s(Object(a.a)(Object(a.a)({},i),{},Object(r.a)({},e.target.name,e.target.value)))},t=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("[ForgotPassword] handleSubmit",i),null===(n=h())||void 0===n?void 0:n.repairToken){e.next=7;break}return v({text:p(Jn())},"error"),w.push("/forgot_password"),e.abrupt("return");case 7:return e.prev=7,e.next=10,I.d.patch("repair/patch",{passwd:i.password},{headers:{repairToken:n.repairToken}});case 10:a=e.sent,console.log(a),a.status<400?(v({text:p(Zn())}),w.push("/login")):v({text:null!==(r=a.data[O.language])&&void 0!==r?r:p(Kn())},"error"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),v(p(Yn()),"error");case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}();return{inputs:[{name:"password",type:"password",label:p(Gn()),placeholder:p(qn()),value:i.password,onChange:e,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return f((function(t){return Object(a.a)(Object(a.a)({},t),{},{password:e})}))},rules:{helperText:p(Xn()),rule:{minLength:6,maxLength:25,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/}}},{name:"confirm",type:"password",label:p($n()),placeholder:p(Hn()),value:i.confirm,onChange:e,size:"small",fullWidth:!0,required:!0,onValidate:function(e){return f((function(t){return Object(a.a)(Object(a.a)({},t),{},{confirm:e})}))},rules:{helperText:p(Vn()),rule:{minLength:6,maxLength:25,regex:new RegExp("^".concat(i.password,"$"))}}}],buttons:[{type:"submit",variant:"contained",onClick:t,text:p(_n()),disabled:!g}]}}),[i,g,p,O.language,v,w]);return Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(c.jsx)(X,Object(a.a)({},k))})};function ta(){var e=Object(k.a)(["Save new email"]);return ta=function(){return e},e}function na(){var e=Object(k.a)(["Server error"]);return na=function(){return e},e}function aa(){var e=Object(k.a)(["Server error"]);return aa=function(){return e},e}function ra(){var e=Object(k.a)(["Check your email"]);return ra=function(){return e},e}var ca=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"}}),oa=function(){var e=ca(),t=Object(o.useState)({email:""}),n=Object(S.a)(t,2),i=n[0],s=n[1],l=Object(o.useState)({email:!1}),u=Object(S.a)(l,2),d=u[0],f=u[1],b=Object(j.a)(),m=b.t,h=b.i18n,p=d.email,O=x().toast,g=Object(o.useCallback)((function(e){e.stopPropagation(),s(Object(a.a)(Object(a.a)({},i),{},Object(r.a)({},e.target.name,e.target.value)))}),[i]),v=Object(o.useCallback)(function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("[ChangeEmail] handleSubmit",i),e.prev=2,e.next=5,I.b.post("patch",{body:{email:i.email}});case 5:n=e.sent,console.log(n),n.status<400?O(m(ra())):(console.log(n.data[h.language]),r={text:null!==(a=n.data[h.language])&&void 0!==a?a:m(aa())},O(r,"error")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),O(m(na()),"error");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[i,m,h.language,O]),w=Object(o.useMemo)((function(){return{inputs:[{name:"email",type:"email",label:m("Email"),placeholder:m("Enter email"),value:i.email,onChange:g,size:"small",fullWidth:!0,required:!0,onValidate:function(e){f((function(t){return Object(a.a)(Object(a.a)({},t),{},{email:e})}))},rules:{helperText:m("emailError"),rule:{minLength:6,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],buttons:[{type:"submit",variant:"contained",onClick:v,text:m(ta()),disabled:!p}]}}),[i.email,p,g,v,m]);return Object(c.jsx)(N.a,{container:!0,direction:"column",alignItems:"center",className:e.root,children:Object(c.jsx)(X,Object(a.a)({},w))})},ia=n.p+"static/media/defaultAvatar.41c95564.png",sa=n(284);function la(){var e=Object(k.a)(["Back"]);return la=function(){return e},e}function ua(){var e=Object(k.a)(["User info updated"]);return ua=function(){return e},e}function da(){var e=Object(k.a)(["Update error"]);return da=function(){return e},e}function fa(){var e=Object(k.a)(["User info updated"]);return fa=function(){return e},e}function ba(){var e=Object(k.a)(["Update error"]);return ba=function(){return e},e}function ja(){var e=Object(k.a)(["Check your email"]);return ja=function(){return e},e}function ma(){var e=Object(k.a)(["Update error"]);return ma=function(){return e},e}function ha(){var e=Object(k.a)(["Avatar uploaded"]);return ha=function(){return e},e}function pa(){var e=Object(k.a)(["Avatar upload error"]);return pa=function(){return e},e}var Oa=Object(s.a)({root:{padding:"2rem 1rem",minWidth:"30rem"},avatarWrapper:{position:"relative","&:hover":{cursor:"pointer","& $uploadIcon":{opacity:.7},"& $avatarImage":{opacity:.5}}},avatarImage:{width:"100px",height:"100px",border:"2px solid rgba(3, 82, 99, 0.5)",opacity:1,transition:"0.2s"},inputNone:{display:"none"},uploadIcon:{position:"absolute",transition:"0.2s",top:20,left:20,width:60,height:60,opacity:0,zIndex:2}}),ga=function(){var e=Object(f.c)((function(e){return e.user})),t=Object(o.useState)({email:e.email,username:e.username,newPassword:"",currentPassword:"",confirm:"",avatarImage:e.imageBody}),n=Object(S.a)(t,2),i=n[0],s=n[1],l=Object(o.useState)({email:!0,newPassword:!0,currentPassword:!0,confirm:!0,username:!0}),u=Object(S.a)(l,2),d=u[0],m=u[1],h=Oa(),g=Object(j.a)(),v=g.t,w=g.i18n,k=Object(o.useRef)(null),T=x().toast,L=Object(p.b)(),E=Object(b.f)(),R=function(){var e=d.email,t=d.username,n=d.currentPassword,a=d.confirm;return i.newPassword?n&&a&&(e||t):e||t}(),M=Object(o.useMemo)((function(){var t=function(e){e.preventDefault(),s((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))},n=function(){var t=Object(C.a)(y.a.mark((function t(){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={email:i.email},t.next=3,I.b.patch("patch",n,{headers:{accessToken:Object(O.d)()}});case 3:r=t.sent,console.log(r.data),r.status>=400?T({text:r.data[w.language]||v(ma())},"error"):(L(Object(O.g)({user:Object(a.a)(Object(a.a)({},e),{},{email:i.email})})),T({text:v(ja())}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=Object(C.a)(y.a.mark((function t(){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:i.username},t.next=3,I.e.patch("patch",n,{headers:{accessToken:Object(O.d)()}});case 3:r=t.sent,console.log(r.data),r.status>=400?T({text:r.data[w.language]||v(ba())},"error"):(L(Object(O.g)({user:Object(a.a)(Object(a.a)({},e),{},{username:i.username})})),T({text:v(fa())}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={passwd:i.currentPassword,newPasswd:i.newPassword},e.next=3,I.d.patch("patch",t,{headers:{accessToken:Object(O.d)()}});case 3:n=e.sent,console.log(n.data),n.status>=400?T({text:n.data[w.language]||v(da())},"error"):(T({text:v(ua())}),s(Object(a.a)(Object(a.a)({},i),{},{currentPassword:"",confirm:"",newPassword:""})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var t=Object(C.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),i.email!==e.email&&n(),i.username!==e.username&&c(),i.newPassword&&o(),console.log("[Settings] handleSubmit",i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{inputs:[{name:"email",type:"email",label:v("Email"),placeholder:v("Enter email"),value:i.email,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("emailError"),rule:{minLength:0,maxLength:40,regex:/^(([\w%+-.]+)@([\w-]+\.)+([\w]{2,}))?$/i}}},{name:"username",type:"text",label:v("Username"),placeholder:v("Enter username"),value:i.username,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("usernameError"),rule:{minLength:0,maxLength:20,regex:/^([\w-+.]+)?$/}}},{name:"newPassword",type:"password",label:v("New password"),placeholder:v("Enter new password"),value:i.newPassword,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("passwordError"),rule:{minLength:0,maxLength:25,regex:/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/}}},{name:"confirm",type:"password",label:v("Confirm"),placeholder:v("Confirm password"),value:i.confirm,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{confirm:e})}))},rules:{helperText:v("confirmError"),rule:{minLength:0,maxLength:25,regex:new RegExp("^".concat(i.newPassword,"$"))}}},{name:"currentPassword",type:"password",label:v("Current password"),placeholder:v("Enter current password"),value:i.currentPassword,onChange:t,size:"small",fullWidth:!0,onValidate:function(e){return m((function(t){return Object(a.a)(Object(a.a)({},t),{},{currentPassword:e})}))},rules:{helperText:v("currentPasswordError"),rule:{minLength:i.newPassword.length?1:0,maxLength:25}}}],buttons:[{type:"submit",variant:"contained",onClick:l,text:v("Save"),disabled:!R},{variant:"outlined",onClick:function(){return E.goBack()},text:v(la())}]}}),[i,R,v,L,w.language,T,e,E]);return Object(c.jsxs)(N.a,{container:!0,direction:"column",alignItems:"center",className:h.root,children:[Object(c.jsx)(je.a,{children:v("Settings").toUpperCase()}),Object(c.jsxs)("div",{className:h.avatarWrapper,onClick:function(){k&&k.current&&k.current.click()},children:[Object(c.jsx)(xt.a,{className:h.avatarImage,alt:"profile image",src:i.avatarImage||ia}),Object(c.jsx)(sa.a,{className:h.uploadIcon}),Object(c.jsx)("input",{className:h.inputNone,type:"file",accept:"image/png, image/jpeg, image/jpg",ref:k,onChange:function(t){if(t.target.files){var n=t.target.files[0];if(!function(e){return"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type}(n))return t.target.value="",T({text:"Please add image only!"});if(n.size>2e6)return t.target.value="",T({text:"Please upload picture size less then 2 mb!"});var r=new FileReader;r.onload=function(){var t=Object(C.a)(y.a.mark((function t(n){var r,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.target&&n.target.result){t.next=2;break}return t.abrupt("return");case 2:return r=n.target.result.toString(),s(Object(a.a)(Object(a.a)({},i),{},{avatarImage:r})),c={imageBody:r},t.next=7,I.e.patch("patch",c,{headers:{accessToken:Object(O.d)()}});case 7:t.sent.status>=400?T({text:v(pa())},"error"):(L(Object(O.g)({user:Object(a.a)(Object(a.a)({},e),{},{imageBody:r})})),T({text:v(ha())}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.readAsDataURL(n)}}})]}),Object(c.jsx)(X,Object(a.a)({},M))]})},va=Object(s.a)({root:Object(r.a)({maxWidth:"100%",minWidth:500,margin:0},d.c.breakpoints.down("xs"),{padding:0}),Wrapper:Object(r.a)({maxWidth:840},d.c.breakpoints.down("xs"),{padding:0,margin:0}),Slider:{height:400,minHeight:300}});t.default=function(){var e=va(),t=Object(p.b)(),n=Object(f.c)((function(e){return e.user})).isAuth,r=x().toast,i=Object(j.a)().i18n;Object(o.useEffect)((function(){var e=h();if(console.log(e),null===e||void 0===e?void 0:e.error){var t=i.language;r({text:e.error[t]},"error")}}),[]),Object(o.useEffect)((function(){Object(O.d)()&&t(Object(O.c)())}),[t]);var s=n?Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{path:"/settings",component:ga}),Object(c.jsx)(b.a,{path:"/forgot_password",component:Un}),Object(c.jsx)(b.a,{path:"/change_email",component:oa}),Object(c.jsx)(b.a,{path:"/movies/:id",component:In}),Object(c.jsx)(b.a,{path:"/search/:id",render:function(e){return Object(c.jsx)(Qe,Object(a.a)(Object(a.a)({},e),{},{route:"search"}))}}),Object(c.jsx)(b.a,{path:"/byname/:id",render:function(e){return Object(c.jsx)(Qe,Object(a.a)(Object(a.a)({},e),{},{route:"byname"}))}}),Object(c.jsx)(b.a,{path:"/",component:Qe})]}):Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{path:"/auth",component:ct}),Object(c.jsx)(b.a,{path:"/register",component:rt}),Object(c.jsx)(b.a,{path:"/login",component:ce}),Object(c.jsx)(b.a,{path:"/reset_password",component:ea}),Object(c.jsx)(b.a,{path:"/forgot_password",component:Un}),Object(c.jsx)(b.a,{path:"/movies/:id",component:In}),Object(c.jsx)(b.a,{path:"/search/:id",render:function(e){return Object(c.jsx)(Qe,Object(a.a)(Object(a.a)({},e),{},{route:"search"}))}}),Object(c.jsx)(b.a,{path:"/byname/:id",render:function(e){return Object(c.jsx)(Qe,Object(a.a)(Object(a.a)({},e),{},{route:"byname"}))}}),Object(c.jsx)(b.a,{path:"/",component:Qe})]});return Object(c.jsx)(l.a,{className:e.root,children:Object(c.jsx)(l.a,{className:e.Wrapper,children:Object(c.jsxs)(u.a,{maxSnack:3,classes:{containerRoot:e.root},content:function(e){return Object(c.jsx)(Mn,{id:e})},children:[Object(c.jsx)(Rt,{}),s,Object(c.jsx)(st,{}),Object(c.jsx)(zn,{})]})})})}},23:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return x}));var a=n(9),r=n.n(a),c=n(18),o=n(55),i=n(46),s=n(25),l=Object(i.b)({name:"movies",initialState:{loading:!1,error:null,movies:[],search:[],popular:[],byName:[],isEndOfMovies:!1},reducers:{addMovies:function(e,t){var n=t.payload,a=function(t){var a;if(console.log("[loadMovies] payload, moviesLength",n,e.movies.length),n[t]&&(null===(a=n[t])||void 0===a?void 0:a.length))if(e.movies.length){var r,c=null===(r=n[t])||void 0===r?void 0:r.filter((function(t){return!e.movies.find((function(e){return e.en.id===t.en.id}))}));console.log("[loadMovies] newMovies",c),(null===c||void 0===c?void 0:c.length)&&(e.movies=e.movies.concat(c));var o=new Set(e[t].concat((n[t]||[]).map((function(e){return e.en.id}))));e[t]=Array.from(o)}else{var i=n[t]||[];e.movies=i,e[t]=i.map((function(e){return e.en.id}))}};if(e.loading=!1,n.search)a("search");else if(n.byName)a("byName");else{if(!n.popular)throw new Error("[movies:addMovies] no movies in payload");a("popular")}},setMovies:function(e,t){var n=t.payload,a=function(t){var a;if(n[t]){var r,c=null===(a=n[t])||void 0===a?void 0:a.filter((function(t){return!e.movies.find((function(e){return e.en.id===t.en.id}))}));if(c)e.movies=e.movies.concat(c),e[t]=(null===(r=n[t])||void 0===r?void 0:r.map((function(e){return e.en.id})))||[]}};if(e.loading=!1,n.search)a("search");else if(n.byName)a("byName");else{if(!n.popular)throw new Error("[movies:setMovies] no movies in payload");a("popular")}},updateComments:function(e,t){var n=t.payload;if(e.loading=!1,!n.id)throw new Error("[movies:updateComments] no id in payload");if(!n.comments)throw new Error("[movies:updateComments] no comments in payload");var a=e.movies.find((function(e){return e.en.id===n.id}));if(!a)throw new Error("[movies:updateComments] no movie found");var r=n.comments.filter((function(e){return a.en.info.comments?!a.en.info.comments.find((function(t){return t.commentid===e.commentid})):!!e}));a.en.info.comments=a.en.info.comments?[].concat(Object(o.a)(a.en.info.comments),Object(o.a)(r)):Object(o.a)(r)},setEndOfMovies:function(e){e.isEndOfMovies=!0},resetEndOfMovies:function(e){e.isEndOfMovies=!1},setError:function(e,t){var n=t.payload;e.error=n.error,e.loading=!1},resetError:function(e){e.error=null,e.loading=!1},startLoading:function(e){e.loading=!0},stopLoading:function(e){e.loading=!1}}}),u=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("[loadMoviesAsync] params",t),n=null,!(null===t||void 0===t?void 0:t.search)){e.next=9;break}return e.next=6,Object(s.f)("find",{params:{category:"All",search:null===t||void 0===t?void 0:t.search}});case 6:n=e.sent,e.next=18;break;case 9:if(!(null===t||void 0===t?void 0:t.letter)){e.next=15;break}return e.next=12,Object(s.c)("byname",{params:t});case 12:n=e.sent,e.next=18;break;case 15:return e.next=17,Object(s.c)("movies",{params:t});case 17:n=e.sent;case 18:return e.abrupt("return",n.data);case 21:return e.prev=21,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=e.filter,n=void 0===t?{limit:20,offset:0}:t,a=e.callback;return function(){var e=Object(c.a)(r.a.mark((function e(t){var c,o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),c=n.limit||20,console.log("[loadMovies] filter",n),e.next=5,u(n);case 5:if(o=e.sent,console.log("[loadMovies] res",o),!(null===o||void 0===o?void 0:o.status)||!o.data){e.next=16;break}return o.data.length<c&&t(O()),s=null===(i=o.data)||void 0===i?void 0:i.map((function(e){return e.ru?e:{en:e.en,ru:e.en}})),console.log("[loadMovies] removedNulls:",s),n.letter?t(m({byName:s})):n.search?n.offset&&n.offset>0?t(m({search:s})):t(h({search:s})):t(m({popular:s})),a&&a(!o||!o.data||o.data.length<c),e.abrupt("return",s);case 16:return t(y()),(null===o||void 0===o?void 0:o.error)&&t(v({error:o.error})),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(w()),t.next=3,u({id:e});case 3:a=t.sent,console.log("loadMovie",a),(null===a||void 0===a?void 0:a.status)&&a.data?n(m({search:a.data})):n(v({error:{ru:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u043a\u0438 \u0444\u0438\u043b\u044c\u043c\u0430",en:"Cannot load movie"}}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){var n=e.movieId,a=e.limit,o=void 0===a?5:a,i=e.offset,l=void 0===i?0:i;return function(){var e=Object(c.a)(r.a.mark((function e(a){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(w()),e.next=3,Object(s.c)("comments",{params:{movieId:n,limit:o,offset:l}});case 3:c=e.sent,console.log("loadComments",c.data),c.data.status&&((i=c.data.data).length&&a(p({comments:i,id:n})),t&&t(i.length));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=l.actions,m=j.addMovies,h=j.setMovies,p=j.updateComments,O=j.setEndOfMovies,g=j.resetEndOfMovies,v=j.setError,x=j.resetError,w=j.startLoading,y=j.stopLoading;t.a=l.reducer},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(59),r=n.n(a),c=(r.a.CancelToken,r.a.create({baseURL:"/api/auth/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}})),o=r.a.create({baseURL:"/api/profile/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),i=r.a.create({baseURL:"/api/passwd/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),s=r.a.create({baseURL:"/api/email/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),l=r.a.create({baseURL:"/api/search/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),u=r.a.create({baseURL:"/api/movies/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}});r.a.create({baseURL:"/api/test/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}}),r.a.create({baseURL:"/api/",withCredentials:!0,validateStatus:function(e){return e>=200&&e<500}})},26:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return p}));var a=n(9),r=n.n(a),c=n(18),o=n(46),i=n(25),s="hypertubeAuthToken",l=Object(o.b)({name:"user",initialState:{isAuth:!1,isLoading:!1,userId:0,email:"",username:"",firstName:"",lastName:"",imageBody:null},reducers:{saveUserState:function(e,t){var n=t.payload;if(!n.user)throw new Error("[userSlice:saveState] no user in payload");return{isAuth:e.isAuth,isLoading:e.isLoading,userId:n.user.userId||e.userId,email:n.user.email||e.email,username:n.user.username||e.username,firstName:n.user.firstName||e.firstName,lastName:n.user.lastName||e.lastName,imageBody:n.user.imageBody||e.imageBody}},authSuccess:function(e){e.isAuth=!0},authFail:function(e){e.isAuth=!1},startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1}}}),u=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,e.next=4,Object(i.e)("get",{headers:{accessToken:b()}});case 4:n=e.sent,console.log(n.data),n.data.en?(t(p()),f()):(t(m({user:n.data})),t(h())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:t(g());case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){localStorage.setItem(s,e)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;localStorage.removeItem(e)},b=function(){return localStorage.getItem(s)},j=l.actions,m=j.saveUserState,h=j.authSuccess,p=j.authFail,O=j.startLoading,g=j.stopLoading;t.b=l.reducer},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o}));var a=n(107),r={light:"#05829E",main:"#035263",dark:"#02313B",contrastText:"#fff"},c={light:"#F19941",main:"#EE851B",dark:"#D17010",contrastText:"#fff",contrastTextLighter:"#333"},o=Object(a.a)({palette:{primary:r,secondary:c,background:{light:"#FFFFFF",default:"#FAFAFA",dark:"#DDDDDD",contrastText:"#121212"}},typography:{fontFamily:['"Quicksand"','"Helvetica Neue"',"Roboto","Arial","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},props:{MuiButton:{variant:"outlined",color:"primary"},MuiTextField:{variant:"outlined",color:"primary"}}})},33:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"j",(function(){return k})),n.d(t,"i",(function(){return C}));var a=n(104),r=n(9),c=n.n(r),o=n(18),i=n(21),s=n(3),l=n(46),u=n(23),d={genres:["Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","Film Noir","History","Horror","Music","Mystery","Romance","Sci-Fi","Short","Sport","Superhero","Thriller","War","Western"],years:["before 1980","1980-1990","1990-2000","2000-2010","2010-2020"],countries:["Australia","Canada","France","Germany","Great Britain","India","Japan","Russia","Spain","USA","USSR","other"]},f={genres:{Action:!1,Adventure:!1,Animation:!1,Biography:!1,Comedy:!1,Crime:!1,Documentary:!1,Drama:!1,Family:!1,Fantasy:!1,"Film Noir":!1,History:!1,Horror:!1,Music:!1,Mystery:!1,Romance:!1,"Sci-Fi":!1,Short:!1,Sport:!1,Superhero:!1,Thriller:!1,War:!1,Western:!1},years:{"before 1980":!1,"1980-1990":!1,"1990-2000":!1,"2000-2010":!1,"2010-2020":!1},countries:{Australia:!1,Canada:!1,France:!1,Germany:!1,"Great Britain":!1,India:!1,Japan:!1,Russia:!1,Spain:!1,USA:!1,USSR:!1,other:!1}},b=Object(l.b)({name:"filter",initialState:f,reducers:{setFilterState:function(e,t){var n=t.payload.filter,a=n.category,r=n.name,c=n.value;return Object(s.a)(Object(s.a)({},e),{},Object(i.a)({},a,Object(s.a)(Object(s.a)({},e[a]),{},Object(i.a)({},r,c))))},resetFilterState:function(){return f}}}),j=function(e){return-1!==d.countries.filter((function(e){return"other"!==e})).indexOf(e)},m=function(e){for(var t in e)if(j(t)&&e[t])return!1;return!0},h=function(e){for(var t in e)if(n=t,-1!==d.years.indexOf(n)&&e[t])return!1;var n;return!0},p=function(e){for(var t in e)if(n=t,-1!==d.genres.indexOf(n)&&e[t])return!1;var n;return!0},O=function(e){var t=d.years.filter((function(t){return e[t]&&[t,e[t]]})),n=[];return t.forEach((function(e){if(e.startsWith("before"))n.push([0,1980]);else if(n.length>0&&e.match("".concat(n[n.length-1][1]))){var t=e.split("-");n[n.length-1][1]=+t[1]}else{var a=e.split("-");n.push([+a[0],+a[1]])}})),console.log(n),n},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20,offset:0};return function(){var t=Object(o.a)(c.a.mark((function t(n,a){var r,o,i,l,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a().filter,o=d.genres.filter((function(e){return r.genres[e]&&[e,r.genres[e]]})),i=O(r.years),l=d.countries.filter((function(e){return r.countries[e]&&[e,r.countries[e]]})),f=Object(s.a)(Object(s.a)({},e),{},{genres:o,years:i,countries:l}),console.log(f),n(Object(u.d)({filter:f}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},v=function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=a[n];if(r[1]){var c=r[0].startsWith("before")?[0,+r[0].split(" ")[1]]:r[0].split("-").map((function(e){return+e}));if(e>=c[0]&&e<c[1])return!0}}return!1},x=function(e,t){var n,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){if(t[n.value])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},w=function(e,t){var n,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;return j(c)?t[c]:t.other}}catch(o){r.e(o)}finally{r.f()}return!1},y=b.actions,k=y.setFilterState,C=y.resetFilterState;t.b=b.reducer},62:function(e,t,n){"use strict";n.r(t),n.d(t,"LIMIT",(function(){return p}));var a=n(1),r=n(0),c=n(17),o=n.n(c),i=(n(163),n(34)),s=n(285),l=n(286),u=n(29),d=n(16),f=n(15),b=n(108),j=n(132),m=n(134),h=n(84);b.a.use(j.a).use(m.a).use(h.e).init({lng:"en",fallbackLng:"en",backend:{loadPath:"http://localhost:3000/locales/{{lng}}/{{ns}}.json"},detection:["queryString","cookie"],cache:["cookie"],debug:!1,interpolation:{escapeValue:!1}});b.a;console.log=function(){};var p=+(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LOAD_LIMIT||5);!function(){var e=n(212).default;o.a.render(Object(a.jsx)(d.a,{store:f.a,children:Object(a.jsx)(s.a,{theme:u.c,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(e,{})]})})})}),document.getElementById("root"))}()},73:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(46),r=Object(a.b)({name:"UI",initialState:{sortBy:null,view:"lines"},reducers:{setSortingBy:function(e,t){var n=t.payload;e.sortBy=n.sortBy},changeView:function(e){e.view="grid"===e.view?"lines":"grid"}}}),c=r.actions,o=c.setSortingBy,i=c.changeView;t.b=r.reducer},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var a=n(3),r=n(46),c=Object(r.b)({name:"snack",initialState:{notifications:[]},reducers:{addSnack:function(e,t){var n=t.payload;e.notifications.find((function(e){return e.text===n.text&&e.variant===n.variant}))||e.notifications.push(n)},dismissSnack:function(e,t){var n=t.payload;e.notifications=e.notifications.map((function(e){return n.dismissAll||e.key===n.key?Object(a.a)(Object(a.a)({},e),{},{dismissed:!0}):e}))},removeSnack:function(e,t){var n=t.payload;e.notifications=e.notifications.filter((function(e){return e.key!==n.key}))}}}),o=Object(a.a)({},c.actions),i=o.addSnack,s=(o.dismissSnack,o.removeSnack);t.b=c.reducer}},[[62,1,2]]]);
//# sourceMappingURL=main.e318b402.chunk.js.map
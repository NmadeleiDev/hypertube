{"version":3,"sources":["store/rootReducer.ts","store/store.ts","utils.ts","hooks/useToast.ts","components/Dropdown/Dropdown.tsx","components/Input/Input.tsx","components/Form/Form.tsx","components/OAuthButton/OAuthButton.tsx","components/Login/Login.tsx","pages/LoginPage/LoginPage.tsx","components/AlphabetNav/AlphabetNav.tsx","components/Rating/Rating.tsx","components/MovieCardMedium/MovieCardMedium.tsx","components/MovieCard/MovieCard.tsx","components/MovieCard/CardLoader/CardLoader.tsx","components/Cards/Cards.tsx","components/CardsSlider/CardsSlider.tsx","components/Filter/Filter.tsx","components/Sort/Sort.tsx","components/GridToLinesButton/GridToLinesButton.tsx","components/FilterSortPanel/FilterSortPanel.tsx","pages/MainPage/MainPage.tsx","components/Register/Register.tsx","pages/RegisterPage/RegisterPage.tsx","components/Auth/Auth.tsx","components/Footer/Footer.tsx","components/Search/Search.tsx","components/Internationalization/Internationalization.tsx","components/UserInfo/UserInfo.tsx","components/Logo/Logo.tsx","components/Header/Header.tsx","components/CategoryHeader/CategoryHeader.tsx","components/HorizontalGrid/HorizontalGrid.tsx","components/Comments/Comment/Comment.tsx","components/Comments/SendComment/SendComment.tsx","components/Comments/Comments.tsx","components/Player/PlayerControls.tsx","components/Player/TheHobbit.vtt","components/Player/Player.tsx","components/Player/ActivePeers.tsx","components/MovieFullInfo/MovieFullInfo.tsx","components/Notifier/SnackMessage/SnackMessage.tsx","components/Notifier/Notifier.tsx","components/ForgotPassword/ForgotPassword.tsx","components/ResetPassword/ResetPassword.tsx","components/ChangeEmail/ChangeEmail.tsx","images/defaultAvatar.png","components/Settings/Settings.tsx","pages/SearchPage/SearchPage.tsx","App.tsx","store/features/MoviesSlice.ts","axios.ts","store/features/UserSlice.ts","theme.ts","store/features/FilterSlice.ts","i18n.ts","index.tsx","store/features/UISlice.ts","store/features/SnackSlice.ts"],"names":["rootReducer","combineReducers","UI","movies","filter","user","snack","store","configureStore","reducer","useAppDispatch","useDispatch","getSearchParam","search","searchString","window","location","params","decodeURI","replaceAll","slice","split","reduce","acc","cur","keyValue","JSON","parse","notEmpty","value","undefined","useToast","dispatch","toast","useCallback","message","variant","options","addSnack","key","uuid","text","header","autoHideDuration","useStyles","makeStyles","root","position","Paper","padding","Open","transform","Item","fontSize","margin","contextValue","onClose","handlersContext","createContext","Dropdown","heroText","icon","items","img","buttonProps","children","useState","open","setOpen","anchorEl","useRef","classes","handleClose","className","Button","style","backgroundImage","height","backgroundSize","backgroundOrigin","backgroundPositionY","backgroundColor","theme","palette","background","default","ref","onClick","endIcon","Popover","current","anchorOrigin","vertical","horizontal","transformOrigin","Grid","container","direction","alignItems","map","name","e","handleButtonClick","Provider","ButtonListItem","justifyContent","Input","width","SmallSelector","minWidth","FormControl","display","flexDirection","RadioGroup","type","values","onValidate","onChange","rules","ignoreUntouched","rest","touched","setTouched","error","setError","errorText","setErrorText","React","useMemo","helperText","rule","useEffect","err","isRegexValid","regex","match","isFnValid","checkFn","length","minLength","maxLength","validate","TextField","id","onFocus","List","Buttons","Link","textDecoration","color","marginBottom","Form","inputs","buttons","cn","el","ListItem","to","others","OAuthButton","oauth","url","queryParams","facebook","vk","google","Icon42","src","alt","IconFacebook","viewBox","xmlns","fill","d","IconVk","cx","cy","r","fillRule","clipRule","IconGoogle","loading","setLoading","disabled","queryString","URLSearchParams","toString","href","aria-label","CircularProgress","Login","email","password","setInputs","valid","setValid","formValid","useContext","useTranslation","t","i18n","history","useHistory","handleInput","preventDefault","target","handleSubmit","a","console","log","authHeader","btoa","encodeURI","auth","headers","Authorization","res","data","accessToken","saveToken","getSelfInfo","push","language","handleForgot","formData","label","placeholder","size","fullWidth","required","isValid","prev","justify","LoginPage","Container","createStyles","borderRadius","overflow","Scroller","flexWrap","overflowX","ShadowLeft","left","ShadowRight","right","grey","flex","border","content","paddingTop","float","Active","borderColor","secondaryColor","main","AlphabetNav","useLocation","shadowLeft","shadowRight","shadow","setShadow","handleLinkClick","letter","currentTarget","innerText","currentLetter","pop","resetEndOfMovies","setMovies","byName","resetFilterState","loadMovies","limit","LIMIT","scrollHandler","throttle","stopPropagation","scrollLeft","scrollWidth","offsetWidth","onScroll","onWheel","scrollTo","top","deltaY","behavior","path","pathname","Typography","marginRight","Rating","movieId","imdbRating","ourRating","rating","setRating","isAuth","useSelector","state","handleRatingChange","newRating","patch","getToken","status","emptyIcon","Img","cursor","maxWidth","objectFit","opacity","PlayIconWrapper","transition","PlayIcon","Info","Caption","Text","fontWeight","Description","maxHeight","flexGrow","Shadow","bottom","marginLeft","textTransform","primaryColor","light","MovieCardMedium","card","en","info","title","description","year","genres","item","Divider","Media","Name","MovieCard","movie","find","wrap","bg","ru","Card","getCard","Header","Line","Math","floor","random","lines","CardLoader","index","setIndex","interval","setInterval","clearInterval","Skeleton","animation","Cards","sortBy","view","years","countries","isEndOfMovies","sortedCards","setSortedCards","gridRef","trackScrolling","element","callback1","callback2","delay","reserve","pageYOffset","innerHeight","offsetTop","offsetHeight","throttledDetectBottomLine","offset","then","setEndOfMovies","addEventListener","removeEventListener","cards","isYearsStateEmpty","yearInRange","isGenresStateEmpty","genreInGenres","isCountiesStateEmpty","countryInCountries","sort","cardA","cardB","localeCompare","sortByName","sortByYear","sortByRating","avalibility","sortByAvalibility","overflowY","Movie","CardsSlider","popular","minHeight","Actions","Filter","category","setCategory","filterState","handleShow","reqeuestMoviesWithFilters","handleFilterChange","setFilterState","checked","startIcon","TuneRounded","Dialog","aria-labelledby","paper","DialogTitle","DialogContent","ButtonGroup","xs","sm","FormControlLabel","control","Checkbox","getCheckboxes","DialogActions","Sort","setSortingBy","SortRounded","grow","GridToLinesButton","changeView","DashboardRounded","ViewAgendaRounded","FilterSortPanel","MainPage","route","displayedMovies","setDisplayedMovies","includes","textAlign","Register","username","confirm","body","passwd","profile","put","saveUserState","RegExp","RegisterPage","Auth","document","cookie","startsWith","tokenStart","token","expires","Date","toUTCString","updatedCookie","encodeURIComponent","Object","keys","forEach","optionValue","setCookie","Footer","styles","breakpoints","down","BaseInput","Icon","paddingRight","up","Popper","Search","setSearch","setAnchorEl","handleSearch","Boolean","InputBase","inputProps","input","onKeyPress","SearchRounded","aria-describedby","placement","TransitionProps","Fade","timeout","languages","Internationalization","lang","setLang","nextLang","changeLanguage","Type","marginAuto","UserInfo","avatar","imageBody","Avatar","removeToken","authFail","_0","_1","_2","_3","_4","Logo","SvgIcon","PersonRounded","PersonOutlineRounded","h3","CategoryHeader","gridList","HorizontalScroll","Image","GridItem","controls","HorizontalGrid","sources","h4","Comment","substr","SendComment","userId","comment","setComment","sendForm","movieid","post","userid","time","getTime","updateComments","comments","onSubmit","multiline","ctrlKey","Comments","offsetRef","maxComments","loadComments","debounce","debouncedDetectBottomLine","commentid","marginTop","controlsWrapper","zIndex","controlIcons","bottomIcons","volumeSlider","ValueLabelComponent","props2","Tooltip","enterTouchDelay","PrettoSlider","withStyles","thumb","boxShadow","active","valueLabel","track","rail","Slider","PlayerControls","forwardRef","props","IconButton","onRewind","FastRewind","onPlayPause","playing","Pause","onFastForward","FastForward","min","max","elapsedTime","played","onSeek","onMouseDown","onSeekMouseDown","onChangeCommitted","onSeekMouseUp","onMuted","muted","VolumeOff","VolumeUp","volume","onVolumeChange","onVolumeSeekUp","onChangeDisplayFormat","totalDuration","playbackRate","rate","onPlaybackRateChange","onChangeSubtitles","showSubtitles","Subtitles","SubtitlesOutlined","onToggleFullScreen","Fullscreen","playerWrapper","Error","format","seconds","isNaN","date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","padStart","Player","seeking","controlsVisible","srt","setState","player","setPlayer","timeDisplayFormat","setTimeDisplayFormat","playerRef","playerContainerRef","controlsRef","timeoutId","videoUrl","getInternalPlayer","dir","playListener","emptiedListener","durationChangeListener","endedListener","stalledListener","suspendListener","waitingListener","currentTime","getCurrentTime","duration","getDuration","onMouseMove","visibility","clearTimeout","onProgress","setTimeout","onError","onBuffer","onBufferEnd","config","file","tracks","kind","vtt","srcLang","seekTo","_e","newValue","screenfull","isEnabled","toggle","textTracks","showing","mode","initialState","activePeers","loadedPercent","ActivePeers","loadActivePeers","Poster","MainInfoText","Video","AdditionalInfo","MovieFullInfo","headerRef","loadMovie","resetError","scrollIntoView","backup","mapItems","join","views","pgRating","directorList","directors","cast","stars","photos","videos","prompt","success","warning","dark","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","notifications","classnames","CardActions","displayed","Notifier","enqueueSnackbar","dismissed","event","reason","onExited","_event","removeSnack","ForgotPassword","ResetPassword","searchParams","repairToken","ChangeEmail","avatarWrapper","avatarImage","inputNone","uploadIcon","Settings","newPassword","currentPassword","inputRef","validateForm","prevInputs","updateEmail","updateUsername","updatePassword","newPasswd","goBack","toUpperCase","click","defaultAvatar","BackupRounded","accept","files","validateUpload","reader","FileReader","onload","result","image","readAsDataURL","SearchPage","Wrapper","App","urlParams","routes","component","render","maxSnack","containerRoot","MoviesSlice","createSlice","reducers","addMovies","payload","add","newMovies","concat","set","Set","Array","from","arr","newComments","startLoading","stopLoading","loadMoviesAsync","axiosSearch","callback","removedNulls","axios","actions","CancelToken","create","baseURL","withCredentials","validateStatus","tokenKey","userSlice","isLoading","firstName","lastName","authSuccess","localStorage","setItem","removeItem","getItem","contrastText","contrastTextLighter","createMuiTheme","primary","secondary","typography","fontFamily","MuiButton","MuiTextField","Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Short","Sport","Superhero","Thriller","War","Western","Australia","Canada","France","Germany","India","Japan","Russia","Spain","USA","USSR","other","filterSlice","isCountriesKey","indexOf","country","genre","getYearsFilter","yearsArray","getState","filterParams","entries","entry","rangeNumbers","x","movieGenres","filterGenres","movieCountries","filterCountries","host","use","Backend","languageDetector","initReactI18next","init","lng","fallbackLng","backend","loadPath","detection","cache","debug","interpolation","escapeValue","process","REACT_APP_LOAD_LIMIT","require","ReactDOM","ThemeProvider","fallback","CssBaseline","getElementById","UISlice","snackSlice","msg","dismissSnack","notificaton","dismissAll"],"mappings":"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","file":"static/js/main.e60b5085.chunk.js","sourcesContent":["import { combineReducers } from '@reduxjs/toolkit';\nimport UI from './features/UISlice';\nimport movies from './features/MoviesSlice';\nimport filter from './features/FilterSlice';\nimport user from './features/UserSlice';\nimport snack from './features/SnackSlice';\n\nconst rootReducer = combineReducers({ UI, movies, filter, user, snack });\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { useDispatch } from 'react-redux';\n\nimport rootReducer from './rootReducer';\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default store;\n","import { debounce, throttle } from 'lodash';\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const throttledDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  throttle(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const debouncedDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  debounce(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\ninterface KnownOptions {\n  path?: string;\n  expires?: Date | string;\n}\ninterface IOptions extends KnownOptions {\n  [key: string]: string | Date | boolean | undefined;\n}\n\nexport const setCookie = (\n  name: string,\n  value: string,\n  options: IOptions = {}\n) => {\n  options = {\n    path: '/',\n    //       \n    ...options,\n  };\n\n  if (options.expires instanceof Date) {\n    options.expires = options.expires.toUTCString();\n  }\n\n  let updatedCookie =\n    encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\n  Object.keys(options).forEach((key) => {\n    updatedCookie += '; ' + key;\n    let optionValue = options[key];\n    if (optionValue !== true) {\n      updatedCookie += '=' + optionValue;\n    }\n  });\n  document.cookie = updatedCookie;\n};\n\nexport const getSearchParam = (search?: string) => {\n  const searchString = search || window.location.search;\n  const params = searchString ? decodeURI(searchString) : null;\n  return params\n    ? params\n        .replaceAll('%3A', ':')\n        .replaceAll('%2C', ',')\n        .replaceAll('+', ' ')\n        .slice(1)\n        .split('&')\n        .reduce((acc, cur) => {\n          const keyValue = cur.split('=');\n          acc[keyValue[0]] =\n            keyValue[0] === 'error' ? JSON.parse(keyValue[1]) : keyValue[1];\n          return acc;\n        }, {} as { [key: string]: any })\n    : null;\n};\n\nexport const notEmpty = <T>(value: T | null | undefined): value is T => {\n  return value !== null && value !== undefined;\n}\n","import { addSnack, IVariant } from '../store/features/SnackSlice';\nimport { v4 as uuid } from 'uuid';\nimport { useAppDispatch } from '../store/store';\nimport { useCallback } from 'react';\n\ninterface IMessage {\n  text: string;\n  header?: string;\n}\n\nexport const useToast = () => {\n  const dispatch = useAppDispatch();\n\n  const toast = useCallback(\n    (message: IMessage, variant: IVariant = 'success', options = {}) => {\n      dispatch(\n        addSnack({\n          key: uuid(),\n          text: message.text,\n          header: message.header,\n          variant: variant || 'default',\n          options: {\n            autoHideDuration: 3000,\n            ...options,\n          },\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { toast };\n};\n","import {\n  Button,\n  ButtonProps,\n  Grid,\n  makeStyles,\n  Paper,\n  Popover,\n} from '@material-ui/core';\nimport React, { createContext, useRef, useState } from 'react';\nimport { theme } from '../../theme';\n\nexport interface IItem {\n  text: string;\n  name: string;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\ninterface Props {\n  heroText?: string;\n  icon?: JSX.Element;\n  items?: IItem[];\n  img?: string;\n  buttonProps?: ButtonProps;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'relative',\n  },\n  Paper: {\n    padding: 20,\n  },\n  Open: {\n    transform: 'rotate(180deg)',\n  },\n  Item: {\n    fontSize: '1.0rem',\n    margin: 5,\n  },\n});\n\nconst contextValue = {\n  onClose: () => {},\n};\n\nexport const handlersContext = createContext(contextValue);\n\nconst Dropdown: React.FC<Props> = ({\n  heroText = null,\n  icon,\n  items,\n  img,\n  buttonProps,\n  children,\n}) => {\n  const [open, setOpen] = useState(false);\n  const anchorEl = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n\n  const handleButtonClick = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    onClick: undefined | ((e: React.MouseEvent<HTMLButtonElement>) => void)\n  ) => {\n    onClick && onClick(e);\n    setOpen(false);\n  };\n\n  const handleClose = () => setOpen(false);\n  const contextValue = {\n    onClose: handleClose,\n  };\n\n  return (\n    <div className={classes.root}>\n      <Button\n        style={{\n          margin: '0 10px',\n          backgroundImage: `url(${img})`,\n          height: '2rem',\n          backgroundSize: 'cover',\n          backgroundOrigin: 'padding-box',\n          backgroundPositionY: 'center',\n          backgroundColor: img\n            ? 'currentcolor'\n            : theme.palette.background.default,\n        }}\n        ref={anchorEl}\n        variant=\"text\"\n        onClick={() => setOpen((open) => !open)}\n        endIcon={img ? null : heroText && icon}\n        {...buttonProps}\n      >\n        {img ? null : heroText || icon}\n      </Button>\n      <Popover\n        open={open}\n        anchorEl={anchorEl.current}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        onClose={handleClose}\n      >\n        <Paper className={classes.Paper}>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {items &&\n              items.map(({ text, name, onClick }: IItem) => (\n                <Button\n                  key={text}\n                  variant=\"text\"\n                  name={name}\n                  className={classes.Item}\n                  onClick={(e) => handleButtonClick(e, onClick)}\n                >\n                  {text}\n                </Button>\n              ))}\n            <handlersContext.Provider value={contextValue}>\n              {children}\n            </handlersContext.Provider>\n          </Grid>\n        </Paper>\n      </Popover>\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import React, { useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  TextField,\n  // MenuItem,\n  // Box,\n  // Slider,\n  // Typography,\n  // Grid,\n  // FormControl,\n  // FormLabel,\n  // RadioGroup,\n  // FormControlLabel,\n  // Radio,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: 'center',\n  },\n  Input: {\n    width: '100%',\n  },\n  SmallSelector: {\n    minWidth: '100px',\n    padding: '10px',\n  },\n  FormControl: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n  },\n  RadioGroup: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n  },\n});\n\nexport interface IRule {\n  minLength: number;\n  maxLength: number;\n  regex?: RegExp;\n  checkFn?: () => boolean;\n}\n\nexport interface IInputProps {\n  name: string;\n  type?: 'text' | 'email' | 'password';\n  label?: string;\n  value: string;\n  size?: 'medium' | 'small';\n  fullWidth?: boolean;\n  required?: boolean;\n  values?: string[];\n  placeholder?: string;\n  ignoreUntouched?: boolean;\n  onValidate?: (arg0: boolean) => {};\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {};\n  className: string;\n  rules?: {\n    helperText: string;\n    rule: IRule;\n  };\n}\n\n// const getDate = (timestamp: number): string => {\n//   const now = new Date();\n//   const date =\n//     timestamp > now.getTime() + 1000 * 60 * 60 * 24 ? now : new Date(timestamp);\n//   const year = date.getFullYear();\n//   let yearStr = '';\n//   if (year < 10) yearStr = '000' + year;\n//   else if (year < 100) yearStr = '00' + year;\n//   else if (year < 1000) yearStr = '0' + year;\n//   const month = date.getMonth() + 1;\n//   const monthStr = month < 10 ? '0' + month : '' + month;\n//   const day = date.getDate();\n//   const dayStr = day < 10 ? '0' + day : '' + day;\n//   const formattedDate = `${yearStr}-${monthStr}-${dayStr}`;\n//   return formattedDate;\n// };\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {IRule} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value: string, rule: IRule, touched: boolean): boolean => {\n  const isRegexValid = rule.regex ? !!value.match(rule.regex) : true;\n  const isFnValid = rule.checkFn ? rule.checkFn() : true;\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        isRegexValid &&\n        isFnValid\n    : true;\n};\n\nconst Input = ({\n  type = 'text',\n  name,\n  values,\n  value,\n  onValidate,\n  onChange,\n  className,\n  rules,\n  ignoreUntouched,\n  ...rest\n}: IInputProps) => {\n  const classes = useStyles();\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState('');\n\n  const { helperText, rule } = React.useMemo(\n    () => (rules ? { ...rules } : { ...{ helperText: '', rule: null } }),\n    [rules]\n  );\n\n  useEffect(() => {\n    let err;\n    // check *touched* only if *ignoreUntouched* is false\n    err = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    err ? setErrorText(helperText) : setErrorText('');\n    // update inputValid state in Redux\n    onValidate &&\n      onValidate((ignoreUntouched || touched || !!value.length) && !err);\n    if (error !== err) setError(err);\n  }, [value, touched, rule, helperText, onValidate, ignoreUntouched, error]);\n\n  switch (type) {\n    // case 'number':\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => onChange(e)}\n          {...rest}\n        />\n      );\n    /*\n    case 'select':\n      return (\n        <TextField\n          id={name}\n          key={name}\n          label={label}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onChange={(e) => onChange(e)}\n          select\n          {...rest}\n        >\n          {values.map((e) => (\n            <MenuItem key={e} value={e}>\n              {e}\n            </MenuItem>\n          ))}\n        </TextField>\n      );\n    case 'radio':\n      return (\n        <FormControl\n          className={classes.FormControl}\n          key={name}\n          component=\"fieldset\"\n        >\n          <FormLabel component=\"legend\">{capitalize(label)}</FormLabel>\n          <RadioGroup\n            className={classes.RadioGroup}\n            value={value}\n            aria-label={name}\n            name={name}\n            onChange={(e) => onChange(e)}\n          >\n            {values.map((el) => (\n              <FormControlLabel\n                key={el}\n                value={el}\n                control={<Radio checked={value === el} color=\"primary\" />}\n                label={capitalize(el)}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      );\n    case 'date':\n      return (\n        <TextField\n          id={name}\n          type=\"date\"\n          label=\"Birth Date\"\n          name={name}\n          className={classes.Input}\n          InputLabelProps={{ shrink: true }}\n          value={getDate(value)}\n          onChange={(e) => onChange(e)}\n          {...rest}\n        />\n      );\n    case 'slider':\n      return (\n        <Box className={classes.Input}>\n          <Typography id=\"range-slider\" gutterBottom>\n            {label}\n          </Typography>\n          <Slider\n            value={value}\n            onChange={(e, value) => onChange(value)}\n            valueLabelDisplay=\"auto\"\n            aria-labelledby=\"range-slider\"\n            {...rest}\n          />\n        </Box>\n      );\n    case 'doubleSelector':\n      return (\n        <Box key={name} className={classes.Input}>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'min' + name}\n                type=\"number\"\n                value={value.minAge}\n                label=\"Minimum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ minAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'max' + name}\n                type=\"number\"\n                value={value.maxAge}\n                label=\"Maximum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ maxAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      );\n    case 'autocomplete':\n      return (\n        <TagInput\n          name={name}\n          className={classes.Input}\n          tags={values}\n          onChange={onChange}\n          {...rest}\n        />\n      );\n\n      */\n    default:\n      return null;\n  }\n};\n\nexport default Input;\n","import React from 'react';\nimport {\n  Button,\n  ButtonProps,\n  List,\n  ListItem,\n  makeStyles,\n} from '@material-ui/core';\nimport Input, { IInputProps } from '../Input/Input';\nimport cn from 'classnames';\nimport { NavLink } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  Button: {\n    width: '100%',\n  },\n  List: {\n    width: '100%',\n  },\n  Buttons: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Link: {\n    textDecoration: 'none',\n    color: 'inherit',\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n});\n\nexport interface IButtonProps extends ButtonProps {\n  text: string;\n  type?: 'submit';\n  to?: string;\n  disabled?: boolean;\n  variant?: 'contained' | 'outlined' | 'text';\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => {};\n}\n\nexport interface IFormProps {\n  inputs: IInputProps[];\n  buttons: IButtonProps[];\n  className?: string;\n}\n\nconst Form: React.FC<IFormProps> = ({\n  inputs,\n  buttons,\n  className,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <form className={cn(className, classes.root)}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} className={classes.margin} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ variant, type, text, onClick, to, ...others }) =>\n                to ? (\n                  <NavLink\n                    to={to}\n                    key={text}\n                    className={cn(classes.Link, classes.margin)}\n                  >\n                    <Button\n                      className={classes.Button}\n                      variant={variant}\n                      onClick={onClick}\n                      {...others}\n                    >\n                      {text}\n                    </Button>\n                  </NavLink>\n                ) : (\n                  <Button\n                    key={text}\n                    className={cn(classes.Button, classes.margin)}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n              // )\n            )}\n          </ListItem>\n        )}\n        {children}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import { Button, CircularProgress, makeStyles } from '@material-ui/core';\nimport React, { useMemo, useState } from 'react';\n\ninterface Props {\n  variant: '42' | 'facebook' | 'vk' | 'google';\n}\n\nconst useStyles = makeStyles({\n  OAuthButton: {\n    width: '6rem',\n  },\n});\n\nconst oauth = {\n  '42': {\n    url: 'https://api.intra.42.fr/oauth/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauth42',\n      },\n      {\n        name: 'scope',\n        value: 'public',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  facebook: {\n    url: 'https://www.facebook.com/v10.0/dialog/oauth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '737140593612593',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthFb',\n      },\n      {\n        name: 'scope',\n        value: 'email+public_profile',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  vk: {\n    url: 'https://oauth.vk.com/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '7781054',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthVk',\n      },\n      {\n        name: 'scope',\n        value: 'offline+photos',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  google: {\n    url: 'https://accounts.google.com/o/oauth2/v2/auth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/user/auth/oauthGoogle',\n      },\n      {\n        name: 'scope',\n        value: 'https://www.googleapis.com/auth/drive.metadata.readonly',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'token',\n      },\n    ],\n  },\n};\n\nconst Icon42: React.FC = () => (\n  <img\n    height=\"30\"\n    width=\"30\"\n    src=\"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg\"\n    alt=\"42 auth\"\n    style={{ filter: 'invert(1)' }}\n  />\n);\n\nconst IconFacebook: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 409 409\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill=\"#475993\"\n      d=\"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085\n\th147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882\n\tv-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955\n\tl-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087\n\tc-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085\n\tC408.786,24.662,384.124,0,353.701,0z\"\n    />\n  </svg>\n);\n\nconst IconVk: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 112 112\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g>\n      <circle\n        id=\"XMLID_11_\"\n        fill=\"#4D76A1\"\n        cx=\"56.098\"\n        cy=\"56.098\"\n        r=\"56.098\"\n      />\n      <path\n        fill=\"#FFFFFF\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878\n\t\tc0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235\n\t\tc2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463\n\t\tc-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069\n\t\tc0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297\n\t\tc-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514\n\t\tc-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644\n\t\tc1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446\n\t\tc-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069\n\t\tc0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993\n\t\tC44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z\"\n      />\n    </g>\n  </svg>\n);\n\nconst IconGoogle: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g fill=\"none\" fillRule=\"evenodd\">\n      <path\n        d=\"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z\"\n        fill=\"#4285f4\"\n      ></path>\n      <path\n        d=\"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z\"\n        fill=\"#34a853\"\n      ></path>\n      <path\n        d=\"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z\"\n        fill=\"#fbbc05\"\n      ></path>\n      <path\n        d=\"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z\"\n        fill=\"#ea4335\"\n      ></path>\n      <path d=\"M20 20h472v472H20V20z\"></path>\n    </g>\n  </svg>\n);\n\nconst OAuthButton: React.FC<Props> = ({ variant }) => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    setLoading(true);\n    const queryParams = oauth[variant].queryParams.reduce((acc: any, el) => {\n      acc[el.name] = el.value;\n      return acc;\n    }, {});\n    const queryString = new URLSearchParams(queryParams).toString();\n    const url = `${oauth[variant].url}?${queryString}`;\n    window.location.href = url;\n  };\n\n  const icon = useMemo(() => {\n    switch (variant) {\n      case '42':\n        return <Icon42 />;\n      case 'facebook':\n        return <IconFacebook />;\n      case 'vk':\n        return <IconVk />;\n      case 'google':\n        return <IconGoogle />;\n    }\n  }, [variant]);\n\n  return (\n    <Button\n      type=\"submit\"\n      disabled={loading}\n      onClick={handleClick}\n      className={classes.OAuthButton}\n      aria-label={`${variant} oauth`}\n    >\n      {loading ? <CircularProgress /> : icon}\n    </Button>\n  );\n};\n\nexport default OAuthButton;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { auth } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\n\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { handlersContext } from '../Dropdown/Dropdown';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport OAuthButton from '../OAuthButton/OAuthButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n  Link: {\n    textDecoration: 'none',\n  },\n});\n\nconst Login = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '', password: '' });\n  const [valid, setValid] = useState({ email: false, password: false });\n  const formValid = valid.email && valid.password;\n  const { onClose } = React.useContext(handlersContext);\n  const { t, i18n } = useTranslation();\n  const { toast } = useToast();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Login] handleSubmit', inputs);\n\n      const authHeader =\n        'Basic ' +\n        btoa(encodeURI(inputs.email) + ':' + encodeURI(inputs.password));\n      try {\n        const res = await auth('basic', {\n          headers: {\n            Authorization: authHeader,\n          },\n        });\n        if (res.data.accessToken) {\n          saveToken(res.data.accessToken);\n          dispatch(getSelfInfo());\n          history.push('/');\n        } else {\n          toast({ text: res.data[i18n.language] }, 'error');\n        }\n      } catch (e) {\n        console.log(e);\n        toast({ text: t`Server error` }, 'error');\n      }\n      onClose();\n    },\n    [inputs, toast, i18n.language, dispatch, history, onClose, t]\n  );\n\n  const handleForgot = useCallback(() => {\n    console.log('[Login] handleForgot');\n    history.push('forgot_password');\n    onClose();\n  }, [onClose, history]);\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid: boolean) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Login'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: handleForgot,\n          text: t('Forgot password?'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n          onClick: onClose,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, handleForgot, onClose, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData}>\n        <Grid container alignItems=\"center\" justify=\"space-evenly\">\n          <OAuthButton variant=\"42\" />\n          <OAuthButton variant=\"facebook\" />\n          <OAuthButton variant=\"vk\" />\n          <OAuthButton variant=\"google\" />\n        </Grid>\n      </Form>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Login from '../../components/Login/Login';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst LoginPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Login />\n    </Container>\n  );\n};\n\nexport default LoginPage;\n","import { Container, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { throttle } from 'lodash';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport { secondaryColor, theme } from '../../theme';\nimport { useAppDispatch } from '../../store/store';\nimport {\n  loadMovies,\n  resetEndOfMovies,\n  setMovies,\n} from '../../store/features/MoviesSlice';\nimport { LIMIT } from '../..';\nimport { resetFilterState } from '../../store/features/FilterSlice';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      position: 'relative',\n      borderRadius: 5,\n      overflow: 'hidden',\n    },\n    Scroller: {\n      display: 'inline-flex',\n      flexWrap: 'nowrap',\n      overflowX: 'scroll',\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    },\n    ShadowLeft: {\n      position: 'absolute',\n      height: '100%',\n      left: 0,\n      width: '50px',\n      background: 'linear-gradient(90deg, #00000033, transparent)',\n    },\n    ShadowRight: {\n      position: 'absolute',\n      height: '100%',\n      right: 0,\n      width: '50px',\n      background: 'linear-gradient(-90deg, #00000033, transparent)',\n    },\n    Link: {\n      color: theme.palette.grey[700],\n      fontSize: '1.5rem',\n      textDecoration: 'none',\n      flex: '1 0 50px',\n      margin: 10,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      border: '3px solid transparent',\n      borderRadius: '50%',\n      '&:before': {\n        content: \"''\",\n        paddingTop: '100%',\n        float: 'left',\n      },\n    },\n    Active: {\n      borderColor: secondaryColor.main,\n    },\n  })\n);\n\nconst AlphabetNav = () => {\n  const location = useLocation();\n  const classes = useStyles(theme);\n  const [shadow, setShadow] = useState({\n    shadowLeft: false,\n    shadowRight: true,\n  });\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const dispatch = useAppDispatch();\n\n  const handleLinkClick = async (\n    e: React.SyntheticEvent<HTMLAnchorElement>\n  ) => {\n    const letter = e.currentTarget.innerText;\n    const isByNamePage = window.location.href.match(/byname/);\n    // check if we were on one of 'byname' pages\n    if (isByNamePage) {\n      // check if user clicks the same letter, we're in\n      const currentLetter = window.location.href.split('/').pop();\n      // no need to load same movies twice\n      if (currentLetter && letter === currentLetter) return;\n    }\n    dispatch(resetEndOfMovies());\n    dispatch(setMovies({ byName: [] }));\n    dispatch(resetFilterState());\n    dispatch(loadMovies({ filter: { letter, limit: LIMIT } }));\n  };\n\n  const scrollHandler = throttle((e: React.SyntheticEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    const target = e.target as HTMLDivElement;\n    if (!target) return;\n    if (target.scrollLeft === 0) {\n      setShadow({ ...shadow, shadowLeft: false });\n    } else if (target.scrollLeft > 0) {\n      !shadow.shadowLeft && setShadow({ ...shadow, shadowLeft: true });\n    }\n    if (target.scrollWidth - target.scrollLeft < target.offsetWidth + 1) {\n      setShadow({ ...shadow, shadowRight: false });\n    } else {\n      !shadow.shadowRight && setShadow({ ...shadow, shadowRight: true });\n    }\n  }, 100);\n\n  const horizontalScrollHandler = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTo({\n      top: 0,\n      left: e.currentTarget.scrollLeft + e.deltaY * 4,\n      behavior: 'smooth',\n    });\n  };\n\n  const getItemClassName = (path: string): string => {\n    return location.pathname.search(path) !== -1\n      ? cn(classes.Link, classes.Active)\n      : classes.Link;\n  };\n\n  return (\n    <Container className={classes.root}>\n      {shadow.shadowLeft && <div className={classes.ShadowLeft} />}\n      {shadow.shadowRight && <div className={classes.ShadowRight} />}\n      <Container\n        onScroll={scrollHandler}\n        onWheel={horizontalScrollHandler}\n        className={classes.Scroller}\n      >\n        {letters.split('').map((letter) => (\n          <NavLink\n            to={`/byname/${letter}`}\n            key={letter}\n            onClick={handleLinkClick}\n            className={getItemClassName(`/byname/${letter}`)}\n          >\n            {letter}\n          </NavLink>\n        ))}\n        <div className={classes.Link} />\n      </Container>\n    </Container>\n  );\n};\n\nexport default AlphabetNav;\n","import React, { useState } from 'react';\nimport { movies } from '../../axios';\nimport { getToken } from '../../store/features/UserSlice';\nimport MUIRating from '@material-ui/lab/Rating';\nimport StarBorderRounded from '@material-ui/icons/StarBorderRounded';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\ninterface Props {\n  movieId: string;\n  imdbRating: number;\n  ourRating: number;\n}\n\nconst useStyles = makeStyles({\n  Typography: {\n    padding: 5,\n    marginRight: 5,\n    border: '1px solid #ddd',\n    borderRadius: 5,\n  },\n});\n\nconst Rating = ({ movieId, imdbRating, ourRating }: Props) => {\n  const classes = useStyles();\n  const [rating, setRating] = useState(ourRating);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const handleRatingChange = async (\n    e: React.ChangeEvent<{}>,\n    newRating: number | null\n  ) => {\n    e.stopPropagation();\n    if (newRating !== null) {\n      console.log(newRating);\n      const res = await movies.patch(\n        '/rating',\n        { movieId, rating: newRating },\n        {\n          headers: {\n            accessToken: getToken(),\n          },\n        }\n      );\n      if (res.data.status) setRating(+res.data.data);\n    }\n  };\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"flex-end\">\n      <Typography className={classes.Typography}>IMDB</Typography>\n      <Typography>{imdbRating}</Typography>\n      <MUIRating\n        disabled={!isAuth}\n        value={rating || imdbRating / 2}\n        name={`${movieId}-rating`}\n        emptyIcon={<StarBorderRounded color=\"disabled\" fontSize=\"inherit\" />}\n        onChange={handleRatingChange}\n      />\n    </Grid>\n  );\n};\n\nexport default Rating;\n","import {\n  Divider,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { ITranslatedMovie, IUser } from '../../models/MovieInfo';\nimport { primaryColor } from '../../theme';\nimport Rating from '../Rating/Rating';\n\ninterface MovieCardMediumProps {\n  card: ITranslatedMovie;\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n  },\n  Img: {\n    position: 'relative',\n    cursor: 'pointer',\n    '& img': {\n      height: '15rem',\n      width: '10rem',\n      maxWidth: '15rem',\n      objectFit: 'cover',\n      marginRight: 20,\n      borderRadius: 5,\n    },\n    '&:hover $PlayIconWrapper': {\n      opacity: 1,\n    },\n  },\n  PlayIconWrapper: {\n    position: 'absolute',\n    left: 'calc(50% - 3.5rem)',\n    top: 'calc(50% - 3rem)',\n    fontSize: '1rem',\n    padding: '1rem',\n    borderRadius: '50%',\n    backgroundColor: '#000000aa',\n    color: '#fff',\n    opacity: 0,\n    transition: '0.3s',\n  },\n  PlayIcon: {\n    width: '4rem',\n    height: '4rem',\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  Caption: {\n    fontSize: '1.5rem',\n    textDecoration: 'none',\n    color: 'inherit',\n    marginBottom: 10,\n  },\n  Text: {\n    fontSize: '1rem',\n    fontWeight: 200,\n  },\n  Description: {\n    maxHeight: '8rem',\n    paddingTop: 10,\n    fontSize: '0.9rem',\n    position: 'relative',\n    flexGrow: 2,\n    overflow: 'hidden',\n  },\n  Shadow: {\n    height: 40,\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    background: 'linear-gradient(0deg, #ffffff, #ffffff33)',\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    fontWeight: 'inherit',\n    color: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n});\n\nconst MovieCardMedium = ({ card }: MovieCardMediumProps) => {\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n\n  const { id, img, info } = card.en;\n  const title = card[i18n.language as 'en' | 'ru'].title;\n  const description = card[i18n.language as 'en' | 'ru'].info.description;\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n\n  return (\n    <Paper className={classes.Paper}>\n      <NavLink to={`/movies/${id}`} className={classes.Img}>\n        <img src={img} alt={`${title} poster`} />\n        <div className={classes.PlayIconWrapper}>\n          <PlayArrow className={classes.PlayIcon} fontSize=\"large\" />\n        </div>\n      </NavLink>\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Grid container alignItems=\"baseline\" justify=\"space-between\">\n          <NavLink to={`/movies/${id}`} className={classes.Caption}>\n            <Typography variant=\"caption\" className={classes.Caption}>\n              {title}\n            </Typography>\n          </NavLink>\n          <Rating\n            movieId={id}\n            imdbRating={info.imdbRating}\n            ourRating={info.rating}\n          />\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Year')}: {info.year}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Genres')}: {mapItemsToLinks(info.genres)}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Length')}: {info.length ? `${info.length}${t('min')}` : 'unknown'}\n        </Grid>\n        <Divider />\n        <Grid container className={classes.Description}>\n          {description}\n          <div className={classes.Shadow} />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default MovieCardMedium;\n","import React from 'react';\nimport { Card, Grid, makeStyles, Typography } from '@material-ui/core';\nimport cn from 'classnames';\nimport MovieCardMedium from '../MovieCardMedium/MovieCardMedium';\nimport { useTranslation } from 'react-i18next';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface MovieCardProps {\n  display?: 'image' | 'lines' | 'grid';\n  className?: string;\n  id: string;\n}\n\nexport const useStyles = makeStyles({\n  root: {\n    // cursor: 'pointer',\n  },\n  Grid: {\n    maxWidth: 150,\n    marginRight: '1rem',\n    marginBottom: '1rem',\n  },\n  Media: {\n    height: 220,\n    width: 150,\n  },\n  Name: {\n    fontSize: '1rem',\n    fontWeight: 800,\n  },\n});\n\nconst MovieCard: React.FC<MovieCardProps> = ({\n  display = 'image',\n  className,\n  id: card,\n}: MovieCardProps) => {\n  const classes = useStyles();\n  const { i18n } = useTranslation();\n  const { movies } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((el) => el.en.id === card);\n\n  const getCard = () => {\n    if (!movie) return null;\n    if (display === 'lines') return <MovieCardMedium card={movie} />;\n    const bg = movie.en.img || movie.ru.img;\n    return (\n      <NavLink to={`/movies/${movie.en.id}`} className={classes.root}>\n        <Card style={{ height: 'fit-content' }}>\n          <div\n            className={classes.Media}\n            style={{\n              background: `url(${bg})`,\n              backgroundSize: 'cover',\n            }}\n          ></div>\n        </Card>\n        {display !== 'image' && (\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {display === 'grid' && (\n              <Typography className={classes.Name}>\n                {movie[i18n.language as 'en' | 'ru'].title}\n              </Typography>\n            )}\n          </Grid>\n        )}\n      </NavLink>\n    );\n  };\n\n  const getClassName = () =>\n    display === 'lines'\n      ? cn(classes.root, className)\n      : cn(classes.root, className, classes.Grid);\n\n  return (\n    <Grid\n      item\n      container\n      wrap=\"wrap\"\n      direction={display === 'lines' ? 'column' : 'row'}\n      className={getClassName()}\n    >\n      {getCard()}\n    </Grid>\n  );\n};\n\nexport default MovieCard;\n","import { useEffect, useState } from 'react';\nimport { Grid, makeStyles, Paper, Card, Typography } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\nimport { useTranslation } from 'react-i18next';\n\ninterface Props {\n  display?: 'lines' | 'grid';\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n    width: '100%',\n  },\n  Img: {\n    borderRadius: 5,\n    height: '15rem',\n    width: '13rem',\n    marginRight: '1rem',\n  },\n  Header: {\n    width: '90%',\n    marginBottom: 10,\n    fontSize: 30,\n  },\n  Line: {\n    marginBottom: 15,\n    height: 10,\n    width: `${Math.floor(Math.random() * 100)}%`,\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  Text: {\n    fontSize: '1rem',\n    height: 10,\n    marginBottom: 15,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    textTransform: 'uppercase',\n  },\n});\n\nconst lines = ['line0', 'line1', 'line2', 'line3', 'line4', 'line5', 'line6'];\n\nconst CardLoader = ({ display }: Props) => {\n  const classes = useStyles();\n  const [index, setIndex] = useState<number>(0);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setIndex((prev) => (prev + 1) % lines.length);\n    }, 3000);\n    return () => clearInterval(interval);\n  });\n\n  return display === 'lines' ? (\n    <Paper className={classes.Paper}>\n      <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Skeleton animation=\"wave\" className={classes.Header} />\n        <Skeleton animation=\"wave\" width=\"50%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"60%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"53%\" className={classes.Line} />\n        {/* <Skeleton animation=\"wave\" width=\"30%\" className={classes.Line} /> */}\n        <Typography className={classes.Text}>{t(lines[index])}</Typography>\n        <Skeleton animation=\"wave\" width=\"40%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"70%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"47%\" className={classes.Line} />\n      </Grid>\n    </Paper>\n  ) : (\n    <Card style={{ height: 'fit-content' }}>\n      <div\n        className={classes.Img}\n        style={{\n          backgroundSize: 'cover',\n        }}\n      >\n        <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      </div>\n    </Card>\n  );\n};\n\nexport default CardLoader;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { useAppDispatch } from '../../store/store';\nimport { RootState } from '../../store/rootReducer';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { loadMovies, setEndOfMovies } from '../../store/features/MoviesSlice';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { throttledDetectBottomLine } from '../../utils';\nimport CardLoader from '../MovieCard/CardLoader/CardLoader';\nimport { LIMIT } from '../..';\nimport {\n  countryInCountries,\n  yearInRange,\n  genreInGenres,\n  isCountiesStateEmpty,\n  isGenresStateEmpty,\n  isYearsStateEmpty,\n} from '../../store/features/FilterSlice';\n\ninterface ICardsProps {\n  movies: ITranslatedMovie[];\n}\n\nconst sortByName = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort((cardA, cardB) =>\n    cardA.en.title.localeCompare(cardB.en.title)\n  );\n};\nconst sortByYear = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.year - cardA.en.info.year\n  );\n};\nconst sortByRating = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) =>\n      cardB.en.info.rating - cardA.en.info.rating ||\n      cardB.en.info.imdbRating - cardA.en.info.imdbRating\n  );\n};\nconst sortByAvalibility = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.avalibility - cardA.en.info.avalibility\n  );\n};\n\nconst Cards = ({ movies }: ICardsProps) => {\n  const { sortBy, view } = useSelector((state: RootState) => state.UI);\n  const { genres, years, countries } = useSelector(\n    (state: RootState) => state.filter\n  );\n  const { loading, isEndOfMovies } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [sortedCards, setSortedCards] = useState<ITranslatedMovie[]>(movies);\n  const dispatch = useAppDispatch();\n  const gridRef = useRef<HTMLDivElement>(null);\n  const location = window.location.href;\n\n  // selected letter if we're at /byname page\n  const letter = location.search(/byname/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // current search string, if we're at /search page\n  const search = location.match(/search/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // track scroll position and load movies if at the bottom\n  useEffect(() => {\n    const endOfMoviesCallback = () => {\n      if (!isEndOfMovies && !loading) {\n        console.log('endOfMoviesCallback');\n        dispatch(\n          loadMovies({\n            filter: {\n              search,\n              letter,\n              limit: LIMIT,\n              offset: movies.length,\n            },\n          })\n        ).then((res) => {\n          console.log('[Cards] loadMovies response', res);\n          if (res && res.length < LIMIT) dispatch(setEndOfMovies());\n        });\n      }\n    };\n    console.log('useEffect track scroll');\n    const trackScrolling = throttledDetectBottomLine(\n      gridRef.current,\n      endOfMoviesCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [movies.length, dispatch, letter, search, isEndOfMovies, loading]);\n\n  useEffect(() => {\n    let cards = !isYearsStateEmpty(years)\n      ? movies.filter((movie) => yearInRange(movie.en.info.year, years))\n      : movies;\n    cards = !isGenresStateEmpty(genres)\n      ? cards.filter((movie) => genreInGenres(movie.en.info.genres, genres))\n      : cards;\n    cards = !isCountiesStateEmpty(countries)\n      ? cards.filter(\n          (movie) =>\n            movie.en.info.countries\n              ? countryInCountries(movie.en.info.countries, countries)\n              : true // if no countries were given - show movie anyway\n        )\n      : cards;\n    console.log('[Cards] filter useEffect', cards);\n    setSortedCards(cards);\n  }, [genres, countries, years, movies]);\n\n  // sort movies on <sortBy> change\n  useEffect(() => {\n    console.log('[Cards] sort useEffect', movies, sortedCards);\n    if (movies.length > sortedCards.length) return;\n    if (sortBy === 'name') setSortedCards(sortByName(sortedCards));\n    else if (sortBy === 'year') setSortedCards(sortByYear(sortedCards));\n    else if (sortBy === 'rating') setSortedCards(sortByRating(sortedCards));\n    else if (sortBy === 'avalibility')\n      setSortedCards(sortByAvalibility(sortedCards));\n  }, [sortBy, movies, sortedCards]);\n\n  return (\n    <Grid ref={gridRef} container justify=\"space-evenly\">\n      {sortedCards.map((card) => (\n        <MovieCard key={card.en.id} id={card.en.id} display={view} />\n      ))}\n      {loading && <CardLoader display={view} />}\n    </Grid>\n  );\n};\n\nexport default Cards;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface CardsSliderProps {\n  display?: 'grid' | 'image';\n}\n\nconst useStyles = makeStyles({\n  root: {\n    overflow: 'hidden',\n    flexWrap: 'nowrap',\n    margin: '20px 0',\n    padding: 10,\n    background: '#fafafa',\n    transform: 'translateZ(0)',\n    overflowX: 'scroll',\n    overflowY: 'hidden',\n    transition: '0.3s',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  Movie: {\n    transition: '0.3s',\n    marginRight: 20,\n  },\n});\n\nconst CardsSlider: React.FC<CardsSliderProps> = ({\n  display = 'image',\n}: CardsSliderProps) => {\n  const classes = useStyles();\n  const { popular } = useSelector((state: RootState) => state.movies);\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      {popular.map((card: string) => (\n        <MovieCard\n          display={display}\n          className={classes.Movie}\n          id={card}\n          key={card}\n        />\n      ))}\n    </Grid>\n  );\n};\n\nexport default CardsSlider;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from '@material-ui/core';\nimport { TuneRounded } from '@material-ui/icons';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\n\nimport {\n  setFilterState,\n  resetFilterState,\n  GenresKeys,\n  YearsKeys,\n  CountriesKeys,\n  FilterStateKeys,\n  items,\n  reqeuestMoviesWithFilters,\n} from '../../store/features/FilterSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nconst useStyles = makeStyles({\n  '@media (orientation: portrait)': {\n    root: {\n      width: '80vw',\n      height: '60vh',\n    },\n  },\n  root: {\n    minWidth: 300,\n    minHeight: 300,\n    width: '80vw',\n    height: '60vh',\n    '@media (max-width: 600px)': {\n      width: '90vw',\n      height: '90vh',\n    },\n  },\n  Actions: {\n    justifyContent: 'center',\n  },\n});\n\nconst buttons: ['genres', 'years', 'countries'] = [\n  'genres',\n  'years',\n  'countries',\n];\n\nconst Filter = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [open, setOpen] = useState(false);\n  const [category, setCategory] = useState<FilterStateKeys>('genres');\n  const filterState = useSelector((state: RootState) => state.filter);\n  const { t } = useTranslation();\n\n  const handleReset = () => {\n    dispatch(resetFilterState());\n  };\n  const handleShow = async () => {\n    console.log('[Filter] handleShow', filterState);\n    dispatch(reqeuestMoviesWithFilters());\n    setOpen(false);\n  };\n\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (category) {\n      case 'genres':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as GenresKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'years':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as YearsKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'countries':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as CountriesKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      default:\n        return;\n    }\n  };\n\n  const getCheckboxes = (category: string): JSX.Element[] | null => {\n    switch (category) {\n      case 'genres':\n        return items.genres.map((item: GenresKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['genres'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'years':\n        return items.years.map((item: YearsKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['years'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'countries':\n        return items.countries.map((item: CountriesKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['countries'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div>\n      <Button\n        variant=\"text\"\n        onClick={() => setOpen(true)}\n        startIcon={<TuneRounded />}\n      >\n        {t('filterRoot')}\n      </Button>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"filter-dialog\"\n        classes={{ paper: classes.root }}\n      >\n        <DialogTitle id=\"filter-dialog-title\">{t('filterRoot')}</DialogTitle>\n        <DialogContent>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <ButtonGroup style={{ marginBottom: 20 }}>\n              {buttons.map((text) => (\n                <Button\n                  color=\"primary\"\n                  variant={text === category ? 'contained' : 'outlined'}\n                  key={text}\n                  onClick={() => setCategory(text)}\n                >\n                  {t(text)}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Grid>\n          <Grid container wrap=\"wrap\">\n            {getCheckboxes(category)}\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.Actions}>\n          <Button onClick={handleReset} color=\"primary\">\n            Reset filters\n          </Button>\n          <Button onClick={handleShow} color=\"secondary\">\n            Show results\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\nimport { SortRounded } from '@material-ui/icons';\n\nimport { useAppDispatch } from '../../store/store';\nimport { setSortingBy } from '../../store/features/UISlice';\nimport Dropdown, { IItem } from '../Dropdown/Dropdown';\nimport { useTranslation } from 'react-i18next';\n\nconst Sort = () => {\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const onClick = (e: React.MouseEvent<HTMLButtonElement>) =>\n    dispatch(setSortingBy({ sortBy: e.currentTarget.name }));\n\n  const items = [\n    {\n      text: t('By rating'),\n      name: 'rating',\n      onClick,\n    },\n    {\n      text: t('By name'),\n      name: 'name',\n      onClick,\n    },\n    {\n      text: t('By year'),\n      name: 'year',\n      onClick,\n    },\n    {\n      text: t('By avalibility'),\n      name: 'avalibility',\n      onClick,\n    },\n  ] as IItem[];\n\n  return <Dropdown heroText={t('Sort')} icon={<SortRounded />} items={items} />;\n};\n\nexport default Sort;\n","import React from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { DashboardRounded, ViewAgendaRounded } from '@material-ui/icons';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { changeView } from '../../store/features/UISlice';\n\nconst useStyles = makeStyles({\n  right: {\n    grow: 1,\n    marginLeft: 'auto',\n  },\n});\n\nconst GridToLinesButton = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { view } = useSelector((state: RootState) => state.UI);\n\n  const handleClick = () => {\n    dispatch(changeView());\n  };\n\n  return (\n    <Button\n      className={classes.right}\n      variant=\"text\"\n      size=\"large\"\n      onClick={handleClick}\n    >\n      {view === 'grid' ? <DashboardRounded /> : <ViewAgendaRounded />}\n    </Button>\n  );\n};\n\nexport default GridToLinesButton;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport Filter from '../Filter/Filter';\nimport Sort from '../Sort/Sort';\nimport GridToLinesButton from '../GridToLinesButton/GridToLinesButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '10px 30px',\n  },\n});\n\nconst FilterSortPanel = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid container className={classes.root} alignItems=\"center\">\n      <Filter />\n      <Sort />\n      <GridToLinesButton />\n    </Grid>\n  );\n};\n\nexport default FilterSortPanel;\n","import { Container, Typography } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { LIMIT } from '../..';\nimport AlphabetNav from '../../components/AlphabetNav/AlphabetNav';\nimport Cards from '../../components/Cards/Cards';\nimport CardsSlider from '../../components/CardsSlider/CardsSlider';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { IFilter, loadMovies } from '../../store/features/MoviesSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { notEmpty } from '../../utils';\n\ninterface IMainPageProps {\n  route?: string;\n}\n\ninterface TParams {\n  id?: string;\n}\n\nconst MainPage = ({\n  route,\n  match,\n}: IMainPageProps & RouteComponentProps<TParams>) => {\n  const dispatch = useAppDispatch();\n  const { movies, search, byName, popular } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [displayedMovies, setDisplayedMovies] = useState<ITranslatedMovie[]>(\n    []\n  );\n  const { t } = useTranslation();\n\n  console.log(match, route);\n\n  // load movies on component mount\n  useEffect(() => {\n    const location = window.location.href;\n    const filter: IFilter = { limit: LIMIT };\n    switch (route) {\n      // case 'search':\n      //   filter.search = location.split('/').pop();\n      //   break;\n      case 'byname':\n        filter.letter = location.split('/').pop();\n        break;\n      default:\n        break;\n    }\n    console.log('[MainPage] useEffect. movies, filter', movies, filter);\n    // load popular and search/byName\n    dispatch(loadMovies({ filter: { limit: LIMIT + 10 } }));\n    if (route === 'byname')\n      dispatch(loadMovies({ filter })).then((res) => {\n        console.log('[MainPage] useEffect. res, byName', res, byName);\n        setDisplayedMovies(res || []);\n      });\n    // else if (route === 'search')\n    //   dispatch(loadMovies({ filter })).then((res) =>\n    //     setDisplayedMovies(res || [])\n    //   );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    let cards = null;\n    if (match.path.includes('byname')) cards = byName;\n    else if (match.path.includes('search')) cards = search;\n    else cards = popular;\n\n    console.log(cards);\n    const displayedMovies: ITranslatedMovie[] = cards\n      .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n      .filter(notEmpty);\n    console.log(displayedMovies);\n    setDisplayedMovies(displayedMovies);\n  }, [byName, search, popular, match.path, movies]);\n\n  return (\n    <Container>\n      <AlphabetNav />\n      <FilterSortPanel />\n      <CardsSlider />\n      {displayedMovies.length ? (\n        <Cards movies={displayedMovies} />\n      ) : (\n        <Typography\n          variant=\"h5\"\n          style={{ width: '100%', textAlign: 'center' }}\n        >{t`NoMoviesSearch`}</Typography>\n      )}\n    </Container>\n  );\n};\n\nexport default MainPage;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React, { useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\nimport { profile } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst Register = () => {\n  const [inputs, setInputs] = useState({\n    email: '',\n    username: '',\n    password: '',\n    confirm: '',\n  });\n  const [valid, setValid] = useState({\n    email: false,\n    password: false,\n    confirm: false,\n  });\n  const formValid = valid.email && valid.password;\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Register] handleSubmit', inputs);\n\n      const body = {\n        email: inputs.email,\n        username: inputs.username,\n        passwd: inputs.password,\n      };\n      const res = await profile.put('create', body);\n      console.log(res);\n      if (res.data.email) {\n        dispatch(saveUserState({ user: res.data }));\n        history.push('/');\n        toast({ text: t`Check your email` });\n      } else {\n        toast({ text: res.data[i18n.language] }, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language, dispatch, history]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, username: isValid })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 3,\n              maxLength: 20,\n              regex: /^[\\w-+.]+$/,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 3,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Register'),\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Register;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Register from '../../components/Register/Register';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst RegisterPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Register />\n    </Container>\n  );\n};\n\nexport default RegisterPage;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { setCookie } from '../../utils';\n\nconst Auth = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  React.useEffect(() => {\n    console.log('cookie', document.cookie);\n    console.log(window.location.href);\n    const queryParams = decodeURI(window.location.search);\n    console.log('queryParams', queryParams);\n    const accessToken = queryParams\n      .slice(1)\n      .split('&')\n      .find((el) => el.startsWith('accessToken'));\n    if (accessToken) {\n      const tokenStart = accessToken.search(/=(.+)/);\n      const token = accessToken.slice(tokenStart + 1);\n      console.log('tokenStart', token);\n      saveToken(token);\n      dispatch(getSelfInfo());\n      setCookie('accessToken', token, { path: '/' });\n      history.push('/');\n    }\n  }, [dispatch, history]);\n  return null;\n};\n\nexport default Auth;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    position: 'fixed',\n    bottom: 0,\n    right: 0,\n    background: 'linear-gradient(0deg, #ccc, transparent)',\n  },\n});\n\nconst Footer = () => {\n  const styles = useStyles();\n  const { t } = useTranslation();\n  return (\n    <Grid\n      container\n      alignItems=\"flex-end\"\n      justify=\"flex-end\"\n      className={styles.root}\n    >\n      {t`footerCreated`}\n    </Grid>\n  );\n};\n\nexport default Footer;\n","import {\n  Button,\n  Fade,\n  FormControl,\n  Grid,\n  InputBase,\n  makeStyles,\n  Paper,\n  Popper,\n  TextField,\n} from '@material-ui/core';\nimport { SearchRounded } from '@material-ui/icons';\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { loadMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { theme } from '../../theme';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '10px',\n    border: `1px solid ${theme.palette.grey[500]}`,\n    borderRadius: 5,\n    maxWidth: 300,\n    [theme.breakpoints.down('xs')]: {\n      display: 'none',\n    },\n  },\n  Input: {\n    padding: '5px 1rem',\n    flex: 1,\n  },\n  BaseInput: {\n    padding: 0,\n  },\n  Icon: {\n    fontSize: '2rem',\n    color: theme.palette.grey[700],\n    paddingRight: 5,\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '1.6rem',\n      paddingRight: 0,\n    },\n  },\n  Button: {\n    margin: '10px',\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  Popper: {\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n});\n\nconst Search = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [search, setSearch] = useState('');\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const loading = useSelector((state: RootState) => state.movies.loading);\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  };\n\n  const handleSearch = async (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      console.log(`Searching for: ${search}`);\n      const filter = { search };\n      dispatch(loadMovies({ filter }));\n      history.push(encodeURI(`/search/${search}`));\n      setSearch('');\n    }\n  };\n  const handleOpenSearch = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setAnchorEl(anchorEl ? null : e.currentTarget);\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? 'search-popover' : undefined;\n\n  return (\n    <FormControl>\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"flex-end\"\n        className={classes.root}\n      >\n        <InputBase\n          className={classes.Input}\n          inputProps={{ 'aria-label': 'search for a movie' }}\n          value={search}\n          classes={{ input: classes.BaseInput }}\n          onChange={handleInput}\n          onKeyPress={handleSearch}\n          placeholder={t('search')}\n          disabled={loading}\n        />\n        <SearchRounded className={classes.Icon} />\n      </Grid>\n\n      <Button\n        aria-describedby={id}\n        className={classes.Button}\n        onClick={handleOpenSearch}\n        variant=\"outlined\"\n      >\n        <SearchRounded className={classes.Icon} />\n      </Button>\n      <Popper\n        open={open}\n        anchorEl={anchorEl}\n        placement={'bottom-end'}\n        transition\n        className={classes.Popper}\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={250}>\n            <Paper>\n              <TextField\n                size=\"small\"\n                className={classes.Input}\n                inputProps={{ 'aria-label': 'search for a movie' }}\n                value={search}\n                classes={{ root: classes.BaseInput }}\n                onChange={handleInput}\n                onKeyPress={handleSearch}\n                placeholder={t('search')}\n              />\n            </Paper>\n          </Fade>\n        )}\n      </Popper>\n    </FormControl>\n  );\n};\n\nexport default Search;\n","import React, { useState } from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { theme } from '../../theme';\n\nconst languages = ['en', 'ru'];\n\nconst useStyles = makeStyles({\n  Button: {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.7rem',\n    },\n  },\n});\n\nconst Internationalization = () => {\n  const classes = useStyles();\n  const [lang, setLang] = useState(0);\n  const nextLang = (lang + 1) % languages.length;\n  const { t, i18n } = useTranslation();\n\n  const handleClick = () => {\n    i18n.changeLanguage(languages[nextLang]);\n    setLang(nextLang);\n  };\n  return (\n    <div>\n      <Button onClick={handleClick} className={classes.Button}>{`${t(\n        'translate'\n      )} ${t(languages[nextLang])}`}</Button>\n    </div>\n  );\n};\n\nexport default Internationalization;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { authFail, removeToken } from '../../store/features/UserSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { handlersContext } from '../Dropdown/Dropdown';\n\nconst useStyles = makeStyles({\n  Type: {\n    fontWeight: 100,\n    marginRight: 10,\n  },\n  Text: {\n    fontWeight: 300,\n  },\n  marginAuto: { marginLeft: 'auto', marginRight: 10 },\n});\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const { onClose } = React.useContext(handlersContext);\n  const { username, email, imageBody } = useSelector(\n    (state: RootState) => state.user\n  );\n  const avatar = imageBody || undefined;\n\n  const handleLogout = () => {\n    removeToken();\n    dispatch(authFail());\n    onClose();\n  };\n\n  const handleUpdateInfo = () => {\n    onClose();\n    history.push('/settings');\n  };\n\n  return (\n    <Grid container>\n      <Grid item container wrap=\"nowrap\" alignItems=\"center\">\n        <Avatar src={avatar} alt={username} />\n        <Button\n          onClick={handleUpdateInfo}\n          className={classes.marginAuto}\n        >{t`Update info`}</Button>\n        <Button onClick={handleLogout}>{t`Logout`}</Button>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Username`}</Typography>\n        <Typography className={classes.Text}>{username}</Typography>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Email`}</Typography>\n        <Typography className={classes.Text}>{email}</Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UserInfo;\n","import { makeStyles, SvgIcon } from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  width?: number;\n  height?: number;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    color: '#035263',\n    '&:hover>': {\n      '& $_0': {\n        animation: `$forward 1s infinite ease-in-out`,\n      },\n      '& $_1': {\n        animation: `$stretch1 1s infinite ease-out`,\n      },\n      '& $_2': {\n        animation: `$stretch2 0.9s infinite ease-out`,\n      },\n      '& $_3': {\n        animation: `$stretch1 1.1s infinite ease-out`,\n      },\n      '& $_4': {\n        animation: `$stretch1 0.8s infinite ease-out`,\n      },\n    },\n  },\n  _0: {},\n  _1: {},\n  _2: {},\n  _3: {},\n  _4: {},\n  '@keyframes stretch1': {\n    '0%': {\n      opacity: 0.8,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-10px) scaleX(1)',\n    },\n    '70%': {\n      opacity: 0.8,\n    },\n    '80%': {\n      opacity: 0.2,\n      transform: 'translateX(-80px) scaleX(1.5)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n  '@keyframes forward': {\n    '0%': {\n      transform: 'translateX(0)',\n    },\n    '10%': {\n      transform: 'translateX(10px) translateY(3px)',\n    },\n    '50%': {\n      transform: 'translateX(0px) translateY(-3px)',\n    },\n    '80%': {\n      transform: 'translateX(-7px) translateY(4px)',\n    },\n    '100%': {\n      transform: 'translateX(0px) translateY(0)',\n    },\n  },\n  '@keyframes stretch2': {\n    '0%': {\n      opacity: 0.2,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-15px) scaleX(1.2)',\n    },\n    '80%': {\n      opacity: 0.6,\n    },\n    '90%': {\n      opacity: 0.2,\n      transform: 'translateX(-40px) scaleX(1.4)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n});\n\nconst Logo = ({ width = 70, height = 50 }: Props) => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      style={{ width, height }}\n      className={classes.root}\n      viewBox={'-100 0 584 384'}\n    >\n      <path\n        className={classes._0}\n        d=\"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z\"\n      />\n      <path\n        className={classes._1}\n        d=\"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z\"\n      />\n      <path\n        className={classes._2}\n        d=\"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z\"\n      />\n      <path\n        className={classes._3}\n        d=\"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z\"\n      />\n      <path\n        className={classes._4}\n        d=\"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default Logo;\n","import { ButtonProps, Grid, makeStyles } from '@material-ui/core';\nimport { PersonOutlineRounded, PersonRounded } from '@material-ui/icons';\nimport React from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport Login from '../Login/Login';\nimport Search from '../Search/Search';\nimport Internationalization from '../../components/Internationalization/Internationalization';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport UserInfo from '../UserInfo/UserInfo';\nimport Logo from '../Logo/Logo';\nimport { NavLink } from 'react-router-dom';\nimport { resetEndOfMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nconst useStyles = makeStyles({\n  root: {},\n  Avatar: {\n    height: '1.5rem',\n    width: '1.5rem',\n  },\n});\n\nconst Header: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth, imageBody } = useSelector((state: RootState) => state.user);\n\n  const buttonProps: ButtonProps = {\n    variant: 'outlined',\n  };\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      <Grid item xs={2}>\n        <NavLink onClick={() => dispatch(resetEndOfMovies())} to=\"/\">\n          <Logo />\n        </NavLink>\n      </Grid>\n      <Grid\n        container\n        justify=\"flex-end\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        item\n        xs={8}\n      >\n        <Internationalization />\n        <Search />\n      </Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}></Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}>\n        {isAuth ? (\n          <Dropdown\n            img={imageBody || ''}\n            icon={<PersonRounded aria-label=\"user-profile\" />}\n            buttonProps={buttonProps}\n          >\n            {<UserInfo />}\n          </Dropdown>\n        ) : (\n          <Dropdown\n            icon={<PersonOutlineRounded aria-label=\"user-profile\" />}\n            buttonProps={buttonProps}\n          >\n            {<Login />}\n          </Dropdown>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles, Typography } from '@material-ui/core';\n\ninterface Props {\n  text: string;\n}\n\nconst useStyles = makeStyles({\n  h3: {\n    fontSize: '1.6rem',\n    textTransform: 'uppercase',\n    margin: '10px 0',\n    fontWeight: 900,\n  },\n});\n\nconst CategoryHeader = ({ text }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"h3\" className={classes.h3}>\n      {text}\n    </Typography>\n  );\n};\n\nexport default CategoryHeader;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\n\ninterface Props {\n  name: string;\n  sources?: string[];\n  type: 'photo' | 'video';\n}\ninterface GridItemProps {\n  name: string;\n  src: string;\n  type: 'photo' | 'video';\n  key?: string | number;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '10px 0',\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    transform: 'translateZ(0)',\n  },\n  HorizontalScroll: {\n    overflowX: 'auto',\n  },\n  Image: {\n    height: '10rem',\n    marginRight: 10,\n  },\n}));\n\nconst GridItem: React.FC<GridItemProps> = ({\n  src,\n  name,\n  type,\n}: GridItemProps) => {\n  const classes = useStyles();\n\n  switch (type) {\n    case 'photo':\n      return <img src={src} alt={name} className={classes.Image} />;\n    case 'video':\n      return <video controls src={src} className={classes.Image} />;\n    default:\n      return null;\n  }\n};\n\nconst HorizontalGrid = ({ sources, name, type }: Props) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <CategoryHeader text={t(`${type}s`)} />\n      <Grid container wrap=\"nowrap\" className={classes.HorizontalScroll}>\n        {sources?.length\n          ? sources.map((item: string, index: number) => (\n              <GridItem key={item + index} src={item} name={name} type={type} />\n            ))\n          : t`No info`}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default HorizontalGrid;\n","import React from 'react';\nimport { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { IComment } from '../../../models/MovieInfo';\nimport { primaryColor } from '../../../theme';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    marginBottom: 5,\n  },\n  h4: {\n    fontWeight: 700,\n    fontSize: '1rem',\n    marginBottom: 10,\n  },\n  Image: {\n    marginRight: 10,\n    background: primaryColor.main,\n  },\n  Text: {\n    width: '100%',\n    textAlign: 'justify',\n  },\n});\n\nconst Comment: React.FC<IComment> = ({ username, text, avatar }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container wrap=\"nowrap\" className={classes.root}>\n      <Avatar\n        src={avatar}\n        alt={`${username}'s avatar`}\n        className={classes.Image}\n      >\n        {username.substr(0, 2)}\n      </Avatar>\n      <Grid>\n        <Typography variant=\"h4\" className={classes.h4}>\n          {username}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.Text}>\n          {text}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button, Grid, makeStyles, TextField } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { movies } from '../../../axios';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../store/rootReducer';\nimport { useAppDispatch } from '../../../store/store';\nimport { updateComments } from '../../../store/features/MoviesSlice';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '1rem 0',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n});\n\nexport interface IComment {\n  id?: number;\n  userid: string;\n  movieid: string;\n  text: string;\n  time?: number;\n}\n\nconst SendComment = () => {\n  const classes = useStyles();\n  const { userId } = useSelector((state: RootState) => state.user);\n  const [comment, setComment] = React.useState('');\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const sendForm = async () => {\n    if (!comment.length) return;\n    console.log(comment);\n    const movieid = window.location.href.split('/').pop();\n    const res = await movies.post('/comment', {\n      userid: `${userId}`,\n      movieid,\n      text: comment,\n      time: new Date().getTime(),\n    } as IComment);\n    if (res.data.status)\n      dispatch(updateComments({ id: movieid, comments: [res.data.data] }));\n    setComment('');\n  };\n\n  const handleInput = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.ctrlKey && e.key === 'Enter') sendForm();\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendForm();\n  };\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <form onSubmit={handleSubmit} className={classes.Form}>\n        <TextField\n          fullWidth\n          multiline\n          name=\"comment\"\n          type=\"textarea\"\n          placeholder={t`Leave a comment!`}\n          className={classes.margin}\n          size=\"small\"\n          onChange={(e) => setComment(e.currentTarget.value)}\n          onKeyPress={handleInput}\n          value={comment}\n        />\n        <Button type=\"submit\" className={classes.margin} variant=\"contained\">\n          {t`Send`}\n        </Button>\n      </form>\n    </Grid>\n  );\n};\n\nexport default SendComment;\n","import React, { useEffect, useRef } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport Comment from './Comment/Comment';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport SendComment from './SendComment/SendComment';\nimport { loadComments } from '../../store/features/MoviesSlice';\nimport { debouncedDetectBottomLine } from '../../utils';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch } from '../../store/store';\nimport { IMovie } from '../../models/MovieInfo';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nconst LIMIT = 5;\nexport interface CommentsProps {\n  movie: IMovie;\n}\n\nconst Comments: React.FC<CommentsProps> = ({ movie }) => {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const offsetRef = useRef(0);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  // load first batch of comments initially\n  // if there's something left to load\n  useEffect(() => {\n    if (!movie?.info.maxComments) return;\n    if (\n      !movie.info.comments ||\n      (movie.info.comments &&\n        movie.info.comments.length < movie.info.maxComments)\n    ) {\n      dispatch(\n        loadComments(\n          { movieId: movie.id, offset: movie.info.comments?.length },\n          (length) => (offsetRef.current += length)\n        )\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!movie || !movie.info.maxComments) return;\n    const endOfCommentsCallback = () => {\n      if (\n        movie.info.comments?.length &&\n        movie.info.comments?.length < movie.info.maxComments\n      ) {\n        dispatch(\n          loadComments({\n            movieId: movie.id,\n            limit: LIMIT,\n            offset: movie.info.comments?.length || 0,\n          })\n        );\n      }\n    };\n    const trackScrolling = debouncedDetectBottomLine(\n      gridRef.current,\n      endOfCommentsCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [\n    movie,\n    movie.info.comments?.length,\n    movie.info.maxComments,\n    movie.id,\n    dispatch,\n  ]);\n\n  if (!movie) return null;\n  const content = movie.info.comments?.length ? (\n    movie.info.comments.map((comment) => (\n      <Comment {...comment} key={comment.commentid} />\n    ))\n  ) : (\n    <Typography variant=\"body1\" style={{ fontSize: '1.3rem' }}>\n      {t`No comments`}\n    </Typography>\n  );\n\n  return (\n    <Grid ref={gridRef} style={{ marginTop: 10 }} container direction=\"column\">\n      <CategoryHeader text={t`Comments`} />\n      {isAuth && <SendComment />}\n      {content}\n    </Grid>\n  );\n};\n\nexport default Comments;\n","import {\n  Button,\n  Grid,\n  IconButton,\n  makeStyles,\n  Popover,\n  Slider,\n  Tooltip,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport React, { forwardRef } from 'react';\nimport {\n  FastForward,\n  FastRewind,\n  Fullscreen,\n  Pause,\n  PlayArrow,\n  VolumeOff,\n  VolumeUp,\n  Subtitles,\n  SubtitlesOutlined,\n} from '@material-ui/icons';\n\nconst useStyles = makeStyles({\n  controlsWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.6)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    zIndex: 1,\n  },\n\n  controlIcons: {\n    color: '#777',\n    fontSize: 50,\n    transform: 'scale(0.9)',\n    '&:hover': {\n      color: 'white',\n      transform: 'scale(1)',\n    },\n  },\n\n  bottomIcons: {\n    color: '#999',\n    '&:hover': {\n      color: 'white',\n    },\n  },\n\n  volumeSlider: {\n    width: 100,\n  },\n});\n\ninterface ValueProps {\n  open: boolean;\n  value: string;\n  children: JSX.Element;\n}\n\nconst ValueLabelComponent: React.FC<ValueProps> = (props2) => {\n  // debugger\n  const { children, open, value } = props2;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n\n    // <Popover\n    //   id=\"mouse-over-popover\"\n    //   // style={{\n    //   //   paper: { padding: 5 },\n    //   // }}\n    //   open={open}\n    //   // anchorEl={anchorEl}\n    //   anchorOrigin={{\n    //     vertical: 'bottom',\n    //     horizontal: 'left',\n    //   }}\n    //   transformOrigin={{\n    //     vertical: 'top',\n    //     horizontal: 'left',\n    //   }}\n    //   // onClose={handlePopoverClose}\n    //   disableRestoreFocus\n    // >\n    //   {children}\n    // </Popover>\n  );\n};\n\nconst PrettoSlider = withStyles({\n  root: {\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus, &:hover, &$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\ninterface Props {\n  onPlayPause: () => void;\n  onMuted: () => void;\n  onRewind: () => void;\n  onFastForward: () => void;\n  onVolumeChange: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onVolumeSeekUp: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onPlaybackRateChange: (n: number) => void;\n  onToggleFullScreen: () => void;\n  onSeek: (n: number | number[]) => void;\n  onSeekMouseDown: () => void;\n  onSeekMouseUp: () => void;\n  onChangeDisplayFormat: () => void;\n  onChangeSubtitles: () => void;\n  elapsedTime: string;\n  seeking: boolean;\n  playing: boolean;\n  muted: boolean;\n  volume: number;\n  played: number;\n  playbackRate: number;\n  totalDuration: string;\n  title: string;\n  showSubtitles: boolean;\n}\n\nconst PlayerControls = forwardRef<HTMLDivElement, Props>((props, ref) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<Element | null>(null);\n\n  const handlePopover = (e: React.MouseEvent) => {\n    setAnchorEl(e.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'playbackrate-popover' : undefined;\n  // debugger\n  return (\n    <div className={classes.controlsWrapper} ref={ref}>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item>\n          <Typography variant=\"h5\" style={{ color: 'white' }}>\n            {props.title}\n          </Typography>\n        </Grid>\n        {/* <Grid item>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<BookmarkIcon />}>\n\t\t\t\t\t\tBookmark\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t</Grid> */}\n      </Grid>\n      <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n        <IconButton\n          onClick={props.onRewind}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastRewind fontSize=\"inherit\" />\n        </IconButton>\n        <IconButton\n          onClick={props.onPlayPause}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          {props.playing ? (\n            <Pause fontSize=\"inherit\" />\n          ) : (\n            <PlayArrow fontSize=\"inherit\" />\n          )}\n        </IconButton>\n        <IconButton\n          onClick={props.onFastForward}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastForward fontSize=\"inherit\" />\n        </IconButton>\n      </Grid>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item xs={12}>\n          <PrettoSlider\n            min={0}\n            max={100}\n            ValueLabelComponent={(props2) => (\n              <ValueLabelComponent {...props2} value={props.elapsedTime} />\n            )}\n            value={props.played * 100}\n            onChange={(e, value) => props.onSeek(value)}\n            onMouseDown={props.onSeekMouseDown}\n            onChangeCommitted={props.onSeekMouseUp}\n          />\n        </Grid>\n        <Grid item>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <IconButton\n              onClick={props.onPlayPause}\n              className={classes.bottomIcons}\n            >\n              {props.playing ? (\n                <Pause fontSize=\"large\" />\n              ) : (\n                <PlayArrow fontSize=\"large\" />\n              )}\n            </IconButton>\n            <IconButton onClick={props.onMuted} className={classes.bottomIcons}>\n              {props.muted ? (\n                <VolumeOff fontSize=\"large\" />\n              ) : (\n                <VolumeUp fontSize=\"large\" />\n              )}\n            </IconButton>\n            <Slider\n              min={0}\n              max={100}\n              value={props.volume * 100}\n              className={classes.volumeSlider}\n              onChange={props.onVolumeChange}\n              onChangeCommitted={props.onVolumeSeekUp}\n            />\n            <Button\n              onClick={props.onChangeDisplayFormat}\n              variant=\"text\"\n              style={{ color: '#fff', marginLeft: 16 }}\n            >\n              <Typography>\n                {props.elapsedTime}/{props.totalDuration}\n              </Typography>\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Button\n            onClick={handlePopover}\n            variant=\"text\"\n            className={classes.bottomIcons}\n          >\n            <Typography>{props.playbackRate}X</Typography>\n          </Button>\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n          >\n            <Grid container direction=\"column-reverse\">\n              {[0.5, 1, 1.5, 2].map((rate) => (\n                <Button\n                  key={rate}\n                  onClick={() => props.onPlaybackRateChange(rate)}\n                  variant=\"text\"\n                >\n                  <Typography\n                    color={\n                      rate === props.playbackRate ? 'secondary' : undefined\n                    }\n                  >\n                    {rate}\n                  </Typography>\n                </Button>\n              ))}\n            </Grid>\n          </Popover>\n          <IconButton\n            onClick={props.onChangeSubtitles}\n            className={classes.bottomIcons}\n          >\n            {props.showSubtitles ? (\n              <Subtitles fontSize=\"large\" />\n            ) : (\n              <SubtitlesOutlined fontSize=\"large\" />\n            )}\n          </IconButton>\n          <IconButton\n            onClick={props.onToggleFullScreen}\n            className={classes.bottomIcons}\n          >\n            <Fullscreen fontSize=\"large\" />\n          </IconButton>\n        </Grid>\n      </Grid>\n    </div>\n  );\n});\n\nexport default PlayerControls;\n","export default __webpack_public_path__ + \"static/media/TheHobbit.a17ad392.vtt\";","import { makeStyles } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactPlayer from 'react-player';\nimport screenfull from 'screenfull';\nimport PlayerControls from './PlayerControls';\nimport vtt from './TheHobbit.vtt';\n\nconst useStyles = makeStyles({\n  playerWrapper: {\n    position: 'relative',\n    width: '100%',\n  },\n  Error: {\n    width: '100%',\n    height: '100%',\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: '#ddd',\n    borderRadius: 5,\n  },\n});\n\ninterface Props {\n  title: string;\n  id?: string | number;\n  src?: string;\n}\n\nconst format = (seconds: number) => {\n  if (isNaN(seconds)) {\n    return '00:00';\n  }\n  const date = new Date(seconds * 1000);\n  const hh = date.getUTCHours();\n  const mm = date.getUTCMinutes();\n  const ss = date.getUTCSeconds().toString().padStart(2, '0');\n  if (hh) {\n    return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\n  }\n  return `${mm}:${ss}`;\n};\n\nfunction Player({ title, id, src }: Props) {\n  const classes = useStyles();\n  const [state, setState] = useState({\n    playing: false,\n    muted: false,\n    volume: 1,\n    playbackRate: 1.0,\n    played: 0, //0.10374984039784949\n    seeking: false,\n    controlsVisible: true,\n    error: false,\n    srt: '',\n    showSubtitles: true,\n  });\n  const [player, setPlayer] = React.useState<Record<string, any>>();\n  const [timeDisplayFormat, setTimeDisplayFormat] = useState('normal');\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    seeking,\n    controlsVisible,\n    error,\n    srt,\n    showSubtitles,\n  } = state;\n  const playerRef = useRef<ReactPlayer>(null);\n  const playerContainerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n  const timeoutId = useRef<NodeJS.Timeout>();\n  const videoUrl = id ? `/api/storage/load/${id}/video` : src;\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!playerRef || !playerRef.current) return;\n\n    console.log('[Player] useEffect');\n    const player = playerRef.current.getInternalPlayer();\n    console.dir(player);\n    console.log(playerRef.current);\n    setPlayer(player);\n\n    if (!player) return;\n    const playListener = player.addEventListener('play', () => {\n      console.log('play');\n    });\n    const emptiedListener = player.addEventListener('emptied', () => {\n      console.log('emptied');\n    });\n    const durationChangeListener = player.addEventListener(\n      'durationchange',\n      () => {\n        console.log('durationchange');\n      }\n    );\n    const endedListener = player.addEventListener('ended', () => {\n      console.log('ended');\n    });\n    const stalledListener = player.addEventListener('stalled', () => {\n      console.log('stalled');\n    });\n    const suspendListener = player.addEventListener('suspend', () => {\n      console.log('suspend');\n    });\n    const waitingListener = player.addEventListener('waiting', () => {\n      console.log('waiting');\n    });\n    return () => {\n      player.removeEventListener('play', playListener);\n      player.removeEventListener('emptied', emptiedListener);\n      player.removeEventListener('ended', endedListener);\n      player.removeEventListener('durationchange', durationChangeListener);\n      player.removeEventListener('stalled', stalledListener);\n      player.removeEventListener('suspend', suspendListener);\n      player.removeEventListener('waiting', waitingListener);\n    };\n  }, [playerRef]);\n\n  // useEffect(() => {\n  //   const loadSubtitles = async () => {\n  //     try {\n  //       const res = await axios(`/api/storage/load/${id}/srt`);\n  //       console.log(res.data);\n  //       if (!res.data) return;\n  //       const srt = URL.createObjectURL(res.data);\n  //       setState({ ...state, srt });\n  //     } catch (e) {\n  //       console.log(e);\n  //     }\n  //   };\n  //   loadSubtitles();\n  //   return () => URL.revokeObjectURL(srt);\n  // }, []);\n\n  const handleChangeSubtitles = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    if (!player) {\n      const player = playerRef.current.getInternalPlayer();\n      setPlayer(() => player);\n    }\n    const tracks = player?.textTracks;\n    if (!tracks || !tracks.length) return;\n    const showing = tracks[0].mode === 'showing';\n    tracks[0].mode = showing ? 'disabled' : 'showing';\n    console.log(tracks[0]);\n    setState({ ...state, showSubtitles: showing });\n  };\n\n  const handlePlayPause = () => {\n    setState({ ...state, playing: !state.playing });\n  };\n  const handleRewind = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() - 10);\n  };\n  const handleFastForward = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() + 10);\n  };\n  const handleMute = () => {\n    setState({ ...state, muted: !state.muted });\n  };\n  const handleVolumeChange = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handleVolumeSeekUp = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handlePlaybackRateChange = (rate: number) => {\n    setState({ ...state, playbackRate: rate });\n  };\n  const toggleFullScreen = () => {\n    if (!playerContainerRef || !playerContainerRef.current) return;\n    if (screenfull && screenfull.isEnabled && playerContainerRef !== null) {\n      screenfull.toggle(playerContainerRef.current);\n    }\n  };\n\n  const handleProgress = ({ played }: { played: number }) => {\n    console.log('handleProgress', played);\n    if (!controlsRef || !controlsRef.current) return;\n    timeoutId.current = setTimeout(() => {\n      if (!controlsRef || !controlsRef.current) return;\n      controlsRef.current.style.visibility = 'hidden';\n    }, 1000);\n    if (!state.seeking) {\n      setState({ ...state, played });\n    }\n  };\n  const handleSeek = (value: number | number[]) => {\n    if (!playerRef || !playerRef.current) return;\n    const played = typeof value === 'number' ? value / 100 : value[0] / 100;\n    if (played === state.played) return;\n    setState({ ...state, played });\n    playerRef.current.seekTo(played, 'fraction');\n  };\n  const handleSeekMouseDown = () => {\n    setState({ ...state, seeking: true });\n  };\n  const handleSeekMouseUp = () => {\n    setState({ ...state, seeking: false });\n  };\n  const handleChangeDisplayFormat = () => {\n    setTimeDisplayFormat(\n      timeDisplayFormat === 'normal' ? 'remaining' : 'normal'\n    );\n  };\n  const handleMouseMove = () => {\n    if (!controlsRef || !controlsRef.current) return;\n    controlsRef.current.style.visibility = 'visible';\n    if (timeoutId.current) clearTimeout(timeoutId.current);\n  };\n  const handleError = (e: Error) => {\n    console.log('handleError', e);\n\n    setState((prev) => ({ ...prev, played: prev.played + 0.001 }));\n  };\n\n  const currentTime =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getCurrentTime();\n  const duration =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getDuration();\n  const elapsedTime =\n    timeDisplayFormat === 'normal'\n      ? format(currentTime)\n      : `-${format(duration - currentTime)}`;\n  const totalDuration = format(duration);\n\n  return error ? (\n    <div className={classes.Error}>{t`Cannot load movie`}</div>\n  ) : (\n    <div\n      ref={playerContainerRef}\n      className={classes.playerWrapper}\n      onMouseMove={handleMouseMove}\n    >\n      <ReactPlayer\n        ref={playerRef}\n        width=\"100%\"\n        height=\"100%\"\n        url={videoUrl}\n        muted={muted}\n        playing={playing}\n        volume={volume}\n        controls={false}\n        playbackRate={playbackRate}\n        onProgress={handleProgress}\n        onError={handleError}\n        onBuffer={() => console.log('onBuffer')}\n        onBufferEnd={() => console.log('onBufferEnd')}\n        config={{\n          file: {\n            tracks: [\n              {\n                kind: 'subtitles',\n                src: vtt,\n                srcLang: 'en',\n                label: 'en',\n                default: true,\n              },\n            ],\n          },\n        }}\n      />\n      {controlsVisible && (\n        <PlayerControls\n          ref={controlsRef}\n          onPlayPause={handlePlayPause}\n          onMuted={handleMute}\n          playing={playing}\n          muted={muted}\n          volume={volume}\n          played={played}\n          seeking={seeking}\n          showSubtitles={showSubtitles}\n          onRewind={handleRewind}\n          onFastForward={handleFastForward}\n          onVolumeChange={handleVolumeChange}\n          onVolumeSeekUp={handleVolumeSeekUp}\n          playbackRate={playbackRate}\n          onPlaybackRateChange={handlePlaybackRateChange}\n          onToggleFullScreen={toggleFullScreen}\n          onSeek={handleSeek}\n          onSeekMouseDown={handleSeekMouseDown}\n          onSeekMouseUp={handleSeekMouseUp}\n          elapsedTime={elapsedTime}\n          totalDuration={totalDuration}\n          onChangeSubtitles={handleChangeSubtitles}\n          onChangeDisplayFormat={handleChangeDisplayFormat}\n          title={title}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Player;\n","import { Grid, Typography } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useToast } from '../../hooks/useToast';\nimport { loadActivePeers } from '../../store/features/MoviesSlice';\n\ninterface Props {\n  movieId?: string | number;\n}\n\nconst WARNING_MESSAGE_TIMEOUT = 30000;\nconst STATS_REQUEST_INTERVAL = 10000;\n\nconst initialState = { activePeers: 0, loadedPercent: 0 };\nconst ActivePeers = ({ movieId }: Props) => {\n  const [state, setState] = useState(initialState);\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!movieId) return;\n    const timeout = setTimeout(() => {\n      if (!state.activePeers) {\n        toast({ text: t`loadingTimeoutWarning` }, 'warning', {\n          autoHideDuration: 7000,\n        });\n      }\n    }, WARNING_MESSAGE_TIMEOUT);\n    const interval = setInterval(async () => {\n      const data = await loadActivePeers(`${movieId}`);\n      if (data) setState(data);\n      if (data?.activePeers || data?.loadedPercent === 100)\n        clearTimeout(timeout);\n    }, STATS_REQUEST_INTERVAL);\n    return () => {\n      clearInterval(interval);\n      clearTimeout(timeout);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Grid container>\n      <Typography style={{ marginRight: 5 }}>\n        Active peers: {state.activePeers}\n      </Typography>\n      <Typography>Percent loaded: {state.loadedPercent}%</Typography>\n    </Grid>\n  );\n};\n\nexport default ActivePeers;\n","import { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { IUser } from '../../models/MovieInfo';\nimport HorizontalGrid from '../HorizontalGrid/HorizontalGrid';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport Comments from '../Comments/Comments';\nimport { useAppDispatch } from '../../store/store';\nimport { loadMovie, resetError } from '../../store/features/MoviesSlice';\nimport { useTranslation } from 'react-i18next';\nimport { primaryColor } from '../../theme';\nimport Player from '../Player/Player';\nimport { useToast } from '../../hooks/useToast';\nimport NativePlayer from '../Player/NativePlayer';\nimport ActivePeers from '../Player/ActivePeers';\n\ninterface TParams {\n  id: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    fontSize: '1.3rem',\n    padding: '10px 0',\n  },\n  Header: {\n    fontSize: '2rem',\n    margin: '0 10px',\n    fontWeight: 700,\n  },\n  Divider: {\n    margin: '10px 0',\n  },\n  Poster: {\n    height: '23rem',\n    marginRight: 10,\n  },\n  MainInfoText: {\n    margin: 5,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'flex-end',\n    fontSize: 'inherit',\n    fontWeight: 200,\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    color: 'inherit',\n    fontWeight: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n  Description: {\n    marginTop: 10,\n    fontSize: 'inherit',\n  },\n  Video: {\n    margin: '15px 0',\n  },\n  AdditionalInfo: {\n    margin: '10px 0',\n  },\n});\n\nconst MovieFullInfo = ({ match }: RouteComponentProps<TParams>) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const { toast } = useToast();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { movies, error } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((movie) => movie.en.id === match.params.id);\n  const headerRef = React.useRef<HTMLHeadingElement | null>(null);\n\n  // if no movies in redux - load some, we've landed on movie's page\n  useEffect(() => {\n    if (!movie) dispatch(loadMovie(match.params.id));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      history.push('/');\n      toast({ text: t(error) }, 'error');\n      dispatch(resetError());\n    }\n  }, [error, dispatch, history, t, toast, i18n.language]);\n\n  useEffect(() => {\n    if (!headerRef || !headerRef.current) return;\n    headerRef.current.scrollIntoView(true);\n  }, []);\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined,\n    backup?: string\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return backup || t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n  const mapItems = (items?: (string | IUser)[], backup?: string): string => {\n    if (!items || !items.length) return backup || t('No info');\n    const names = items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return text;\n    });\n    return names.join(', ');\n  };\n\n  if (!isAuth)\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        className={classes.root}\n      >\n        <Typography className={classes.Description}>{t`AuthOnly`}</Typography>\n      </Grid>\n    );\n\n  if (!movie) return null;\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <Typography variant=\"h2\" className={classes.Header} ref={headerRef}>\n        {movie[i18n.language as 'en' | 'ru'].title}\n      </Typography>\n      <Divider className={classes.Divider} />\n      <Grid container wrap=\"nowrap\">\n        <img\n          className={classes.Poster}\n          src={movie.en.img}\n          alt={`${movie.en.title} poster`}\n        />\n        <Grid item container direction=\"column\">\n          <Grid container className={classes.MainInfoText}>\n            {t`Year`}: {movie.en.info.year}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Genres`}: {mapItemsToLinks(movie.en.info.genres)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Length`}:{' '}\n            {movie.en.info.length > 0\n              ? `${movie.en.info.length}${t('min')}`\n              : t`unknown`}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Views`}: {movie.en.info.views}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`PG rating`}: {movie.en.info.pgRating}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Directed`}:{' '}\n            {mapItems(movie.en.info.directorList, movie.en.info.directors)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Actors`}: {mapItems(movie.en.info.cast, movie.en.info.stars)}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container className={classes.Video}>\n        {/* <NativePlayer id={movie.en.id} /> */}\n        {/* <NativePlayer src={`/api/test/id000`} /> */}\n        <ActivePeers movieId={movie.en.id} />\n\n        <Player\n          id={movie.en.id}\n          title={movie[i18n.language as 'en' | 'ru'].title}\n        />\n      </Grid>\n      <Grid container direction=\"column\" className={classes.AdditionalInfo}>\n        <CategoryHeader text={t`About movie`} />\n        <Typography variant=\"body1\" className={classes.Description}>\n          {movie[i18n.language as 'en' | 'ru'].info.description || t`No info`}\n        </Typography>\n        <Divider className={classes.Divider} />\n        {movie.en.info.photos && (\n          <HorizontalGrid\n            sources={movie.en.info.photos}\n            name={movie.en.title}\n            type={'photo'}\n          />\n        )}\n        {movie.en.info.videos && (\n          <HorizontalGrid\n            sources={movie.en.info.videos}\n            name={movie.en.title}\n            type={'video'}\n          />\n        )}\n        <Comments movie={movie.en} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default MovieFullInfo;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useSelector } from 'react-redux';\nimport classnames from 'classnames';\nimport { RootState } from '../../../store/rootReducer';\nimport { Paper } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      minWidth: '344px !important',\n    },\n  },\n  card: {\n    display: 'flex',\n    width: '100%',\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  prompt: {\n    backgroundColor: theme.palette.grey[800],\n    width: 550,\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: 'block',\n    fontWeight: 'bold',\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: '8px 8px 8px 26px',\n  },\n  close: {\n    marginLeft: 'auto !important',\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: '1rem',\n    color: theme.palette.common.white,\n  },\n}));\n\ninterface Props {\n  id: string;\n}\n\nconst SnackMessage = React.forwardRef<HTMLDivElement, Props>(({ id }, ref) => {\n  const classes = useStyles();\n  const { closeSnackbar } = useSnackbar();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n\n  const handleDismiss = () => {\n    closeSnackbar(id);\n  };\n\n  return (\n    <Paper ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}:\n            </Typography>\n          )}\n          {text && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {text}\n            </Typography>\n          )}\n        </CardActions>\n\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </Paper>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { removeSnack } from '../../store/features/SnackSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nlet displayed: string[] = [];\n\nconst Notifier = () => {\n  const dispatch = useAppDispatch();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id: string) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id: string) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (_event, key: string) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ForgotPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      try {\n        const res = await passwd.post('repair', { email: inputs.email });\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Check your email` });\n        } else {\n          console.log(res.data[i18n.language]);\n          toast({ text: res.data[i18n.language] || t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Restore password`,\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport { getSearchParam } from '../../utils';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ResetPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ password: '', confirm: '' });\n  const [valid, setValid] = useState({ password: false, confirm: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.password && valid.confirm;\n  const { toast } = useToast();\n  const history = useHistory();\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      const searchParams = getSearchParam();\n      if (!searchParams?.repairToken) {\n        toast({ text: t`ServerErrorTry` }, 'error');\n        history.push('/forgot_password');\n        return;\n      }\n      try {\n        const repairToken = searchParams.repairToken.replaceAll('%3D', '=');\n        const res = await passwd.patch(\n          '/repair/patch',\n          { passwd: inputs.password },\n          { headers: { repairToken } }\n        );\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Password changed` });\n          history.push('/login');\n        } else {\n          toast({ text: res.data[i18n.language] ?? t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'password',\n          type: 'password',\n          label: t`New password`,\n          placeholder: t`Enter password`,\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t`passwordError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t`Confirm`,\n          placeholder: t`Confirm password`,\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t`confirmError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new password`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, i18n.language, toast, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ResetPassword;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { email } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ChangeEmail = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ChangeEmail] handleSubmit', inputs);\n\n      // use cookie or repairToken to get new email\n      try {\n        const res = await email.post('patch', {\n          body: { email: inputs.email },\n        });\n        console.log(res);\n        if (res.status < 400) {\n          toast(t`Check your email`);\n        } else {\n          console.log(res.data[i18n.language]);\n          const message = {\n            text: res.data[i18n.language] ?? t`Server error`,\n          };\n\n          toast(message, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, t, i18n.language, toast]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) => {\n            setValid((prev) => ({ ...prev, email: isValid }));\n          },\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new email`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, formValid, handleInput, handleSubmit, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ChangeEmail;\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.41c95564.png\";","import { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useState, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { email, passwd, profile } from '../../axios';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport defaultAvatar from '../../images/defaultAvatar.png';\nimport { BackupRounded } from '@material-ui/icons';\nimport { RootState } from '../../store/rootReducer';\nimport { useSelector } from 'react-redux';\nimport { useToast } from '../../hooks/useToast';\nimport { getToken, saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  avatarWrapper: {\n    position: 'relative',\n    '&:hover': {\n      cursor: 'pointer',\n      '& $uploadIcon': {\n        opacity: 0.7,\n      },\n      '& $avatarImage': {\n        opacity: 0.5,\n      },\n    },\n  },\n  avatarImage: {\n    width: '100px',\n    height: '100px',\n    border: '2px solid rgba(3, 82, 99, 0.5)',\n    opacity: 1,\n    transition: '0.2s',\n  },\n  inputNone: {\n    display: 'none',\n  },\n  uploadIcon: {\n    position: 'absolute',\n    transition: '0.2s',\n    top: 20,\n    left: 20,\n    width: 60,\n    height: 60,\n    opacity: 0,\n    zIndex: 2,\n  },\n});\n\nconst Settings = () => {\n  const user = useSelector((state: RootState) => state.user);\n  const [inputs, setInputs] = useState({\n    email: user.email,\n    username: user.username,\n    newPassword: '',\n    currentPassword: '',\n    confirm: '',\n    avatarImage: user.imageBody,\n  });\n  const [valid, setValid] = useState({\n    email: true,\n    newPassword: true,\n    currentPassword: true,\n    confirm: true,\n    username: true,\n  });\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const validateForm = () => {\n    const { email, username, currentPassword, confirm } = valid;\n    return inputs.newPassword\n      ? currentPassword && confirm && (email || username)\n      : email || username;\n  };\n  const formValid = validateForm();\n\n  const validateUpload = (file: File) => {\n    return (\n      file.type === 'image/png' ||\n      file.type === 'image/jpg' ||\n      file.type === 'image/jpeg'\n    );\n  };\n\n  const uploadAvatar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) return;\n    let file = e.target.files[0];\n    if (!validateUpload(file)) {\n      e.target.value = '';\n      return toast({ text: 'Please add image only!' });\n    }\n    if (file.size > 2000000) {\n      e.target.value = '';\n      return toast({ text: 'Please upload picture size less then 2 mb!' });\n    }\n    let reader = new FileReader();\n    reader.onload = async function (e) {\n      if (!e.target || !e.target.result) return;\n      const image = e.target.result.toString();\n      setInputs({\n        ...inputs,\n        avatarImage: image,\n      });\n      const body = {\n        imageBody: image,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      // console.log(res.data);\n      if (res.status >= 400) toast({ text: t`Avatar upload error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              imageBody: image,\n            },\n          })\n        );\n        toast({ text: t`Avatar uploaded` });\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs((prevInputs) => ({\n        ...prevInputs,\n        [e.target.name]: e.target.value,\n      }));\n    };\n\n    const updateEmail = async () => {\n      const body = {\n        email: inputs.email,\n      };\n      const res = await email.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              email: inputs.email,\n            },\n          })\n        );\n        toast({ text: t`Check your email` });\n      }\n    };\n\n    const updateUsername = async () => {\n      const body = {\n        username: inputs.username,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              username: inputs.username,\n            },\n          })\n        );\n        toast({ text: t`User info updated` });\n      }\n    };\n\n    const updatePassword = async () => {\n      const body = {\n        passwd: inputs.currentPassword,\n        newPasswd: inputs.newPassword,\n      };\n      const res = await passwd.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        toast({ text: t`User info updated` });\n        setInputs({\n          ...inputs,\n          currentPassword: '',\n          confirm: '',\n          newPassword: '',\n        });\n      }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      if (inputs.email !== user.email) updateEmail();\n      if (inputs.username !== user.username) updateUsername();\n      if (inputs.newPassword) updatePassword();\n      console.log('[Settings] handleSubmit', inputs);\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 0,\n              maxLength: 40,\n              regex: /^(([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,}))?$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w-+.]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'newPassword',\n          type: 'password',\n          label: t('New password'),\n          placeholder: t('Enter new password'),\n          value: inputs.newPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: /^((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.newPassword}$`),\n            },\n          },\n        },\n        {\n          name: 'currentPassword',\n          type: 'password',\n          label: t('Current password'),\n          placeholder: t('Enter current password'),\n          value: inputs.currentPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('currentPasswordError'),\n            rule: {\n              minLength: inputs.newPassword.length ? 1 : 0,\n              maxLength: 25,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Save'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: () => history.goBack(),\n          text: t`Back`,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, dispatch, i18n.language, toast, user, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Typography>{t('Settings').toUpperCase()}</Typography>\n      <div\n        className={classes.avatarWrapper}\n        onClick={() => {\n          if (inputRef && inputRef.current) {\n            inputRef.current.click();\n          }\n        }}\n      >\n        <Avatar\n          className={classes.avatarImage}\n          alt=\"profile image\"\n          src={inputs.avatarImage || defaultAvatar}\n        />\n        <BackupRounded className={classes.uploadIcon} />\n        <input\n          className={classes.inputNone}\n          type=\"file\"\n          accept=\"image/png, image/jpeg, image/jpg\"\n          ref={inputRef}\n          onChange={uploadAvatar}\n        />\n      </div>\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Settings;\n","import { Container } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport Cards from '../../components/Cards/Cards';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport CardLoader from '../../components/MovieCard/CardLoader/CardLoader';\nimport { useToast } from '../../hooks/useToast';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { RootState } from '../../store/rootReducer';\nimport { notEmpty } from '../../utils';\n\nconst SearchPage = () => {\n  const { movies, search, loading, error } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const history = useHistory();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  if (!loading && movies.length === 0) history.push('/');\n  if (error) {\n    history.push('/');\n    toast({ text: t(error) }, 'error');\n  }\n\n  const displayedMovies: ITranslatedMovie[] = search\n    .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n    .filter(notEmpty);\n\n  const cards = loading ? (\n    <CardLoader display=\"lines\" />\n  ) : (\n    <Cards movies={displayedMovies} />\n  );\n\n  return (\n    <Container>\n      <FilterSortPanel />\n      {cards}\n    </Container>\n  );\n};\n\nexport default SearchPage;\n","import React, { useEffect } from 'react';\nimport { Container, makeStyles } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { theme } from './theme';\nimport { useSelector } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { getSearchParam } from './utils';\nimport { useAppDispatch } from './store/store';\nimport { RootState } from './store/rootReducer';\nimport { getSelfInfo, getToken } from './store/features/UserSlice';\nimport { useToast } from './hooks/useToast';\n\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport MainPage from './pages/MainPage/MainPage';\nimport RegisterPage from './pages/RegisterPage/RegisterPage';\n\nimport Auth from './components/Auth/Auth';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport MovieFullInfo from './components/MovieFullInfo/MovieFullInfo';\nimport SnackMessage from './components/Notifier/SnackMessage/SnackMessage';\nimport Notifier from './components/Notifier/Notifier';\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ResetPassword from './components/ResetPassword/ResetPassword';\nimport ChangeEmail from './components/ChangeEmail/ChangeEmail';\nimport Settings from './components/Settings/Settings';\nimport SearchPage from './pages/SearchPage/SearchPage';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: '100%',\n    minWidth: 500,\n    margin: 0,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n    },\n  },\n  Wrapper: {\n    maxWidth: 840,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n      margin: 0,\n    },\n  },\n  Slider: {\n    height: 400,\n    minHeight: 300,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { toast } = useToast();\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    const urlParams = getSearchParam();\n    console.log(urlParams);\n    if (urlParams?.error) {\n      const lang = i18n.language as 'en' | 'ru';\n      toast({ text: urlParams.error[lang] as string }, 'error');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const token = getToken();\n    if (token) {\n      dispatch(getSelfInfo());\n    }\n  }, [dispatch]);\n\n  const routes = isAuth ? (\n    <Switch>\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/change_email\" component={ChangeEmail} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  ) : (\n    <Switch>\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/register\" component={RegisterPage} />\n      <Route path=\"/login\" component={LoginPage} />\n      <Route path=\"/reset_password\" component={ResetPassword} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  );\n\n  return (\n    <Container className={classes.root}>\n      <Container className={classes.Wrapper}>\n        <SnackbarProvider\n          maxSnack={3}\n          classes={{ containerRoot: classes.root }}\n          content={(key: string) => <SnackMessage id={key} />}\n        >\n          <Header />\n          {routes}\n          <Footer />\n          <Notifier />\n        </SnackbarProvider>\n      </Container>\n    </Container>\n  );\n}\n\nexport default App;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { movies, search as axiosSearch } from '../../axios';\nimport { IComment, ITranslatedMovie } from '../../models/MovieInfo';\nimport { AppDispatch } from '../store';\nimport { CountriesKeys, GenresKeys } from './FilterSlice';\n\nexport interface MoviesItems {\n  search?: ITranslatedMovie[];\n  popular?: ITranslatedMovie[];\n  byName?: ITranslatedMovie[];\n}\n\nexport type MovieItemsKeys = keyof MoviesItems;\nexport interface CommentsItems {\n  comments: IComment[];\n  id?: string;\n}\nexport interface ErrorItem {\n  error: string;\n}\n\nexport interface MoviesState {\n  loading: boolean;\n  error: string | null;\n  movies: ITranslatedMovie[];\n  search: string[];\n  popular: string[];\n  byName: string[];\n  isEndOfMovies: boolean;\n}\n\nexport interface IMoviesResponse {\n  data: ITranslatedMovie[] | null;\n  error?: string;\n  status: boolean;\n}\n\nexport interface IFilter {\n  limit?: number;\n  offset?: number;\n  letter?: string;\n  search?: string;\n  genres?: GenresKeys[];\n  years?: [] | number[][];\n  countries?: CountriesKeys[];\n  id?: string | number;\n}\ninterface ILoaderInfo {\n  activePeers: number;\n  loadedPercent: number;\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  movies: [],\n  search: [],\n  popular: [],\n  byName: [],\n  isEndOfMovies: false,\n} as MoviesState;\n\nconst MoviesSlice = createSlice({\n  name: 'movies',\n  initialState,\n  reducers: {\n    addMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const add = (type: MovieItemsKeys) => {\n        console.log(\n          '[loadMovies] payload, moviesLength',\n          payload,\n          state.movies.length\n        );\n        if (!payload[type] || !payload[type]?.length) return;\n        if (state.movies.length) {\n          const newMovies = payload[type]?.filter(\n            (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n          );\n          console.log('[loadMovies] newMovies', newMovies);\n          if (newMovies?.length) {\n            state.movies = state.movies.concat(newMovies);\n          }\n          // set unique movie ids\n          const set = new Set(\n            state[type].concat((payload[type] || []).map((el) => el.en.id))\n          );\n          state[type] = Array.from(set);\n        } else {\n          const arr = payload[type] || [];\n          state.movies = arr;\n          state[type] = arr.map((el) => el.en.id);\n        }\n      };\n\n      state.loading = false;\n      if (payload.search) {\n        add('search');\n      } else if (payload.byName) {\n        add('byName');\n      } else if (payload.popular) {\n        add('popular');\n      } else {\n        throw new Error('[movies:addMovies] no movies in payload');\n      }\n    },\n    setMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const set = (type: MovieItemsKeys) => {\n        if (!payload[type]) return;\n        // state[type] = payload[type] || [];\n        const newMovies = payload[type]?.filter(\n          (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n        );\n        if (newMovies) {\n          state.movies = state.movies.concat(newMovies);\n          state[type] = payload[type]?.map((el) => el.en.id) || [];\n        }\n      };\n      state.loading = false;\n      if (payload.search) {\n        set('search');\n      } else if (payload.byName) {\n        set('byName');\n      } else if (payload.popular) {\n        set('popular');\n      } else {\n        throw new Error('[movies:setMovies] no movies in payload');\n      }\n    },\n    updateComments(state, { payload }: PayloadAction<CommentsItems>) {\n      state.loading = false;\n      if (!payload.id)\n        throw new Error('[movies:updateComments] no id in payload');\n      if (!payload.comments)\n        throw new Error('[movies:updateComments] no comments in payload');\n      const movie = state.movies.find((movie) => movie.en.id === payload.id);\n      if (!movie) throw new Error('[movies:updateComments] no movie found');\n      const newComments = payload.comments.filter((comment) =>\n        movie.en.info.comments\n          ? !movie.en.info.comments.find(\n              (el) => el.commentid === comment.commentid\n            )\n          : !!comment\n      );\n      movie.en.info.comments = movie.en.info.comments\n        ? [...movie.en.info.comments, ...newComments]\n        : [...newComments];\n    },\n    setEndOfMovies(state) {\n      state.isEndOfMovies = true;\n    },\n    resetEndOfMovies(state) {\n      state.isEndOfMovies = false;\n    },\n    setError(state, { payload }: PayloadAction<ErrorItem>) {\n      state.error = payload.error;\n      state.loading = false;\n    },\n    resetError(state) {\n      state.error = null;\n      state.loading = false;\n    },\n    startLoading(state) {\n      state.loading = true;\n    },\n    stopLoading(state) {\n      state.loading = false;\n    },\n  },\n});\n\nconst loadMoviesAsync = async (\n  params?: IFilter\n): Promise<IMoviesResponse | null> => {\n  try {\n    console.log('[loadMoviesAsync] params', params);\n    let res = null;\n    if (params?.search)\n      res = await axiosSearch('find', {\n        params: {\n          category: 'All',\n          search: params?.search,\n        },\n      });\n    else if (params?.letter)\n      res = await movies(`byname`, {\n        params,\n      });\n    else\n      res = await movies('movies', {\n        params,\n      });\n\n    // console.log(res.data);\n    return res.data;\n  } catch (e) {\n    console.log(e);\n    return null;\n  }\n};\n\nexport const loadMovies = ({\n  filter = {\n    limit: 20,\n    offset: 0,\n  },\n  callback,\n}: {\n  filter?: IFilter;\n  callback?: (arg0: boolean) => void;\n}) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const limit = filter.limit || 20;\n  console.log('[loadMovies] filter', filter);\n  const movies = await loadMoviesAsync(filter);\n  console.log('[loadMovies] res', movies);\n\n  if (movies?.status && movies.data) {\n    if (movies.data.length < limit) dispatch(setEndOfMovies());\n    const removedNulls = movies.data?.map((el) =>\n      !el.ru ? { en: el.en, ru: el.en } : el\n    );\n    console.log('[loadMovies] removedNulls:', removedNulls);\n    if (filter.letter) dispatch(addMovies({ byName: removedNulls }));\n    else if (filter.search)\n      filter.offset && filter.offset > 0\n        ? dispatch(addMovies({ search: removedNulls }))\n        : dispatch(setMovies({ search: removedNulls }));\n    else dispatch(addMovies({ popular: removedNulls }));\n    if (callback)\n      callback(movies && movies.data ? movies.data.length < limit : true);\n    return removedNulls;\n  } else {\n    dispatch(stopLoading());\n    const error = {\n      en: 'Loading error',\n      ru: '   ',\n    };\n    dispatch(setError({ error: movies?.error || 'Loading error' }));\n    return null;\n  }\n};\n\nexport const loadActivePeers = async (\n  id: string\n): Promise<ILoaderInfo | null> => {\n  let data = null;\n  try {\n    const res = await axios(`/api/loader/stats/${id}`);\n    if (res.status < 400 && res.data.status) {\n      data = res.data.data as ILoaderInfo;\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  return data;\n};\n\nexport const loadMovie = (id: string) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const movie = await loadMoviesAsync({ id });\n  console.log('loadMovie', movie);\n  if (movie?.status && movie.data) dispatch(addMovies({ search: movie.data }));\n  else {\n    dispatch(setError({ error: 'Loading error' }));\n  }\n};\n\n/**\n * loads comments\n * @param params object with values:\n *    @param movieId movieId to find it in redux\n *    @param limit number of comments to fetch, default 5\n *    @param offset comments offset, default 0\n * @param callback fires when end of comments is reached\n */\nexport const loadComments = (\n  {\n    movieId,\n    limit = 5,\n    offset = 0,\n  }: { movieId: string; limit?: number; offset?: number },\n  callback?: (length: number) => void\n) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const res = await movies('comments', {\n    params: {\n      movieId,\n      limit,\n      offset,\n    },\n  });\n  console.log('loadComments', res.data);\n  if (res.data.status) {\n    const comments = res.data.data as IComment[];\n    comments.length && dispatch(updateComments({ comments, id: movieId }));\n    if (callback) callback(comments.length);\n  }\n};\n\nexport const {\n  addMovies,\n  setMovies,\n  updateComments,\n  setEndOfMovies,\n  resetEndOfMovies,\n  setError,\n  resetError,\n  startLoading,\n  stopLoading,\n} = MoviesSlice.actions;\n\nexport default MoviesSlice.reducer;\n","import axios from 'axios';\nexport const CancelToken = axios.CancelToken;\n\nexport const auth = axios.create({\n  baseURL: `/api/auth/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const profile = axios.create({\n  baseURL: `/api/profile/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const passwd = axios.create({\n  baseURL: `/api/passwd/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const email = axios.create({\n  baseURL: `/api/email/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const search = axios.create({\n  baseURL: `/api/search/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const movies = axios.create({\n  baseURL: `/api/movies/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const test = axios.create({\n  baseURL: `/api/test/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const main = axios.create({\n  baseURL: `/api/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\n// GET /api/info\n\n// GET /api/auth/basic\n// GET /api/auth/oauth42\n\n// GET /api/profile/get (       user_id          )\n// PUT /api/profile/create\n// PATCH /api/profile/patch\n// DELETE /api/profile/delete\n\n// PATCH /api/email/patch\n// POST /api/email/confirm\n// POST /api/email/resend\n\n// PATCH /api/passwd/patch\n// POST /api/passwd/repair\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { profile } from '../../axios';\nimport { AppDispatch } from '../store';\n\nconst tokenKey = 'hypertubeAuthToken';\n\ninterface IUserPayload {\n  user: IUser;\n}\n\nexport interface IUser {\n  userId: number;\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  imageBody: string | null;\n}\n\nexport type IUserState = IUser & {\n  isAuth: boolean;\n  isLoading: boolean;\n};\n\nconst initialState: IUserState = {\n  isAuth: false,\n  isLoading: false,\n  userId: 0,\n  email: '',\n  username: '',\n  firstName: '',\n  lastName: '',\n  imageBody: null,\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    saveUserState(state, { payload }: PayloadAction<IUserPayload>) {\n      if (!payload.user)\n        throw new Error('[userSlice:saveState] no user in payload');\n      //   Object.keys(payload.user).map((k) => {\n      //     const key = k as IUserKeys;\n      //     state[key] = payload.user[key];\n      //   });\n      return {\n        isAuth: state.isAuth,\n        isLoading: state.isLoading,\n        userId: payload.user.userId || state.userId,\n        email: payload.user.email || state.email,\n        username: payload.user.username || state.username,\n        firstName: payload.user.firstName || state.firstName,\n        lastName: payload.user.lastName || state.lastName,\n        imageBody: payload.user.imageBody || state.imageBody,\n      };\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n    },\n    authFail(state) {\n      state.isAuth = false;\n    },\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n  },\n});\n\nexport const getSelfInfo = () => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  try {\n    const res = await profile('get', {\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n    console.log(res.data);\n    if (res.data.en) {\n      dispatch(authFail());\n      removeToken();\n    } else {\n      dispatch(\n        saveUserState({\n          user: res.data as IUser,\n        })\n      );\n      dispatch(authSuccess());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  dispatch(stopLoading());\n};\n\nexport const saveToken = (token: string) => {\n  localStorage.setItem(tokenKey, token);\n};\n\nexport const removeToken = (key: string = tokenKey) => {\n  localStorage.removeItem(key);\n};\n\nexport const getToken = () => localStorage.getItem(tokenKey);\n\nexport const {\n  saveUserState,\n  authSuccess,\n  authFail,\n  startLoading,\n  stopLoading,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { createMuiTheme } from '@material-ui/core';\n\nexport const primaryColor = {\n  light: '#05829E',\n  main: '#035263',\n  dark: '#02313B',\n  contrastText: '#fff',\n};\nexport const secondaryColor = {\n  light: '#F19941',\n  main: '#EE851B',\n  dark: '#D17010',\n  contrastText: '#fff',\n  contrastTextLighter: '#333',\n};\nexport const backgroundColor = {\n  light: '#FFFFFF',\n  default: '#FAFAFA',\n  dark: '#DDDDDD',\n  contrastText: '#121212',\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    background: backgroundColor,\n  },\n  typography: {\n    fontFamily: [\n      '\"Quicksand\"',\n      '\"Helvetica Neue\"',\n      'Roboto',\n      'Arial',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n  props: {\n    MuiButton: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n  },\n});\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../rootReducer';\nimport { AppDispatch } from '../store';\nimport { IFilter, loadMovies } from './MoviesSlice';\n\nexport interface IGenres {\n  Action: boolean;\n  Adventure: boolean;\n  Animation: boolean;\n  Biography: boolean;\n  Comedy: boolean;\n  Crime: boolean;\n  Documentary: boolean;\n  Drama: boolean;\n  Family: boolean;\n  Fantasy: boolean;\n  'Film Noir': boolean;\n  History: boolean;\n  Horror: boolean;\n  Music: boolean;\n  Mystery: boolean;\n  Romance: boolean;\n  'Sci-Fi': boolean;\n  Short: boolean;\n  Sport: boolean;\n  Superhero: boolean;\n  Thriller: boolean;\n  War: boolean;\n  Western: boolean;\n}\nexport type GenresKeys = keyof IGenres;\nexport interface IYears {\n  'before 1980': boolean;\n  '1980-1990': boolean;\n  '1990-2000': boolean;\n  '2000-2010': boolean;\n  '2010-2020': boolean;\n}\nexport type YearsKeys = keyof IYears;\nexport interface ICountries {\n  Australia: boolean;\n  Canada: boolean;\n  France: boolean;\n  Germany: boolean;\n  'Great Britain': boolean;\n  India: boolean;\n  Japan: boolean;\n  Russia: boolean;\n  Spain: boolean;\n  USA: boolean;\n  USSR: boolean;\n  other: boolean;\n}\nexport type CountriesKeys = keyof ICountries;\n\nexport const items = {\n  genres: [\n    'Action',\n    'Adventure',\n    'Animation',\n    'Biography',\n    'Comedy',\n    'Crime',\n    'Documentary',\n    'Drama',\n    'Family',\n    'Fantasy',\n    'Film Noir',\n    'History',\n    'Horror',\n    'Music',\n    'Mystery',\n    'Romance',\n    'Sci-Fi',\n    'Short',\n    'Sport',\n    'Superhero',\n    'Thriller',\n    'War',\n    'Western',\n  ] as GenresKeys[],\n  years: [\n    'before 1980',\n    '1980-1990',\n    '1990-2000',\n    '2000-2010',\n    '2010-2020',\n  ] as YearsKeys[],\n  countries: [\n    'Australia',\n    'Canada',\n    'France',\n    'Germany',\n    'Great Britain',\n    'India',\n    'Japan',\n    'Russia',\n    'Spain',\n    'USA',\n    'USSR',\n    'other',\n  ] as CountriesKeys[],\n  // additional: ['subtitles', 'HD', 'Multi-audio'],\n};\n\nexport interface GenresItem {\n  category: 'genres';\n  name: GenresKeys;\n  value: boolean;\n}\n\nexport interface YearsItem {\n  category: 'years';\n  name: YearsKeys;\n  value: boolean;\n}\n\nexport interface CountriesItem {\n  category: 'countries';\n  name: CountriesKeys;\n  value: boolean;\n}\n\nexport interface SetFilterPayload {\n  filter: GenresItem | YearsItem | CountriesItem;\n}\n\nexport interface FilterState {\n  genres: IGenres;\n  years: IYears;\n  countries: ICountries;\n}\nexport type FilterStateKeys = keyof FilterState;\n\nconst initialState = {\n  genres: {\n    Action: false,\n    Adventure: false,\n    Animation: false,\n    Biography: false,\n    Comedy: false,\n    Crime: false,\n    Documentary: false,\n    Drama: false,\n    Family: false,\n    Fantasy: false,\n    'Film Noir': false,\n    History: false,\n    Horror: false,\n    Music: false,\n    Mystery: false,\n    Romance: false,\n    'Sci-Fi': false,\n    Short: false,\n    Sport: false,\n    Superhero: false,\n    Thriller: false,\n    War: false,\n    Western: false,\n  },\n  years: {\n    'before 1980': false,\n    '1980-1990': false,\n    '1990-2000': false,\n    '2000-2010': false,\n    '2010-2020': false,\n  },\n  countries: {\n    Australia: false,\n    Canada: false,\n    France: false,\n    Germany: false,\n    'Great Britain': false,\n    India: false,\n    Japan: false,\n    Russia: false,\n    Spain: false,\n    USA: false,\n    USSR: false,\n    other: false,\n  },\n  // additional: { subtitles: false, HD: false, 'Multi-audio': false },\n};\n\nconst filterSlice = createSlice({\n  name: 'filter',\n  initialState,\n  reducers: {\n    setFilterState(state, { payload }: PayloadAction<SetFilterPayload>) {\n      const { category, name, value } = payload.filter;\n      return {\n        ...state,\n        [category]: {\n          ...state[category],\n          [name]: value,\n        },\n      };\n    },\n    resetFilterState() {\n      return initialState;\n    },\n  },\n});\n// category: 'genres' | 'years' | 'countries',\n\nconst isCountriesKey = (value: string): value is CountriesKeys => {\n  const allowedKeys: string[] = items.countries.filter((el) => el !== 'other');\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isGenresKey = (value: string): value is GenresKeys => {\n  const allowedKeys: string[] = items.genres;\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isYearsKey = (value: string): value is YearsKeys => {\n  const allowedKeys: string[] = items.years;\n  return allowedKeys.indexOf(value) !== -1;\n};\n\nexport const isCountiesStateEmpty = (state: ICountries) => {\n  for (let country in state) {\n    if (isCountriesKey(country) && state[country]) return false;\n  }\n  return true;\n};\nexport const isYearsStateEmpty = (state: IYears) => {\n  for (let year in state) {\n    if (isYearsKey(year) && state[year]) return false;\n  }\n  return true;\n};\nexport const isGenresStateEmpty = (state: IGenres) => {\n  for (let genre in state) {\n    if (isGenresKey(genre) && state[genre]) return false;\n  }\n  return true;\n};\n\nconst getYearsFilter = (years: IYears): number[][] | [] => {\n  const yearsArray = items.years.filter(\n    (value) => years[value] && [value, years[value]]\n  );\n\n  const result: number[][] = [];\n  yearsArray.forEach((year) => {\n    if (year.startsWith('before')) {\n      result.push([0, 1980]);\n    } else if (\n      result.length > 0 &&\n      year.match(`${result[result.length - 1][1]}`)\n    ) {\n      // if last value in result contains one of current years\n      // (actually, if it's true - should find the first one)\n      // then we replace that year with the second one\n      const arr = year.split('-');\n      result[result.length - 1][1] = +arr[1];\n    } else {\n      const arr = year.split('-');\n      result.push([+arr[0], +arr[1]]);\n    }\n  });\n  console.log(result);\n  return result;\n};\n\n/**\n * Requests movies, based on filterState.\n * Empty or object with fields required.\n * @param param0 object with _limit and _start fields\n */\nexport const reqeuestMoviesWithFilters = (\n  filter: IFilter = {\n    limit: 20,\n    offset: 0,\n  }\n) => async (dispatch: AppDispatch, getState: () => RootState) => {\n  const filterState = getState().filter;\n  const genres = items.genres.filter(\n    (value) => filterState.genres[value] && [value, filterState.genres[value]]\n  );\n  const years = getYearsFilter(filterState.years);\n  const countries = items.countries.filter(\n    (value) =>\n      filterState.countries[value] && [value, filterState.countries[value]]\n  );\n  const filterParams = { ...filter, genres, years, countries };\n\n  console.log(filterParams);\n  dispatch(loadMovies({ filter: filterParams }));\n};\n\nexport const yearInRange = (year: number, years: IYears) => {\n  for (let entry of Object.entries(years)) {\n    if (!entry[1]) continue;\n    const rangeNumbers = entry[0].startsWith('before')\n      ? [0, +entry[0].split(' ')[1]]\n      : entry[0].split('-').map((x) => +x);\n    if (year >= rangeNumbers[0] && year < rangeNumbers[1]) return true;\n  }\n  return false;\n};\nexport const genreInGenres = (\n  movieGenres: GenresKeys[],\n  filterGenres: IGenres\n) => {\n  for (let genre of movieGenres) {\n    if (filterGenres[genre]) return true;\n  }\n  return false;\n};\nexport const countryInCountries = (\n  movieCountries: string[],\n  filterCountries: ICountries\n) => {\n  for (let country of movieCountries) {\n    return isCountriesKey(country)\n      ? filterCountries[country]\n      : filterCountries.other;\n  }\n  return false;\n};\n\nexport const { setFilterState, resetFilterState } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport languageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\n\nconst host = window.location.host;\ni18n\n    .use(Backend)\n    .use(languageDetector)\n    .use(initReactI18next)\n    .init({\n        lng: 'en',\n        fallbackLng: 'en',\n        backend: {\n            loadPath: `http://${host}/locales/{{lng}}/{{ns}}.json`,\n},\ndetection: ['queryString', 'cookie'],\n    cache: ['cookie'],\n    debug: false,\n    interpolation: {\n    escapeValue: false,\n},\n});\n\nexport default i18n;","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport { theme } from './theme';\n\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport './i18n';\n\nif (process.env.NODE_ENV === 'production') console.log = () => {};\nexport const LIMIT = +(process.env.REACT_APP_LOAD_LIMIT || 5);\n\n// console.log = () => {};\n\nconst render = () => {\n  const App = require('./App').default;\n\n  ReactDOM.render(\n    // <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter>\n          <Suspense fallback={<div>Loading...</div>}>\n            <CssBaseline />\n            <App />\n          </Suspense>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>,\n    // </React.StrictMode>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render);\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface SortingItem {\n  sortBy: string | null;\n}\n\nexport interface UIState {\n  sortBy: string | null;\n  view: 'grid' | 'lines';\n}\n\nconst initialState = {\n  sortBy: null,\n  view: 'lines',\n} as UIState;\n\nconst UISlice = createSlice({\n  name: 'UI',\n  initialState,\n  reducers: {\n    setSortingBy(state, { payload }: PayloadAction<SortingItem>) {\n      state.sortBy = payload.sortBy;\n    },\n    changeView(state) {\n      state.view = state.view === 'grid' ? 'lines' : 'grid';\n    },\n  },\n});\n\nexport const { setSortingBy, changeView } = UISlice.actions;\n\nexport default UISlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type IVariant = 'default' | 'info' | 'warning' | 'success' | 'error';\nexport interface INotification {\n  key: string;\n  text: string;\n  variant: IVariant;\n  header?: string;\n  options?: any;\n  dismissed?: boolean;\n}\n\ninterface ISnackState {\n  notifications: INotification[];\n}\n\nconst initialState = {\n  notifications: [],\n} as ISnackState;\n\nconst snackSlice = createSlice({\n  name: 'snack',\n  initialState,\n  reducers: {\n    addSnack(state, { payload }: PayloadAction<INotification>) {\n      const hasSameMessageAndVariant = state.notifications.find(\n        (msg) => msg.text === payload.text && msg.variant === payload.variant\n      );\n      if (!hasSameMessageAndVariant) state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n"],"sourceRoot":""}
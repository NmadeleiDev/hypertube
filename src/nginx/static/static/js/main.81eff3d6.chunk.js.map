{"version":3,"sources":["store/rootReducer.ts","store/store.ts","store/features/UserSlice.ts","utils.ts","hooks/useToast.ts","components/Dropdown/Dropdown.tsx","components/Input/Input.tsx","components/Form/Form.tsx","components/OAuthButton/OAuthButton.tsx","components/Login/Login.tsx","pages/LoginPage/LoginPage.tsx","components/AlphabetNav/AlphabetNav.tsx","components/Rating/Rating.tsx","components/MovieCardMedium/MovieCardMedium.tsx","components/MovieCard/MovieCard.tsx","components/MovieCard/CardLoader/CardLoader.tsx","components/Cards/Cards.tsx","components/CardsSlider/CardsSlider.tsx","components/Filter/Filter.tsx","components/Sort/Sort.tsx","components/GridToLinesButton/GridToLinesButton.tsx","components/FilterSortPanel/FilterSortPanel.tsx","pages/MainPage/MainPage.tsx","components/Register/Register.tsx","pages/RegisterPage/RegisterPage.tsx","components/Auth/Auth.tsx","components/Footer/Footer.tsx","components/Search/Search.tsx","components/Internationalization/Internationalization.tsx","components/UserInfo/UserInfo.tsx","components/Logo/Logo.tsx","components/Header/Header.tsx","components/CategoryHeader/CategoryHeader.tsx","components/HorizontalGrid/HorizontalGrid.tsx","components/Comments/Comment/Comment.tsx","components/Comments/SendComment/SendComment.tsx","components/Comments/Comments.tsx","components/Player/PlayerControls.tsx","components/Player/Player.tsx","components/Player/ActivePeers.tsx","components/MovieFullInfo/MovieFullInfo.tsx","components/Notifier/SnackMessage/SnackMessage.tsx","components/Notifier/Notifier.tsx","components/ForgotPassword/ForgotPassword.tsx","components/ResetPassword/ResetPassword.tsx","components/ChangeEmail/ChangeEmail.tsx","images/defaultAvatar.png","components/Settings/Settings.tsx","pages/SearchPage/SearchPage.tsx","App.tsx","store/features/MoviesSlice.ts","axios.ts","theme.ts","store/features/FilterSlice.ts","i18n.ts","index.tsx","store/features/UISlice.ts","store/features/SnackSlice.ts"],"names":["rootReducer","combineReducers","UI","movies","filter","user","snack","store","configureStore","reducer","useAppDispatch","useDispatch","tokenKey","userSlice","createSlice","name","initialState","isAuth","isLoading","userId","email","username","firstName","lastName","imageBody","reducers","saveUserState","state","payload","Error","authSuccess","authFail","startLoading","stopLoading","getSelfInfo","dispatch","a","profile","headers","accessToken","getToken","res","console","log","data","en","removeToken","saveToken","token","localStorage","setItem","key","removeItem","getItem","actions","getSearchParam","search","searchString","window","location","params","decodeURI","replaceAll","slice","split","reduce","acc","cur","keyValue","JSON","parse","notEmpty","value","undefined","useToast","toast","useCallback","message","variant","options","addSnack","uuid","text","header","autoHideDuration","useStyles","makeStyles","root","position","Paper","padding","Open","transform","Item","fontSize","margin","contextValue","onClose","handlersContext","createContext","Dropdown","heroText","icon","items","img","buttonProps","children","useState","open","setOpen","anchorEl","useRef","classes","handleClose","style","backgroundImage","height","backgroundSize","backgroundOrigin","backgroundPositionY","backgroundColor","theme","palette","background","default","className","Button","ref","onClick","endIcon","Popover","current","anchorOrigin","vertical","horizontal","transformOrigin","Grid","container","direction","alignItems","map","e","handleButtonClick","Provider","ButtonListItem","justifyContent","Input","width","SmallSelector","minWidth","FormControl","display","flexDirection","RadioGroup","type","values","onValidate","onChange","rules","ignoreUntouched","rest","touched","setTouched","error","setError","errorText","setErrorText","React","useMemo","helperText","rule","useEffect","err","isRegexValid","regex","match","isFnValid","checkFn","length","minLength","maxLength","validate","TextField","id","onFocus","List","Buttons","Link","textDecoration","color","marginBottom","Form","inputs","buttons","cn","el","ListItem","to","others","OAuthButton","oauth","url","queryParams","facebook","vk","google","Icon42","src","alt","IconFacebook","viewBox","xmlns","fill","d","IconVk","cx","cy","r","fillRule","clipRule","IconGoogle","loading","setLoading","disabled","queryString","URLSearchParams","toString","href","aria-label","CircularProgress","Login","password","setInputs","valid","setValid","formValid","useContext","useTranslation","t","i18n","history","useHistory","handleInput","preventDefault","target","handleSubmit","authHeader","btoa","encodeURI","auth","Authorization","push","language","handleForgot","formData","label","placeholder","size","fullWidth","required","isValid","prev","justify","LoginPage","Container","createStyles","borderRadius","overflow","Scroller","flexWrap","overflowX","scrollbarWidth","ShadowLeft","left","ShadowRight","right","grey","flex","border","content","paddingTop","float","Active","borderColor","secondaryColor","main","AlphabetNav","useLocation","shadowLeft","shadowRight","shadow","setShadow","handleLinkClick","letter","currentTarget","innerText","currentLetter","pop","resetEndOfMovies","setMovies","byName","resetFilterState","loadMovies","limit","LIMIT","scrollHandler","throttle","stopPropagation","scrollLeft","scrollWidth","offsetWidth","onScroll","onWheel","scrollTo","top","deltaY","behavior","path","pathname","Typography","marginRight","Rating","movieId","imdbRating","ourRating","rating","setRating","useSelector","handleRatingChange","newRating","patch","status","emptyIcon","Img","cursor","maxWidth","objectFit","opacity","PlayIconWrapper","transition","PlayIcon","Info","CaptionWrapper","Caption","Text","fontWeight","Description","maxHeight","flexGrow","Shadow","bottom","marginLeft","textTransform","primaryColor","light","MovieCardMedium","card","info","isViewed","title","description","Visibility","year","genres","item","Divider","Media","Name","MovieCard","movie","find","wrap","bg","ru","Card","getCard","Header","Line","Math","floor","random","lines","CardLoader","index","setIndex","interval","setInterval","clearInterval","Skeleton","animation","Cards","sortBy","view","years","countries","isEndOfMovies","sortedCards","setSortedCards","gridRef","genre","trackScrolling","element","callback1","callback2","delay","reserve","pageYOffset","innerHeight","offsetTop","offsetHeight","throttledDetectBottomLine","offset","then","setEndOfMovies","addEventListener","removeEventListener","cards","isYearsStateEmpty","yearInRange","isGenresStateEmpty","genreInGenres","isCountiesStateEmpty","countryInCountries","sort","cardA","cardB","localeCompare","sortByName","sortByYear","sortByRating","avalibility","sortByAvalibility","overflowY","Movie","CardsSlider","popular","minHeight","Actions","Filter","category","setCategory","filterState","handleShow","reqeuestMoviesWithFilters","handleFilterChange","setFilterState","checked","startIcon","TuneRounded","Dialog","aria-labelledby","paper","DialogTitle","DialogContent","ButtonGroup","xs","sm","FormControlLabel","control","Checkbox","getCheckboxes","DialogActions","Sort","setSortingBy","SortRounded","grow","GridToLinesButton","changeView","DashboardRounded","ViewAgendaRounded","FilterSortPanel","MainPage","displayedMovies","setDisplayedMovies","m","route","includes","textAlign","Register","confirm","body","passwd","put","RegExp","RegisterPage","Auth","document","cookie","startsWith","tokenStart","expires","Date","toUTCString","updatedCookie","encodeURIComponent","Object","keys","forEach","optionValue","setCookie","Footer","styles","breakpoints","down","BaseInput","Icon","paddingRight","up","Popper","Search","setSearch","setAnchorEl","handleSearch","source","axios","CancelToken","gCancelToken","Boolean","InputBase","inputProps","input","onKeyPress","SearchRounded","aria-describedby","placement","TransitionProps","Fade","timeout","languages","Internationalization","lang","setLang","nextLang","changeLanguage","Type","marginAuto","UserInfo","avatar","Avatar","_0","_1","_2","_3","_4","Logo","SvgIcon","PersonRounded","PersonOutlineRounded","h3","CategoryHeader","gridList","HorizontalScroll","Image","GridItem","controls","HorizontalGrid","sources","h4","Comment","substr","SendComment","comment","setComment","sendForm","movieid","post","userid","time","getTime","updateComments","comments","onSubmit","multiline","ctrlKey","Comments","offsetRef","maxComments","loadComments","debounce","debouncedDetectBottomLine","commentid","marginTop","controlsWrapper","zIndex","controlIcons","bottomIcons","volumeSlider","Subtitles","PrettoSlider","withStyles","thumb","boxShadow","active","valueLabel","track","rail","Slider","PlayerControls","forwardRef","props","subtitlesAnchorEl","setSubtitlesAnchorEl","handleSubtitlesMenuClose","IconButton","onRewind","FastRewind","onPlayPause","playing","Pause","onFastForward","FastForward","min","max","played","onSeek","onMouseDown","onSeekMouseDown","onChangeCommitted","onSeekMouseUp","onMuted","muted","VolumeOff","VolumeUp","volume","onVolumeChange","onVolumeSeekUp","onChangeDisplayFormat","elapsedTime","totalDuration","playbackRate","rate","onPlaybackRateChange","onChangeSubtitles","showSubtitles","Menu","keepMounted","tracks","MenuItem","onSwitchSubtitles","handleChooseSubtitle","onToggleFullScreen","Fullscreen","playerWrapper","format","seconds","isNaN","date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","padStart","Player","tracksProps","seeking","controlsVisible","setState","setTrack","player","setPlayer","timeDisplayFormat","setTimeDisplayFormat","playerRef","playerContainerRef","controlsRef","timeoutId","videoUrl","parseFloat","getInternalPlayer","playListener","emptiedListener","durationChangeListener","endedListener","stalledListener","suspendListener","waitingListener","handleBufferEnd","currentTime","getCurrentTime","duration","getDuration","config","file","onMouseMove","visibility","clearTimeout","onProgress","setTimeout","onError","onBuffer","onBufferEnd","onReady","seekTo","_e","newValue","screenfull","isEnabled","toggle","textTracks","showing","mode","Progress","activePeers","loadedPercent","ActivePeers","loadActivePeers","Box","component","LinearProgress","Poster","MainInfoText","Video","AdditionalInfo","MovieFullInfo","setTracks","enablePlayer","setEnablePlayer","headerRef","loadMovie","updateViews","updateMovie","resetError","scrollIntoView","kind","srcLang","_","loadSubtitles","backup","mapItems","join","views","pgRating","directorList","directors","cast","stars","photos","videos","prompt","success","warning","dark","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","notifications","displayedText","endsWith","classnames","CardActions","displayed","Notifier","enqueueSnackbar","dismissed","event","reason","onExited","_event","removeSnack","ForgotPassword","ResetPassword","searchParams","repairToken","ChangeEmail","avatarWrapper","avatarImage","inputNone","uploadIcon","Settings","newPassword","currentPassword","inputRef","validateForm","prevInputs","updateEmail","updateInfo","updatePassword","newPasswd","goBack","toUpperCase","click","defaultAvatar","BackupRounded","accept","files","validateUpload","reader","FileReader","onload","result","image","readAsDataURL","SearchPage","cancel","Wrapper","App","urlParams","routes","maxSnack","containerRoot","MoviesSlice","cancelToken","addMovies","add","newMovies","concat","set","Set","Array","from","arr","newComments","loadMoviesAsync","axiosSearch","callback","isCancel","removedNulls","create","baseURL","withCredentials","validateStatus","contrastText","contrastTextLighter","createMuiTheme","primary","secondary","typography","fontFamily","MuiButton","MuiTextField","Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Short","Sport","Superhero","Thriller","War","Western","Australia","Canada","France","Germany","India","Japan","Russia","Spain","USA","USSR","other","filterSlice","isCountriesKey","indexOf","country","getYearsFilter","yearsArray","getState","filterParams","entries","entry","rangeNumbers","x","movieGenres","filterGenres","movieCountries","filterCountries","use","Backend","languageDetector","initReactI18next","init","lng","fallbackLng","backend","loadPath","detection","cache","debug","interpolation","escapeValue","warn","process","REACT_APP_LOAD_LIMIT","require","ReactDOM","render","ThemeProvider","fallback","CssBaseline","getElementById","UISlice","snackSlice","msg","dismissSnack","notificaton","dismissAll"],"mappings":"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","file":"static/js/main.81eff3d6.chunk.js","sourcesContent":["import { combineReducers } from '@reduxjs/toolkit';\nimport UI from './features/UISlice';\nimport movies from './features/MoviesSlice';\nimport filter from './features/FilterSlice';\nimport user from './features/UserSlice';\nimport snack from './features/SnackSlice';\n\nconst rootReducer = combineReducers({ UI, movies, filter, user, snack });\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { useDispatch } from 'react-redux';\n\nimport rootReducer from './rootReducer';\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default store;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { profile } from '../../axios';\nimport { AppDispatch } from '../store';\n\nconst tokenKey = 'hypertubeAuthToken';\n\ninterface IUserPayload {\n  user: IUser;\n}\n\nexport interface IUser {\n  userId: number;\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  imageBody: string | null;\n}\n\nexport type IUserState = IUser & {\n  isAuth: boolean;\n  isLoading: boolean;\n};\n\nconst initialState: IUserState = {\n  isAuth: false,\n  isLoading: false,\n  userId: 0,\n  email: '',\n  username: '',\n  firstName: '',\n  lastName: '',\n  imageBody: null,\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    saveUserState(state, { payload }: PayloadAction<IUserPayload>) {\n      if (!payload.user)\n        throw new Error('[userSlice:saveState] no user in payload');\n      //   Object.keys(payload.user).map((k) => {\n      //     const key = k as IUserKeys;\n      //     state[key] = payload.user[key];\n      //   });\n      return {\n        isAuth: state.isAuth,\n        isLoading: state.isLoading,\n        userId: payload.user.userId || state.userId,\n        email: payload.user.email || state.email,\n        username: payload.user.username || state.username,\n        firstName: payload.user.firstName || state.firstName,\n        lastName: payload.user.lastName || state.lastName,\n        imageBody: payload.user.imageBody || state.imageBody,\n      };\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n    },\n    authFail(state) {\n      state.isAuth = false;\n    },\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n  },\n});\n\nexport const getSelfInfo = () => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  try {\n    const res = await profile('get', {\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n    console.log(res.data);\n    if (res.data.en) {\n      dispatch(authFail());\n      removeToken();\n    } else {\n      dispatch(\n        saveUserState({\n          user: res.data as IUser,\n        })\n      );\n      dispatch(authSuccess());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  dispatch(stopLoading());\n};\n\nexport const saveToken = (token: string) => {\n  localStorage.setItem(tokenKey, token);\n};\n\nexport const removeToken = (key: string = tokenKey) => {\n  localStorage.removeItem(key);\n};\n\nexport const getToken = () => localStorage.getItem(tokenKey);\n\nexport const {\n  saveUserState,\n  authSuccess,\n  authFail,\n  startLoading,\n  stopLoading,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { debounce, throttle } from 'lodash';\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const throttledDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  throttle(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const debouncedDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  debounce(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\ninterface KnownOptions {\n  path?: string;\n  expires?: Date | string;\n}\ninterface IOptions extends KnownOptions {\n  [key: string]: string | Date | boolean | undefined;\n}\n\nexport const setCookie = (\n  name: string,\n  value: string,\n  options: IOptions = {}\n) => {\n  options = {\n    path: '/',\n    // при необходимости добавьте другие значения по умолчанию\n    ...options,\n  };\n\n  if (options.expires instanceof Date) {\n    options.expires = options.expires.toUTCString();\n  }\n\n  let updatedCookie =\n    encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\n  Object.keys(options).forEach((key) => {\n    updatedCookie += '; ' + key;\n    let optionValue = options[key];\n    if (optionValue !== true) {\n      updatedCookie += '=' + optionValue;\n    }\n  });\n  document.cookie = updatedCookie;\n};\n\nexport const getSearchParam = (search?: string) => {\n  const searchString = search || window.location.search;\n  const params = searchString ? decodeURI(searchString) : null;\n  return params\n    ? params\n        .replaceAll('%3A', ':')\n        .replaceAll('%2C', ',')\n        .replaceAll('+', ' ')\n        .slice(1)\n        .split('&')\n        .reduce((acc, cur) => {\n          const keyValue = cur.split('=');\n          acc[keyValue[0]] =\n            keyValue[0] === 'error' ? JSON.parse(keyValue[1]) : keyValue[1];\n          return acc;\n        }, {} as { [key: string]: any })\n    : null;\n};\n\nexport const notEmpty = <T>(value: T | null | undefined): value is T => {\n  return value !== null && value !== undefined;\n}\n","import { addSnack, IVariant } from '../store/features/SnackSlice';\nimport { v4 as uuid } from 'uuid';\nimport { useAppDispatch } from '../store/store';\nimport { useCallback } from 'react';\n\ninterface IMessage {\n  text: string;\n  header?: string;\n}\n\nexport const useToast = () => {\n  const dispatch = useAppDispatch();\n\n  const toast = useCallback(\n    (message: IMessage, variant: IVariant = 'success', options = {}) => {\n      dispatch(\n        addSnack({\n          key: uuid(),\n          text: message.text,\n          header: message.header,\n          variant: variant || 'default',\n          options: {\n            autoHideDuration: 3000,\n            ...options,\n          },\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { toast };\n};\n","import {\n  Button,\n  ButtonProps,\n  Grid,\n  makeStyles,\n  Paper,\n  Popover,\n} from '@material-ui/core';\nimport React, { createContext, useRef, useState } from 'react';\nimport { theme } from '../../theme';\n\nexport interface IItem {\n  text: string;\n  name: string;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\ninterface Props {\n  heroText?: string;\n  icon?: JSX.Element;\n  items?: IItem[];\n  img?: string;\n  buttonProps?: ButtonProps;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'relative',\n  },\n  Paper: {\n    padding: 20,\n  },\n  Open: {\n    transform: 'rotate(180deg)',\n  },\n  Item: {\n    fontSize: '1.0rem',\n    margin: 5,\n  },\n});\n\nconst contextValue = {\n  onClose: () => {},\n};\n\nexport const handlersContext = createContext(contextValue);\n\nconst Dropdown: React.FC<Props> = ({\n  heroText = null,\n  icon,\n  items,\n  img = '',\n  buttonProps,\n  children,\n}) => {\n  const [open, setOpen] = useState(false);\n  const anchorEl = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n\n  const handleButtonClick = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    onClick: undefined | ((e: React.MouseEvent<HTMLButtonElement>) => void)\n  ) => {\n    onClick && onClick(e);\n    setOpen(false);\n  };\n\n  const handleClose = () => setOpen(false);\n  const contextValue = {\n    onClose: handleClose,\n  };\n\n  const style = img\n    ? {\n        backgroundImage: `url(${img})`,\n        height: '2rem',\n        backgroundSize: 'cover',\n        backgroundOrigin: 'padding-box',\n        backgroundPositionY: 'center',\n        backgroundColor: img\n          ? 'currentcolor'\n          : theme.palette.background.default,\n      }\n    : {};\n\n  return (\n    <div className={classes.root}>\n      <Button\n        style={{\n          margin: '0 10px',\n          ...style,\n        }}\n        ref={anchorEl}\n        variant=\"text\"\n        onClick={() => setOpen((open) => !open)}\n        endIcon={img ? null : heroText && icon}\n        {...buttonProps}\n      >\n        {img ? null : heroText || icon}\n      </Button>\n      <Popover\n        open={open}\n        anchorEl={anchorEl.current}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        onClose={handleClose}\n      >\n        <Paper className={classes.Paper}>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {items &&\n              items.map(({ text, name, onClick }: IItem) => (\n                <Button\n                  key={text}\n                  variant=\"text\"\n                  name={name}\n                  className={classes.Item}\n                  onClick={(e) => handleButtonClick(e, onClick)}\n                >\n                  {text}\n                </Button>\n              ))}\n            <handlersContext.Provider value={contextValue}>\n              {children}\n            </handlersContext.Provider>\n          </Grid>\n        </Paper>\n      </Popover>\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import React, { useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  TextField,\n  // MenuItem,\n  // Box,\n  // Slider,\n  // Typography,\n  // Grid,\n  // FormControl,\n  // FormLabel,\n  // RadioGroup,\n  // FormControlLabel,\n  // Radio,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: 'center',\n  },\n  Input: {\n    width: '100%',\n  },\n  SmallSelector: {\n    minWidth: '100px',\n    padding: '10px',\n  },\n  FormControl: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n  },\n  RadioGroup: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n  },\n});\n\nexport interface IRule {\n  minLength: number;\n  maxLength: number;\n  regex?: RegExp;\n  checkFn?: () => boolean;\n}\n\nexport interface IInputProps {\n  name: string;\n  type?: 'text' | 'email' | 'password';\n  label?: string;\n  value: string;\n  size?: 'medium' | 'small';\n  fullWidth?: boolean;\n  required?: boolean;\n  values?: string[];\n  placeholder?: string;\n  ignoreUntouched?: boolean;\n  onValidate?: (arg0: boolean) => {};\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {};\n  className: string;\n  rules?: {\n    helperText: string;\n    rule: IRule;\n  };\n}\n\n// const getDate = (timestamp: number): string => {\n//   const now = new Date();\n//   const date =\n//     timestamp > now.getTime() + 1000 * 60 * 60 * 24 ? now : new Date(timestamp);\n//   const year = date.getFullYear();\n//   let yearStr = '';\n//   if (year < 10) yearStr = '000' + year;\n//   else if (year < 100) yearStr = '00' + year;\n//   else if (year < 1000) yearStr = '0' + year;\n//   const month = date.getMonth() + 1;\n//   const monthStr = month < 10 ? '0' + month : '' + month;\n//   const day = date.getDate();\n//   const dayStr = day < 10 ? '0' + day : '' + day;\n//   const formattedDate = `${yearStr}-${monthStr}-${dayStr}`;\n//   return formattedDate;\n// };\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {IRule} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value: string, rule: IRule, touched: boolean): boolean => {\n  const isRegexValid = rule.regex ? !!value.match(rule.regex) : true;\n  const isFnValid = rule.checkFn ? rule.checkFn() : true;\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        isRegexValid &&\n        isFnValid\n    : true;\n};\n\nconst Input = ({\n  type = 'text',\n  name,\n  values,\n  value,\n  onValidate,\n  onChange,\n  className,\n  rules,\n  ignoreUntouched,\n  ...rest\n}: IInputProps) => {\n  const classes = useStyles();\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState('');\n\n  const { helperText, rule } = React.useMemo(\n    () => (rules ? { ...rules } : { ...{ helperText: '', rule: null } }),\n    [rules]\n  );\n\n  useEffect(() => {\n    let err;\n    // check *touched* only if *ignoreUntouched* is false\n    err = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    err ? setErrorText(helperText) : setErrorText('');\n    // update inputValid state in Redux\n    onValidate &&\n      onValidate((ignoreUntouched || touched || !!value.length) && !err);\n    if (error !== err) setError(err);\n  }, [value, touched, rule, helperText, onValidate, ignoreUntouched, error]);\n\n  switch (type) {\n    // case 'number':\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => onChange(e)}\n          {...rest}\n        />\n      );\n    default:\n      return null;\n  }\n};\n\nexport default Input;\n","import React from 'react';\nimport {\n  Button,\n  ButtonProps,\n  List,\n  ListItem,\n  makeStyles,\n} from '@material-ui/core';\nimport Input, { IInputProps } from '../Input/Input';\nimport cn from 'classnames';\nimport { NavLink } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  Button: {\n    width: '100%',\n  },\n  List: {\n    width: '100%',\n  },\n  Buttons: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Link: {\n    textDecoration: 'none',\n    color: 'inherit',\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n});\n\nexport interface IButtonProps extends ButtonProps {\n  text: string;\n  type?: 'submit';\n  to?: string;\n  disabled?: boolean;\n  variant?: 'contained' | 'outlined' | 'text';\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => {};\n}\n\nexport interface IFormProps {\n  inputs: IInputProps[];\n  buttons: IButtonProps[];\n  className?: string;\n}\n\nconst Form: React.FC<IFormProps> = ({\n  inputs,\n  buttons,\n  className,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <form className={cn(className, classes.root)}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} className={classes.margin} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ variant, type, text, onClick, to, ...others }) =>\n                to ? (\n                  <NavLink\n                    to={to}\n                    key={text}\n                    className={cn(classes.Link, classes.margin)}\n                  >\n                    <Button\n                      className={classes.Button}\n                      variant={variant}\n                      onClick={onClick}\n                      {...others}\n                    >\n                      {text}\n                    </Button>\n                  </NavLink>\n                ) : (\n                  <Button\n                    key={text}\n                    className={cn(classes.Button, classes.margin)}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n              // )\n            )}\n          </ListItem>\n        )}\n        {children}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import { Button, CircularProgress, makeStyles } from '@material-ui/core';\nimport React, { useMemo, useState } from 'react';\n\ninterface Props {\n  variant: '42' | 'facebook' | 'vk' | 'google';\n}\n\nconst useStyles = makeStyles({\n  OAuthButton: {\n    width: '6rem',\n  },\n});\n\nconst oauth = {\n  '42': {\n    url: 'https://api.intra.42.fr/oauth/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauth42',\n      },\n      {\n        name: 'scope',\n        value: 'public',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  facebook: {\n    url: 'https://www.facebook.com/v10.0/dialog/oauth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '737140593612593',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthFb',\n      },\n      {\n        name: 'scope',\n        value: 'email+public_profile',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  vk: {\n    url: 'https://oauth.vk.com/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '7781054',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthVk',\n      },\n      {\n        name: 'scope',\n        value: 'offline+photos',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  google: {\n    url: 'https://accounts.google.com/o/oauth2/v2/auth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/user/auth/oauthGoogle',\n      },\n      {\n        name: 'scope',\n        value: 'https://www.googleapis.com/auth/drive.metadata.readonly',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'token',\n      },\n    ],\n  },\n};\n\nconst Icon42: React.FC = () => (\n  <img\n    height=\"30\"\n    width=\"30\"\n    src=\"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg\"\n    alt=\"42 auth\"\n    style={{ filter: 'invert(1)' }}\n  />\n);\n\nconst IconFacebook: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 409 409\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill=\"#475993\"\n      d=\"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085\n\th147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882\n\tv-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955\n\tl-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087\n\tc-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085\n\tC408.786,24.662,384.124,0,353.701,0z\"\n    />\n  </svg>\n);\n\nconst IconVk: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 112 112\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g>\n      <circle\n        id=\"XMLID_11_\"\n        fill=\"#4D76A1\"\n        cx=\"56.098\"\n        cy=\"56.098\"\n        r=\"56.098\"\n      />\n      <path\n        fill=\"#FFFFFF\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878\n\t\tc0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235\n\t\tc2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463\n\t\tc-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069\n\t\tc0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297\n\t\tc-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514\n\t\tc-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644\n\t\tc1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446\n\t\tc-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069\n\t\tc0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993\n\t\tC44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z\"\n      />\n    </g>\n  </svg>\n);\n\nconst IconGoogle: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g fill=\"none\" fillRule=\"evenodd\">\n      <path\n        d=\"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z\"\n        fill=\"#4285f4\"\n      ></path>\n      <path\n        d=\"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z\"\n        fill=\"#34a853\"\n      ></path>\n      <path\n        d=\"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z\"\n        fill=\"#fbbc05\"\n      ></path>\n      <path\n        d=\"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z\"\n        fill=\"#ea4335\"\n      ></path>\n      <path d=\"M20 20h472v472H20V20z\"></path>\n    </g>\n  </svg>\n);\n\nconst OAuthButton: React.FC<Props> = ({ variant }) => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    setLoading(true);\n    const queryParams = oauth[variant].queryParams.reduce((acc: any, el) => {\n      acc[el.name] = el.value;\n      return acc;\n    }, {});\n    const queryString = new URLSearchParams(queryParams).toString();\n    const url = `${oauth[variant].url}?${queryString}`;\n    window.location.href = url;\n  };\n\n  const icon = useMemo(() => {\n    switch (variant) {\n      case '42':\n        return <Icon42 />;\n      case 'facebook':\n        return <IconFacebook />;\n      case 'vk':\n        return <IconVk />;\n      case 'google':\n        return <IconGoogle />;\n    }\n  }, [variant]);\n\n  return (\n    <Button\n      type=\"submit\"\n      disabled={loading}\n      onClick={handleClick}\n      className={classes.OAuthButton}\n      aria-label={`${variant} oauth`}\n    >\n      {loading ? <CircularProgress /> : icon}\n    </Button>\n  );\n};\n\nexport default OAuthButton;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { auth } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\n\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { handlersContext } from '../Dropdown/Dropdown';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport OAuthButton from '../OAuthButton/OAuthButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n  Link: {\n    textDecoration: 'none',\n  },\n});\n\nconst Login = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '', password: '' });\n  const [valid, setValid] = useState({ email: false, password: false });\n  const formValid = valid.email && valid.password;\n  const { onClose } = React.useContext(handlersContext);\n  const { t, i18n } = useTranslation();\n  const { toast } = useToast();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Login] handleSubmit', inputs);\n\n      const authHeader =\n        'Basic ' +\n        btoa(encodeURI(inputs.email) + ':' + encodeURI(inputs.password));\n      try {\n        const res = await auth('basic', {\n          headers: {\n            Authorization: authHeader,\n          },\n        });\n        if (res.data.accessToken) {\n          saveToken(res.data.accessToken);\n          dispatch(getSelfInfo());\n          history.push('/');\n        } else {\n          toast({ text: res.data[i18n.language] }, 'error');\n        }\n      } catch (e) {\n        console.log(e);\n        toast({ text: t`Server error` }, 'error');\n      }\n      onClose();\n    },\n    [inputs, toast, i18n.language, dispatch, history, onClose, t]\n  );\n\n  const handleForgot = useCallback(() => {\n    console.log('[Login] handleForgot');\n    history.push('forgot_password');\n    onClose();\n  }, [onClose, history]);\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid: boolean) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Login'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: handleForgot,\n          text: t('Forgot password?'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n          onClick: onClose,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, handleForgot, onClose, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData}>\n        <Grid container alignItems=\"center\" justify=\"space-evenly\">\n          <OAuthButton variant=\"42\" />\n          <OAuthButton variant=\"facebook\" />\n          <OAuthButton variant=\"vk\" />\n        </Grid>\n      </Form>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Login from '../../components/Login/Login';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst LoginPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Login />\n    </Container>\n  );\n};\n\nexport default LoginPage;\n","import { Container, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { throttle } from 'lodash';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport { secondaryColor, theme } from '../../theme';\nimport { useAppDispatch } from '../../store/store';\nimport {\n  loadMovies,\n  resetEndOfMovies,\n  setMovies,\n} from '../../store/features/MoviesSlice';\nimport { LIMIT } from '../..';\nimport { resetFilterState } from '../../store/features/FilterSlice';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      position: 'relative',\n      borderRadius: 5,\n      overflow: 'hidden',\n    },\n    Scroller: {\n      display: 'inline-flex',\n      flexWrap: 'nowrap',\n      overflowX: 'scroll',\n      scrollbarWidth: 'none',\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    },\n    ShadowLeft: {\n      position: 'absolute',\n      height: '100%',\n      left: 0,\n      width: '50px',\n      background: 'linear-gradient(90deg, #00000033, transparent)',\n    },\n    ShadowRight: {\n      position: 'absolute',\n      height: '100%',\n      right: 0,\n      width: '50px',\n      background: 'linear-gradient(-90deg, #00000033, transparent)',\n    },\n    Link: {\n      color: theme.palette.grey[700],\n      fontSize: '1.5rem',\n      textDecoration: 'none',\n      flex: '1 0 50px',\n      margin: 10,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      border: '3px solid transparent',\n      borderRadius: '50%',\n      '&:before': {\n        content: \"''\",\n        paddingTop: '100%',\n        float: 'left',\n      },\n    },\n    Active: {\n      borderColor: secondaryColor.main,\n    },\n  })\n);\n\nconst AlphabetNav = () => {\n  const location = useLocation();\n  const classes = useStyles(theme);\n  const [shadow, setShadow] = useState({\n    shadowLeft: false,\n    shadowRight: true,\n  });\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const dispatch = useAppDispatch();\n\n  const handleLinkClick = async (\n    e: React.SyntheticEvent<HTMLAnchorElement>\n  ) => {\n    const letter = e.currentTarget.innerText;\n    const isByNamePage = window.location.href.match(/byname/);\n    // check if we were on one of 'byname' pages\n    if (isByNamePage) {\n      // check if user clicks the same letter, we're in\n      const currentLetter = window.location.href.split('/').pop();\n      // no need to load same movies twice\n      if (currentLetter && letter === currentLetter) return;\n    }\n    dispatch(resetEndOfMovies());\n    dispatch(setMovies({ byName: [] }));\n    dispatch(resetFilterState());\n    dispatch(loadMovies({ filter: { letter, limit: LIMIT } }));\n  };\n\n  const scrollHandler = throttle((e: React.SyntheticEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    const target = e.target as HTMLDivElement;\n    if (!target) return;\n    if (target.scrollLeft === 0) {\n      setShadow({ ...shadow, shadowLeft: false });\n    } else if (target.scrollLeft > 0) {\n      !shadow.shadowLeft && setShadow({ ...shadow, shadowLeft: true });\n    }\n    if (target.scrollWidth - target.scrollLeft < target.offsetWidth + 1) {\n      setShadow({ ...shadow, shadowRight: false });\n    } else {\n      !shadow.shadowRight && setShadow({ ...shadow, shadowRight: true });\n    }\n  }, 100);\n\n  const horizontalScrollHandler = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    e.currentTarget.scrollTo({\n      top: 0,\n      left: e.currentTarget.scrollLeft + e.deltaY * 4,\n      behavior: 'smooth',\n    });\n  };\n\n  const getItemClassName = (path: string): string => {\n    return location.pathname.search(path) !== -1\n      ? cn(classes.Link, classes.Active)\n      : classes.Link;\n  };\n\n  return (\n    <Container className={classes.root}>\n      {shadow.shadowLeft && <div className={classes.ShadowLeft} />}\n      {shadow.shadowRight && <div className={classes.ShadowRight} />}\n      <Container\n        onScroll={scrollHandler}\n        onWheel={horizontalScrollHandler}\n        className={classes.Scroller}\n      >\n        {letters.split('').map((letter) => (\n          <NavLink\n            to={`/byname/${letter}`}\n            key={letter}\n            onClick={handleLinkClick}\n            className={getItemClassName(`/byname/${letter}`)}\n          >\n            {letter}\n          </NavLink>\n        ))}\n        <div className={classes.Link} />\n      </Container>\n    </Container>\n  );\n};\n\nexport default AlphabetNav;\n","import React, { useState } from 'react';\nimport { movies } from '../../axios';\nimport { getToken } from '../../store/features/UserSlice';\nimport MUIRating from '@material-ui/lab/Rating';\nimport StarBorderRounded from '@material-ui/icons/StarBorderRounded';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\ninterface Props {\n  movieId: string;\n  imdbRating: number;\n  ourRating: number;\n}\n\nconst useStyles = makeStyles({\n  Typography: {\n    padding: 5,\n    marginRight: 5,\n    border: '1px solid #ddd',\n    borderRadius: 5,\n  },\n});\n\nconst Rating = ({ movieId, imdbRating, ourRating }: Props) => {\n  const classes = useStyles();\n  const [rating, setRating] = useState(ourRating);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const handleRatingChange = async (\n    e: React.ChangeEvent<{}>,\n    newRating: number | null\n  ) => {\n    e.stopPropagation();\n    if (newRating !== null) {\n      console.log(newRating);\n      const res = await movies.patch(\n        '/rating',\n        { movieId, rating: newRating },\n        {\n          headers: {\n            accessToken: getToken(),\n          },\n        }\n      );\n      if (res.data.status) setRating(+res.data.data);\n    }\n  };\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"flex-end\">\n      <Typography className={classes.Typography}>IMDB</Typography>\n      <Typography>{imdbRating}</Typography>\n      <MUIRating\n        disabled={!isAuth}\n        value={rating || imdbRating / 2}\n        name={`${movieId}-rating`}\n        emptyIcon={<StarBorderRounded color=\"disabled\" fontSize=\"inherit\" />}\n        onChange={handleRatingChange}\n      />\n    </Grid>\n  );\n};\n\nexport default Rating;\n","import {\n  Divider,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { ITranslatedMovie, IUser } from '../../models/MovieInfo';\nimport { primaryColor } from '../../theme';\nimport Rating from '../Rating/Rating';\nimport { Visibility } from '@material-ui/icons';\n\ninterface MovieCardMediumProps {\n  card: ITranslatedMovie;\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n  },\n  Img: {\n    position: 'relative',\n    cursor: 'pointer',\n    '& img': {\n      height: '15rem',\n      width: '10rem',\n      maxWidth: '15rem',\n      objectFit: 'cover',\n      marginRight: 20,\n      borderRadius: 5,\n    },\n    '&:hover $PlayIconWrapper': {\n      opacity: 1,\n    },\n  },\n  PlayIconWrapper: {\n    position: 'absolute',\n    left: 'calc(50% - 3.5rem)',\n    top: 'calc(50% - 3rem)',\n    fontSize: '1rem',\n    padding: '1rem',\n    borderRadius: '50%',\n    backgroundColor: '#000000aa',\n    color: '#fff',\n    opacity: 0,\n    transition: '0.3s',\n  },\n  PlayIcon: {\n    width: '4rem',\n    height: '4rem',\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  CaptionWrapper: {\n    marginBottom: 10,\n    width: '100%',\n    color: 'inherit',\n  },\n  Caption: {\n    fontSize: '1.5rem',\n    textDecoration: 'none',\n    color: 'inherit',\n  },\n  Text: {\n    fontSize: '1rem',\n    fontWeight: 200,\n  },\n  Description: {\n    maxHeight: '8rem',\n    paddingTop: 10,\n    fontSize: '0.9rem',\n    position: 'relative',\n    flexGrow: 2,\n    overflow: 'hidden',\n  },\n  Shadow: {\n    height: 40,\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    background: 'linear-gradient(0deg, #ffffff, #ffffff33)',\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    fontWeight: 'inherit',\n    color: 'inherit',\n    textTransform: 'capitalize',\n    textDecoration: 'none',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n});\n\nconst MovieCardMedium = ({ card }: MovieCardMediumProps) => {\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n\n  const { id, img, info, isViewed } = card.en;\n  const title = card[i18n.language as 'en' | 'ru'].title;\n  const description = card[i18n.language as 'en' | 'ru'].info.description;\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n\n  return (\n    <Paper className={classes.Paper}>\n      <NavLink to={`/movies/${id}`} className={classes.Img}>\n        <img src={img} alt={`${title} poster`} />\n        <div className={classes.PlayIconWrapper}>\n          <PlayArrow className={classes.PlayIcon} fontSize=\"large\" />\n        </div>\n      </NavLink>\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Grid container alignItems=\"baseline\" justify=\"space-between\">\n          <Grid\n            container\n            alignItems=\"center\"\n            justify=\"space-between\"\n            className={classes.CaptionWrapper}\n          >\n            <NavLink to={`/movies/${id}`} className={classes.Link}>\n              <Typography variant=\"caption\" className={classes.Caption}>\n                {title}\n              </Typography>\n            </NavLink>\n            {isViewed && <Visibility />}\n          </Grid>\n          <Rating\n            movieId={id}\n            imdbRating={info.imdbRating}\n            ourRating={info.rating}\n          />\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Year')}: {info.year}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Genres')}: {mapItemsToLinks(info.genres)}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Length')}: {info.length ? `${info.length}${t('min')}` : 'unknown'}\n        </Grid>\n        <Divider />\n        <Grid container className={classes.Description}>\n          {description}\n          <div className={classes.Shadow} />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default MovieCardMedium;\n","import React from 'react';\nimport { Card, Grid, makeStyles, Typography } from '@material-ui/core';\nimport cn from 'classnames';\nimport MovieCardMedium from '../MovieCardMedium/MovieCardMedium';\nimport { useTranslation } from 'react-i18next';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface MovieCardProps {\n  display?: 'image' | 'lines' | 'grid';\n  className?: string;\n  id: string;\n}\n\nexport const useStyles = makeStyles({\n  root: {\n    // cursor: 'pointer',\n  },\n  Grid: {\n    maxWidth: 150,\n    marginRight: '1rem',\n    marginBottom: '1rem',\n  },\n  Media: {\n    height: 220,\n    width: 150,\n  },\n  Name: {\n    fontSize: '1rem',\n    fontWeight: 800,\n  },\n});\n\nconst MovieCard: React.FC<MovieCardProps> = ({\n  display = 'image',\n  className,\n  id: card,\n}: MovieCardProps) => {\n  const classes = useStyles();\n  const { i18n } = useTranslation();\n  const { movies } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((el) => el.en.id === card);\n\n  const getCard = () => {\n    if (!movie) return null;\n    if (display === 'lines') return <MovieCardMedium card={movie} />;\n    const bg = movie.en.img || movie.ru.img;\n    return (\n      <NavLink to={`/movies/${movie.en.id}`} className={classes.root}>\n        <Card style={{ height: 'fit-content' }}>\n          <div\n            className={classes.Media}\n            style={{\n              background: `url(${bg})`,\n              backgroundSize: 'cover',\n            }}\n          ></div>\n        </Card>\n        {display !== 'image' && (\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {display === 'grid' && (\n              <Typography className={classes.Name}>\n                {movie[i18n.language as 'en' | 'ru'].title}\n              </Typography>\n            )}\n          </Grid>\n        )}\n      </NavLink>\n    );\n  };\n\n  const getClassName = () =>\n    display === 'lines'\n      ? cn(classes.root, className)\n      : cn(classes.root, className, classes.Grid);\n\n  return (\n    <Grid\n      item\n      container\n      wrap=\"wrap\"\n      direction={display === 'lines' ? 'column' : 'row'}\n      className={getClassName()}\n    >\n      {getCard()}\n    </Grid>\n  );\n};\n\nexport default MovieCard;\n","import { useEffect, useState } from 'react';\nimport { Grid, makeStyles, Paper, Card, Typography } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\nimport { useTranslation } from 'react-i18next';\n\ninterface Props {\n  display?: 'lines' | 'grid';\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n    width: '100%',\n  },\n  Img: {\n    borderRadius: 5,\n    height: '15rem',\n    width: '13rem',\n    marginRight: '1rem',\n  },\n  Header: {\n    width: '90%',\n    marginBottom: 10,\n    fontSize: 30,\n  },\n  Line: {\n    marginBottom: 15,\n    height: 10,\n    width: `${Math.floor(Math.random() * 100)}%`,\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  Text: {\n    fontSize: '1rem',\n    height: 10,\n    marginBottom: 15,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    textTransform: 'uppercase',\n  },\n});\n\nconst lines = ['line0', 'line1', 'line2', 'line3', 'line4', 'line5', 'line6'];\n\nconst CardLoader = ({ display }: Props) => {\n  const classes = useStyles();\n  const [index, setIndex] = useState<number>(0);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setIndex((prev) => (prev + 1) % lines.length);\n    }, 3000);\n    return () => clearInterval(interval);\n  });\n\n  return display === 'lines' ? (\n    <Paper className={classes.Paper}>\n      <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Skeleton animation=\"wave\" className={classes.Header} />\n        <Skeleton animation=\"wave\" width=\"50%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"60%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"53%\" className={classes.Line} />\n        {/* <Skeleton animation=\"wave\" width=\"30%\" className={classes.Line} /> */}\n        <Typography className={classes.Text}>{t(lines[index])}</Typography>\n        <Skeleton animation=\"wave\" width=\"40%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"70%\" className={classes.Line} />\n        <Skeleton animation=\"wave\" width=\"47%\" className={classes.Line} />\n      </Grid>\n    </Paper>\n  ) : (\n    <Card style={{ height: 'fit-content' }}>\n      <div\n        className={classes.Img}\n        style={{\n          backgroundSize: 'cover',\n        }}\n      >\n        <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      </div>\n    </Card>\n  );\n};\n\nexport default CardLoader;\n","import { useEffect, useRef, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { useAppDispatch } from '../../store/store';\nimport { RootState } from '../../store/rootReducer';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { loadMovies, setEndOfMovies } from '../../store/features/MoviesSlice';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { throttledDetectBottomLine } from '../../utils';\nimport CardLoader from '../MovieCard/CardLoader/CardLoader';\nimport { LIMIT } from '../..';\nimport {\n  countryInCountries,\n  yearInRange,\n  genreInGenres,\n  isCountiesStateEmpty,\n  isGenresStateEmpty,\n  isYearsStateEmpty,\n} from '../../store/features/FilterSlice';\n\ninterface ICardsProps {\n  movies: ITranslatedMovie[];\n}\n\nconst sortByName = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort((cardA, cardB) =>\n    cardA.en.title.localeCompare(cardB.en.title)\n  );\n};\nconst sortByYear = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.year - cardA.en.info.year\n  );\n};\nconst sortByRating = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) =>\n      cardB.en.info.rating - cardA.en.info.rating ||\n      cardB.en.info.imdbRating - cardA.en.info.imdbRating\n  );\n};\nconst sortByAvalibility = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.avalibility - cardA.en.info.avalibility\n  );\n};\n\nconst Cards = ({ movies }: ICardsProps) => {\n  const { sortBy, view } = useSelector((state: RootState) => state.UI);\n  const { genres, years, countries } = useSelector(\n    (state: RootState) => state.filter\n  );\n  const { loading, isEndOfMovies } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [sortedCards, setSortedCards] = useState<ITranslatedMovie[]>(movies);\n  const dispatch = useAppDispatch();\n  const gridRef = useRef<HTMLDivElement>(null);\n  const location = window.location.href;\n\n  // selected letter if we're at /byname page\n  const letter = location.match(/byname/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // selected genre if we're at /genres page\n  const genre = location.match(/genres/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // current search string, if we're at /search page\n  const search = location.match(/search/)\n    ? location.split('/').pop()\n    : undefined;\n\n  console.log('[Cards] letter, search, genre', letter, search, genre);\n\n  // track scroll position and load movies if at the bottom\n  useEffect(() => {\n    const endOfMoviesCallback = () => {\n      if (!isEndOfMovies && !loading) {\n        console.log('endOfMoviesCallback');\n        dispatch(\n          loadMovies({\n            filter: {\n              search,\n              letter,\n              genre,\n              limit: LIMIT,\n              offset: movies.length,\n            },\n          })\n        ).then((res) => {\n          console.log('[Cards] loadMovies response', res);\n          if (res && res.length < LIMIT) dispatch(setEndOfMovies());\n        });\n      }\n    };\n    console.log('useEffect track scroll');\n    const trackScrolling = throttledDetectBottomLine(\n      gridRef.current,\n      endOfMoviesCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [movies.length, dispatch, letter, search, genre, isEndOfMovies, loading]);\n\n  useEffect(() => {\n    let cards = !isYearsStateEmpty(years)\n      ? movies.filter((movie) => yearInRange(movie.en.info.year, years))\n      : movies;\n    cards = !isGenresStateEmpty(genres)\n      ? cards.filter((movie) => genreInGenres(movie.en.info.genres, genres))\n      : cards;\n    cards = !isCountiesStateEmpty(countries)\n      ? cards.filter(\n          (movie) =>\n            movie.en.info.countries\n              ? countryInCountries(movie.en.info.countries, countries)\n              : true // if no countries were given - show movie anyway\n        )\n      : cards;\n    console.log('[Cards] filter useEffect', cards);\n    setSortedCards(cards);\n  }, [genres, countries, years, movies]);\n\n  // sort movies on <sortBy> change\n  useEffect(() => {\n    console.log('[Cards] sort useEffect');\n    // if (movies.length > sortedCards.length) return;\n    if (sortBy === 'name')\n      setSortedCards((sortedCards) => sortByName(sortedCards));\n    else if (sortBy === 'year')\n      setSortedCards((sortedCards) => sortByYear(sortedCards));\n    else if (sortBy === 'rating')\n      setSortedCards((sortedCards) => sortByRating(sortedCards));\n    else if (sortBy === 'avalibility')\n      setSortedCards((sortedCards) => sortByAvalibility(sortedCards));\n  }, [sortBy, movies]);\n\n  return (\n    <Grid ref={gridRef} container justify=\"space-evenly\">\n      {sortedCards.map((card) => (\n        <MovieCard key={card.en.id} id={card.en.id} display={view} />\n      ))}\n      {loading && <CardLoader display={view} />}\n    </Grid>\n  );\n};\n\nexport default Cards;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface CardsSliderProps {\n  display?: 'grid' | 'image';\n}\n\nconst useStyles = makeStyles({\n  root: {\n    overflow: 'hidden',\n    flexWrap: 'nowrap',\n    margin: '20px 0',\n    padding: 10,\n    background: '#fafafa',\n    transform: 'translateZ(0)',\n    overflowX: 'scroll',\n    overflowY: 'hidden',\n    transition: '0.3s',\n    scrollbarWidth: 'none',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  Movie: {\n    transition: '0.3s',\n    marginRight: 20,\n  },\n});\n\nconst CardsSlider: React.FC<CardsSliderProps> = ({\n  display = 'image',\n}: CardsSliderProps) => {\n  const classes = useStyles();\n  const { popular } = useSelector((state: RootState) => state.movies);\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      {popular.map((card: string) => (\n        <MovieCard\n          display={display}\n          className={classes.Movie}\n          id={card}\n          key={card}\n        />\n      ))}\n    </Grid>\n  );\n};\n\nexport default CardsSlider;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from '@material-ui/core';\nimport { TuneRounded } from '@material-ui/icons';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\n\nimport {\n  setFilterState,\n  resetFilterState,\n  GenresKeys,\n  YearsKeys,\n  CountriesKeys,\n  FilterStateKeys,\n  items,\n  reqeuestMoviesWithFilters,\n} from '../../store/features/FilterSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nconst useStyles = makeStyles({\n  '@media (orientation: portrait)': {\n    root: {\n      width: '80vw',\n      height: '60vh',\n    },\n  },\n  root: {\n    minWidth: 300,\n    minHeight: 300,\n    width: '80vw',\n    height: '60vh',\n    '@media (max-width: 600px)': {\n      width: '90vw',\n      height: '90vh',\n    },\n  },\n  Actions: {\n    justifyContent: 'center',\n  },\n});\n\nconst buttons: ['genres', 'years', 'countries'] = [\n  'genres',\n  'years',\n  'countries',\n];\n\nconst Filter = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [open, setOpen] = useState(false);\n  const [category, setCategory] = useState<FilterStateKeys>('genres');\n  const filterState = useSelector((state: RootState) => state.filter);\n  const { t } = useTranslation();\n\n  const handleReset = () => {\n    dispatch(resetFilterState());\n  };\n  const handleShow = async () => {\n    console.log('[Filter] handleShow', filterState);\n    dispatch(reqeuestMoviesWithFilters());\n    setOpen(false);\n  };\n\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (category) {\n      case 'genres':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as GenresKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'years':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as YearsKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'countries':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as CountriesKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      default:\n        return;\n    }\n  };\n\n  const getCheckboxes = (category: string): JSX.Element[] | null => {\n    switch (category) {\n      case 'genres':\n        return items.genres.map((item: GenresKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['genres'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'years':\n        return items.years.map((item: YearsKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['years'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'countries':\n        return items.countries.map((item: CountriesKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['countries'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div>\n      <Button\n        variant=\"text\"\n        onClick={() => setOpen(true)}\n        startIcon={<TuneRounded />}\n      >\n        {t('filterRoot')}\n      </Button>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"filter-dialog\"\n        classes={{ paper: classes.root }}\n      >\n        <DialogTitle id=\"filter-dialog-title\">{t('filterRoot')}</DialogTitle>\n        <DialogContent>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <ButtonGroup style={{ marginBottom: 20 }}>\n              {buttons.map((text) => (\n                <Button\n                  color=\"primary\"\n                  variant={text === category ? 'contained' : 'outlined'}\n                  key={text}\n                  onClick={() => setCategory(text)}\n                >\n                  {t(text)}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Grid>\n          <Grid container wrap=\"wrap\">\n            {getCheckboxes(category)}\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.Actions}>\n          <Button onClick={handleReset} color=\"primary\">\n            Reset filters\n          </Button>\n          <Button onClick={handleShow} color=\"secondary\">\n            Show results\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\nimport { SortRounded } from '@material-ui/icons';\n\nimport { useAppDispatch } from '../../store/store';\nimport { setSortingBy } from '../../store/features/UISlice';\nimport Dropdown, { IItem } from '../Dropdown/Dropdown';\nimport { useTranslation } from 'react-i18next';\n\nconst Sort = () => {\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const onClick = (e: React.MouseEvent<HTMLButtonElement>) =>\n    dispatch(setSortingBy({ sortBy: e.currentTarget.name }));\n\n  const items = [\n    {\n      text: t('By rating'),\n      name: 'rating',\n      onClick,\n    },\n    {\n      text: t('By name'),\n      name: 'name',\n      onClick,\n    },\n    {\n      text: t('By year'),\n      name: 'year',\n      onClick,\n    },\n    {\n      text: t('By avalibility'),\n      name: 'avalibility',\n      onClick,\n    },\n  ] as IItem[];\n\n  return <Dropdown heroText={t('Sort')} icon={<SortRounded />} items={items} />;\n};\n\nexport default Sort;\n","import React from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { DashboardRounded, ViewAgendaRounded } from '@material-ui/icons';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { changeView } from '../../store/features/UISlice';\n\nconst useStyles = makeStyles({\n  right: {\n    grow: 1,\n    marginLeft: 'auto',\n  },\n});\n\nconst GridToLinesButton = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { view } = useSelector((state: RootState) => state.UI);\n\n  const handleClick = () => {\n    dispatch(changeView());\n  };\n\n  return (\n    <Button\n      className={classes.right}\n      variant=\"text\"\n      size=\"large\"\n      onClick={handleClick}\n    >\n      {view === 'grid' ? <DashboardRounded /> : <ViewAgendaRounded />}\n    </Button>\n  );\n};\n\nexport default GridToLinesButton;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport Filter from '../Filter/Filter';\nimport Sort from '../Sort/Sort';\nimport GridToLinesButton from '../GridToLinesButton/GridToLinesButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '10px 30px',\n  },\n});\n\nconst FilterSortPanel = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid container className={classes.root} alignItems=\"center\">\n      <Filter />\n      <Sort />\n      <GridToLinesButton />\n    </Grid>\n  );\n};\n\nexport default FilterSortPanel;\n","import { Container, Typography } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { LIMIT } from '../..';\nimport AlphabetNav from '../../components/AlphabetNav/AlphabetNav';\nimport Cards from '../../components/Cards/Cards';\nimport CardsSlider from '../../components/CardsSlider/CardsSlider';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { IFilter, loadMovies } from '../../store/features/MoviesSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { notEmpty } from '../../utils';\n\ninterface TParams {\n  id?: string;\n}\n\nconst MainPage = ({ match }: RouteComponentProps<TParams>) => {\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n  const { movies, search, byName, popular } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [displayedMovies, setDisplayedMovies] = useState<ITranslatedMovie[]>(\n    []\n  );\n\n  // load movies on component mount\n  useEffect(() => {\n    const m = match.url.match(/genres|byname/);\n    const route = m ? m[0] : '';\n    console.log('route', route);\n    const filter: IFilter = { limit: LIMIT };\n    switch (route) {\n      case 'genres':\n        filter.genre = match.params.id;\n        break;\n      case 'byname':\n        filter.letter = match.params.id;\n        break;\n      default:\n        break;\n    }\n    console.log(\n      '[MainPage] useEffect. movies, filter, route',\n      movies,\n      filter,\n      route\n    );\n    dispatch(loadMovies({ filter }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [match.url]);\n\n  useEffect(() => {\n    let cards = null;\n    if (match.url.includes('byname')) cards = byName;\n    else if (match.url.match(/search|genres/)) cards = search;\n    else cards = popular;\n\n    console.log(cards);\n    const displayedMovies: ITranslatedMovie[] = cards\n      .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n      .filter(notEmpty);\n    console.log(displayedMovies);\n    setDisplayedMovies(displayedMovies);\n  }, [byName, search, popular, match.url, movies]);\n\n  return (\n    <Container>\n      <AlphabetNav />\n      <FilterSortPanel />\n      <CardsSlider />\n      {displayedMovies.length ? (\n        <Cards movies={displayedMovies} />\n      ) : (\n        <Typography\n          variant=\"h5\"\n          style={{ width: '100%', textAlign: 'center' }}\n        >{t`NoMoviesSearch`}</Typography>\n      )}\n    </Container>\n  );\n};\n\nexport default MainPage;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React, { useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\nimport { profile } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst Register = () => {\n  const [inputs, setInputs] = useState({\n    email: '',\n    username: '',\n    password: '',\n    confirm: '',\n  });\n  const [valid, setValid] = useState({\n    email: false,\n    password: false,\n    confirm: false,\n  });\n  const formValid = valid.email && valid.password;\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Register] handleSubmit', inputs);\n\n      const body = {\n        email: inputs.email,\n        username: inputs.username,\n        passwd: inputs.password,\n      };\n      const res = await profile.put('create', body);\n      console.log(res);\n      if (res.data.email) {\n        dispatch(saveUserState({ user: res.data }));\n        history.push('/');\n        toast({ text: t`Check your email` });\n      } else {\n        toast({ text: res.data[i18n.language] }, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language, dispatch, history]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, username: isValid })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 3,\n              maxLength: 20,\n              regex: /^[\\w-+.]+$/,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 3,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Register'),\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Register;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Register from '../../components/Register/Register';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst RegisterPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Register />\n    </Container>\n  );\n};\n\nexport default RegisterPage;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { setCookie } from '../../utils';\n\nconst Auth = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  React.useEffect(() => {\n    console.log('cookie', document.cookie);\n    console.log(window.location.href);\n    const queryParams = decodeURI(window.location.search);\n    console.log('queryParams', queryParams);\n    const accessToken = queryParams\n      .slice(1)\n      .split('&')\n      .find((el) => el.startsWith('accessToken'));\n    if (accessToken) {\n      const tokenStart = accessToken.search(/=(.+)/);\n      const token = accessToken.slice(tokenStart + 1);\n      console.log('tokenStart', token);\n      saveToken(token);\n      dispatch(getSelfInfo());\n      setCookie('accessToken', token, { path: '/' });\n      history.push('/');\n    }\n  }, [dispatch, history]);\n  return null;\n};\n\nexport default Auth;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    position: 'fixed',\n    bottom: 0,\n    right: 0,\n    background: 'linear-gradient(0deg, #ccc, transparent)',\n  },\n});\n\nconst Footer = () => {\n  const styles = useStyles();\n  const { t } = useTranslation();\n  return (\n    <Grid\n      container\n      alignItems=\"flex-end\"\n      justify=\"flex-end\"\n      className={styles.root}\n    >\n      {t`footerCreated`}\n    </Grid>\n  );\n};\n\nexport default Footer;\n","import {\n  Button,\n  Fade,\n  FormControl,\n  Grid,\n  InputBase,\n  makeStyles,\n  Paper,\n  Popper,\n  TextField,\n} from '@material-ui/core';\nimport { SearchRounded } from '@material-ui/icons';\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { loadMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { theme } from '../../theme';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport axios from 'axios';\nimport { gCancelToken } from '../..';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '10px',\n    border: `1px solid ${theme.palette.grey[500]}`,\n    borderRadius: 5,\n    maxWidth: 300,\n    [theme.breakpoints.down('xs')]: {\n      display: 'none',\n    },\n  },\n  Input: {\n    padding: '5px 1rem',\n    flex: 1,\n  },\n  BaseInput: {\n    padding: 0,\n  },\n  Icon: {\n    fontSize: '2rem',\n    color: theme.palette.grey[700],\n    paddingRight: 5,\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '1.6rem',\n      paddingRight: 0,\n    },\n  },\n  Button: {\n    margin: '10px',\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  Popper: {\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n});\n\nconst Search = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [search, setSearch] = useState('');\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const loading = useSelector((state: RootState) => state.movies.loading);\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  };\n\n  const handleSearch = async (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      console.log(`Searching for: ${search}`);\n      const filter = { search };\n      const source = axios.CancelToken.source();\n      dispatch(loadMovies({ filter, source }));\n      gCancelToken.source = source;\n      history.push(encodeURI(`/search/${search}`));\n      setSearch('');\n    }\n  };\n  const handleOpenSearch = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setAnchorEl(anchorEl ? null : e.currentTarget);\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? 'search-popover' : undefined;\n\n  return (\n    <FormControl>\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"flex-end\"\n        className={classes.root}\n      >\n        <InputBase\n          className={classes.Input}\n          inputProps={{ 'aria-label': 'search for a movie' }}\n          value={search}\n          classes={{ input: classes.BaseInput }}\n          onChange={handleInput}\n          onKeyPress={handleSearch}\n          placeholder={t('search')}\n          disabled={loading}\n        />\n        <SearchRounded className={classes.Icon} />\n      </Grid>\n\n      <Button\n        aria-describedby={id}\n        className={classes.Button}\n        onClick={handleOpenSearch}\n        variant=\"outlined\"\n      >\n        <SearchRounded className={classes.Icon} />\n      </Button>\n      <Popper\n        open={open}\n        anchorEl={anchorEl}\n        placement={'bottom-end'}\n        transition\n        className={classes.Popper}\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={250}>\n            <Paper>\n              <TextField\n                size=\"small\"\n                className={classes.Input}\n                inputProps={{ 'aria-label': 'search for a movie' }}\n                value={search}\n                classes={{ root: classes.BaseInput }}\n                onChange={handleInput}\n                onKeyPress={handleSearch}\n                placeholder={t('search')}\n              />\n            </Paper>\n          </Fade>\n        )}\n      </Popper>\n    </FormControl>\n  );\n};\n\nexport default Search;\n","import React, { useState } from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { theme } from '../../theme';\n\nconst languages = ['en', 'ru'];\n\nconst useStyles = makeStyles({\n  Button: {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.7rem',\n    },\n  },\n});\n\nconst Internationalization = () => {\n  const classes = useStyles();\n  const [lang, setLang] = useState(0);\n  const nextLang = (lang + 1) % languages.length;\n  const { t, i18n } = useTranslation();\n\n  const handleClick = () => {\n    i18n.changeLanguage(languages[nextLang]);\n    setLang(nextLang);\n  };\n  return (\n    <div>\n      <Button onClick={handleClick} className={classes.Button}>{`${t(\n        'translate'\n      )} ${t(languages[nextLang])}`}</Button>\n    </div>\n  );\n};\n\nexport default Internationalization;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { authFail, removeToken } from '../../store/features/UserSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { handlersContext } from '../Dropdown/Dropdown';\n\nconst useStyles = makeStyles({\n  Type: {\n    fontWeight: 100,\n    marginRight: 10,\n  },\n  Text: {\n    fontWeight: 300,\n  },\n  marginAuto: { marginLeft: 'auto', marginRight: 10 },\n});\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const { onClose } = React.useContext(handlersContext);\n  const { username, email, imageBody } = useSelector(\n    (state: RootState) => state.user\n  );\n  const avatar = imageBody || undefined;\n\n  const handleLogout = () => {\n    removeToken();\n    dispatch(authFail());\n    onClose();\n  };\n\n  const handleUpdateInfo = () => {\n    onClose();\n    history.push('/settings');\n  };\n\n  return (\n    <Grid container>\n      <Grid item container wrap=\"nowrap\" alignItems=\"center\">\n        <Avatar src={avatar} alt={username} />\n        <Button\n          onClick={handleUpdateInfo}\n          className={classes.marginAuto}\n        >{t`Update info`}</Button>\n        <Button onClick={handleLogout}>{t`Logout`}</Button>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Username`}</Typography>\n        <Typography className={classes.Text}>{username}</Typography>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Email`}</Typography>\n        <Typography className={classes.Text}>{email}</Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UserInfo;\n","import { makeStyles, SvgIcon } from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  width?: number;\n  height?: number;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    color: '#035263',\n    '&:hover>': {\n      '& $_0': {\n        animation: `$forward 1s infinite ease-in-out`,\n      },\n      '& $_1': {\n        animation: `$stretch1 1s infinite ease-out`,\n      },\n      '& $_2': {\n        animation: `$stretch2 0.9s infinite ease-out`,\n      },\n      '& $_3': {\n        animation: `$stretch1 1.1s infinite ease-out`,\n      },\n      '& $_4': {\n        animation: `$stretch1 0.8s infinite ease-out`,\n      },\n    },\n  },\n  _0: {},\n  _1: {},\n  _2: {},\n  _3: {},\n  _4: {},\n  '@keyframes stretch1': {\n    '0%': {\n      opacity: 0.8,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-10px) scaleX(1)',\n    },\n    '70%': {\n      opacity: 0.8,\n    },\n    '80%': {\n      opacity: 0.2,\n      transform: 'translateX(-80px) scaleX(1.5)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n  '@keyframes forward': {\n    '0%': {\n      transform: 'translateX(0)',\n    },\n    '10%': {\n      transform: 'translateX(10px) translateY(3px)',\n    },\n    '50%': {\n      transform: 'translateX(0px) translateY(-3px)',\n    },\n    '80%': {\n      transform: 'translateX(-7px) translateY(4px)',\n    },\n    '100%': {\n      transform: 'translateX(0px) translateY(0)',\n    },\n  },\n  '@keyframes stretch2': {\n    '0%': {\n      opacity: 0.2,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-15px) scaleX(1.2)',\n    },\n    '80%': {\n      opacity: 0.6,\n    },\n    '90%': {\n      opacity: 0.2,\n      transform: 'translateX(-40px) scaleX(1.4)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n});\n\nconst Logo = ({ width = 70, height = 50 }: Props) => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      style={{ width, height }}\n      className={classes.root}\n      viewBox={'-100 0 584 384'}\n    >\n      <path\n        className={classes._0}\n        d=\"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z\"\n      />\n      <path\n        className={classes._1}\n        d=\"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z\"\n      />\n      <path\n        className={classes._2}\n        d=\"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z\"\n      />\n      <path\n        className={classes._3}\n        d=\"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z\"\n      />\n      <path\n        className={classes._4}\n        d=\"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default Logo;\n","import { ButtonProps, Grid, makeStyles } from '@material-ui/core';\nimport { PersonOutlineRounded, PersonRounded } from '@material-ui/icons';\nimport React from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport Login from '../Login/Login';\nimport Search from '../Search/Search';\nimport Internationalization from '../../components/Internationalization/Internationalization';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport UserInfo from '../UserInfo/UserInfo';\nimport Logo from '../Logo/Logo';\nimport { NavLink } from 'react-router-dom';\nimport { resetEndOfMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nconst useStyles = makeStyles({\n  root: {},\n  Avatar: {\n    height: '1.5rem',\n    width: '1.5rem',\n  },\n});\n\nconst Header: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth, imageBody } = useSelector((state: RootState) => state.user);\n\n  const buttonProps: ButtonProps = {\n    variant: 'outlined',\n  };\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      <Grid item xs={2}>\n        <NavLink onClick={() => dispatch(resetEndOfMovies())} to=\"/\">\n          <Logo />\n        </NavLink>\n      </Grid>\n      <Grid\n        container\n        justify=\"flex-end\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        item\n        xs={8}\n      >\n        <Internationalization />\n        <Search />\n      </Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}></Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}>\n        {isAuth ? (\n          <Dropdown\n            img={imageBody || ''}\n            icon={<PersonRounded aria-label=\"user-profile\" />}\n            buttonProps={buttonProps}\n          >\n            {<UserInfo />}\n          </Dropdown>\n        ) : (\n          <Dropdown\n            icon={<PersonOutlineRounded aria-label=\"user-profile\" />}\n            buttonProps={buttonProps}\n          >\n            {<Login />}\n          </Dropdown>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles, Typography } from '@material-ui/core';\n\ninterface Props {\n  text: string;\n}\n\nconst useStyles = makeStyles({\n  h3: {\n    fontSize: '1.6rem',\n    textTransform: 'uppercase',\n    margin: '10px 0',\n    fontWeight: 900,\n  },\n});\n\nconst CategoryHeader = ({ text }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"h3\" className={classes.h3}>\n      {text}\n    </Typography>\n  );\n};\n\nexport default CategoryHeader;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\n\ninterface Props {\n  name: string;\n  sources?: string[];\n  type: 'photo' | 'video';\n}\ninterface GridItemProps {\n  name: string;\n  src: string;\n  type: 'photo' | 'video';\n  key?: string | number;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '10px 0',\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    transform: 'translateZ(0)',\n  },\n  HorizontalScroll: {\n    overflowX: 'auto',\n  },\n  Image: {\n    height: '10rem',\n    marginRight: 10,\n  },\n}));\n\nconst GridItem: React.FC<GridItemProps> = ({\n  src,\n  name,\n  type,\n}: GridItemProps) => {\n  const classes = useStyles();\n\n  switch (type) {\n    case 'photo':\n      return <img src={src} alt={name} className={classes.Image} />;\n    case 'video':\n      return <video controls src={src} className={classes.Image} />;\n    default:\n      return null;\n  }\n};\n\nconst HorizontalGrid = ({ sources, name, type }: Props) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const horizontalScrollHandler = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    e.currentTarget.scrollTo({\n      top: 0,\n      left: e.currentTarget.scrollLeft + e.deltaY * 4,\n      behavior: 'smooth',\n    });\n  };\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <CategoryHeader text={t(`${type}s`)} />\n      <Grid\n        container\n        wrap=\"nowrap\"\n        onWheel={horizontalScrollHandler}\n        className={classes.HorizontalScroll}\n      >\n        {sources?.length\n          ? sources.map((item: string, index: number) => (\n              <GridItem key={item + index} src={item} name={name} type={type} />\n            ))\n          : t`No info`}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default HorizontalGrid;\n","import { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { IComment } from '../../../models/MovieInfo';\nimport { primaryColor } from '../../../theme';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    marginBottom: 5,\n  },\n  h4: {\n    fontWeight: 700,\n    fontSize: '1rem',\n    marginBottom: 10,\n  },\n  Image: {\n    marginRight: 10,\n    background: primaryColor.main,\n  },\n  Text: {\n    width: '100%',\n    textAlign: 'justify',\n  },\n});\n\nconst Comment = ({ username, text, avatar }: IComment) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container wrap=\"nowrap\" className={classes.root}>\n      <Avatar\n        src={avatar}\n        alt={`${username}'s avatar`}\n        className={classes.Image}\n      >\n        {username.substr(0, 2)}\n      </Avatar>\n      <Grid>\n        <Typography variant=\"h4\" className={classes.h4}>\n          {username}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.Text}>\n          {text}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button, Grid, makeStyles, TextField } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { movies } from '../../../axios';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../store/rootReducer';\nimport { useAppDispatch } from '../../../store/store';\nimport { updateComments } from '../../../store/features/MoviesSlice';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '1rem 0',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n});\n\nexport interface IComment {\n  id?: number;\n  userid: string;\n  movieid: string;\n  text: string;\n  time?: number;\n}\n\nconst SendComment = () => {\n  const classes = useStyles();\n  const { userId } = useSelector((state: RootState) => state.user);\n  const [comment, setComment] = React.useState('');\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const sendForm = async () => {\n    if (!comment.length) return;\n    console.log(comment);\n    const movieid = window.location.href.split('/').pop();\n    const res = await movies.post('/comment', {\n      userid: `${userId}`,\n      movieid,\n      text: comment,\n      time: new Date().getTime(),\n    } as IComment);\n    if (res.data.status)\n      dispatch(updateComments({ id: movieid, comments: [res.data.data] }));\n    setComment('');\n  };\n\n  const handleInput = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.ctrlKey && e.key === 'Enter') sendForm();\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendForm();\n  };\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <form onSubmit={handleSubmit} className={classes.Form}>\n        <TextField\n          fullWidth\n          multiline\n          name=\"comment\"\n          type=\"textarea\"\n          placeholder={t`Leave a comment!`}\n          className={classes.margin}\n          size=\"small\"\n          onChange={(e) => setComment(e.currentTarget.value)}\n          onKeyPress={handleInput}\n          value={comment}\n        />\n        <Button type=\"submit\" className={classes.margin} variant=\"contained\">\n          {t`Send`}\n        </Button>\n      </form>\n    </Grid>\n  );\n};\n\nexport default SendComment;\n","import React, { useEffect, useRef } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport Comment from './Comment/Comment';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport SendComment from './SendComment/SendComment';\nimport { loadComments } from '../../store/features/MoviesSlice';\nimport { debouncedDetectBottomLine } from '../../utils';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch } from '../../store/store';\nimport { IMovie } from '../../models/MovieInfo';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nconst LIMIT = 5;\nexport interface CommentsProps {\n  movie: IMovie;\n}\n\nconst Comments: React.FC<CommentsProps> = ({ movie }) => {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const offsetRef = useRef(0);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  // load first batch of comments initially\n  // if there's something left to load\n  useEffect(() => {\n    if (!movie?.info.maxComments) return;\n    if (\n      !movie.info.comments ||\n      (movie.info.comments &&\n        movie.info.comments.length < movie.info.maxComments)\n    ) {\n      dispatch(\n        loadComments(\n          { movieId: movie.id, offset: movie.info.comments?.length },\n          (length) => (offsetRef.current += length)\n        )\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!movie || !movie.info.maxComments) return;\n    const endOfCommentsCallback = () => {\n      if (\n        movie.info.comments?.length &&\n        movie.info.comments?.length < movie.info.maxComments\n      ) {\n        dispatch(\n          loadComments({\n            movieId: movie.id,\n            limit: LIMIT,\n            offset: movie.info.comments?.length || 0,\n          })\n        );\n      }\n    };\n    const trackScrolling = debouncedDetectBottomLine(\n      gridRef.current,\n      endOfCommentsCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [\n    movie,\n    movie.info.comments?.length,\n    movie.info.maxComments,\n    movie.id,\n    dispatch,\n  ]);\n\n  if (!movie) return null;\n  console.log('[Comments]', movie.info.comments);\n  const content = movie.info.comments?.length ? (\n    movie.info.comments.map((comment) => (\n      <Comment {...comment} key={comment.commentid} />\n    ))\n  ) : (\n    <Typography variant=\"body1\" style={{ fontSize: '1.3rem' }}>\n      {t`No comments`}\n    </Typography>\n  );\n\n  return (\n    <Grid ref={gridRef} style={{ marginTop: 10 }} container direction=\"column\">\n      <CategoryHeader text={t`Comments`} />\n      {isAuth && <SendComment />}\n      {content}\n    </Grid>\n  );\n};\n\nexport default Comments;\n","import {\n  Button,\n  CircularProgress,\n  Grid,\n  IconButton,\n  makeStyles,\n  Menu,\n  MenuItem,\n  Popover,\n  Slider,\n  // Tooltip,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport React, { forwardRef, useState } from 'react';\nimport {\n  FastForward,\n  FastRewind,\n  Fullscreen,\n  Pause,\n  PlayArrow,\n  VolumeOff,\n  VolumeUp,\n  Subtitles,\n  Settings,\n} from '@material-ui/icons';\nimport { TrackProps } from 'react-player/file';\n\nconst useStyles = makeStyles({\n  controlsWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.6)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    zIndex: 1,\n  },\n\n  controlIcons: {\n    color: '#777',\n    fontSize: 50,\n    transform: 'scale(0.9)',\n    '&:hover': {\n      color: 'white',\n      transform: 'scale(1)',\n    },\n  },\n\n  bottomIcons: {\n    color: '#999',\n    '&:hover': {\n      color: 'white',\n    },\n  },\n  volumeSlider: {\n    width: 100,\n  },\n  Subtitles: {\n    fontSize: '1.5rem',\n  },\n});\n\n// interface ValueProps {\n//   open: boolean;\n//   value: string;\n//   children: JSX.Element;\n// }\n\n// const ValueLabelComponent: React.FC<ValueProps> = (props2) => {\n//   // debugger\n//   const { children, open, value } = props2;\n\n//   return (\n//     <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n//       {children}\n//     </Tooltip>\n\n//     // <Popover\n//     //   id=\"mouse-over-popover\"\n//     //   // style={{\n//     //   //   paper: { padding: 5 },\n//     //   // }}\n//     //   open={open}\n//     //   // anchorEl={anchorEl}\n//     //   anchorOrigin={{\n//     //     vertical: 'bottom',\n//     //     horizontal: 'left',\n//     //   }}\n//     //   transformOrigin={{\n//     //     vertical: 'top',\n//     //     horizontal: 'left',\n//     //   }}\n//     //   // onClose={handlePopoverClose}\n//     //   disableRestoreFocus\n//     // >\n//     //   {children}\n//     // </Popover>\n//   );\n// };\n\nconst PrettoSlider = withStyles({\n  root: {\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus, &:hover, &$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\ninterface Props {\n  onPlayPause: () => void;\n  onMuted: () => void;\n  onRewind: () => void;\n  onFastForward: () => void;\n  onVolumeChange: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onVolumeSeekUp: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onPlaybackRateChange: (n: number) => void;\n  onToggleFullScreen: () => void;\n  onSeek: (n: number | number[]) => void;\n  onSeekMouseDown: () => void;\n  onSeekMouseUp: () => void;\n  onChangeDisplayFormat: () => void;\n  onChangeSubtitles: () => void;\n  onSwitchSubtitles: (n: number) => void;\n  elapsedTime: string;\n  seeking: boolean;\n  playing: boolean;\n  muted: boolean;\n  volume: number;\n  played: number;\n  playbackRate: number;\n  totalDuration: string;\n  title: string;\n  showSubtitles: boolean;\n  loading: boolean;\n  tracks?: TrackProps[];\n}\n\nconst PlayerControls = forwardRef<HTMLDivElement, Props>((props, ref) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState<Element | null>(null);\n  const [\n    subtitlesAnchorEl,\n    setSubtitlesAnchorEl,\n  ] = useState<HTMLElement | null>(null);\n\n  const handleSubtitlesMenuClose = () => {\n    setSubtitlesAnchorEl(null);\n  };\n\n  const handleSubtitlesMenuClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    setSubtitlesAnchorEl(e.currentTarget);\n  };\n\n  const handleChooseSubtitle = (index: number) => {\n    props.onSwitchSubtitles(index);\n    handleSubtitlesMenuClose();\n  };\n\n  const handlePopover = (e: React.MouseEvent) => {\n    setAnchorEl(e.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'playbackrate-popover' : undefined;\n  return (\n    <div className={classes.controlsWrapper} ref={ref}>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item>\n          <Typography variant=\"h5\" style={{ color: 'white' }}>\n            {props.title}\n          </Typography>\n        </Grid>\n        {/* <Grid item>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<BookmarkIcon />}>\n\t\t\t\t\t\tBookmark\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t</Grid> */}\n      </Grid>\n      <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n        {props.loading ? (\n          <CircularProgress color=\"primary\" />\n        ) : (\n          <>\n            <IconButton\n              onClick={props.onRewind}\n              className={classes.controlIcons}\n              aria-label=\"reqind\"\n            >\n              <FastRewind fontSize=\"inherit\" />\n            </IconButton>\n            <IconButton\n              onClick={props.onPlayPause}\n              className={classes.controlIcons}\n              aria-label=\"reqind\"\n            >\n              {props.playing ? (\n                <Pause fontSize=\"inherit\" />\n              ) : (\n                <PlayArrow fontSize=\"inherit\" />\n              )}\n            </IconButton>\n            <IconButton\n              onClick={props.onFastForward}\n              className={classes.controlIcons}\n              aria-label=\"reqind\"\n            >\n              <FastForward fontSize=\"inherit\" />\n            </IconButton>\n          </>\n        )}\n      </Grid>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item xs={12}>\n          <PrettoSlider\n            min={0}\n            max={100}\n            // ValueLabelComponent={(props2) => (\n            //   <ValueLabelComponent {...props2} value={props.elapsedTime} />\n            // )}\n            value={props.played * 100}\n            onChange={(e, value) => props.onSeek(value)}\n            onMouseDown={props.onSeekMouseDown}\n            onChangeCommitted={props.onSeekMouseUp}\n          />\n        </Grid>\n        <Grid item>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <IconButton\n              disabled={props.loading}\n              onClick={props.onPlayPause}\n              className={classes.bottomIcons}\n            >\n              {props.playing ? (\n                <Pause fontSize=\"large\" />\n              ) : (\n                <PlayArrow fontSize=\"large\" />\n              )}\n            </IconButton>\n            <IconButton onClick={props.onMuted} className={classes.bottomIcons}>\n              {props.muted ? (\n                <VolumeOff fontSize=\"large\" />\n              ) : (\n                <VolumeUp fontSize=\"large\" />\n              )}\n            </IconButton>\n            <Slider\n              min={0}\n              max={100}\n              value={props.volume * 100}\n              className={classes.volumeSlider}\n              onChange={props.onVolumeChange}\n              onChangeCommitted={props.onVolumeSeekUp}\n            />\n            <Button\n              onClick={props.onChangeDisplayFormat}\n              variant=\"text\"\n              style={{ color: '#fff', marginLeft: 16 }}\n            >\n              <Typography>\n                {props.elapsedTime}/{props.totalDuration}\n              </Typography>\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Button\n            onClick={handlePopover}\n            variant=\"text\"\n            className={classes.bottomIcons}\n          >\n            <Typography>{props.playbackRate}X</Typography>\n          </Button>\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n          >\n            <Grid container direction=\"column-reverse\">\n              {[0.5, 1, 1.5, 2].map((rate) => (\n                <Button\n                  key={rate}\n                  onClick={() => props.onPlaybackRateChange(rate)}\n                  variant=\"text\"\n                >\n                  <Typography\n                    color={\n                      rate === props.playbackRate ? 'secondary' : undefined\n                    }\n                  >\n                    {rate}\n                  </Typography>\n                </Button>\n              ))}\n            </Grid>\n          </Popover>\n          <IconButton\n            onClick={props.onChangeSubtitles}\n            className={classes.bottomIcons}\n          >\n            <Subtitles\n              style={{ color: props.showSubtitles ? '#999' : '#99999955' }}\n              fontSize=\"large\"\n            />\n          </IconButton>\n\n          <IconButton\n            onClick={handleSubtitlesMenuClick}\n            className={classes.bottomIcons}\n          >\n            <Settings aria-label=\"player-settings\" />\n          </IconButton>\n\n          <Menu\n            id=\"subtitle-menu\"\n            anchorEl={subtitlesAnchorEl}\n            keepMounted\n            open={Boolean(subtitlesAnchorEl)}\n            onClose={handleSubtitlesMenuClose}\n          >\n            {props.tracks?.map((el: TrackProps, index: number) => (\n              <MenuItem\n                key={el.label}\n                className={classes.Subtitles}\n                onClick={() => handleChooseSubtitle(index)}\n              >\n                {el.label}\n              </MenuItem>\n            ))}\n          </Menu>\n\n          <IconButton\n            onClick={props.onToggleFullScreen}\n            className={classes.bottomIcons}\n          >\n            <Fullscreen fontSize=\"large\" />\n          </IconButton>\n        </Grid>\n      </Grid>\n    </div>\n  );\n});\n\nexport default PlayerControls;\n","import { makeStyles } from '@material-ui/core';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactPlayer from 'react-player';\nimport { TrackProps } from 'react-player/file';\nimport screenfull from 'screenfull';\nimport { useToast } from '../../hooks/useToast';\nimport { getSearchParam } from '../../utils';\nimport PlayerControls from './PlayerControls';\n\nconst useStyles = makeStyles({\n  playerWrapper: {\n    position: 'relative',\n    width: '100%',\n    minWidth: 610,\n  },\n  Error: {\n    width: '100%',\n    height: '100%',\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: '#ddd',\n    borderRadius: 5,\n  },\n});\n\ninterface Props {\n  title: string;\n  id: string | number;\n  tracksProps?: TrackProps[];\n}\n\nconst format = (seconds: number) => {\n  if (isNaN(seconds)) {\n    return '00:00';\n  }\n  const date = new Date(seconds * 1000);\n  const hh = date.getUTCHours();\n  const mm = date.getUTCMinutes();\n  const ss = date.getUTCSeconds().toString().padStart(2, '0');\n  if (hh) {\n    return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\n  }\n  return `${mm}:${ss}`;\n};\n\nfunction Player({ title, id, tracksProps }: Props) {\n  const classes = useStyles();\n  const [state, setState] = useState({\n    playing: false,\n    muted: false,\n    volume: 1,\n    playbackRate: 1.0,\n    played: 0,\n    seeking: false,\n    controlsVisible: true,\n    error: false,\n    showSubtitles: true,\n    loading: false,\n  });\n  const [track, setTrack] = useState<number>(0);\n  const [player, setPlayer] = React.useState<Record<string, any>>();\n  const [timeDisplayFormat, setTimeDisplayFormat] = useState('normal');\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    seeking,\n    controlsVisible,\n    error,\n    showSubtitles,\n    loading,\n  } = state;\n  const playerRef = useRef<ReactPlayer>(null);\n  const playerContainerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n  const timeoutId = useRef<NodeJS.Timeout>();\n  const videoUrl = `/api/storage/load/${id}/video`;\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  /**\n   * set played to the value, defined in params\n   * could be used if there is an error -\n   * then reload component and set current played position\n   * to the value, set in parameters\n   */\n  useEffect(() => {\n    const params = getSearchParam();\n    console.log(params);\n    if (params?.time) {\n      const played = parseFloat(params.time);\n      setState((state) => ({ ...state, played }));\n    }\n  }, []);\n\n  // save internal player\n  useEffect(() => {\n    if (!playerRef || !playerRef.current) return;\n    console.log('[Player] <save internal player> useEffect');\n    const player = playerRef.current.getInternalPlayer();\n    setPlayer(player);\n    console.log('[Player] <save internal player> player', player);\n  }, [playerRef]);\n\n  // add listners\n  useEffect(() => {\n    if (!player) return;\n    console.log('[Player] <add listners> useEffect');\n    const playListener = player.addEventListener('play', () => {\n      console.log('play');\n    });\n    const emptiedListener = player.addEventListener('emptied', () => {\n      console.log('emptied');\n    });\n    const durationChangeListener = player.addEventListener(\n      'durationchange',\n      () => {\n        console.log('durationchange');\n      }\n    );\n    const endedListener = player.addEventListener('ended', () => {\n      console.log('ended');\n    });\n    const stalledListener = player.addEventListener('stalled', () => {\n      console.log('stalled');\n    });\n    const suspendListener = player.addEventListener('suspend', () => {\n      console.log('suspend');\n    });\n    const waitingListener = player.addEventListener('waiting', () => {\n      console.log('waiting');\n    });\n    return () => {\n      player.removeEventListener('play', playListener);\n      player.removeEventListener('emptied', emptiedListener);\n      player.removeEventListener('ended', endedListener);\n      player.removeEventListener('durationchange', durationChangeListener);\n      player.removeEventListener('stalled', stalledListener);\n      player.removeEventListener('suspend', suspendListener);\n      player.removeEventListener('waiting', waitingListener);\n    };\n  }, [player]);\n\n  const handleSwitchSubtitles = (index: number) => {\n    setTrack(index);\n  };\n\n  const handleChangeSubtitles = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    if (!player) {\n      const player = playerRef.current.getInternalPlayer();\n      setPlayer(() => player);\n    }\n    console.log('[Player] <handleChangeSubtitles> player', player);\n    const tracks = player?.textTracks;\n    console.log('[Player] <handleChangeSubtitles> tracks', tracks);\n    if (!tracks || !tracks.length) return;\n    const showing = tracks[track].mode === 'showing';\n    console.log(\n      '[Player] <handleChangeSubtitles> track, showing, showSubtitles',\n      track,\n      showing,\n      showSubtitles\n    );\n    tracks[track].mode = showing ? 'disabled' : 'showing';\n    setState({ ...state, showSubtitles: !showing });\n  };\n\n  const handlePlayPause = () => {\n    setState({ ...state, playing: !state.playing });\n  };\n  const handleRewind = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() - 10);\n  };\n  const handleFastForward = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() + 10);\n  };\n  const handleMute = () => {\n    setState({ ...state, muted: !state.muted });\n  };\n  const handleVolumeChange = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handleVolumeSeekUp = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handlePlaybackRateChange = (rate: number) => {\n    setState({ ...state, playbackRate: rate });\n  };\n  const toggleFullScreen = () => {\n    if (!playerContainerRef || !playerContainerRef.current) return;\n    if (screenfull && screenfull.isEnabled && playerContainerRef !== null) {\n      screenfull.toggle(playerContainerRef.current);\n    }\n  };\n\n  const handleProgress = ({ played }: { played: number }) => {\n    console.log('handleProgress', played);\n    setState({ ...state, loading: false });\n    if (!controlsRef || !controlsRef.current) return;\n    timeoutId.current = setTimeout(() => {\n      if (!controlsRef || !controlsRef.current) return;\n      controlsRef.current.style.visibility = 'hidden';\n    }, 1000);\n    if (!state.seeking) {\n      setState({ ...state, played });\n    }\n  };\n  const handleSeek = (value: number | number[]) => {\n    if (!playerRef || !playerRef.current) return;\n    const played = typeof value === 'number' ? value / 100 : value[0] / 100;\n    if (played === state.played) return;\n    setState({ ...state, played });\n    playerRef.current.seekTo(played, 'fraction');\n  };\n  const handleSeekMouseDown = () => {\n    setState({ ...state, seeking: true });\n  };\n  const handleSeekMouseUp = () => {\n    setState({ ...state, seeking: false });\n  };\n  const handleChangeDisplayFormat = () => {\n    setTimeDisplayFormat(\n      timeDisplayFormat === 'normal' ? 'remaining' : 'normal'\n    );\n  };\n  const handleMouseMove = () => {\n    if (!controlsRef || !controlsRef.current) return;\n    controlsRef.current.style.visibility = 'visible';\n    if (timeoutId.current) clearTimeout(timeoutId.current);\n  };\n  const handleError = (e: Error) => {\n    console.log('handleError', e);\n    toast({ text: t`movieError` }, 'error', { autoHideDuration: 7000 });\n  };\n  const handleBuffer = () => {\n    console.log('onBuffer');\n    setState({ ...state, loading: true });\n  };\n  const handleBufferEnd = () => {\n    console.log('onBufferEnd');\n    setState({ ...state, loading: false });\n  };\n\n  const currentTime =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getCurrentTime();\n  const duration =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getDuration();\n  const elapsedTime =\n    timeDisplayFormat === 'normal'\n      ? format(currentTime)\n      : `-${format(duration - currentTime)}`;\n  const totalDuration = format(duration);\n\n  const config = tracksProps ? { file: { tracks: [...tracksProps] } } : {};\n  console.log('[Player] tracks, config', tracksProps, config);\n  return error ? (\n    <div className={classes.Error}>{t`Cannot load movie`}</div>\n  ) : (\n    <div\n      ref={playerContainerRef}\n      className={classes.playerWrapper}\n      onMouseMove={handleMouseMove}\n    >\n      <ReactPlayer\n        ref={playerRef}\n        width=\"100%\"\n        height=\"100%\"\n        url={videoUrl}\n        muted={muted}\n        playing={playing}\n        volume={volume}\n        controls={false}\n        playbackRate={playbackRate}\n        onProgress={handleProgress}\n        onError={handleError}\n        onBuffer={handleBuffer}\n        onBufferEnd={handleBufferEnd}\n        onReady={handleBufferEnd}\n        config={config}\n      />\n      {controlsVisible && (\n        <PlayerControls\n          ref={controlsRef}\n          onPlayPause={handlePlayPause}\n          onMuted={handleMute}\n          playing={playing}\n          muted={muted}\n          volume={volume}\n          played={played}\n          seeking={seeking}\n          loading={loading}\n          showSubtitles={showSubtitles}\n          onRewind={handleRewind}\n          onFastForward={handleFastForward}\n          onVolumeChange={handleVolumeChange}\n          onVolumeSeekUp={handleVolumeSeekUp}\n          playbackRate={playbackRate}\n          onPlaybackRateChange={handlePlaybackRateChange}\n          onToggleFullScreen={toggleFullScreen}\n          onSeek={handleSeek}\n          onSeekMouseDown={handleSeekMouseDown}\n          onSeekMouseUp={handleSeekMouseUp}\n          elapsedTime={elapsedTime}\n          totalDuration={totalDuration}\n          onChangeSubtitles={handleChangeSubtitles}\n          onSwitchSubtitles={handleSwitchSubtitles}\n          onChangeDisplayFormat={handleChangeDisplayFormat}\n          title={title}\n          tracks={tracksProps}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Player;\n","import {\n  Box,\n  Grid,\n  LinearProgress,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { inherits } from 'util';\nimport { useToast } from '../../hooks/useToast';\nimport { loadActivePeers } from '../../store/features/MoviesSlice';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  Text: {\n    marginRight: 5,\n    display: 'inline-block',\n  },\n  Progress: {\n    marginBottom: 2,\n  },\n});\ninterface Props {\n  movieId?: string | number;\n}\n\nconst WARNING_MESSAGE_TIMEOUT = 30000;\nconst STATS_REQUEST_INTERVAL = 10000;\n\nconst initialState = { activePeers: 0, loadedPercent: 0 };\nconst ActivePeers = ({ movieId }: Props) => {\n  const classes = useStyles();\n  const [state, setState] = useState(initialState);\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!movieId) return;\n    const timeout = setTimeout(() => {\n      if (!state.activePeers || state.loadedPercent < 100) {\n        toast({ text: t`loadingTimeoutWarning` }, 'warning', {\n          autoHideDuration: 7000,\n        });\n      }\n    }, WARNING_MESSAGE_TIMEOUT);\n    const interval = setInterval(async () => {\n      const data = await loadActivePeers(`${movieId}`);\n      if (data) setState(data);\n      if (data?.activePeers || data?.loadedPercent === 100)\n        clearTimeout(timeout);\n    }, STATS_REQUEST_INTERVAL);\n    return () => {\n      clearInterval(interval);\n      clearTimeout(timeout);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <Box>\n        <Typography component=\"span\" className={classes.Text}>\n          Active peers:\n        </Typography>\n        <Typography\n          className={classes.Text}\n          style={{ color: state.activePeers < 5 ? 'darkred' : 'darkgreen' }}\n        >\n          {state.activePeers}\n        </Typography>\n      </Box>\n      <Box>\n        <Typography className={classes.Text}>Loaded:</Typography>\n        <LinearProgress\n          className={classes.Progress}\n          variant=\"determinate\"\n          value={state.loadedPercent}\n        />\n      </Box>\n    </Grid>\n  );\n};\n\nexport default ActivePeers;\n","import { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { IUser } from '../../models/MovieInfo';\nimport HorizontalGrid from '../HorizontalGrid/HorizontalGrid';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport Comments from '../Comments/Comments';\nimport { useAppDispatch } from '../../store/store';\nimport {\n  loadMovie,\n  resetError,\n  updateMovie,\n  updateViews,\n} from '../../store/features/MoviesSlice';\nimport { useTranslation } from 'react-i18next';\nimport { primaryColor } from '../../theme';\nimport Player from '../Player/Player';\nimport { useToast } from '../../hooks/useToast';\nimport ActivePeers from '../Player/ActivePeers';\nimport axios from 'axios';\nimport { TrackProps } from 'react-player/file';\n\ninterface TParams {\n  id: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    fontSize: '1.3rem',\n    padding: '10px 0',\n  },\n  Header: {\n    fontSize: '2rem',\n    margin: '0 10px',\n    fontWeight: 700,\n  },\n  Divider: {\n    margin: '10px 0',\n  },\n  Poster: {\n    height: '23rem',\n    marginRight: 10,\n  },\n  MainInfoText: {\n    margin: 5,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'flex-end',\n    fontSize: 'inherit',\n    fontWeight: 200,\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    color: 'inherit',\n    fontWeight: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n  Description: {\n    marginTop: 10,\n    fontSize: 'inherit',\n  },\n  Video: {\n    margin: '15px 0',\n  },\n  AdditionalInfo: {\n    margin: '10px 0',\n  },\n});\n\nconst MovieFullInfo = ({ match }: RouteComponentProps<TParams>) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const { toast } = useToast();\n  const [tracks, setTracks] = useState<TrackProps[]>([]);\n  const [enablePlayer, setEnablePlayer] = useState(false);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { movies, error } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((movie) => movie.en.id === match.params.id);\n  const headerRef = React.useRef<HTMLHeadingElement | null>(null);\n\n  // if no movies in redux - load some, we've landed on movie's page\n  useEffect(() => {\n    if (!movie) dispatch(loadMovie(match.params.id));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // update movies views\n  useEffect(() => {\n    if (!movie) return;\n    dispatch(updateViews(match.params.id));\n    dispatch(updateMovie({ id: movie.en.id, isViewed: true }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      history.push('/');\n      toast({ text: t(error) }, 'error');\n      dispatch(resetError());\n    }\n  }, [error, dispatch, history, t, toast, i18n.language]);\n\n  useEffect(() => {\n    if (!headerRef || !headerRef.current) return;\n    headerRef.current.scrollIntoView(true);\n  }, []);\n\n  // load subtitles\n  useEffect(() => {\n    console.log('[Player] <load subtitles> useEffect');\n    const loadSubtitles = async () => {\n      if (!movie) return;\n      const id = movie.en.id;\n      try {\n        const res = await axios(`/api/loader/subtitles/${id}`);\n        console.log(res.data);\n        if (!res.data.data.length) return;\n\n        const tracks = res.data.data.map(\n          (track: { id: string; language: string }, index: number) => ({\n            kind: 'subtitles',\n            src: `/api/storage/load/${id}/subtitles/${track.id}`,\n            srcLang:\n              track.language === 'unknown'\n                ? !index\n                  ? 'en'\n                  : `lng${index}`\n                : track.language,\n            label: !index ? 'en' : `lng${index}`,\n            default: !index,\n          })\n        );\n        setTracks((_) => [...tracks]);\n      } catch (e) {\n        console.log(e);\n      } finally {\n        setEnablePlayer(true);\n      }\n    };\n    loadSubtitles();\n  }, [movie]);\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined,\n    backup?: string\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return backup || t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n  const mapItems = (items?: (string | IUser)[], backup?: string): string => {\n    if (!items || !items.length) return backup || t('No info');\n    const names = items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return text;\n    });\n    return names.join(', ');\n  };\n\n  if (!isAuth)\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        className={classes.root}\n      >\n        <Typography className={classes.Description}>{t`AuthOnly`}</Typography>\n      </Grid>\n    );\n\n  if (!movie) return null;\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <Typography variant=\"h2\" className={classes.Header} ref={headerRef}>\n        {movie[i18n.language as 'en' | 'ru'].title}\n      </Typography>\n      <Divider className={classes.Divider} />\n      <Grid container wrap=\"nowrap\">\n        <img\n          className={classes.Poster}\n          src={movie.en.img}\n          alt={`${movie.en.title} poster`}\n        />\n        <Grid item container direction=\"column\">\n          <Grid container className={classes.MainInfoText}>\n            {t`Year`}: {movie.en.info.year}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Genres`}: {mapItemsToLinks(movie.en.info.genres)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Length`}:{' '}\n            {movie.en.info.length > 0\n              ? `${movie.en.info.length}${t('min')}`\n              : t`unknown`}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Views`}: {movie.en.info.views}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`PG rating`}: {movie.en.info.pgRating}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Directed`}:{' '}\n            {mapItems(movie.en.info.directorList, movie.en.info.directors)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Actors`}: {mapItems(movie.en.info.cast, movie.en.info.stars)}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container className={classes.Video}>\n        <ActivePeers movieId={movie.en.id} />\n\n        {enablePlayer ? (\n          <Player\n            id={movie.en.id}\n            tracksProps={tracks}\n            title={movie[i18n.language as 'en' | 'ru'].title}\n          />\n        ) : null}\n      </Grid>\n      <Grid container direction=\"column\" className={classes.AdditionalInfo}>\n        <CategoryHeader text={t`About movie`} />\n        <Typography variant=\"body1\" className={classes.Description}>\n          {movie[i18n.language as 'en' | 'ru'].info.description || t`No info`}\n        </Typography>\n        <Divider className={classes.Divider} />\n        {movie.en.info.photos && (\n          <HorizontalGrid\n            sources={movie.en.info.photos}\n            name={movie.en.title}\n            type={'photo'}\n          />\n        )}\n        {movie.en.info.videos && (\n          <HorizontalGrid\n            sources={movie.en.info.videos}\n            name={movie.en.title}\n            type={'video'}\n          />\n        )}\n        <Comments movie={movie.en} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default MovieFullInfo;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useSelector } from 'react-redux';\nimport classnames from 'classnames';\nimport { RootState } from '../../../store/rootReducer';\nimport { Paper } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      minWidth: '344px !important',\n    },\n  },\n  card: {\n    display: 'flex',\n    width: '100%',\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  prompt: {\n    backgroundColor: theme.palette.grey[800],\n    width: 550,\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: 'block',\n    fontWeight: 'bold',\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: '8px 8px 8px 26px',\n  },\n  close: {\n    marginLeft: 'auto !important',\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: '1rem',\n    color: theme.palette.common.white,\n  },\n}));\n\ninterface Props {\n  id: string;\n}\n\nconst SnackMessage = React.forwardRef<HTMLDivElement, Props>(({ id }, ref) => {\n  const classes = useStyles();\n  const { closeSnackbar } = useSnackbar();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n\n  const displayedText = text?.endsWith(' - ') ? text.slice(0, -3) : text;\n\n  const handleDismiss = () => {\n    closeSnackbar(id);\n  };\n\n  return (\n    <Paper ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant || 'success'])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}:\n            </Typography>\n          )}\n          {displayedText && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {displayedText}\n            </Typography>\n          )}\n        </CardActions>\n\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </Paper>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { removeSnack } from '../../store/features/SnackSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nlet displayed: string[] = [];\n\nconst Notifier = () => {\n  const dispatch = useAppDispatch();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id: string) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id: string) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (_event, key: string) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ForgotPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      try {\n        const res = await passwd.post('repair', { email: inputs.email });\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Check your email` });\n        } else {\n          console.log(res.data[i18n.language]);\n          toast({ text: res.data[i18n.language] || t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Restore password`,\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport { getSearchParam } from '../../utils';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ResetPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ password: '', confirm: '' });\n  const [valid, setValid] = useState({ password: false, confirm: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.password && valid.confirm;\n  const { toast } = useToast();\n  const history = useHistory();\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      const searchParams = getSearchParam();\n      if (!searchParams?.repairToken) {\n        toast({ text: t`ServerErrorTry` }, 'error');\n        history.push('/forgot_password');\n        return;\n      }\n      try {\n        const repairToken = searchParams.repairToken.replaceAll('%3D', '=');\n        const res = await passwd.patch(\n          '/repair/patch',\n          { passwd: inputs.password },\n          { headers: { repairToken } }\n        );\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Password changed` });\n          history.push('/login');\n        } else {\n          toast({ text: res.data[i18n.language] ?? t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'password',\n          type: 'password',\n          label: t`New password`,\n          placeholder: t`Enter password`,\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t`passwordError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t`Confirm`,\n          placeholder: t`Confirm password`,\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t`confirmError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new password`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, i18n.language, toast, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ResetPassword;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { email } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ChangeEmail = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ChangeEmail] handleSubmit', inputs);\n\n      // use cookie or repairToken to get new email\n      try {\n        const res = await email.post('patch', {\n          body: { email: inputs.email },\n        });\n        console.log(res);\n        if (res.status < 400) {\n          toast(t`Check your email`);\n        } else {\n          console.log(res.data[i18n.language]);\n          const message = {\n            text: res.data[i18n.language] ?? t`Server error`,\n          };\n\n          toast(message, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, t, i18n.language, toast]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) => {\n            setValid((prev) => ({ ...prev, email: isValid }));\n          },\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new email`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, formValid, handleInput, handleSubmit, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ChangeEmail;\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.41c95564.png\";","import { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useState, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { email, passwd, profile } from '../../axios';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport defaultAvatar from '../../images/defaultAvatar.png';\nimport { BackupRounded } from '@material-ui/icons';\nimport { RootState } from '../../store/rootReducer';\nimport { useSelector } from 'react-redux';\nimport { useToast } from '../../hooks/useToast';\nimport { getToken, saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  avatarWrapper: {\n    position: 'relative',\n    '&:hover': {\n      cursor: 'pointer',\n      '& $uploadIcon': {\n        opacity: 0.7,\n      },\n      '& $avatarImage': {\n        opacity: 0.5,\n      },\n    },\n  },\n  avatarImage: {\n    width: '100px',\n    height: '100px',\n    border: '2px solid rgba(3, 82, 99, 0.5)',\n    opacity: 1,\n    transition: '0.2s',\n  },\n  inputNone: {\n    display: 'none',\n  },\n  uploadIcon: {\n    position: 'absolute',\n    transition: '0.2s',\n    top: 20,\n    left: 20,\n    width: 60,\n    height: 60,\n    opacity: 0,\n    zIndex: 2,\n  },\n});\n\nconst Settings = () => {\n  const user = useSelector((state: RootState) => state.user);\n  const [inputs, setInputs] = useState({\n    email: user.email,\n    username: user.username,\n    firstName: user.firstName || '',\n    lastName: user.lastName || '',\n    newPassword: '',\n    currentPassword: '',\n    confirm: '',\n    avatarImage: user.imageBody,\n  });\n  const [valid, setValid] = useState({\n    email: true,\n    newPassword: true,\n    currentPassword: true,\n    confirm: true,\n    username: true,\n    firstName: true,\n    lastName: true,\n  });\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const validateForm = () => {\n    const {\n      email,\n      username,\n      currentPassword,\n      confirm,\n      firstName,\n      lastName,\n    } = valid;\n    return inputs.newPassword\n      ? currentPassword &&\n          confirm &&\n          (email || username || firstName || lastName)\n      : email || username || firstName || lastName;\n  };\n  const formValid = validateForm();\n\n  const validateUpload = (file: File) => {\n    return (\n      file.type === 'image/png' ||\n      file.type === 'image/jpg' ||\n      file.type === 'image/jpeg'\n    );\n  };\n\n  const uploadAvatar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) return;\n    let file = e.target.files[0];\n    if (!validateUpload(file)) {\n      e.target.value = '';\n      return toast({ text: 'Please add image only!' });\n    }\n    if (file.size > 2000000) {\n      e.target.value = '';\n      return toast({ text: 'Please upload picture size less then 2 mb!' });\n    }\n    let reader = new FileReader();\n    reader.onload = async function (e) {\n      if (!e.target || !e.target.result) return;\n      const image = e.target.result.toString();\n      setInputs({\n        ...inputs,\n        avatarImage: image,\n      });\n      const body = {\n        imageBody: image,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      // console.log(res.data);\n      if (res.status >= 400) toast({ text: t`Avatar upload error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              imageBody: image,\n            },\n          })\n        );\n        toast({ text: t`Avatar uploaded` });\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs((prevInputs) => ({\n        ...prevInputs,\n        [e.target.name]: e.target.value,\n      }));\n    };\n\n    const updateEmail = async () => {\n      const body = {\n        email: inputs.email,\n      };\n      const res = await email.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              email: inputs.email,\n            },\n          })\n        );\n        toast({ text: t`Check your email` });\n      }\n    };\n\n    const updateInfo = async () => {\n      const body = {\n        username: inputs.username,\n        firstName: inputs.firstName,\n        lastName: inputs.lastName,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              username: inputs.username,\n              firstName: inputs.firstName,\n              lastName: inputs.lastName,\n            },\n          })\n        );\n        toast({ text: t`User info updated` });\n      }\n    };\n\n    const updatePassword = async () => {\n      const body = {\n        passwd: inputs.currentPassword,\n        newPasswd: inputs.newPassword,\n      };\n      const res = await passwd.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        toast({ text: t`User info updated` });\n        setInputs({\n          ...inputs,\n          currentPassword: '',\n          confirm: '',\n          newPassword: '',\n        });\n      }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      if (inputs.email !== user.email) updateEmail();\n      if (\n        inputs.username !== user.username ||\n        inputs.firstName !== user.firstName ||\n        inputs.lastName !== user.lastName\n      )\n        updateInfo();\n      if (inputs.newPassword) updatePassword();\n      console.log('[Settings] handleSubmit', inputs);\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 0,\n              maxLength: 40,\n              regex: /^(([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,}))?$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w.+-]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'firstName',\n          type: 'text',\n          label: t('First Name'),\n          placeholder: t('Enter first name'),\n          value: inputs.firstName,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('firstNameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w.+-]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'lastName',\n          type: 'text',\n          label: t('Last Name'),\n          placeholder: t('Enter last name'),\n          value: inputs.lastName,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('lastNameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w.+-]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'newPassword',\n          type: 'password',\n          label: t('New password'),\n          placeholder: t('Enter new password'),\n          value: inputs.newPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: /^((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.newPassword}$`),\n            },\n          },\n        },\n        {\n          name: 'currentPassword',\n          type: 'password',\n          label: t('Current password'),\n          placeholder: t('Enter current password'),\n          value: inputs.currentPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('currentPasswordError'),\n            rule: {\n              minLength: inputs.newPassword.length ? 1 : 0,\n              maxLength: 25,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Save'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: () => history.goBack(),\n          text: t`Back`,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, dispatch, i18n.language, toast, user, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Typography>{t('Settings').toUpperCase()}</Typography>\n      <div\n        className={classes.avatarWrapper}\n        onClick={() => {\n          if (inputRef && inputRef.current) {\n            inputRef.current.click();\n          }\n        }}\n      >\n        <Avatar\n          className={classes.avatarImage}\n          alt=\"profile image\"\n          src={inputs.avatarImage || defaultAvatar}\n        />\n        <BackupRounded className={classes.uploadIcon} />\n        <input\n          className={classes.inputNone}\n          type=\"file\"\n          accept=\"image/png, image/jpeg, image/jpg\"\n          ref={inputRef}\n          onChange={uploadAvatar}\n        />\n      </div>\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Settings;\n","import { Container } from '@material-ui/core';\nimport { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport Cards from '../../components/Cards/Cards';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport CardLoader from '../../components/MovieCard/CardLoader/CardLoader';\nimport { useToast } from '../../hooks/useToast';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { resetError } from '../../store/features/MoviesSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { notEmpty } from '../../utils';\nimport { gCancelToken } from '../../index';\n\nconst SearchPage = () => {\n  const { movies, search, loading, error } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const history = useHistory();\n  const { toast } = useToast();\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  if (!loading && movies.length === 0) history.push('/');\n  if (error) {\n    history.push('/');\n    toast({ text: t(error) }, 'error');\n    dispatch(resetError());\n  }\n\n  useEffect(() => {\n    console.log('[SearchPage] Initial load', new Date().getTime());\n    return () => {\n      console.log('[SearchPage] Cancelling request', new Date().getTime());\n      if (loading && gCancelToken.source) gCancelToken.source.cancel();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const displayedMovies: ITranslatedMovie[] = search\n    .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n    .filter(notEmpty);\n\n  const cards = loading ? (\n    <CardLoader display=\"lines\" />\n  ) : (\n    <Cards movies={displayedMovies} />\n  );\n\n  return (\n    <Container>\n      <FilterSortPanel />\n      {cards}\n    </Container>\n  );\n};\n\nexport default SearchPage;\n","import React, { useEffect } from 'react';\nimport { Container, makeStyles } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { theme } from './theme';\nimport { useSelector } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { getSearchParam } from './utils';\nimport { useAppDispatch } from './store/store';\nimport { RootState } from './store/rootReducer';\nimport { getSelfInfo, getToken } from './store/features/UserSlice';\nimport { useToast } from './hooks/useToast';\n\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport MainPage from './pages/MainPage/MainPage';\nimport RegisterPage from './pages/RegisterPage/RegisterPage';\n\nimport Auth from './components/Auth/Auth';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport MovieFullInfo from './components/MovieFullInfo/MovieFullInfo';\nimport SnackMessage from './components/Notifier/SnackMessage/SnackMessage';\nimport Notifier from './components/Notifier/Notifier';\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ResetPassword from './components/ResetPassword/ResetPassword';\nimport ChangeEmail from './components/ChangeEmail/ChangeEmail';\nimport Settings from './components/Settings/Settings';\nimport SearchPage from './pages/SearchPage/SearchPage';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: '100%',\n    minWidth: 500,\n    margin: 0,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n    },\n  },\n  Wrapper: {\n    maxWidth: 840,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n      margin: 0,\n    },\n  },\n  Slider: {\n    height: 400,\n    minHeight: 300,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { toast } = useToast();\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    const urlParams = getSearchParam();\n    console.log(urlParams);\n    if (urlParams?.error) {\n      const lang = i18n.language as 'en' | 'ru';\n      toast({ text: urlParams.error[lang] as string }, 'error');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const token = getToken();\n    if (token) {\n      dispatch(getSelfInfo());\n    }\n  }, [dispatch]);\n\n  const routes = isAuth ? (\n    <Switch>\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/change_email\" component={ChangeEmail} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route path=\"/genres/:id\" component={MainPage} />\n      <Route path=\"/byname/:id\" component={MainPage} />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  ) : (\n    <Switch>\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/register\" component={RegisterPage} />\n      <Route path=\"/login\" component={LoginPage} />\n      <Route path=\"/reset_password\" component={ResetPassword} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route path=\"/genres/:id\" component={MainPage} />\n      <Route path=\"/byname/:id\" component={MainPage} />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  );\n\n  return (\n    <Container className={classes.root}>\n      <Container className={classes.Wrapper}>\n        <SnackbarProvider\n          maxSnack={3}\n          classes={{ containerRoot: classes.root }}\n          content={(key: string) => <SnackMessage id={key} />}\n        >\n          <Header />\n          {routes}\n          <Footer />\n          <Notifier />\n        </SnackbarProvider>\n      </Container>\n    </Container>\n  );\n}\n\nexport default App;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport axios, { CancelTokenSource } from 'axios';\nimport { gCancelToken } from '../..';\nimport { movies, search as axiosSearch } from '../../axios';\nimport { IComment, ITranslatedMovie } from '../../models/MovieInfo';\nimport { AppDispatch } from '../store';\nimport { CountriesKeys, GenresKeys } from './FilterSlice';\nimport { getToken } from './UserSlice';\n\nexport interface MoviesItems {\n  search?: ITranslatedMovie[];\n  popular?: ITranslatedMovie[];\n  byName?: ITranslatedMovie[];\n}\n\nexport type MovieItemsKeys = keyof MoviesItems;\nexport interface CommentsItems {\n  comments: IComment[];\n  id?: string;\n}\nexport interface ErrorItem {\n  error: string;\n}\n\nexport interface UpdateMoviesItem {\n  id: string;\n  views?: number;\n  isViewed?: boolean;\n}\n\nexport interface CancelTokenItem {\n  source: CancelTokenSource | null;\n}\n\nexport interface MoviesState {\n  loading: boolean;\n  error: string | null;\n  movies: ITranslatedMovie[];\n  search: string[];\n  popular: string[];\n  byName: string[];\n  isEndOfMovies: boolean;\n  // cancelToken: CancelTokenSource | null;\n}\n\nexport interface IMoviesResponse {\n  data: ITranslatedMovie[] | null;\n  error?: string;\n  status: boolean;\n}\n\nexport interface IFilter {\n  limit?: number;\n  offset?: number;\n  letter?: string;\n  search?: string;\n  genres?: GenresKeys[];\n  genre?: string;\n  years?: [] | number[][];\n  countries?: CountriesKeys[];\n  id?: string | number;\n}\ninterface ILoaderInfo {\n  activePeers: number;\n  loadedPercent: number;\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  movies: [],\n  search: [],\n  popular: [],\n  byName: [],\n  isEndOfMovies: false,\n  cancelToken: null,\n} as MoviesState;\n\nconst MoviesSlice = createSlice({\n  name: 'movies',\n  initialState,\n  reducers: {\n    addMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const add = (type: MovieItemsKeys) => {\n        console.log(\n          '[loadMovies] payload, moviesLength',\n          payload,\n          state.movies.length\n        );\n        if (!payload[type] || !payload[type]?.length) return;\n        if (state.movies.length) {\n          const newMovies = payload[type]?.filter(\n            (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n          );\n          console.log('[loadMovies] newMovies', newMovies);\n          if (newMovies?.length) {\n            state.movies = state.movies.concat(newMovies);\n          }\n          // set unique movie ids\n          const set = new Set(\n            state[type].concat((payload[type] || []).map((el) => el.en.id))\n          );\n          state[type] = Array.from(set);\n        } else {\n          const arr = payload[type] || [];\n          state.movies = arr;\n          state[type] = arr.map((el) => el.en.id);\n        }\n      };\n\n      state.loading = false;\n      if (payload.search) {\n        add('search');\n      } else if (payload.byName) {\n        add('byName');\n      } else if (payload.popular) {\n        add('popular');\n      } else {\n        throw new Error('[movies:addMovies] no movies in payload');\n      }\n    },\n    setMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const set = (type: MovieItemsKeys) => {\n        if (!payload[type]) return;\n        // state[type] = payload[type] || [];\n        const newMovies = payload[type]?.filter(\n          (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n        );\n        if (newMovies) {\n          state.movies = state.movies.concat(newMovies);\n          state[type] = payload[type]?.map((el) => el.en.id) || [];\n        }\n      };\n      state.loading = false;\n      if (payload.search) {\n        set('search');\n      } else if (payload.byName) {\n        set('byName');\n      } else if (payload.popular) {\n        set('popular');\n      } else {\n        throw new Error('[movies:setMovies] no movies in payload');\n      }\n    },\n    updateMovie(state, { payload }: PayloadAction<UpdateMoviesItem>) {\n      const { id, views, isViewed } = payload;\n      const movie = state.movies.find((movie) => movie.en.id === id);\n      if (movie && views) movie.en.info.views = views;\n      if (movie && isViewed) movie.en.isViewed = isViewed;\n    },\n    updateComments(state, { payload }: PayloadAction<CommentsItems>) {\n      state.loading = false;\n      if (!payload.id)\n        throw new Error('[movies:updateComments] no id in payload');\n      if (!payload.comments)\n        throw new Error('[movies:updateComments] no comments in payload');\n      const movie = state.movies.find((movie) => movie.en.id === payload.id);\n      if (!movie) throw new Error('[movies:updateComments] no movie found');\n      const newComments = payload.comments.filter((comment) => {\n        return movie.en.info.comments\n          ? !movie.en.info.comments.find(\n              (el) => el.commentid === comment.commentid\n            )\n          : true;\n      });\n      console.log(\n        '[updateComments] newComments',\n        newComments,\n        payload.comments\n      );\n      movie.en.info.comments = movie.en.info.comments\n        ? [...movie.en.info.comments, ...newComments]\n        : [...newComments];\n    },\n    setEndOfMovies(state) {\n      state.isEndOfMovies = true;\n    },\n    resetEndOfMovies(state) {\n      state.isEndOfMovies = false;\n    },\n    setError(state, { payload }: PayloadAction<ErrorItem>) {\n      state.error = payload.error;\n      state.loading = false;\n    },\n    resetError(state) {\n      state.error = null;\n      state.loading = false;\n    },\n    startLoading(state) {\n      state.loading = true;\n    },\n    stopLoading(state) {\n      state.loading = false;\n    },\n  },\n});\n\nconst loadMoviesAsync = async (\n  params?: IFilter,\n  source?: CancelTokenSource\n): Promise<IMoviesResponse | null> => {\n  console.log('[loadMoviesAsync] params', params);\n  let res = null;\n  if (params?.search)\n    res = await axiosSearch('find', {\n      cancelToken: source?.token,\n      params: {\n        category: 'All',\n        search: params?.search,\n      },\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n  else if (params?.letter)\n    res = await movies(`byname`, {\n      cancelToken: source?.token,\n      params,\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n  else if (params?.genre)\n    res = await movies(`bygenre`, {\n      cancelToken: source?.token,\n      params,\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n  else\n    res = await movies('movies', {\n      cancelToken: source?.token,\n      params,\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n\n  // console.log(res.data);\n  if (res.status === 404) return { data: [], status: false };\n  else if (res.status >= 400) return null;\n  else return res.data;\n};\n\nexport const loadMovies = ({\n  filter = {\n    limit: 20,\n    offset: 0,\n  },\n  callback,\n  source,\n}: {\n  filter?: IFilter;\n  callback?: (arg0: boolean) => void;\n  source?: CancelTokenSource;\n}) => async (dispatch: AppDispatch) => {\n  console.log('[loadMovies] start loading', new Date().getTime());\n  dispatch(startLoading());\n  const limit = filter.limit || 20;\n  console.log('[loadMovies] filter', filter);\n  let movies;\n  console.log('[loadMovies] res', movies);\n\n  try {\n    movies = await loadMoviesAsync(filter, source);\n  } catch (e) {\n    if (axios.isCancel(e)) {\n      console.log('[loadMovies] request is cancelled', new Date().getTime());\n      dispatch(stopLoading());\n      gCancelToken.source = null;\n      return;\n    }\n    console.log(e);\n    return null;\n  }\n\n  if (movies && !movies.status && movies.data?.length === 0) {\n    // 404\n    dispatch(stopLoading());\n    dispatch(setError({ error: `Cannot find movies` }));\n    return null;\n  } else if (movies?.status && movies.data) {\n    // any succedeed respose\n    if (movies.data.length < limit) dispatch(setEndOfMovies());\n    const removedNulls = movies.data?.map((el) =>\n      !el.ru ? { en: el.en, ru: el.en } : el\n    );\n    console.log('[loadMovies] removedNulls:', removedNulls);\n    if (filter.letter) {\n      dispatch(addMovies({ byName: removedNulls }));\n    } else if (filter.search || filter.genre) {\n      filter.offset && filter.offset > 0\n        ? dispatch(addMovies({ search: removedNulls }))\n        : dispatch(setMovies({ search: removedNulls }));\n    } else {\n      dispatch(addMovies({ popular: removedNulls }));\n    }\n    if (callback) {\n      callback(movies && movies.data ? movies.data.length < limit : true);\n    }\n    return removedNulls;\n  } else {\n    // all failed responses\n    dispatch(stopLoading());\n    dispatch(setError({ error: 'Loading error' }));\n    return null;\n  }\n};\n\nexport const loadActivePeers = async (\n  id: string\n): Promise<ILoaderInfo | null> => {\n  let data = null;\n  try {\n    const res = await axios(`/api/loader/stats/${id}`);\n    if (res.status < 400 && res.data.status) {\n      data = res.data.data as ILoaderInfo;\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  return data;\n};\n\nexport const loadMovie = (id: string) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const movie = await loadMoviesAsync({ id });\n  console.log('loadMovie', movie);\n  if (movie && !movie.status && movie.data?.length === 0) {\n    // 404\n    dispatch(setError({ error: `Cannot load movie` }));\n  } else if (movie?.status && movie.data) {\n    // any succedeed respose\n    dispatch(addMovies({ search: movie.data }));\n  } else {\n    // all failed responses\n    dispatch(setError({ error: 'Loading error' }));\n  }\n};\n\nexport const updateViews = (movieId: string) => async (\n  dispatch: AppDispatch\n) => {\n  const res = await axios.patch(\n    '/api/movies/views',\n    { movieId },\n    {\n      headers: {\n        accessToken: getToken(),\n      },\n    }\n  );\n  console.log(res.data);\n  if (res.data.status) {\n    dispatch(updateMovie({ id: movieId, views: +res.data.data[0].views }));\n  }\n};\n\n/**\n * loads comments\n * @param params object with values:\n *    @param movieId movieId to find it in redux\n *    @param limit number of comments to fetch, default 5\n *    @param offset comments offset, default 0\n * @param callback fires when end of comments is reached\n */\nexport const loadComments = (\n  {\n    movieId,\n    limit = 5,\n    offset = 0,\n  }: { movieId: string; limit?: number; offset?: number },\n  callback?: (length: number) => void\n) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const res = await movies('comments', {\n    params: {\n      movieId,\n      limit,\n      offset,\n    },\n  });\n  console.log('loadComments', res.data);\n  if (res.data.status) {\n    const comments = res.data.data as IComment[];\n    comments.length && dispatch(updateComments({ comments, id: movieId }));\n    if (callback) callback(comments.length);\n  }\n};\n\nexport const {\n  addMovies,\n  setMovies,\n  updateMovie,\n  updateComments,\n  setEndOfMovies,\n  resetEndOfMovies,\n  setError,\n  resetError,\n  startLoading,\n  stopLoading,\n} = MoviesSlice.actions;\n\nexport default MoviesSlice.reducer;\n","import axios from 'axios';\nexport const CancelToken = axios.CancelToken;\n\nexport const auth = axios.create({\n  baseURL: `/api/auth/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const profile = axios.create({\n  baseURL: `/api/profile/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const passwd = axios.create({\n  baseURL: `/api/passwd/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const email = axios.create({\n  baseURL: `/api/email/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const search = axios.create({\n  baseURL: `/api/search/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const movies = axios.create({\n  baseURL: `/api/movies/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const test = axios.create({\n  baseURL: `/api/test/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const main = axios.create({\n  baseURL: `/api/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\n// GET /api/info\n\n// GET /api/auth/basic\n// GET /api/auth/oauth42\n\n// GET /api/profile/get (в зависимости от того есть ли параметр user_id  в урле или нет возвращает твоего или чужого юзера)\n// PUT /api/profile/create\n// PATCH /api/profile/patch\n// DELETE /api/profile/delete\n\n// PATCH /api/email/patch\n// POST /api/email/confirm\n// POST /api/email/resend\n\n// PATCH /api/passwd/patch\n// POST /api/passwd/repair\n","import { createMuiTheme } from '@material-ui/core';\n\nexport const primaryColor = {\n  light: '#05829E',\n  main: '#035263',\n  dark: '#02313B',\n  contrastText: '#fff',\n};\nexport const secondaryColor = {\n  light: '#F19941',\n  main: '#EE851B',\n  dark: '#D17010',\n  contrastText: '#fff',\n  contrastTextLighter: '#333',\n};\nexport const backgroundColor = {\n  light: '#FFFFFF',\n  default: '#FAFAFA',\n  dark: '#DDDDDD',\n  contrastText: '#121212',\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    background: backgroundColor,\n  },\n  typography: {\n    fontFamily: [\n      '\"Quicksand\"',\n      '\"Helvetica Neue\"',\n      'Roboto',\n      'Arial',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n  props: {\n    MuiButton: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n  },\n});\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../rootReducer';\nimport { AppDispatch } from '../store';\nimport { IFilter, loadMovies } from './MoviesSlice';\n\nexport interface IGenres {\n  Action: boolean;\n  Adventure: boolean;\n  Animation: boolean;\n  Biography: boolean;\n  Comedy: boolean;\n  Crime: boolean;\n  Documentary: boolean;\n  Drama: boolean;\n  Family: boolean;\n  Fantasy: boolean;\n  'Film Noir': boolean;\n  History: boolean;\n  Horror: boolean;\n  Music: boolean;\n  Mystery: boolean;\n  Romance: boolean;\n  'Sci-Fi': boolean;\n  Short: boolean;\n  Sport: boolean;\n  Superhero: boolean;\n  Thriller: boolean;\n  War: boolean;\n  Western: boolean;\n}\nexport type GenresKeys = keyof IGenres;\nexport interface IYears {\n  'before 1980': boolean;\n  '1980-1990': boolean;\n  '1990-2000': boolean;\n  '2000-2010': boolean;\n  '2010-2020': boolean;\n}\nexport type YearsKeys = keyof IYears;\nexport interface ICountries {\n  Australia: boolean;\n  Canada: boolean;\n  France: boolean;\n  Germany: boolean;\n  'Great Britain': boolean;\n  India: boolean;\n  Japan: boolean;\n  Russia: boolean;\n  Spain: boolean;\n  USA: boolean;\n  USSR: boolean;\n  other: boolean;\n}\nexport type CountriesKeys = keyof ICountries;\n\nexport const items = {\n  genres: [\n    'Action',\n    'Adventure',\n    'Animation',\n    'Biography',\n    'Comedy',\n    'Crime',\n    'Documentary',\n    'Drama',\n    'Family',\n    'Fantasy',\n    'Film Noir',\n    'History',\n    'Horror',\n    'Music',\n    'Mystery',\n    'Romance',\n    'Sci-Fi',\n    'Short',\n    'Sport',\n    'Superhero',\n    'Thriller',\n    'War',\n    'Western',\n  ] as GenresKeys[],\n  years: [\n    'before 1980',\n    '1980-1990',\n    '1990-2000',\n    '2000-2010',\n    '2010-2020',\n  ] as YearsKeys[],\n  countries: [\n    'Australia',\n    'Canada',\n    'France',\n    'Germany',\n    'Great Britain',\n    'India',\n    'Japan',\n    'Russia',\n    'Spain',\n    'USA',\n    'USSR',\n    'other',\n  ] as CountriesKeys[],\n  // additional: ['subtitles', 'HD', 'Multi-audio'],\n};\n\nexport interface GenresItem {\n  category: 'genres';\n  name: GenresKeys;\n  value: boolean;\n}\n\nexport interface YearsItem {\n  category: 'years';\n  name: YearsKeys;\n  value: boolean;\n}\n\nexport interface CountriesItem {\n  category: 'countries';\n  name: CountriesKeys;\n  value: boolean;\n}\n\nexport interface SetFilterPayload {\n  filter: GenresItem | YearsItem | CountriesItem;\n}\n\nexport interface FilterState {\n  genres: IGenres;\n  years: IYears;\n  countries: ICountries;\n}\nexport type FilterStateKeys = keyof FilterState;\n\nconst initialState = {\n  genres: {\n    Action: false,\n    Adventure: false,\n    Animation: false,\n    Biography: false,\n    Comedy: false,\n    Crime: false,\n    Documentary: false,\n    Drama: false,\n    Family: false,\n    Fantasy: false,\n    'Film Noir': false,\n    History: false,\n    Horror: false,\n    Music: false,\n    Mystery: false,\n    Romance: false,\n    'Sci-Fi': false,\n    Short: false,\n    Sport: false,\n    Superhero: false,\n    Thriller: false,\n    War: false,\n    Western: false,\n  },\n  years: {\n    'before 1980': false,\n    '1980-1990': false,\n    '1990-2000': false,\n    '2000-2010': false,\n    '2010-2020': false,\n  },\n  countries: {\n    Australia: false,\n    Canada: false,\n    France: false,\n    Germany: false,\n    'Great Britain': false,\n    India: false,\n    Japan: false,\n    Russia: false,\n    Spain: false,\n    USA: false,\n    USSR: false,\n    other: false,\n  },\n  // additional: { subtitles: false, HD: false, 'Multi-audio': false },\n};\n\nconst filterSlice = createSlice({\n  name: 'filter',\n  initialState,\n  reducers: {\n    setFilterState(state, { payload }: PayloadAction<SetFilterPayload>) {\n      const { category, name, value } = payload.filter;\n      return {\n        ...state,\n        [category]: {\n          ...state[category],\n          [name]: value,\n        },\n      };\n    },\n    resetFilterState() {\n      return initialState;\n    },\n  },\n});\n// category: 'genres' | 'years' | 'countries',\n\nconst isCountriesKey = (value: string): value is CountriesKeys => {\n  const allowedKeys: string[] = items.countries.filter((el) => el !== 'other');\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isGenresKey = (value: string): value is GenresKeys => {\n  const allowedKeys: string[] = items.genres;\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isYearsKey = (value: string): value is YearsKeys => {\n  const allowedKeys: string[] = items.years;\n  return allowedKeys.indexOf(value) !== -1;\n};\n\nexport const isCountiesStateEmpty = (state: ICountries) => {\n  for (let country in state) {\n    if (isCountriesKey(country) && state[country]) return false;\n  }\n  return true;\n};\nexport const isYearsStateEmpty = (state: IYears) => {\n  for (let year in state) {\n    if (isYearsKey(year) && state[year]) return false;\n  }\n  return true;\n};\nexport const isGenresStateEmpty = (state: IGenres) => {\n  for (let genre in state) {\n    if (isGenresKey(genre) && state[genre]) return false;\n  }\n  return true;\n};\n\nconst getYearsFilter = (years: IYears): number[][] | [] => {\n  const yearsArray = items.years.filter(\n    (value) => years[value] && [value, years[value]]\n  );\n\n  const result: number[][] = [];\n  yearsArray.forEach((year) => {\n    if (year.startsWith('before')) {\n      result.push([0, 1980]);\n    } else if (\n      result.length > 0 &&\n      year.match(`${result[result.length - 1][1]}`)\n    ) {\n      // if last value in result contains one of current years\n      // (actually, if it's true - should find the first one)\n      // then we replace that year with the second one\n      const arr = year.split('-');\n      result[result.length - 1][1] = +arr[1];\n    } else {\n      const arr = year.split('-');\n      result.push([+arr[0], +arr[1]]);\n    }\n  });\n  console.log(result);\n  return result;\n};\n\n/**\n * Requests movies, based on filterState.\n * Empty or object with fields required.\n * @param param0 object with _limit and _start fields\n */\nexport const reqeuestMoviesWithFilters = (\n  filter: IFilter = {\n    limit: 20,\n    offset: 0,\n  }\n) => async (dispatch: AppDispatch, getState: () => RootState) => {\n  const filterState = getState().filter;\n  const genres = items.genres.filter(\n    (value) => filterState.genres[value] && [value, filterState.genres[value]]\n  );\n  const years = getYearsFilter(filterState.years);\n  const countries = items.countries.filter(\n    (value) =>\n      filterState.countries[value] && [value, filterState.countries[value]]\n  );\n  const filterParams = { ...filter, genres, years, countries };\n\n  console.log(filterParams);\n  dispatch(loadMovies({ filter: filterParams }));\n};\n\nexport const yearInRange = (year: number, years: IYears) => {\n  for (let entry of Object.entries(years)) {\n    if (!entry[1]) continue;\n    const rangeNumbers = entry[0].startsWith('before')\n      ? [0, +entry[0].split(' ')[1]]\n      : entry[0].split('-').map((x) => +x);\n    if (year >= rangeNumbers[0] && year < rangeNumbers[1]) return true;\n  }\n  return false;\n};\nexport const genreInGenres = (\n  movieGenres: GenresKeys[],\n  filterGenres: IGenres\n) => {\n  for (let genre of movieGenres) {\n    if (filterGenres[genre]) return true;\n  }\n  return false;\n};\nexport const countryInCountries = (\n  movieCountries: string[],\n  filterCountries: ICountries\n) => {\n  for (let country of movieCountries) {\n    return isCountriesKey(country)\n      ? filterCountries[country]\n      : filterCountries.other;\n  }\n  return false;\n};\n\nexport const { setFilterState, resetFilterState } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport languageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\n\ni18n\n  .use(Backend)\n  .use(languageDetector)\n  .use(initReactI18next)\n  .init({\n    lng: 'en',\n    fallbackLng: 'en',\n    backend: {\n      loadPath: `/locales/{{lng}}/{{ns}}.json`,\n    },\n    detection: ['queryString', 'cookie'],\n    cache: ['cookie'],\n    debug: false,\n    interpolation: {\n      escapeValue: false,\n    },\n  });\n\nexport default i18n;\n","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Container, CssBaseline, ThemeProvider } from '@material-ui/core';\nimport { theme } from './theme';\n\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport './i18n';\nimport { CancelTokenSource } from 'axios';\n\nif (process.env.NODE_ENV === 'production') {\n  console.log = () => {};\n  console.error = () => {};\n  console.warn = () => {};\n  console.info = () => {};\n  console.debug = () => {};\n}\nexport const LIMIT = +(process.env.REACT_APP_LOAD_LIMIT || 5);\nexport const gCancelToken: { source: CancelTokenSource | null } = {\n  source: null,\n};\n\nconst render = () => {\n  const App = require('./App').default;\n\n  ReactDOM.render(\n    // <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter>\n          <Suspense fallback={<Container>Loading...</Container>}>\n            <CssBaseline />\n            <App />\n          </Suspense>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>,\n    // </React.StrictMode>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render);\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface SortingItem {\n  sortBy: string | null;\n}\n\nexport interface UIState {\n  sortBy: string | null;\n  view: 'grid' | 'lines';\n}\n\nconst initialState = {\n  sortBy: null,\n  view: 'lines',\n} as UIState;\n\nconst UISlice = createSlice({\n  name: 'UI',\n  initialState,\n  reducers: {\n    setSortingBy(state, { payload }: PayloadAction<SortingItem>) {\n      state.sortBy = payload.sortBy;\n    },\n    changeView(state) {\n      state.view = state.view === 'grid' ? 'lines' : 'grid';\n    },\n  },\n});\n\nexport const { setSortingBy, changeView } = UISlice.actions;\n\nexport default UISlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type IVariant = 'default' | 'info' | 'warning' | 'success' | 'error';\nexport interface INotification {\n  key: string;\n  text: string;\n  variant: IVariant;\n  header?: string;\n  options?: any;\n  dismissed?: boolean;\n}\n\ninterface ISnackState {\n  notifications: INotification[];\n}\n\nconst initialState = {\n  notifications: [],\n} as ISnackState;\n\nconst snackSlice = createSlice({\n  name: 'snack',\n  initialState,\n  reducers: {\n    addSnack(state, { payload }: PayloadAction<INotification>) {\n      const hasSameMessageAndVariant = state.notifications.find(\n        (msg) => msg.text === payload.text && msg.variant === payload.variant\n      );\n      if (!hasSameMessageAndVariant) state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n"],"sourceRoot":""}
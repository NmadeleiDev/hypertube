{"version":3,"sources":["store/rootReducer.ts","store/store.ts","utils.ts","hooks/useToast.ts","components/Dropdown/Dropdown.tsx","components/Input/Input.tsx","components/Form/Form.tsx","components/OAuthButton/OAuthButton.tsx","components/Login/Login.tsx","pages/LoginPage/LoginPage.tsx","components/AlphabetNav/AlphabetNav.tsx","components/Rating/Rating.tsx","components/MovieCardMedium/MovieCardMedium.tsx","components/MovieCard/MovieCard.tsx","components/MovieCard/CardLoader/CardLoader.tsx","components/Cards/Cards.tsx","components/CardsSlider/CardsSlider.tsx","components/Filter/Filter.tsx","components/Sort/Sort.tsx","components/GridToLinesButton/GridToLinesButton.tsx","components/FilterSortPanel/FilterSortPanel.tsx","pages/MainPage/MainPage.tsx","components/Register/Register.tsx","pages/RegisterPage/RegisterPage.tsx","components/Auth/Auth.tsx","components/Footer/Footer.tsx","components/Search/Search.tsx","components/Internationalization/Internationalization.tsx","components/UserInfo/UserInfo.tsx","components/Logo/Logo.tsx","components/Header/Header.tsx","components/CategoryHeader/CategoryHeader.tsx","components/HorizontalGrid/HorizontalGrid.tsx","components/Comments/Comment/Comment.tsx","components/Comments/SendComment/SendComment.tsx","components/Comments/Comments.tsx","components/Player/PlayerControls.tsx","components/Player/Player.tsx","components/Player/NativePlayer.tsx","components/MovieFullInfo/MovieFullInfo.tsx","components/Notifier/SnackMessage/SnackMessage.tsx","components/Notifier/Notifier.tsx","components/ForgotPassword/ForgotPassword.tsx","components/ResetPassword/ResetPassword.tsx","components/ChangeEmail/ChangeEmail.tsx","images/defaultAvatar.png","components/Settings/Settings.tsx","App.tsx","store/features/MoviesSlice.ts","axios.ts","store/features/UserSlice.ts","theme.ts","store/features/FilterSlice.ts","i18n.ts","index.tsx","store/features/UISlice.ts","store/features/SnackSlice.ts"],"names":["rootReducer","combineReducers","UI","movies","filter","user","snack","store","configureStore","reducer","useAppDispatch","useDispatch","getSearchParam","search","searchString","window","location","params","decodeURI","replaceAll","slice","split","reduce","acc","cur","keyValue","JSON","parse","useToast","dispatch","toast","useCallback","message","variant","options","addSnack","key","uuid","text","header","autoHideDuration","useStyles","makeStyles","root","position","Paper","padding","Open","transform","Item","fontSize","margin","contextValue","onClose","handlersContext","createContext","Dropdown","heroText","icon","items","buttonProps","children","useState","open","setOpen","anchorEl","useRef","classes","handleClose","className","Button","style","ref","onClick","endIcon","Popover","current","anchorOrigin","vertical","horizontal","transformOrigin","Grid","container","direction","alignItems","map","name","e","handleButtonClick","Provider","value","ButtonListItem","justifyContent","Input","width","SmallSelector","minWidth","FormControl","display","flexDirection","RadioGroup","type","values","onValidate","onChange","rules","ignoreUntouched","rest","touched","setTouched","error","setError","errorText","setErrorText","React","useMemo","helperText","rule","useEffect","err","isRegexValid","regex","match","isFnValid","checkFn","length","minLength","maxLength","validate","TextField","id","onFocus","List","Buttons","Link","textDecoration","color","marginBottom","Form","inputs","buttons","cn","el","ListItem","to","others","OAuthButton","oauth","url","queryParams","facebook","vk","google","Icon42","height","src","alt","IconFacebook","viewBox","xmlns","fill","d","IconVk","cx","cy","r","fillRule","clipRule","IconGoogle","loading","setLoading","disabled","queryString","URLSearchParams","toString","href","aria-label","CircularProgress","Login","email","password","setInputs","valid","setValid","formValid","useContext","useTranslation","t","i18n","history","useHistory","handleInput","preventDefault","target","handleSubmit","a","console","log","authHeader","btoa","encodeURI","auth","headers","Authorization","res","data","accessToken","saveToken","getSelfInfo","push","language","handleForgot","formData","label","placeholder","size","fullWidth","required","isValid","prev","justify","LoginPage","Container","theme","createStyles","borderRadius","overflow","Scroller","flexWrap","overflowX","ShadowLeft","left","background","ShadowRight","right","palette","grey","flex","border","content","paddingTop","float","Active","borderColor","secondaryColor","main","AlphabetNav","useLocation","shadowLeft","shadowRight","shadow","setShadow","handleLinkClick","letter","currentTarget","innerText","currentLetter","pop","resetEndOfMovies","setMovies","byName","resetFilterState","loadMovies","limit","LIMIT","scrollHandler","throttle","stopPropagation","scrollLeft","scrollWidth","offsetWidth","onScroll","onWheel","scrollTo","top","deltaY","behavior","path","pathname","Typography","marginRight","Rating","movieId","imdbRating","ourRating","rating","setRating","isAuth","useSelector","state","handleRatingChange","newRating","patch","getToken","status","emptyIcon","Img","cursor","maxWidth","objectFit","opacity","PlayIconWrapper","backgroundColor","transition","PlayIcon","Info","Caption","Text","fontWeight","Description","maxHeight","flexGrow","Shadow","bottom","marginLeft","textTransform","primaryColor","light","MovieCardMedium","card","en","img","info","title","description","year","genres","item","Divider","Media","Name","MovieCard","movie","find","wrap","bg","ru","Card","backgroundSize","getCard","Header","marginTop","Math","floor","random","CardLoader","Skeleton","animation","Cards","sortBy","view","years","countries","isEndOfMovies","sortedCards","setSortedCards","gridRef","undefined","trackScrolling","element","callback1","callback2","delay","reserve","pageYOffset","innerHeight","offsetTop","offsetHeight","throttledDetectBottomLine","offset","then","setEndOfMovies","addEventListener","removeEventListener","cards","isYearsStateEmpty","yearInRange","isGenresStateEmpty","genreInGenres","isCountiesStateEmpty","countryInCountries","sort","cardA","cardB","localeCompare","sortByName","sortByYear","sortByRating","avalibility","sortByAvalibility","overflowY","Movie","CardsSlider","popular","minHeight","Actions","Filter","category","setCategory","filterState","handleShow","reqeuestMoviesWithFilters","handleFilterChange","setFilterState","checked","startIcon","TuneRounded","Dialog","aria-labelledby","paper","DialogTitle","DialogContent","ButtonGroup","xs","sm","FormControlLabel","control","Checkbox","getCheckboxes","DialogActions","Sort","setSortingBy","SortRounded","grow","GridToLinesButton","changeView","DashboardRounded","ViewAgendaRounded","FilterSortPanel","MainPage","route","displayedMovies","setDisplayedMovies","includes","forEach","Register","username","confirm","body","passwd","profile","put","saveUserState","RegExp","RegisterPage","Auth","document","cookie","startsWith","tokenStart","token","expires","Date","toUTCString","updatedCookie","encodeURIComponent","Object","keys","optionValue","setCookie","Footer","styles","breakpoints","down","BaseInput","Icon","paddingRight","up","Popper","Search","setSearch","setAnchorEl","handleSearch","Boolean","InputBase","inputProps","input","onKeyPress","SearchRounded","aria-describedby","placement","TransitionProps","Fade","timeout","languages","Internationalization","lang","setLang","nextLang","changeLanguage","Type","marginAuto","UserInfo","avatar","imageBody","Avatar","removeToken","authFail","_0","_1","_2","_3","_4","Logo","SvgIcon","PersonOutlineRounded","h3","CategoryHeader","gridList","HorizontalScroll","Image","GridItem","controls","HorizontalGrid","sources","index","h4","textAlign","Comment","substr","SendComment","userId","comment","setComment","sendForm","movieid","post","userid","time","getTime","updateComments","comments","onSubmit","multiline","ctrlKey","Comments","offsetRef","maxComments","loadComments","debounce","debouncedDetectBottomLine","commentid","controlsWrapper","zIndex","controlIcons","bottomIcons","volumeSlider","PlayerControls","withStyles","thumb","boxShadow","active","valueLabel","track","rail","Slider","forwardRef","props","IconButton","onRewind","FastRewind","onPlayPause","playing","Pause","onFastForward","FastForward","min","max","played","onSeek","onMouseDown","onSeekMouseDown","onChangeCommitted","onSeekMouseUp","onMuted","muted","VolumeOff","VolumeUp","volume","onVolumeChange","onVolumeSeekUp","onChangeDisplayFormat","elapsedTime","totalDuration","playbackRate","rate","onPlaybackRateChange","onToggleFullScreen","Fullscreen","playerWrapper","Error","format","seconds","isNaN","date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","padStart","Player","seeking","controlsVisible","setState","timeDisplayFormat","setTimeDisplayFormat","playerRef","playerContainerRef","controlsRef","timeoutId","currentTime","getCurrentTime","duration","getDuration","onMouseMove","visibility","clearTimeout","onProgress","setTimeout","onError","seekTo","_e","newValue","screenfull","isEnabled","toggle","useSyles","NativePlayer","videoRef","Poster","MainInfoText","Video","AdditionalInfo","MovieFullInfo","headerRef","loadMovie","resetError","scrollIntoView","backup","mapItems","join","views","pgRating","directorList","directors","cast","stars","photos","videos","default","prompt","success","warning","dark","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","notifications","classnames","CardActions","displayed","Notifier","enqueueSnackbar","dismissed","event","reason","onExited","_event","removeSnack","ForgotPassword","ResetPassword","searchParams","repairToken","ChangeEmail","avatarWrapper","avatarImage","inputNone","uploadIcon","Settings","newPassword","currentPassword","inputRef","validateForm","prevInputs","updateEmail","updateUsername","updatePassword","newPasswd","goBack","toUpperCase","click","defaultAvatar","BackupRounded","accept","files","file","validateUpload","reader","FileReader","onload","result","image","readAsDataURL","Wrapper","App","urlParams","routes","component","render","maxSnack","containerRoot","MoviesSlice","createSlice","initialState","reducers","addMovies","payload","add","newMovies","concat","set","Set","Array","from","arr","newComments","startLoading","stopLoading","loadMoviesAsync","axiosSearch","callback","removedNulls","actions","axios","CancelToken","create","baseURL","withCredentials","validateStatus","tokenKey","userSlice","isLoading","firstName","lastName","authSuccess","localStorage","setItem","removeItem","getItem","contrastText","contrastTextLighter","createMuiTheme","primary","secondary","typography","fontFamily","MuiButton","MuiTextField","Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Short","Sport","Superhero","Thriller","War","Western","Australia","Canada","France","Germany","India","Japan","Russia","Spain","USA","USSR","other","filterSlice","isCountriesKey","indexOf","country","genre","getYearsFilter","yearsArray","getState","filterParams","entries","entry","rangeNumbers","x","movieGenres","filterGenres","movieCountries","filterCountries","use","Backend","languageDetector","initReactI18next","init","lng","fallbackLng","backend","loadPath","detection","cache","debug","interpolation","escapeValue","process","REACT_APP_LOAD_LIMIT","require","ReactDOM","ThemeProvider","fallback","CssBaseline","getElementById","UISlice","snackSlice","msg","dismissSnack","notificaton","dismissAll"],"mappings":"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","file":"static/js/main.e318b402.chunk.js","sourcesContent":["import { combineReducers } from '@reduxjs/toolkit';\nimport UI from './features/UISlice';\nimport movies from './features/MoviesSlice';\nimport filter from './features/FilterSlice';\nimport user from './features/UserSlice';\nimport snack from './features/SnackSlice';\n\nconst rootReducer = combineReducers({ UI, movies, filter, user, snack });\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { useDispatch } from 'react-redux';\n\nimport rootReducer from './rootReducer';\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default store;\n","import { debounce, throttle } from 'lodash';\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const throttledDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  throttle(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const debouncedDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  debounce(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\ninterface KnownOptions {\n  path?: string;\n  expires?: Date | string;\n}\ninterface IOptions extends KnownOptions {\n  [key: string]: string | Date | boolean | undefined;\n}\n\nexport const setCookie = (\n  name: string,\n  value: string,\n  options: IOptions = {}\n) => {\n  options = {\n    path: '/',\n    //       \n    ...options,\n  };\n\n  if (options.expires instanceof Date) {\n    options.expires = options.expires.toUTCString();\n  }\n\n  let updatedCookie =\n    encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\n  Object.keys(options).forEach((key) => {\n    updatedCookie += '; ' + key;\n    let optionValue = options[key];\n    if (optionValue !== true) {\n      updatedCookie += '=' + optionValue;\n    }\n  });\n  document.cookie = updatedCookie;\n};\n\nexport const getSearchParam = (search?: string) => {\n  const searchString = search || window.location.search;\n  const params = searchString ? decodeURI(searchString) : null;\n  return params\n    ? params\n        .replaceAll('%3A', ':')\n        .replaceAll('%2C', ',')\n        .replaceAll('+', ' ')\n        .slice(1)\n        .split('&')\n        .reduce((acc, cur) => {\n          const keyValue = cur.split('=');\n          acc[keyValue[0]] =\n            keyValue[0] === 'error' ? JSON.parse(keyValue[1]) : keyValue[1];\n          return acc;\n        }, {} as { [key: string]: any })\n    : null;\n};\n","import { addSnack, IVariant } from '../store/features/SnackSlice';\nimport { v4 as uuid } from 'uuid';\nimport { useAppDispatch } from '../store/store';\nimport { useCallback } from 'react';\n\ninterface IMessage {\n  text: string;\n  header?: string;\n}\n\nexport const useToast = () => {\n  const dispatch = useAppDispatch();\n\n  const toast = useCallback(\n    (message: IMessage, variant: IVariant = 'success', options = {}) => {\n      dispatch(\n        addSnack({\n          key: uuid(),\n          text: message.text,\n          header: message.header,\n          variant: variant || 'default',\n          options: {\n            ...options,\n            autoHideDuration: 3000,\n          },\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { toast };\n};\n","import {\n  Button,\n  ButtonProps,\n  Grid,\n  makeStyles,\n  Paper,\n  Popover,\n} from '@material-ui/core';\nimport React, { createContext, useRef, useState } from 'react';\n\nexport interface IItem {\n  text: string;\n  name: string;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\ninterface Props {\n  heroText?: string;\n  icon?: JSX.Element;\n  items?: IItem[];\n  buttonProps?: ButtonProps;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'relative',\n  },\n  Paper: {\n    padding: 20,\n  },\n  Open: {\n    transform: 'rotate(180deg)',\n  },\n  Item: {\n    fontSize: '1.0rem',\n    margin: 5,\n  },\n});\n\nconst contextValue = {\n  onClose: () => {},\n};\n\nexport const handlersContext = createContext(contextValue);\n\nconst Dropdown: React.FC<Props> = ({\n  heroText = null,\n  icon,\n  items,\n  buttonProps,\n  children,\n}) => {\n  const [open, setOpen] = useState(false);\n  const anchorEl = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n\n  const handleButtonClick = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    onClick: undefined | ((e: React.MouseEvent<HTMLButtonElement>) => void)\n  ) => {\n    onClick && onClick(e);\n    setOpen(false);\n  };\n\n  const handleClose = () => setOpen(false);\n  const contextValue = {\n    onClose: handleClose,\n  };\n\n  return (\n    <div className={classes.root}>\n      <Button\n        style={{ margin: '0 10px' }}\n        ref={anchorEl}\n        variant=\"text\"\n        onClick={() => setOpen((open) => !open)}\n        endIcon={heroText && icon}\n        {...buttonProps}\n      >\n        {heroText || icon}\n      </Button>\n      <Popover\n        open={open}\n        anchorEl={anchorEl.current}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        onClose={handleClose}\n      >\n        <Paper className={classes.Paper}>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {items &&\n              items.map(({ text, name, onClick }: IItem) => (\n                <Button\n                  key={text}\n                  variant=\"text\"\n                  name={name}\n                  className={classes.Item}\n                  onClick={(e) => handleButtonClick(e, onClick)}\n                >\n                  {text}\n                </Button>\n              ))}\n            <handlersContext.Provider value={contextValue}>\n              {children}\n            </handlersContext.Provider>\n          </Grid>\n        </Paper>\n      </Popover>\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import React, { useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  TextField,\n  // MenuItem,\n  // Box,\n  // Slider,\n  // Typography,\n  // Grid,\n  // FormControl,\n  // FormLabel,\n  // RadioGroup,\n  // FormControlLabel,\n  // Radio,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: 'center',\n  },\n  Input: {\n    width: '100%',\n  },\n  SmallSelector: {\n    minWidth: '100px',\n    padding: '10px',\n  },\n  FormControl: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n  },\n  RadioGroup: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n  },\n});\n\nexport interface IRule {\n  minLength: number;\n  maxLength: number;\n  regex?: RegExp;\n  checkFn?: () => boolean;\n}\n\nexport interface IInputProps {\n  name: string;\n  type?: 'text' | 'email' | 'password';\n  label?: string;\n  value: string;\n  size?: 'medium' | 'small';\n  fullWidth?: boolean;\n  required?: boolean;\n  values?: string[];\n  placeholder?: string;\n  ignoreUntouched?: boolean;\n  onValidate?: (arg0: boolean) => {};\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {};\n  className: string;\n  rules?: {\n    helperText: string;\n    rule: IRule;\n  };\n}\n\n// const getDate = (timestamp: number): string => {\n//   const now = new Date();\n//   const date =\n//     timestamp > now.getTime() + 1000 * 60 * 60 * 24 ? now : new Date(timestamp);\n//   const year = date.getFullYear();\n//   let yearStr = '';\n//   if (year < 10) yearStr = '000' + year;\n//   else if (year < 100) yearStr = '00' + year;\n//   else if (year < 1000) yearStr = '0' + year;\n//   const month = date.getMonth() + 1;\n//   const monthStr = month < 10 ? '0' + month : '' + month;\n//   const day = date.getDate();\n//   const dayStr = day < 10 ? '0' + day : '' + day;\n//   const formattedDate = `${yearStr}-${monthStr}-${dayStr}`;\n//   return formattedDate;\n// };\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {IRule} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value: string, rule: IRule, touched: boolean): boolean => {\n  const isRegexValid = rule.regex ? !!value.match(rule.regex) : true;\n  const isFnValid = rule.checkFn ? rule.checkFn() : true;\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        isRegexValid &&\n        isFnValid\n    : true;\n};\n\nconst Input = ({\n  type = 'text',\n  name,\n  values,\n  value,\n  onValidate,\n  onChange,\n  className,\n  rules,\n  ignoreUntouched,\n  ...rest\n}: IInputProps) => {\n  const classes = useStyles();\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState('');\n\n  const { helperText, rule } = React.useMemo(\n    () => (rules ? { ...rules } : { ...{ helperText: '', rule: null } }),\n    [rules]\n  );\n\n  useEffect(() => {\n    let err;\n    // check *touched* only if *ignoreUntouched* is false\n    err = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    err ? setErrorText(helperText) : setErrorText('');\n    // update inputValid state in Redux\n    onValidate &&\n      onValidate((ignoreUntouched || touched || !!value.length) && !err);\n    if (error !== err) setError(err);\n  }, [value, touched, rule, helperText, onValidate, ignoreUntouched, error]);\n\n  switch (type) {\n    // case 'number':\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => onChange(e)}\n          {...rest}\n        />\n      );\n    /*\n    case 'select':\n      return (\n        <TextField\n          id={name}\n          key={name}\n          label={label}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onChange={(e) => onChange(e)}\n          select\n          {...rest}\n        >\n          {values.map((e) => (\n            <MenuItem key={e} value={e}>\n              {e}\n            </MenuItem>\n          ))}\n        </TextField>\n      );\n    case 'radio':\n      return (\n        <FormControl\n          className={classes.FormControl}\n          key={name}\n          component=\"fieldset\"\n        >\n          <FormLabel component=\"legend\">{capitalize(label)}</FormLabel>\n          <RadioGroup\n            className={classes.RadioGroup}\n            value={value}\n            aria-label={name}\n            name={name}\n            onChange={(e) => onChange(e)}\n          >\n            {values.map((el) => (\n              <FormControlLabel\n                key={el}\n                value={el}\n                control={<Radio checked={value === el} color=\"primary\" />}\n                label={capitalize(el)}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      );\n    case 'date':\n      return (\n        <TextField\n          id={name}\n          type=\"date\"\n          label=\"Birth Date\"\n          name={name}\n          className={classes.Input}\n          InputLabelProps={{ shrink: true }}\n          value={getDate(value)}\n          onChange={(e) => onChange(e)}\n          {...rest}\n        />\n      );\n    case 'slider':\n      return (\n        <Box className={classes.Input}>\n          <Typography id=\"range-slider\" gutterBottom>\n            {label}\n          </Typography>\n          <Slider\n            value={value}\n            onChange={(e, value) => onChange(value)}\n            valueLabelDisplay=\"auto\"\n            aria-labelledby=\"range-slider\"\n            {...rest}\n          />\n        </Box>\n      );\n    case 'doubleSelector':\n      return (\n        <Box key={name} className={classes.Input}>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'min' + name}\n                type=\"number\"\n                value={value.minAge}\n                label=\"Minimum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ minAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'max' + name}\n                type=\"number\"\n                value={value.maxAge}\n                label=\"Maximum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ maxAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      );\n    case 'autocomplete':\n      return (\n        <TagInput\n          name={name}\n          className={classes.Input}\n          tags={values}\n          onChange={onChange}\n          {...rest}\n        />\n      );\n\n      */\n    default:\n      return null;\n  }\n};\n\nexport default Input;\n","import React from 'react';\nimport {\n  Button,\n  ButtonProps,\n  List,\n  ListItem,\n  makeStyles,\n} from '@material-ui/core';\nimport Input, { IInputProps } from '../Input/Input';\nimport cn from 'classnames';\nimport { NavLink } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  Button: {\n    width: '100%',\n  },\n  List: {\n    width: '100%',\n  },\n  Buttons: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Link: {\n    textDecoration: 'none',\n    color: 'inherit',\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n});\n\nexport interface IButtonProps extends ButtonProps {\n  text: string;\n  type?: 'submit';\n  to?: string;\n  disabled?: boolean;\n  variant?: 'contained' | 'outlined' | 'text';\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => {};\n}\n\nexport interface IFormProps {\n  inputs: IInputProps[];\n  buttons: IButtonProps[];\n  className?: string;\n}\n\nconst Form: React.FC<IFormProps> = ({\n  inputs,\n  buttons,\n  className,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <form className={cn(className, classes.root)}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} className={classes.margin} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ variant, type, text, onClick, to, ...others }) =>\n                to ? (\n                  <NavLink\n                    to={to}\n                    key={text}\n                    className={cn(classes.Link, classes.margin)}\n                  >\n                    <Button\n                      className={classes.Button}\n                      variant={variant}\n                      onClick={onClick}\n                      {...others}\n                    >\n                      {text}\n                    </Button>\n                  </NavLink>\n                ) : (\n                  <Button\n                    key={text}\n                    className={cn(classes.Button, classes.margin)}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n              // )\n            )}\n          </ListItem>\n        )}\n        {children}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import { Button, CircularProgress, makeStyles } from '@material-ui/core';\nimport React, { useMemo, useState } from 'react';\n\ninterface Props {\n  variant: '42' | 'facebook' | 'vk' | 'google';\n}\n\nconst useStyles = makeStyles({\n  OAuthButton: {\n    width: '6rem',\n  },\n});\n\nconst oauth = {\n  '42': {\n    url: 'https://api.intra.42.fr/oauth/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauth42',\n      },\n      {\n        name: 'scope',\n        value: 'public',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  facebook: {\n    url: 'https://www.facebook.com/v10.0/dialog/oauth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '737140593612593',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthFb',\n      },\n      {\n        name: 'scope',\n        value: 'email+public_profile',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  vk: {\n    url: 'https://oauth.vk.com/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '7781054',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthVk',\n      },\n      {\n        name: 'scope',\n        value: 'offline+photos',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  google: {\n    url: 'https://accounts.google.com/o/oauth2/v2/auth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/user/auth/oauthGoogle',\n      },\n      {\n        name: 'scope',\n        value: 'https://www.googleapis.com/auth/drive.metadata.readonly',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'token',\n      },\n    ],\n  },\n};\n\nconst Icon42: React.FC = () => (\n  <img\n    height=\"30\"\n    width=\"30\"\n    src=\"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg\"\n    alt=\"42 auth\"\n    style={{ filter: 'invert(1)' }}\n  />\n);\n\nconst IconFacebook: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 409 409\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill=\"#475993\"\n      d=\"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085\n\th147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882\n\tv-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955\n\tl-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087\n\tc-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085\n\tC408.786,24.662,384.124,0,353.701,0z\"\n    />\n  </svg>\n);\n\nconst IconVk: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 112 112\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g>\n      <circle\n        id=\"XMLID_11_\"\n        fill=\"#4D76A1\"\n        cx=\"56.098\"\n        cy=\"56.098\"\n        r=\"56.098\"\n      />\n      <path\n        fill=\"#FFFFFF\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878\n\t\tc0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235\n\t\tc2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463\n\t\tc-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069\n\t\tc0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297\n\t\tc-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514\n\t\tc-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644\n\t\tc1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446\n\t\tc-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069\n\t\tc0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993\n\t\tC44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z\"\n      />\n    </g>\n  </svg>\n);\n\nconst IconGoogle: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g fill=\"none\" fillRule=\"evenodd\">\n      <path\n        d=\"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z\"\n        fill=\"#4285f4\"\n      ></path>\n      <path\n        d=\"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z\"\n        fill=\"#34a853\"\n      ></path>\n      <path\n        d=\"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z\"\n        fill=\"#fbbc05\"\n      ></path>\n      <path\n        d=\"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z\"\n        fill=\"#ea4335\"\n      ></path>\n      <path d=\"M20 20h472v472H20V20z\"></path>\n    </g>\n  </svg>\n);\n\nconst OAuthButton: React.FC<Props> = ({ variant }) => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    setLoading(true);\n    const queryParams = oauth[variant].queryParams.reduce((acc: any, el) => {\n      acc[el.name] = el.value;\n      return acc;\n    }, {});\n    const queryString = new URLSearchParams(queryParams).toString();\n    const url = `${oauth[variant].url}?${queryString}`;\n    window.location.href = url;\n  };\n\n  const icon = useMemo(() => {\n    switch (variant) {\n      case '42':\n        return <Icon42 />;\n      case 'facebook':\n        return <IconFacebook />;\n      case 'vk':\n        return <IconVk />;\n      case 'google':\n        return <IconGoogle />;\n    }\n  }, [variant]);\n\n  return (\n    <Button\n      type=\"submit\"\n      disabled={loading}\n      onClick={handleClick}\n      className={classes.OAuthButton}\n      aria-label={`${variant} oauth`}\n    >\n      {loading ? <CircularProgress /> : icon}\n    </Button>\n  );\n};\n\nexport default OAuthButton;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { auth } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\n\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { handlersContext } from '../Dropdown/Dropdown';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport OAuthButton from '../OAuthButton/OAuthButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n  Link: {\n    textDecoration: 'none',\n  },\n});\n\nconst Login = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '', password: '' });\n  const [valid, setValid] = useState({ email: false, password: false });\n  const formValid = valid.email && valid.password;\n  const { onClose } = React.useContext(handlersContext);\n  const { t, i18n } = useTranslation();\n  const { toast } = useToast();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Login] handleSubmit', inputs);\n\n      const authHeader =\n        'Basic ' +\n        btoa(encodeURI(inputs.email) + ':' + encodeURI(inputs.password));\n      try {\n        const res = await auth('basic', {\n          headers: {\n            Authorization: authHeader,\n          },\n        });\n        if (res.data.accessToken) {\n          saveToken(res.data.accessToken);\n          dispatch(getSelfInfo());\n          history.push('/');\n        } else {\n          toast({ text: res.data[i18n.language] }, 'error');\n        }\n      } catch (e) {\n        console.log(e);\n        toast({ text: t`Server error` }, 'error');\n      }\n      onClose();\n    },\n    [inputs, toast, i18n.language, dispatch, history, onClose, t]\n  );\n\n  const handleForgot = useCallback(() => {\n    console.log('[Login] handleForgot');\n    history.push('forgot_password');\n    onClose();\n  }, [onClose, history]);\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid: boolean) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Login'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: handleForgot,\n          text: t('Forgot password?'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n          onClick: onClose,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, handleForgot, onClose, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData}>\n        <Grid container alignItems=\"center\" justify=\"space-evenly\">\n          <OAuthButton variant=\"42\" />\n          <OAuthButton variant=\"facebook\" />\n          <OAuthButton variant=\"vk\" />\n          <OAuthButton variant=\"google\" />\n        </Grid>\n      </Form>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Login from '../../components/Login/Login';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst LoginPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Login />\n    </Container>\n  );\n};\n\nexport default LoginPage;\n","import { Container, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { throttle } from 'lodash';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport { secondaryColor, theme } from '../../theme';\nimport { useAppDispatch } from '../../store/store';\nimport {\n  loadMovies,\n  resetEndOfMovies,\n  setMovies,\n} from '../../store/features/MoviesSlice';\nimport { LIMIT } from '../..';\nimport { resetFilterState } from '../../store/features/FilterSlice';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      position: 'relative',\n      borderRadius: 5,\n      overflow: 'hidden',\n    },\n    Scroller: {\n      display: 'inline-flex',\n      flexWrap: 'nowrap',\n      overflowX: 'scroll',\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    },\n    ShadowLeft: {\n      position: 'absolute',\n      height: '100%',\n      left: 0,\n      width: '50px',\n      background: 'linear-gradient(90deg, #00000033, transparent)',\n    },\n    ShadowRight: {\n      position: 'absolute',\n      height: '100%',\n      right: 0,\n      width: '50px',\n      background: 'linear-gradient(-90deg, #00000033, transparent)',\n    },\n    Link: {\n      color: theme.palette.grey[700],\n      fontSize: '1.5rem',\n      textDecoration: 'none',\n      flex: '1 0 50px',\n      margin: 10,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      border: '3px solid transparent',\n      borderRadius: '50%',\n      '&:before': {\n        content: \"''\",\n        paddingTop: '100%',\n        float: 'left',\n      },\n    },\n    Active: {\n      borderColor: secondaryColor.main,\n    },\n  })\n);\n\nconst AlphabetNav = () => {\n  const location = useLocation();\n  const classes = useStyles(theme);\n  const [shadow, setShadow] = useState({\n    shadowLeft: false,\n    shadowRight: true,\n  });\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const dispatch = useAppDispatch();\n\n  const handleLinkClick = async (\n    e: React.SyntheticEvent<HTMLAnchorElement>\n  ) => {\n    const letter = e.currentTarget.innerText;\n    const isByNamePage = window.location.href.match(/byname/);\n    // check if we were on one of 'byname' pages\n    if (isByNamePage) {\n      // check if user clicks the same letter, we're in\n      const currentLetter = window.location.href.split('/').pop();\n      // no need to load same movies twice\n      if (currentLetter && letter === currentLetter) return;\n    }\n    dispatch(resetEndOfMovies());\n    dispatch(setMovies({ byName: [] }));\n    dispatch(resetFilterState());\n    dispatch(loadMovies({ filter: { letter, limit: LIMIT } }));\n  };\n\n  const scrollHandler = throttle((e: React.SyntheticEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    const target = e.target as HTMLDivElement;\n    if (!target) return;\n    if (target.scrollLeft === 0) {\n      setShadow({ ...shadow, shadowLeft: false });\n    } else if (target.scrollLeft > 0) {\n      !shadow.shadowLeft && setShadow({ ...shadow, shadowLeft: true });\n    }\n    if (target.scrollWidth - target.scrollLeft < target.offsetWidth + 1) {\n      setShadow({ ...shadow, shadowRight: false });\n    } else {\n      !shadow.shadowRight && setShadow({ ...shadow, shadowRight: true });\n    }\n  }, 100);\n\n  const horizontalScrollHandler = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTo({\n      top: 0,\n      left: e.currentTarget.scrollLeft + e.deltaY * 4,\n      behavior: 'smooth',\n    });\n  };\n\n  const getItemClassName = (path: string): string => {\n    return location.pathname.search(path) !== -1\n      ? cn(classes.Link, classes.Active)\n      : classes.Link;\n  };\n\n  return (\n    <Container className={classes.root}>\n      {shadow.shadowLeft && <div className={classes.ShadowLeft} />}\n      {shadow.shadowRight && <div className={classes.ShadowRight} />}\n      <Container\n        onScroll={scrollHandler}\n        onWheel={horizontalScrollHandler}\n        className={classes.Scroller}\n      >\n        {letters.split('').map((letter) => (\n          <NavLink\n            to={`/byname/${letter}`}\n            key={letter}\n            onClick={handleLinkClick}\n            className={getItemClassName(`/byname/${letter}`)}\n          >\n            {letter}\n          </NavLink>\n        ))}\n        <div className={classes.Link} />\n      </Container>\n    </Container>\n  );\n};\n\nexport default AlphabetNav;\n","import React, { useState } from 'react';\nimport { movies } from '../../axios';\nimport { getToken } from '../../store/features/UserSlice';\nimport MUIRating from '@material-ui/lab/Rating';\nimport StarBorderRounded from '@material-ui/icons/StarBorderRounded';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\ninterface Props {\n  movieId: string;\n  imdbRating: number;\n  ourRating: number;\n}\n\nconst useStyles = makeStyles({\n  Typography: {\n    padding: 5,\n    marginRight: 5,\n    border: '1px solid #ddd',\n    borderRadius: 5,\n  },\n});\n\nconst Rating = ({ movieId, imdbRating, ourRating }: Props) => {\n  const classes = useStyles();\n  const [rating, setRating] = useState(ourRating);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const handleRatingChange = async (\n    e: React.ChangeEvent<{}>,\n    newRating: number | null\n  ) => {\n    e.stopPropagation();\n    if (newRating !== null) {\n      console.log(newRating);\n      const res = await movies.patch(\n        '/rating',\n        { movieId, rating: newRating },\n        {\n          headers: {\n            accessToken: getToken(),\n          },\n        }\n      );\n      if (res.data.status) setRating(+res.data.data);\n    }\n  };\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"flex-end\">\n      <Typography className={classes.Typography}>IMDB</Typography>\n      <Typography>{imdbRating}</Typography>\n      <MUIRating\n        disabled={!isAuth}\n        value={rating || imdbRating / 2}\n        name={`${movieId}-rating`}\n        emptyIcon={<StarBorderRounded color=\"disabled\" fontSize=\"inherit\" />}\n        onChange={handleRatingChange}\n      />\n    </Grid>\n  );\n};\n\nexport default Rating;\n","import {\n  Divider,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { ITranslatedMovie, IUser } from '../../models/MovieInfo';\nimport { primaryColor } from '../../theme';\nimport Rating from '../Rating/Rating';\n\ninterface MovieCardMediumProps {\n  card: ITranslatedMovie;\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n  },\n  Img: {\n    position: 'relative',\n    cursor: 'pointer',\n    '& img': {\n      height: '15rem',\n      width: '10rem',\n      maxWidth: '15rem',\n      objectFit: 'cover',\n      marginRight: 20,\n      borderRadius: 5,\n    },\n    '&:hover $PlayIconWrapper': {\n      opacity: 1,\n    },\n  },\n  PlayIconWrapper: {\n    position: 'absolute',\n    left: 'calc(50% - 3.5rem)',\n    top: 'calc(50% - 3rem)',\n    fontSize: '1rem',\n    padding: '1rem',\n    borderRadius: '50%',\n    backgroundColor: '#000000aa',\n    color: '#fff',\n    opacity: 0,\n    transition: '0.3s',\n  },\n  PlayIcon: {\n    width: '4rem',\n    height: '4rem',\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  Caption: {\n    fontSize: '1.5rem',\n    textDecoration: 'none',\n    color: 'inherit',\n    marginBottom: 10,\n  },\n  Text: {\n    fontSize: '1rem',\n    fontWeight: 200,\n  },\n  Description: {\n    maxHeight: '8rem',\n    paddingTop: 10,\n    fontSize: '0.9rem',\n    position: 'relative',\n    flexGrow: 2,\n    overflow: 'hidden',\n  },\n  Shadow: {\n    height: 40,\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    background: 'linear-gradient(0deg, #ffffff, #ffffff33)',\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    fontWeight: 'inherit',\n    color: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n});\n\nconst MovieCardMedium = ({ card }: MovieCardMediumProps) => {\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n\n  const { id, img, info } = card.en;\n  const title = card[i18n.language as 'en' | 'ru'].title;\n  const description = card[i18n.language as 'en' | 'ru'].info.description;\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n\n  return (\n    <Paper className={classes.Paper}>\n      <NavLink to={`/movies/${id}`} className={classes.Img}>\n        <img src={img} alt={`${title} poster`} />\n        <div className={classes.PlayIconWrapper}>\n          <PlayArrow className={classes.PlayIcon} fontSize=\"large\" />\n        </div>\n      </NavLink>\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Grid container alignItems=\"baseline\" justify=\"space-between\">\n          <NavLink to={`/movies/${id}`} className={classes.Caption}>\n            <Typography variant=\"caption\" className={classes.Caption}>\n              {title}\n            </Typography>\n          </NavLink>\n          <Rating\n            movieId={id}\n            imdbRating={info.imdbRating}\n            ourRating={info.rating}\n          />\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Year')}: {info.year}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Genres')}: {mapItemsToLinks(info.genres)}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Length')}: {info.length ? `${info.length}${t('min')}` : 'unknown'}\n        </Grid>\n        <Divider />\n        <Grid container className={classes.Description}>\n          {description}\n          <div className={classes.Shadow} />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default MovieCardMedium;\n","import React from 'react';\nimport { Card, Grid, makeStyles, Typography } from '@material-ui/core';\nimport cn from 'classnames';\nimport MovieCardMedium from '../MovieCardMedium/MovieCardMedium';\nimport { useTranslation } from 'react-i18next';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface MovieCardProps {\n  display?: 'image' | 'lines' | 'grid';\n  className?: string;\n  id: string;\n}\n\nexport const useStyles = makeStyles({\n  root: {\n    // cursor: 'pointer',\n  },\n  Grid: {\n    maxWidth: 150,\n    marginRight: '1rem',\n    marginBottom: '1rem',\n  },\n  Media: {\n    height: 220,\n    width: 150,\n  },\n  Name: {\n    fontSize: '1rem',\n    fontWeight: 800,\n  },\n});\n\nconst MovieCard: React.FC<MovieCardProps> = ({\n  display = 'image',\n  className,\n  id: card,\n}: MovieCardProps) => {\n  const classes = useStyles();\n  const { i18n } = useTranslation();\n  const { movies } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((el) => el.en.id === card);\n\n  const getCard = () => {\n    if (!movie) return null;\n    if (display === 'lines') return <MovieCardMedium card={movie} />;\n    const bg = movie.en.img || movie.ru.img;\n    return (\n      <NavLink to={`/movies/${movie.en.id}`} className={classes.root}>\n        <Card style={{ height: 'fit-content' }}>\n          <div\n            className={classes.Media}\n            style={{\n              background: `url(${bg})`,\n              backgroundSize: 'cover',\n            }}\n          ></div>\n        </Card>\n        {display !== 'image' && (\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {display === 'grid' && (\n              <Typography className={classes.Name}>\n                {movie[i18n.language as 'en' | 'ru'].title}\n              </Typography>\n            )}\n          </Grid>\n        )}\n      </NavLink>\n    );\n  };\n\n  const getClassName = () =>\n    display === 'lines'\n      ? cn(classes.root, className)\n      : cn(classes.root, className, classes.Grid);\n\n  return (\n    <Grid\n      item\n      container\n      wrap=\"wrap\"\n      direction={display === 'lines' ? 'column' : 'row'}\n      className={getClassName()}\n    >\n      {getCard()}\n    </Grid>\n  );\n};\n\nexport default MovieCard;\n","import { Grid, makeStyles, Paper, Card } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\n\ninterface Props {\n  display?: 'lines' | 'grid';\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n    width: '100%',\n  },\n  Img: {\n    borderRadius: 5,\n    height: '15rem',\n    width: '13rem',\n    marginRight: '1rem',\n  },\n  Header: {\n    width: '90%',\n    marginBottom: 10,\n    fontSize: 30,\n  },\n  Text: {\n    marginTop: 15,\n    height: 10,\n    width: `${Math.floor(Math.random() * 100)}%`,\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n});\n\nconst CardLoader = ({ display }: Props) => {\n  const classes = useStyles();\n\n  return display === 'lines' ? (\n    <Paper className={classes.Paper}>\n      <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Skeleton animation=\"wave\" className={classes.Header} />\n        <Skeleton animation=\"wave\" width=\"50%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"60%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"53%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"30%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"40%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"70%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"47%\" className={classes.Text} />\n      </Grid>\n    </Paper>\n  ) : (\n    <Card style={{ height: 'fit-content' }}>\n      <div\n        className={classes.Img}\n        style={{\n          backgroundSize: 'cover',\n        }}\n      >\n        <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      </div>\n    </Card>\n  );\n};\n\nexport default CardLoader;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { useAppDispatch } from '../../store/store';\nimport { RootState } from '../../store/rootReducer';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { loadMovies, setEndOfMovies } from '../../store/features/MoviesSlice';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { throttledDetectBottomLine } from '../../utils';\nimport CardLoader from '../MovieCard/CardLoader/CardLoader';\nimport { LIMIT } from '../..';\nimport {\n  countryInCountries,\n  yearInRange,\n  genreInGenres,\n  isCountiesStateEmpty,\n  isGenresStateEmpty,\n  isYearsStateEmpty,\n} from '../../store/features/FilterSlice';\n\ninterface ICardsProps {\n  movies: ITranslatedMovie[];\n}\n\nconst sortByName = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort((cardA, cardB) =>\n    cardA.en.title.localeCompare(cardB.en.title)\n  );\n};\nconst sortByYear = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.year - cardA.en.info.year\n  );\n};\nconst sortByRating = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) =>\n      cardB.en.info.rating - cardA.en.info.rating ||\n      cardB.en.info.imdbRating - cardA.en.info.imdbRating\n  );\n};\nconst sortByAvalibility = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.avalibility - cardA.en.info.avalibility\n  );\n};\n\nconst Cards = ({ movies }: ICardsProps) => {\n  const { sortBy, view } = useSelector((state: RootState) => state.UI);\n  const { genres, years, countries } = useSelector(\n    (state: RootState) => state.filter\n  );\n  const { loading, isEndOfMovies } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [sortedCards, setSortedCards] = useState<ITranslatedMovie[]>(movies);\n  const dispatch = useAppDispatch();\n  const gridRef = useRef<HTMLDivElement>(null);\n  const location = window.location.href;\n\n  // selected letter if we're at /byname page\n  const letter = location.search(/byname/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // current search string, if we're at /search page\n  const search = location.match(/search/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // track scroll position and load movies if at the bottom\n  useEffect(() => {\n    const endOfMoviesCallback = () => {\n      if (!isEndOfMovies && !loading) {\n        console.log('endOfMoviesCallback');\n        dispatch(\n          loadMovies({\n            filter: {\n              search,\n              letter,\n              limit: LIMIT,\n              offset: movies.length,\n            },\n          })\n        ).then((res) => {\n          console.log('[Cards] loadMovies response', res);\n          if (res && res.length < LIMIT) dispatch(setEndOfMovies());\n        });\n      }\n    };\n    console.log('useEffect track scroll');\n    const trackScrolling = throttledDetectBottomLine(\n      gridRef.current,\n      endOfMoviesCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [movies.length, dispatch, letter, search, isEndOfMovies, loading]);\n\n  useEffect(() => {\n    let cards = !isYearsStateEmpty(years)\n      ? movies.filter((movie) => yearInRange(movie.en.info.year, years))\n      : movies;\n    cards = !isGenresStateEmpty(genres)\n      ? cards.filter((movie) => genreInGenres(movie.en.info.genres, genres))\n      : cards;\n    cards = !isCountiesStateEmpty(countries)\n      ? cards.filter(\n          (movie) =>\n            movie.en.info.countries\n              ? countryInCountries(movie.en.info.countries, countries)\n              : true // if no countries were given - show movie anyway\n        )\n      : cards;\n    console.log('[Cards] filter useEffect', cards);\n    setSortedCards(cards);\n  }, [genres, countries, years, movies]);\n\n  // sort movies on <sortBy> change\n  useEffect(() => {\n    console.log('[Cards] sort useEffect', movies, sortedCards);\n    if (movies.length > sortedCards.length) return;\n    if (sortBy === 'name') setSortedCards(sortByName(sortedCards));\n    else if (sortBy === 'year') setSortedCards(sortByYear(sortedCards));\n    else if (sortBy === 'rating') setSortedCards(sortByRating(sortedCards));\n    else if (sortBy === 'avalibility')\n      setSortedCards(sortByAvalibility(sortedCards));\n  }, [sortBy, movies, sortedCards]);\n\n  return (\n    <Grid ref={gridRef} container justify=\"space-evenly\">\n      {sortedCards.map((card) => (\n        <MovieCard key={card.en.id} id={card.en.id} display={view} />\n      ))}\n      {loading && <CardLoader display={view} />}\n    </Grid>\n  );\n};\n\nexport default Cards;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface CardsSliderProps {\n  display?: 'grid' | 'image';\n}\n\nconst useStyles = makeStyles({\n  root: {\n    overflow: 'hidden',\n    flexWrap: 'nowrap',\n    margin: '20px 0',\n    padding: 10,\n    background: '#fafafa',\n    transform: 'translateZ(0)',\n    overflowX: 'scroll',\n    overflowY: 'hidden',\n    transition: '0.3s',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  Movie: {\n    transition: '0.3s',\n    marginRight: 20,\n  },\n});\n\nconst CardsSlider: React.FC<CardsSliderProps> = ({\n  display = 'image',\n}: CardsSliderProps) => {\n  const classes = useStyles();\n  const { popular } = useSelector((state: RootState) => state.movies);\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      {popular.map((card: string) => (\n        <MovieCard\n          display={display}\n          className={classes.Movie}\n          id={card}\n          key={card}\n        />\n      ))}\n    </Grid>\n  );\n};\n\nexport default CardsSlider;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from '@material-ui/core';\nimport { TuneRounded } from '@material-ui/icons';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\n\nimport {\n  setFilterState,\n  resetFilterState,\n  GenresKeys,\n  YearsKeys,\n  CountriesKeys,\n  FilterStateKeys,\n  items,\n  reqeuestMoviesWithFilters,\n} from '../../store/features/FilterSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nconst useStyles = makeStyles({\n  '@media (orientation: portrait)': {\n    root: {\n      width: '80vw',\n      height: '60vh',\n    },\n  },\n  root: {\n    minWidth: 300,\n    minHeight: 300,\n    width: '80vw',\n    height: '60vh',\n    '@media (max-width: 600px)': {\n      width: '90vw',\n      height: '90vh',\n    },\n  },\n  Actions: {\n    justifyContent: 'center',\n  },\n});\n\nconst buttons: ['genres', 'years', 'countries'] = [\n  'genres',\n  'years',\n  'countries',\n];\n\nconst Filter = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [open, setOpen] = useState(false);\n  const [category, setCategory] = useState<FilterStateKeys>('genres');\n  const filterState = useSelector((state: RootState) => state.filter);\n  const { t } = useTranslation();\n\n  const handleReset = () => {\n    dispatch(resetFilterState());\n  };\n  const handleShow = async () => {\n    console.log('[Filter] handleShow', filterState);\n    dispatch(reqeuestMoviesWithFilters());\n    setOpen(false);\n  };\n\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (category) {\n      case 'genres':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as GenresKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'years':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as YearsKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'countries':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as CountriesKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      default:\n        return;\n    }\n  };\n\n  const getCheckboxes = (category: string): JSX.Element[] | null => {\n    switch (category) {\n      case 'genres':\n        return items.genres.map((item: GenresKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['genres'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'years':\n        return items.years.map((item: YearsKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['years'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'countries':\n        return items.countries.map((item: CountriesKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['countries'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div>\n      <Button\n        variant=\"text\"\n        onClick={() => setOpen(true)}\n        startIcon={<TuneRounded />}\n      >\n        {t('filterRoot')}\n      </Button>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"filter-dialog\"\n        classes={{ paper: classes.root }}\n      >\n        <DialogTitle id=\"filter-dialog-title\">{t('filterRoot')}</DialogTitle>\n        <DialogContent>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <ButtonGroup style={{ marginBottom: 20 }}>\n              {buttons.map((text) => (\n                <Button\n                  color=\"primary\"\n                  variant={text === category ? 'contained' : 'outlined'}\n                  key={text}\n                  onClick={() => setCategory(text)}\n                >\n                  {t(text)}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Grid>\n          <Grid container wrap=\"wrap\">\n            {getCheckboxes(category)}\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.Actions}>\n          <Button onClick={handleReset} color=\"primary\">\n            Reset filters\n          </Button>\n          <Button onClick={handleShow} color=\"secondary\">\n            Show results\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\nimport { SortRounded } from '@material-ui/icons';\n\nimport { useAppDispatch } from '../../store/store';\nimport { setSortingBy } from '../../store/features/UISlice';\nimport Dropdown, { IItem } from '../Dropdown/Dropdown';\nimport { useTranslation } from 'react-i18next';\n\nconst Sort = () => {\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const onClick = (e: React.MouseEvent<HTMLButtonElement>) =>\n    dispatch(setSortingBy({ sortBy: e.currentTarget.name }));\n\n  const items = [\n    {\n      text: t('By rating'),\n      name: 'rating',\n      onClick,\n    },\n    {\n      text: t('By name'),\n      name: 'name',\n      onClick,\n    },\n    {\n      text: t('By year'),\n      name: 'year',\n      onClick,\n    },\n    {\n      text: t('By avalibility'),\n      name: 'avalibility',\n      onClick,\n    },\n  ] as IItem[];\n\n  return <Dropdown heroText={t('Sort')} icon={<SortRounded />} items={items} />;\n};\n\nexport default Sort;\n","import React from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { DashboardRounded, ViewAgendaRounded } from '@material-ui/icons';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { changeView } from '../../store/features/UISlice';\n\nconst useStyles = makeStyles({\n  right: {\n    grow: 1,\n    marginLeft: 'auto',\n  },\n});\n\nconst GridToLinesButton = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { view } = useSelector((state: RootState) => state.UI);\n\n  const handleClick = () => {\n    dispatch(changeView());\n  };\n\n  return (\n    <Button\n      className={classes.right}\n      variant=\"text\"\n      size=\"large\"\n      onClick={handleClick}\n    >\n      {view === 'grid' ? <DashboardRounded /> : <ViewAgendaRounded />}\n    </Button>\n  );\n};\n\nexport default GridToLinesButton;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport Filter from '../Filter/Filter';\nimport Sort from '../Sort/Sort';\nimport GridToLinesButton from '../GridToLinesButton/GridToLinesButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '10px 30px',\n  },\n});\n\nconst FilterSortPanel = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid container className={classes.root} alignItems=\"center\">\n      <Filter />\n      <Sort />\n      <GridToLinesButton />\n    </Grid>\n  );\n};\n\nexport default FilterSortPanel;\n","import { Container } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { LIMIT } from '../..';\nimport AlphabetNav from '../../components/AlphabetNav/AlphabetNav';\nimport Cards from '../../components/Cards/Cards';\nimport CardsSlider from '../../components/CardsSlider/CardsSlider';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { IFilter, loadMovies } from '../../store/features/MoviesSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\ninterface IMainPageProps {\n  route?: string;\n}\n\ninterface TParams {\n  id?: string;\n}\n\nconst MainPage = ({\n  route,\n  match,\n}: IMainPageProps & RouteComponentProps<TParams>) => {\n  const dispatch = useAppDispatch();\n  const { movies, search, byName, popular } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [displayedMovies, setDisplayedMovies] = useState<ITranslatedMovie[]>(\n    []\n  );\n\n  console.log(match, route);\n\n  // load movies on component mount\n  useEffect(() => {\n    const location = window.location.href;\n    const filter: IFilter = { limit: LIMIT };\n    switch (route) {\n      case 'search':\n        filter.search = location.split('/').pop();\n        break;\n      case 'byname':\n        filter.letter = location.split('/').pop();\n        break;\n      default:\n        break;\n    }\n    console.log('[MainPage] useEffect. movies, filter', movies, filter);\n    // load popular and search/byName\n    dispatch(loadMovies({ filter: { limit: LIMIT + 10 } }));\n    if (route === 'search')\n      dispatch(loadMovies({ filter })).then((res) =>\n        setDisplayedMovies(res || [])\n      );\n    else if (route === 'byname')\n      dispatch(loadMovies({ filter })).then((res) => {\n        console.log('[MainPage] useEffect. res, byName', res, byName);\n        setDisplayedMovies(res || []);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    let cards = null;\n    if (match.path.includes('byname')) cards = byName;\n    else if (match.path.includes('search')) cards = search;\n    else cards = popular;\n\n    console.log(cards);\n    const displayedMovies: ITranslatedMovie[] = [];\n    cards.forEach((id) => {\n      const movie = movies.find((movie) => movie.en.id === id);\n      if (movie) displayedMovies.push(movie);\n    });\n    console.log(displayedMovies);\n    setDisplayedMovies(displayedMovies);\n  }, [byName, search, popular, match.path, movies]);\n\n  return (\n    <Container>\n      <AlphabetNav />\n      <FilterSortPanel />\n      <CardsSlider />\n      <Cards movies={displayedMovies} />\n    </Container>\n  );\n};\n\nexport default MainPage;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React, { useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\nimport { profile } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst Register = () => {\n  const [inputs, setInputs] = useState({\n    email: '',\n    username: '',\n    password: '',\n    confirm: '',\n  });\n  const [valid, setValid] = useState({\n    email: false,\n    password: false,\n    confirm: false,\n  });\n  const formValid = valid.email && valid.password;\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Register] handleSubmit', inputs);\n\n      const body = {\n        email: inputs.email,\n        username: inputs.username,\n        passwd: inputs.password,\n      };\n      const res = await profile.put('create', body);\n      console.log(res);\n      if (res.data.email) {\n        dispatch(saveUserState({ user: res.data }));\n        history.push('/');\n        toast({ text: t`Check your email` });\n      } else {\n        toast({ text: res.data[i18n.language] }, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language, dispatch, history]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, username: isValid })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 3,\n              maxLength: 20,\n              regex: /^[\\w-+.]+$/,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 3,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Register'),\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Register;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Register from '../../components/Register/Register';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst RegisterPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Register />\n    </Container>\n  );\n};\n\nexport default RegisterPage;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { setCookie } from '../../utils';\n\nconst Auth = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  React.useEffect(() => {\n    console.log('cookie', document.cookie);\n    console.log(window.location.href);\n    const queryParams = decodeURI(window.location.search);\n    console.log('queryParams', queryParams);\n    const accessToken = queryParams\n      .slice(1)\n      .split('&')\n      .find((el) => el.startsWith('accessToken'));\n    if (accessToken) {\n      const tokenStart = accessToken.search(/=(.+)/);\n      const token = accessToken.slice(tokenStart + 1);\n      console.log('tokenStart', token);\n      saveToken(token);\n      dispatch(getSelfInfo());\n      setCookie('accessToken', token, { path: '/' });\n      history.push('/');\n    }\n  }, [dispatch, history]);\n  return null;\n};\n\nexport default Auth;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    position: 'fixed',\n    bottom: 0,\n    right: 0,\n    background: 'linear-gradient(0deg, #ccc, transparent)',\n  },\n});\n\nconst Footer = () => {\n  const styles = useStyles();\n  const { t } = useTranslation();\n  return (\n    <Grid\n      container\n      alignItems=\"flex-end\"\n      justify=\"flex-end\"\n      className={styles.root}\n    >\n      {t`footerCreated`}\n    </Grid>\n  );\n};\n\nexport default Footer;\n","import {\n  Button,\n  Fade,\n  FormControl,\n  Grid,\n  InputBase,\n  makeStyles,\n  Paper,\n  Popper,\n  TextField,\n} from '@material-ui/core';\nimport { SearchRounded } from '@material-ui/icons';\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { loadMovies } from '../../store/features/MoviesSlice';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\nimport { theme } from '../../theme';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '10px',\n    border: `1px solid ${theme.palette.grey[500]}`,\n    borderRadius: 5,\n    maxWidth: 300,\n    [theme.breakpoints.down('xs')]: {\n      display: 'none',\n    },\n  },\n  Input: {\n    padding: '5px 1rem',\n    flex: 1,\n  },\n  BaseInput: {\n    padding: 0,\n  },\n  Icon: {\n    fontSize: '2rem',\n    color: theme.palette.grey[700],\n    paddingRight: 5,\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '1.6rem',\n      paddingRight: 0,\n    },\n  },\n  Button: {\n    margin: '10px',\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  Popper: {\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n});\n\nconst Search = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [search, setSearch] = useState('');\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const history = useHistory();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  };\n  /**\n   * TODO:\n   * move this to thunk (think about redux router)\n   * add loader with random text (opening crates, searchng in dark web, ...)\n   */\n\n  const handleSearch = async (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      console.log(`Searching for: ${search}`);\n      const filter = { search };\n      dispatch(loadMovies({ filter })).then((res) => {\n        // check responce here\n        console.log(res);\n        if (res) {\n          history.push(encodeURI(`/search/${search}`));\n        } else {\n          toast(t`Loading error`, 'error');\n        }\n      });\n      setSearch('');\n    }\n  };\n  const handleOpenSearch = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setAnchorEl(anchorEl ? null : e.currentTarget);\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? 'search-popover' : undefined;\n\n  return (\n    <FormControl>\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"flex-end\"\n        className={classes.root}\n      >\n        <InputBase\n          className={classes.Input}\n          inputProps={{ 'aria-label': 'search for a movie' }}\n          value={search}\n          classes={{ input: classes.BaseInput }}\n          onChange={handleInput}\n          onKeyPress={handleSearch}\n          placeholder={t('search')}\n        />\n        <SearchRounded className={classes.Icon} />\n      </Grid>\n\n      <Button\n        aria-describedby={id}\n        className={classes.Button}\n        onClick={handleOpenSearch}\n        variant=\"outlined\"\n      >\n        <SearchRounded className={classes.Icon} />\n      </Button>\n      <Popper\n        open={open}\n        anchorEl={anchorEl}\n        placement={'bottom-end'}\n        transition\n        className={classes.Popper}\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={250}>\n            <Paper>\n              <TextField\n                size=\"small\"\n                className={classes.Input}\n                inputProps={{ 'aria-label': 'search for a movie' }}\n                value={search}\n                classes={{ root: classes.BaseInput }}\n                onChange={handleInput}\n                onKeyPress={handleSearch}\n                placeholder={t('search')}\n              />\n            </Paper>\n          </Fade>\n        )}\n      </Popper>\n    </FormControl>\n  );\n};\n\nexport default Search;\n","import React, { useState } from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { theme } from '../../theme';\n\nconst languages = ['en', 'ru'];\n\nconst useStyles = makeStyles({\n  Button: {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.7rem',\n    },\n  },\n});\n\nconst Internationalization = () => {\n  const classes = useStyles();\n  const [lang, setLang] = useState(0);\n  const nextLang = (lang + 1) % languages.length;\n  const { t, i18n } = useTranslation();\n\n  const handleClick = () => {\n    i18n.changeLanguage(languages[nextLang]);\n    setLang(nextLang);\n  };\n  return (\n    <div>\n      <Button onClick={handleClick} className={classes.Button}>{`${t(\n        'translate'\n      )} ${t(languages[nextLang])}`}</Button>\n    </div>\n  );\n};\n\nexport default Internationalization;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { authFail, removeToken } from '../../store/features/UserSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { handlersContext } from '../Dropdown/Dropdown';\n\nconst useStyles = makeStyles({\n  Type: {\n    fontWeight: 100,\n    marginRight: 10,\n  },\n  Text: {\n    fontWeight: 300,\n  },\n  marginAuto: { marginLeft: 'auto', marginRight: 10 },\n});\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const { onClose } = React.useContext(handlersContext);\n  const { username, email, imageBody } = useSelector(\n    (state: RootState) => state.user\n  );\n  const avatar = imageBody || undefined;\n\n  const handleLogout = () => {\n    removeToken();\n    dispatch(authFail());\n    onClose();\n  };\n\n  const handleUpdateInfo = () => {\n    onClose();\n    history.push('/settings');\n  };\n\n  return (\n    <Grid container>\n      <Grid item container wrap=\"nowrap\" alignItems=\"center\">\n        <Avatar src={avatar} alt={username} />\n        <Button\n          onClick={handleUpdateInfo}\n          className={classes.marginAuto}\n        >{t`Update info`}</Button>\n        <Button onClick={handleLogout}>{t`Logout`}</Button>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Username`}</Typography>\n        <Typography className={classes.Text}>{username}</Typography>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Email`}</Typography>\n        <Typography className={classes.Text}>{email}</Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UserInfo;\n","import { makeStyles, SvgIcon } from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  width?: number;\n  height?: number;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    color: '#035263',\n    '&:hover>': {\n      '& $_0': {\n        animation: `$forward 1s infinite ease-in-out`,\n      },\n      '& $_1': {\n        animation: `$stretch1 1s infinite ease-out`,\n      },\n      '& $_2': {\n        animation: `$stretch2 0.9s infinite ease-out`,\n      },\n      '& $_3': {\n        animation: `$stretch1 1.1s infinite ease-out`,\n      },\n      '& $_4': {\n        animation: `$stretch1 0.8s infinite ease-out`,\n      },\n    },\n  },\n  _0: {},\n  _1: {},\n  _2: {},\n  _3: {},\n  _4: {},\n  '@keyframes stretch1': {\n    '0%': {\n      opacity: 0.8,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-10px) scaleX(1)',\n    },\n    '70%': {\n      opacity: 0.8,\n    },\n    '80%': {\n      opacity: 0.2,\n      transform: 'translateX(-80px) scaleX(1.5)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n  '@keyframes forward': {\n    '0%': {\n      transform: 'translateX(0)',\n    },\n    '10%': {\n      transform: 'translateX(10px) translateY(3px)',\n    },\n    '50%': {\n      transform: 'translateX(0px) translateY(-3px)',\n    },\n    '80%': {\n      transform: 'translateX(-7px) translateY(4px)',\n    },\n    '100%': {\n      transform: 'translateX(0px) translateY(0)',\n    },\n  },\n  '@keyframes stretch2': {\n    '0%': {\n      opacity: 0.2,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-15px) scaleX(1.2)',\n    },\n    '80%': {\n      opacity: 0.6,\n    },\n    '90%': {\n      opacity: 0.2,\n      transform: 'translateX(-40px) scaleX(1.4)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n});\n\nconst Logo = ({ width = 70, height = 50 }: Props) => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      style={{ width, height }}\n      className={classes.root}\n      viewBox={'-100 0 584 384'}\n    >\n      <path\n        className={classes._0}\n        d=\"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z\"\n      />\n      <path\n        className={classes._1}\n        d=\"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z\"\n      />\n      <path\n        className={classes._2}\n        d=\"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z\"\n      />\n      <path\n        className={classes._3}\n        d=\"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z\"\n      />\n      <path\n        className={classes._4}\n        d=\"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default Logo;\n","import { ButtonProps, Grid, makeStyles } from '@material-ui/core';\nimport { PersonOutlineRounded } from '@material-ui/icons';\nimport React from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport Login from '../Login/Login';\nimport Search from '../Search/Search';\nimport Internationalization from '../../components/Internationalization/Internationalization';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport UserInfo from '../UserInfo/UserInfo';\nimport Logo from '../Logo/Logo';\nimport { NavLink } from 'react-router-dom';\nimport { resetEndOfMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst Header: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const buttonProps: ButtonProps = {\n    variant: 'outlined',\n  };\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      <Grid item xs={2}>\n        <NavLink onClick={() => dispatch(resetEndOfMovies())} to=\"/\">\n          <Logo />\n        </NavLink>\n      </Grid>\n      <Grid\n        container\n        justify=\"flex-end\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        item\n        xs={8}\n      >\n        <Internationalization />\n        <Search />\n      </Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}></Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}>\n        <Dropdown icon={<PersonOutlineRounded />} buttonProps={buttonProps}>\n          {isAuth ? <UserInfo /> : <Login />}\n        </Dropdown>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles, Typography } from '@material-ui/core';\n\ninterface Props {\n  text: string;\n}\n\nconst useStyles = makeStyles({\n  h3: {\n    fontSize: '1.6rem',\n    textTransform: 'uppercase',\n    margin: '10px 0',\n    fontWeight: 900,\n  },\n});\n\nconst CategoryHeader = ({ text }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"h3\" className={classes.h3}>\n      {text}\n    </Typography>\n  );\n};\n\nexport default CategoryHeader;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\n\ninterface Props {\n  name: string;\n  sources?: string[];\n  type: 'photo' | 'video';\n}\ninterface GridItemProps {\n  name: string;\n  src: string;\n  type: 'photo' | 'video';\n  key?: string | number;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '10px 0',\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    transform: 'translateZ(0)',\n  },\n  HorizontalScroll: {\n    overflowX: 'auto',\n  },\n  Image: {\n    height: '10rem',\n    marginRight: 10,\n  },\n}));\n\nconst GridItem: React.FC<GridItemProps> = ({\n  src,\n  name,\n  type,\n}: GridItemProps) => {\n  const classes = useStyles();\n\n  switch (type) {\n    case 'photo':\n      return <img src={src} alt={name} className={classes.Image} />;\n    case 'video':\n      return <video controls src={src} className={classes.Image} />;\n    default:\n      return null;\n  }\n};\n\nconst HorizontalGrid = ({ sources, name, type }: Props) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <CategoryHeader text={t(`${type}s`)} />\n      <Grid container wrap=\"nowrap\" className={classes.HorizontalScroll}>\n        {sources?.length\n          ? sources.map((item: string, index: number) => (\n              <GridItem key={item + index} src={item} name={name} type={type} />\n            ))\n          : t`No info`}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default HorizontalGrid;\n","import React from 'react';\nimport { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { IComment } from '../../../models/MovieInfo';\nimport { primaryColor } from '../../../theme';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    marginBottom: 5,\n  },\n  h4: {\n    fontWeight: 700,\n    fontSize: '1rem',\n    marginBottom: 10,\n  },\n  Image: {\n    marginRight: 10,\n    background: primaryColor.main,\n  },\n  Text: {\n    width: '100%',\n    textAlign: 'justify',\n  },\n});\n\nconst Comment: React.FC<IComment> = ({ username, text, avatar }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container wrap=\"nowrap\" className={classes.root}>\n      <Avatar\n        src={avatar}\n        alt={`${username}'s avatar`}\n        className={classes.Image}\n      >\n        {username.substr(0, 2)}\n      </Avatar>\n      <Grid>\n        <Typography variant=\"h4\" className={classes.h4}>\n          {username}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.Text}>\n          {text}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button, Grid, makeStyles, TextField } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { movies } from '../../../axios';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../store/rootReducer';\nimport { useAppDispatch } from '../../../store/store';\nimport { updateComments } from '../../../store/features/MoviesSlice';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '1rem 0',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n});\n\nexport interface IComment {\n  id?: number;\n  userid: string;\n  movieid: string;\n  text: string;\n  time?: number;\n}\n\nconst SendComment = () => {\n  const classes = useStyles();\n  const { userId } = useSelector((state: RootState) => state.user);\n  const [comment, setComment] = React.useState('');\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const sendForm = async () => {\n    if (!comment.length) return;\n    console.log(comment);\n    const movieid = window.location.href.split('/').pop();\n    const res = await movies.post('/comment', {\n      userid: `${userId}`,\n      movieid,\n      text: comment,\n      time: new Date().getTime(),\n    } as IComment);\n    if (res.data.status)\n      dispatch(updateComments({ id: movieid, comments: [res.data.data] }));\n    setComment('');\n  };\n\n  const handleInput = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.ctrlKey && e.key === 'Enter') sendForm();\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendForm();\n  };\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <form onSubmit={handleSubmit} className={classes.Form}>\n        <TextField\n          fullWidth\n          multiline\n          name=\"comment\"\n          type=\"textarea\"\n          placeholder={t`Leave a comment!`}\n          className={classes.margin}\n          size=\"small\"\n          onChange={(e) => setComment(e.currentTarget.value)}\n          onKeyPress={handleInput}\n          value={comment}\n        />\n        <Button type=\"submit\" className={classes.margin} variant=\"contained\">\n          {t`Send`}\n        </Button>\n      </form>\n    </Grid>\n  );\n};\n\nexport default SendComment;\n","import React, { useEffect, useRef } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport Comment from './Comment/Comment';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport SendComment from './SendComment/SendComment';\nimport { loadComments } from '../../store/features/MoviesSlice';\nimport { debouncedDetectBottomLine } from '../../utils';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch } from '../../store/store';\nimport { IMovie } from '../../models/MovieInfo';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nconst LIMIT = 5;\nexport interface CommentsProps {\n  movie: IMovie;\n}\n\nconst Comments: React.FC<CommentsProps> = ({ movie }) => {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const offsetRef = useRef(0);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  // load first batch of comments initially\n  // if there's something left to load\n  useEffect(() => {\n    if (!movie?.info.maxComments) return;\n    if (\n      !movie.info.comments ||\n      (movie.info.comments &&\n        movie.info.comments.length < movie.info.maxComments)\n    ) {\n      dispatch(\n        loadComments(\n          { movieId: movie.id, offset: movie.info.comments?.length },\n          (length) => (offsetRef.current += length)\n        )\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!movie || !movie.info.maxComments) return;\n    const endOfCommentsCallback = () => {\n      if (\n        movie.info.comments?.length &&\n        movie.info.comments?.length < movie.info.maxComments\n      ) {\n        dispatch(\n          loadComments({\n            movieId: movie.id,\n            limit: LIMIT,\n            offset: movie.info.comments?.length || 0,\n          })\n        );\n      }\n    };\n    const trackScrolling = debouncedDetectBottomLine(\n      gridRef.current,\n      endOfCommentsCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [\n    movie,\n    movie.info.comments?.length,\n    movie.info.maxComments,\n    movie.id,\n    dispatch,\n  ]);\n\n  if (!movie) return null;\n  const content = movie.info.comments?.length ? (\n    movie.info.comments.map((comment) => (\n      <Comment {...comment} key={comment.commentid} />\n    ))\n  ) : (\n    <Typography variant=\"body1\" style={{ fontSize: '1.3rem' }}>\n      {t`No comments`}\n    </Typography>\n  );\n\n  return (\n    <Grid ref={gridRef} style={{ marginTop: 10 }} container direction=\"column\">\n      <CategoryHeader text={t`Comments`} />\n      {isAuth && <SendComment />}\n      {content}\n    </Grid>\n  );\n};\n\nexport default Comments;\n","import {\n  Button,\n  Grid,\n  IconButton,\n  makeStyles,\n  Popover,\n  Slider,\n  Tooltip,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport React, { forwardRef } from 'react';\nimport {\n  FastForward,\n  FastRewind,\n  Fullscreen,\n  Pause,\n  PlayArrow,\n  VolumeOff,\n  VolumeUp,\n} from '@material-ui/icons';\n\nconst useStyles = makeStyles({\n  controlsWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.6)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    zIndex: 1,\n  },\n\n  controlIcons: {\n    color: '#777',\n    fontSize: 50,\n    transform: 'scale(0.9)',\n    '&:hover': {\n      color: 'white',\n      transform: 'scale(1)',\n    },\n  },\n\n  bottomIcons: {\n    color: '#999',\n    '&:hover': {\n      color: 'white',\n    },\n  },\n\n  volumeSlider: {\n    width: 100,\n  },\n});\n\ninterface ValueProps {\n  open: boolean;\n  value: string;\n  children: JSX.Element;\n}\n\nconst ValueLabelComponent: React.FC<ValueProps> = (props2) => {\n  // debugger\n  const { children, open, value } = props2;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n\n    // <Popover\n    //   id=\"mouse-over-popover\"\n    //   // style={{\n    //   //   paper: { padding: 5 },\n    //   // }}\n    //   open={open}\n    //   // anchorEl={anchorEl}\n    //   anchorOrigin={{\n    //     vertical: 'bottom',\n    //     horizontal: 'left',\n    //   }}\n    //   transformOrigin={{\n    //     vertical: 'top',\n    //     horizontal: 'left',\n    //   }}\n    //   // onClose={handlePopoverClose}\n    //   disableRestoreFocus\n    // >\n    //   {children}\n    // </Popover>\n  );\n};\n\nconst PrettoSlider = withStyles({\n  root: {\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus, &:hover, &$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\ninterface Props {\n  onPlayPause: () => void;\n  onMuted: () => void;\n  onRewind: () => void;\n  onFastForward: () => void;\n  onVolumeChange: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onVolumeSeekUp: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onPlaybackRateChange: (n: number) => void;\n  onToggleFullScreen: () => void;\n  onSeek: (n: number | number[]) => void;\n  onSeekMouseDown: () => void;\n  onSeekMouseUp: () => void;\n  onChangeDisplayFormat: () => void;\n  elapsedTime: string;\n  seeking: boolean;\n  playing: boolean;\n  muted: boolean;\n  volume: number;\n  played: number;\n  playbackRate: number;\n  totalDuration: string;\n  title: string;\n}\n\nconst PlayerControls = forwardRef<HTMLDivElement, Props>((props, ref) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<Element | null>(null);\n\n  const handlePopover = (e: React.MouseEvent) => {\n    setAnchorEl(e.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'playbackrate-popover' : undefined;\n  // debugger\n  return (\n    <div className={classes.controlsWrapper} ref={ref}>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item>\n          <Typography variant=\"h5\" style={{ color: 'white' }}>\n            {props.title}\n          </Typography>\n        </Grid>\n        {/* <Grid item>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<BookmarkIcon />}>\n\t\t\t\t\t\tBookmark\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t</Grid> */}\n      </Grid>\n      <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n        <IconButton\n          onClick={props.onRewind}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastRewind fontSize=\"inherit\" />\n        </IconButton>\n        <IconButton\n          onClick={props.onPlayPause}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          {props.playing ? (\n            <Pause fontSize=\"inherit\" />\n          ) : (\n            <PlayArrow fontSize=\"inherit\" />\n          )}\n        </IconButton>\n        <IconButton\n          onClick={props.onFastForward}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastForward fontSize=\"inherit\" />\n        </IconButton>\n      </Grid>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item xs={12}>\n          <Slider\n            min={0}\n            max={100}\n            // ValueLabelComponent={(props2) => (\n            //   <ValueLabelComponent {...props2} value={props.elapsedTime} />\n            // )}\n            value={props.played * 100}\n            onChange={(e, value) => props.onSeek(value)}\n            onMouseDown={props.onSeekMouseDown}\n            onChangeCommitted={props.onSeekMouseUp}\n          />\n        </Grid>\n        <Grid item>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <IconButton\n              onClick={props.onPlayPause}\n              className={classes.bottomIcons}\n            >\n              {props.playing ? (\n                <Pause fontSize=\"large\" />\n              ) : (\n                <PlayArrow fontSize=\"large\" />\n              )}\n            </IconButton>\n            <IconButton onClick={props.onMuted} className={classes.bottomIcons}>\n              {props.muted ? (\n                <VolumeOff fontSize=\"large\" />\n              ) : (\n                <VolumeUp fontSize=\"large\" />\n              )}\n            </IconButton>\n            <Slider\n              min={0}\n              max={100}\n              value={props.volume * 100}\n              className={classes.volumeSlider}\n              onChange={props.onVolumeChange}\n              onChangeCommitted={props.onVolumeSeekUp}\n            />\n            <Button\n              onClick={props.onChangeDisplayFormat}\n              variant=\"text\"\n              style={{ color: '#fff', marginLeft: 16 }}\n            >\n              <Typography>\n                {props.elapsedTime}/{props.totalDuration}\n              </Typography>\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Button\n            onClick={handlePopover}\n            variant=\"text\"\n            className={classes.bottomIcons}\n          >\n            <Typography>{props.playbackRate}X</Typography>\n          </Button>\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n          >\n            <Grid container direction=\"column-reverse\">\n              {[0.5, 1, 1.5, 2].map((rate) => (\n                <Button\n                  key={rate}\n                  onClick={() => props.onPlaybackRateChange(rate)}\n                  variant=\"text\"\n                >\n                  <Typography\n                    color={\n                      rate === props.playbackRate ? 'secondary' : undefined\n                    }\n                  >\n                    {rate}\n                  </Typography>\n                </Button>\n              ))}\n            </Grid>\n          </Popover>\n          <IconButton\n            onClick={props.onToggleFullScreen}\n            className={classes.bottomIcons}\n          >\n            <Fullscreen fontSize=\"large\" />\n          </IconButton>\n        </Grid>\n      </Grid>\n    </div>\n  );\n});\n\nexport default PlayerControls;\n","// ts-nocheck\n\nimport { makeStyles } from '@material-ui/core';\nimport React, { useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactPlayer from 'react-player';\nimport screenfull from 'screenfull';\nimport PlayerControls from './PlayerControls';\n\nconst useStyles = makeStyles({\n  playerWrapper: {\n    position: 'relative',\n    width: '100%',\n  },\n  Error: {\n    width: '100%',\n    height: '100%',\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: '#ddd',\n    borderRadius: 5,\n  },\n});\n\ninterface Props {\n  title: string;\n  id?: string | number;\n  src?: string;\n}\n\nconst format = (seconds: number) => {\n  if (isNaN(seconds)) {\n    return '00:00';\n  }\n  const date = new Date(seconds * 1000);\n  const hh = date.getUTCHours();\n  const mm = date.getUTCMinutes();\n  const ss = date.getUTCSeconds().toString().padStart(2, '0');\n  if (hh) {\n    return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\n  }\n  return `${mm}:${ss}`;\n};\n\nfunction Player({ title, id, src }: Props) {\n  const classes = useStyles();\n  const [state, setState] = useState({\n    playing: true,\n    muted: true,\n    volume: 0.5,\n    playbackRate: 1.0,\n    played: 0,\n    seeking: false,\n    controlsVisible: true,\n    error: false,\n  });\n  const [timeDisplayFormat, setTimeDisplayFormat] = useState('normal');\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    seeking,\n    controlsVisible,\n    error,\n  } = state;\n  const playerRef = useRef<ReactPlayer>(null);\n  const playerContainerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n  const timeoutId = useRef<NodeJS.Timeout>();\n  const url = id ? `/api/loader/${id}` : src;\n  const { t } = useTranslation();\n\n  const handlePlayPause = () => {\n    setState({ ...state, playing: !state.playing });\n  };\n  const handleRewind = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() - 10);\n  };\n  const handleFastForward = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() + 10);\n  };\n  const handleMute = () => {\n    setState({ ...state, muted: !state.muted });\n  };\n  const handleVolumeChange = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handleVolumeSeekUp = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handlePlaybackRateChange = (rate: number) => {\n    setState({ ...state, playbackRate: rate });\n  };\n  const toggleFullScreen = () => {\n    if (!playerContainerRef || !playerContainerRef.current) return;\n    if (screenfull && screenfull.isEnabled && playerContainerRef !== null) {\n      screenfull.toggle(playerContainerRef.current);\n    }\n  };\n\n  const handleProgress = ({ played }: { played: number }) => {\n    if (!controlsRef || !controlsRef.current) return;\n    timeoutId.current = setTimeout(() => {\n      if (!controlsRef || !controlsRef.current) return;\n      controlsRef.current.style.visibility = 'hidden';\n    }, 3000);\n    if (!state.seeking) {\n      setState({ ...state, played });\n    }\n  };\n  const handleSeek = (value: number | number[]) => {\n    if (!playerRef || !playerRef.current) return;\n    const played = typeof value === 'number' ? value / 100 : value[0] / 100;\n    if (played === state.played) return;\n    setState({ ...state, played });\n    playerRef.current.seekTo(played, 'fraction');\n  };\n  const handleSeekMouseDown = () => {\n    setState({ ...state, seeking: true });\n  };\n  const handleSeekMouseUp = () => {\n    setState({ ...state, seeking: false });\n  };\n  const handleChangeDisplayFormat = () => {\n    setTimeDisplayFormat(\n      timeDisplayFormat === 'normal' ? 'remaining' : 'normal'\n    );\n  };\n  const handleMouseMove = () => {\n    if (!controlsRef || !controlsRef.current) return;\n    controlsRef.current.style.visibility = 'visible';\n    if (timeoutId.current) clearTimeout(timeoutId.current);\n  };\n  const handleError = (e: Error) => {\n    console.log('handleError', e);\n    setState({ ...state, error: true });\n  };\n\n  const currentTime =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getCurrentTime();\n  const duration =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getDuration();\n  const elapsedTime =\n    timeDisplayFormat === 'normal'\n      ? format(currentTime)\n      : `-${format(duration - currentTime)}`;\n  const totalDuration = format(duration);\n  return (\n    <>\n      <div\n        ref={playerContainerRef}\n        className={classes.playerWrapper}\n        onMouseMove={handleMouseMove}\n      >\n        {error ? (\n          <div className={classes.Error}>{t`Cannot load movie`}</div>\n        ) : (\n          <>\n            <ReactPlayer\n              ref={playerRef}\n              width=\"100%\"\n              height=\"100%\"\n              url={url}\n              muted={muted}\n              playing={playing}\n              volume={volume}\n              controls={false}\n              playbackRate={playbackRate}\n              onProgress={handleProgress}\n              onError={handleError}\n            />\n            {controlsVisible && (\n              <PlayerControls\n                ref={controlsRef}\n                onPlayPause={handlePlayPause}\n                onMuted={handleMute}\n                playing={playing}\n                muted={muted}\n                volume={volume}\n                played={played}\n                seeking={seeking}\n                onRewind={handleRewind}\n                onFastForward={handleFastForward}\n                onVolumeChange={handleVolumeChange}\n                onVolumeSeekUp={handleVolumeSeekUp}\n                playbackRate={playbackRate}\n                onPlaybackRateChange={handlePlaybackRateChange}\n                onToggleFullScreen={toggleFullScreen}\n                onSeek={handleSeek}\n                onSeekMouseDown={handleSeekMouseDown}\n                onSeekMouseUp={handleSeekMouseUp}\n                elapsedTime={elapsedTime}\n                totalDuration={totalDuration}\n                onChangeDisplayFormat={handleChangeDisplayFormat}\n                title={title}\n              />\n            )}\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default Player;\n","import { makeStyles } from '@material-ui/core';\nimport React, { useRef } from 'react';\n\ninterface IdProps {\n  id: string;\n  src?: string;\n}\n\ninterface SrcProps {\n  id?: string;\n  src: string;\n}\n\nconst useSyles = makeStyles({\n  root: {\n    width: '100%',\n    height: '100%',\n  },\n});\n\ntype Props = IdProps | SrcProps;\n\nconst NativePlayer = ({ src, id }: Props) => {\n  const styles = useSyles();\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  const url = id ? `/api/loader/${id}` : src;\n\n  return (\n    <div>\n      <video\n        // poster=\"poster.png\"\n        controls\n        ref={videoRef}\n        className={styles.root}\n      >\n        <source src={url}></source>\n        {/* <source src=\"video.mp4\"></source>\n        <source src=\"video.webm\"></source>\n        <source src=\"video.ogv\"></source> */}\n        <p>This is fallback content</p>\n      </video>\n    </div>\n  );\n};\n\nexport default NativePlayer;\n","import { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { IUser } from '../../models/MovieInfo';\nimport HorizontalGrid from '../HorizontalGrid/HorizontalGrid';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport Comments from '../Comments/Comments';\nimport { useAppDispatch } from '../../store/store';\nimport { loadMovie, resetError } from '../../store/features/MoviesSlice';\nimport { useTranslation } from 'react-i18next';\nimport { primaryColor } from '../../theme';\nimport Player from '../Player/Player';\nimport { useToast } from '../../hooks/useToast';\nimport NativePlayer from '../Player/NativePlayer';\n\ninterface TParams {\n  id: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    fontSize: '1.3rem',\n    padding: '10px 0',\n  },\n  Header: {\n    fontSize: '2rem',\n    margin: '0 10px',\n    fontWeight: 700,\n  },\n  Divider: {\n    margin: '10px 0',\n  },\n  Poster: {\n    height: '23rem',\n    marginRight: 10,\n  },\n  MainInfoText: {\n    margin: 5,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'flex-end',\n    fontSize: 'inherit',\n    fontWeight: 200,\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    color: 'inherit',\n    fontWeight: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n  Description: {\n    marginTop: 10,\n    fontSize: 'inherit',\n  },\n  Video: {\n    margin: '15px 0',\n  },\n  AdditionalInfo: {\n    margin: '10px 0',\n  },\n});\n\nconst MovieFullInfo = ({ match }: RouteComponentProps<TParams>) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const { toast } = useToast();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { movies, error } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((movie) => movie.en.id === match.params.id);\n  const headerRef = React.useRef<HTMLHeadingElement | null>(null);\n\n  // if no movies in redux - load some, we've landed on movie's page\n  useEffect(() => {\n    if (!movie) dispatch(loadMovie(match.params.id));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      history.push('/');\n      toast({ text: error[i18n.language as 'en' | 'ru'] }, 'error');\n      dispatch(resetError());\n    }\n  }, [error, dispatch, history, t, toast, i18n.language]);\n\n  useEffect(() => {\n    if (!headerRef || !headerRef.current) return;\n    headerRef.current.scrollIntoView(true);\n  }, []);\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined,\n    backup?: string\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return backup || t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n  const mapItems = (items?: (string | IUser)[], backup?: string): string => {\n    if (!items || !items.length) return backup || t('No info');\n    const names = items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return text;\n    });\n    return names.join(', ');\n  };\n\n  // if (!isAuth)\n  //   return (\n  //     <Grid\n  //       container\n  //       direction=\"column\"\n  //       alignItems=\"center\"\n  //       className={classes.root}\n  //     >\n  //       <Typography className={classes.Description}>{t`AuthOnly`}</Typography>\n  //     </Grid>\n  //   );\n\n  if (!movie) return null;\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <Typography variant=\"h2\" className={classes.Header} ref={headerRef}>\n        {movie[i18n.language as 'en' | 'ru'].title}\n      </Typography>\n      <Divider className={classes.Divider} />\n      <Grid container wrap=\"nowrap\">\n        <img\n          className={classes.Poster}\n          src={movie.en.img}\n          alt={`${movie.en.title} poster`}\n        />\n        <Grid item container direction=\"column\">\n          <Grid container className={classes.MainInfoText}>\n            {t`Year`}: {movie.en.info.year}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Genres`}: {mapItemsToLinks(movie.en.info.genres)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Length`}:{' '}\n            {movie.en.info.length > 0\n              ? `${movie.en.info.length}${t('min')}`\n              : t`unknown`}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Views`}: {movie.en.info.views}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`PG rating`}: {movie.en.info.pgRating}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Directed`}:{' '}\n            {mapItems(movie.en.info.directorList, movie.en.info.directors)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Actors`}: {mapItems(movie.en.info.cast, movie.en.info.stars)}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container className={classes.Video}>\n        <NativePlayer id={movie.en.id} />\n        <NativePlayer src={`/api/test/${movie.en.id}`} />\n\n        <Player\n          src={`/api/test/${movie.en.id}`}\n          // id={movie.en.id}\n          title={movie[i18n.language as 'en' | 'ru'].title}\n        />\n      </Grid>\n      <Grid container direction=\"column\" className={classes.AdditionalInfo}>\n        <CategoryHeader text={t`About movie`} />\n        <Typography variant=\"body1\" className={classes.Description}>\n          {movie[i18n.language as 'en' | 'ru'].info.description || t`No info`}\n        </Typography>\n        <Divider className={classes.Divider} />\n        {movie.en.info.photos && (\n          <HorizontalGrid\n            sources={movie.en.info.photos}\n            name={movie.en.title}\n            type={'photo'}\n          />\n        )}\n        {movie.en.info.videos && (\n          <HorizontalGrid\n            sources={movie.en.info.videos}\n            name={movie.en.title}\n            type={'video'}\n          />\n        )}\n        <Comments movie={movie.en} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default MovieFullInfo;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useSelector } from 'react-redux';\nimport classnames from 'classnames';\nimport { RootState } from '../../../store/rootReducer';\nimport { Paper } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      minWidth: '344px !important',\n    },\n  },\n  card: {\n    display: 'flex',\n    width: '100%',\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  prompt: {\n    backgroundColor: theme.palette.grey[800],\n    width: 550,\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: 'block',\n    fontWeight: 'bold',\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: '8px 8px 8px 26px',\n  },\n  close: {\n    marginLeft: 'auto !important',\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: '1rem',\n    color: theme.palette.common.white,\n  },\n}));\n\ninterface Props {\n  id: string;\n}\n\nconst SnackMessage = React.forwardRef<HTMLDivElement, Props>(({ id }, ref) => {\n  const classes = useStyles();\n  const { closeSnackbar } = useSnackbar();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n\n  const handleDismiss = () => {\n    closeSnackbar(id);\n  };\n\n  return (\n    <Paper ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}:\n            </Typography>\n          )}\n          {text && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {text}\n            </Typography>\n          )}\n        </CardActions>\n\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </Paper>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { removeSnack } from '../../store/features/SnackSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nlet displayed: string[] = [];\n\nconst Notifier = () => {\n  const dispatch = useAppDispatch();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id: string) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id: string) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (_event, key: string) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ForgotPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      try {\n        const res = await passwd.post('repair', { email: inputs.email });\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Check your email` });\n        } else {\n          console.log(res.data[i18n.language]);\n          toast({ text: res.data[i18n.language] || t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Restore password`,\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport { getSearchParam } from '../../utils';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ResetPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ password: '', confirm: '' });\n  const [valid, setValid] = useState({ password: false, confirm: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.password && valid.confirm;\n  const { toast } = useToast();\n  const history = useHistory();\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      const searchParams = getSearchParam();\n      if (!searchParams?.repairToken) {\n        toast({ text: t`ServerErrorTry` }, 'error');\n        history.push('/forgot_password');\n        return;\n      }\n      try {\n        const res = await passwd.patch(\n          'repair/patch',\n          { passwd: inputs.password },\n          { headers: { repairToken: searchParams.repairToken } }\n        );\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Password changed` });\n          history.push('/login');\n        } else {\n          toast({ text: res.data[i18n.language] ?? t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'password',\n          type: 'password',\n          label: t`New password`,\n          placeholder: t`Enter password`,\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t`passwordError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t`Confirm`,\n          placeholder: t`Confirm password`,\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t`confirmError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new password`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, i18n.language, toast, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ResetPassword;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { email } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ChangeEmail = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ChangeEmail] handleSubmit', inputs);\n\n      // use cookie or repairToken to get new email\n      try {\n        const res = await email.post('patch', {\n          body: { email: inputs.email },\n        });\n        console.log(res);\n        if (res.status < 400) {\n          toast(t`Check your email`);\n        } else {\n          console.log(res.data[i18n.language]);\n          const message = {\n            text: res.data[i18n.language] ?? t`Server error`,\n          };\n\n          toast(message, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, t, i18n.language, toast]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) => {\n            setValid((prev) => ({ ...prev, email: isValid }));\n          },\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new email`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, formValid, handleInput, handleSubmit, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ChangeEmail;\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.41c95564.png\";","import { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useState, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { email, passwd, profile } from '../../axios';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport defaultAvatar from '../../images/defaultAvatar.png';\nimport { BackupRounded } from '@material-ui/icons';\nimport { RootState } from '../../store/rootReducer';\nimport { useSelector } from 'react-redux';\nimport { useToast } from '../../hooks/useToast';\nimport { getToken, saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  avatarWrapper: {\n    position: 'relative',\n    '&:hover': {\n      cursor: 'pointer',\n      '& $uploadIcon': {\n        opacity: 0.7,\n      },\n      '& $avatarImage': {\n        opacity: 0.5,\n      },\n    },\n  },\n  avatarImage: {\n    width: '100px',\n    height: '100px',\n    border: '2px solid rgba(3, 82, 99, 0.5)',\n    opacity: 1,\n    transition: '0.2s',\n  },\n  inputNone: {\n    display: 'none',\n  },\n  uploadIcon: {\n    position: 'absolute',\n    transition: '0.2s',\n    top: 20,\n    left: 20,\n    width: 60,\n    height: 60,\n    opacity: 0,\n    zIndex: 2,\n  },\n});\n\nconst Settings = () => {\n  const user = useSelector((state: RootState) => state.user);\n  const [inputs, setInputs] = useState({\n    email: user.email,\n    username: user.username,\n    newPassword: '',\n    currentPassword: '',\n    confirm: '',\n    avatarImage: user.imageBody,\n  });\n  const [valid, setValid] = useState({\n    email: true,\n    newPassword: true,\n    currentPassword: true,\n    confirm: true,\n    username: true,\n  });\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const validateForm = () => {\n    const { email, username, currentPassword, confirm } = valid;\n    return inputs.newPassword\n      ? currentPassword && confirm && (email || username)\n      : email || username;\n  };\n  const formValid = validateForm();\n\n  const validateUpload = (file: File) => {\n    return (\n      file.type === 'image/png' ||\n      file.type === 'image/jpg' ||\n      file.type === 'image/jpeg'\n    );\n  };\n\n  const uploadAvatar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) return;\n    let file = e.target.files[0];\n    if (!validateUpload(file)) {\n      e.target.value = '';\n      return toast({ text: 'Please add image only!' });\n    }\n    if (file.size > 2000000) {\n      e.target.value = '';\n      return toast({ text: 'Please upload picture size less then 2 mb!' });\n    }\n    let reader = new FileReader();\n    reader.onload = async function (e) {\n      if (!e.target || !e.target.result) return;\n      const image = e.target.result.toString();\n      setInputs({\n        ...inputs,\n        avatarImage: image,\n      });\n      const body = {\n        imageBody: image,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      // console.log(res.data);\n      if (res.status >= 400) toast({ text: t`Avatar upload error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              imageBody: image,\n            },\n          })\n        );\n        toast({ text: t`Avatar uploaded` });\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs((prevInputs) => ({\n        ...prevInputs,\n        [e.target.name]: e.target.value,\n      }));\n    };\n\n    const updateEmail = async () => {\n      const body = {\n        email: inputs.email,\n      };\n      const res = await email.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              email: inputs.email,\n            },\n          })\n        );\n        toast({ text: t`Check your email` });\n      }\n    };\n\n    const updateUsername = async () => {\n      const body = {\n        username: inputs.username,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              username: inputs.username,\n            },\n          })\n        );\n        toast({ text: t`User info updated` });\n      }\n    };\n\n    const updatePassword = async () => {\n      const body = {\n        passwd: inputs.currentPassword,\n        newPasswd: inputs.newPassword,\n      };\n      const res = await passwd.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        toast({ text: t`User info updated` });\n        setInputs({\n          ...inputs,\n          currentPassword: '',\n          confirm: '',\n          newPassword: '',\n        });\n      }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      if (inputs.email !== user.email) updateEmail();\n      if (inputs.username !== user.username) updateUsername();\n      if (inputs.newPassword) updatePassword();\n      console.log('[Settings] handleSubmit', inputs);\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 0,\n              maxLength: 40,\n              regex: /^(([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,}))?$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w-+.]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'newPassword',\n          type: 'password',\n          label: t('New password'),\n          placeholder: t('Enter new password'),\n          value: inputs.newPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: /^((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.newPassword}$`),\n            },\n          },\n        },\n        {\n          name: 'currentPassword',\n          type: 'password',\n          label: t('Current password'),\n          placeholder: t('Enter current password'),\n          value: inputs.currentPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('currentPasswordError'),\n            rule: {\n              minLength: inputs.newPassword.length ? 1 : 0,\n              maxLength: 25,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Save'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: () => history.goBack(),\n          text: t`Back`,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, dispatch, i18n.language, toast, user, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Typography>{t('Settings').toUpperCase()}</Typography>\n      <div\n        className={classes.avatarWrapper}\n        onClick={() => {\n          if (inputRef && inputRef.current) {\n            inputRef.current.click();\n          }\n        }}\n      >\n        <Avatar\n          className={classes.avatarImage}\n          alt=\"profile image\"\n          src={inputs.avatarImage || defaultAvatar}\n        />\n        <BackupRounded className={classes.uploadIcon} />\n        <input\n          className={classes.inputNone}\n          type=\"file\"\n          accept=\"image/png, image/jpeg, image/jpg\"\n          ref={inputRef}\n          onChange={uploadAvatar}\n        />\n      </div>\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Settings;\n","import React, { useEffect } from 'react';\nimport { Container, makeStyles } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { theme } from './theme';\nimport { useSelector } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { getSearchParam } from './utils';\nimport { useAppDispatch } from './store/store';\nimport { RootState } from './store/rootReducer';\nimport { getSelfInfo, getToken } from './store/features/UserSlice';\nimport { useToast } from './hooks/useToast';\n\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport MainPage from './pages/MainPage/MainPage';\nimport RegisterPage from './pages/RegisterPage/RegisterPage';\n\nimport Auth from './components/Auth/Auth';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport MovieFullInfo from './components/MovieFullInfo/MovieFullInfo';\nimport SnackMessage from './components/Notifier/SnackMessage/SnackMessage';\nimport Notifier from './components/Notifier/Notifier';\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ResetPassword from './components/ResetPassword/ResetPassword';\nimport ChangeEmail from './components/ChangeEmail/ChangeEmail';\nimport Settings from './components/Settings/Settings';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: '100%',\n    minWidth: 500,\n    margin: 0,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n    },\n  },\n  Wrapper: {\n    maxWidth: 840,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n      margin: 0,\n    },\n  },\n  Slider: {\n    height: 400,\n    minHeight: 300,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { toast } = useToast();\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    const urlParams = getSearchParam();\n    console.log(urlParams);\n    if (urlParams?.error) {\n      const lang = i18n.language as 'en' | 'ru';\n      toast({ text: urlParams.error[lang] as string }, 'error');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const token = getToken();\n    if (token) {\n      dispatch(getSelfInfo());\n    }\n  }, [dispatch]);\n\n  const routes = isAuth ? (\n    <Switch>\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/change_email\" component={ChangeEmail} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/search/:id\"\n        render={(props) => <MainPage {...props} route={'search'} />}\n      />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  ) : (\n    <Switch>\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/register\" component={RegisterPage} />\n      <Route path=\"/login\" component={LoginPage} />\n      <Route path=\"/reset_password\" component={ResetPassword} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/search/:id\"\n        render={(props) => <MainPage {...props} route={'search'} />}\n      />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  );\n\n  return (\n    <Container className={classes.root}>\n      <Container className={classes.Wrapper}>\n        <SnackbarProvider\n          maxSnack={3}\n          classes={{ containerRoot: classes.root }}\n          content={(key: string) => <SnackMessage id={key} />}\n        >\n          <Header />\n          {routes}\n          <Footer />\n          <Notifier />\n        </SnackbarProvider>\n      </Container>\n    </Container>\n  );\n}\n\nexport default App;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { movies, search as axiosSearch } from '../../axios';\nimport { IComment, ITranslatedMovie } from '../../models/MovieInfo';\nimport { AppDispatch } from '../store';\nimport { CountriesKeys, GenresKeys } from './FilterSlice';\n\nexport interface MoviesItems {\n  search?: ITranslatedMovie[];\n  popular?: ITranslatedMovie[];\n  byName?: ITranslatedMovie[];\n}\n\nexport type MovieItemsKeys = keyof MoviesItems;\nexport interface CommentsItems {\n  comments: IComment[];\n  id?: string;\n}\nexport interface ErrorItem {\n  error: MoviesError;\n}\n\nexport interface MoviesState {\n  loading: boolean;\n  error: MoviesError | null;\n  movies: ITranslatedMovie[];\n  search: string[];\n  popular: string[];\n  byName: string[];\n  isEndOfMovies: boolean;\n}\n\ninterface MoviesError {\n  ru: string;\n  en: string;\n}\n\nexport interface IMoviesResponse {\n  data: ITranslatedMovie[] | null;\n  error: MoviesError;\n  status: boolean;\n}\n\nexport interface IFilter {\n  limit?: number;\n  offset?: number;\n  letter?: string;\n  search?: string;\n  genres?: GenresKeys[];\n  years?: [] | number[][];\n  countries?: CountriesKeys[];\n  id?: string | number;\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  movies: [],\n  search: [],\n  popular: [],\n  byName: [],\n  isEndOfMovies: false,\n} as MoviesState;\n\nconst MoviesSlice = createSlice({\n  name: 'movies',\n  initialState,\n  reducers: {\n    addMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const add = (type: MovieItemsKeys) => {\n        console.log(\n          '[loadMovies] payload, moviesLength',\n          payload,\n          state.movies.length\n        );\n        if (!payload[type] || !payload[type]?.length) return;\n        if (state.movies.length) {\n          const newMovies = payload[type]?.filter(\n            (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n          );\n          console.log('[loadMovies] newMovies', newMovies);\n          if (newMovies?.length) {\n            state.movies = state.movies.concat(newMovies);\n          }\n          // set unique movie ids\n          const set = new Set(\n            state[type].concat((payload[type] || []).map((el) => el.en.id))\n          );\n          state[type] = Array.from(set);\n        } else {\n          const arr = payload[type] || [];\n          state.movies = arr;\n          state[type] = arr.map((el) => el.en.id);\n        }\n      };\n\n      state.loading = false;\n      if (payload.search) {\n        add('search');\n      } else if (payload.byName) {\n        add('byName');\n      } else if (payload.popular) {\n        add('popular');\n      } else {\n        throw new Error('[movies:addMovies] no movies in payload');\n      }\n    },\n    setMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const set = (type: MovieItemsKeys) => {\n        if (!payload[type]) return;\n        // state[type] = payload[type] || [];\n        const newMovies = payload[type]?.filter(\n          (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n        );\n        if (newMovies) {\n          state.movies = state.movies.concat(newMovies);\n          state[type] = payload[type]?.map((el) => el.en.id) || [];\n        }\n      };\n      state.loading = false;\n      if (payload.search) {\n        set('search');\n      } else if (payload.byName) {\n        set('byName');\n      } else if (payload.popular) {\n        set('popular');\n      } else {\n        throw new Error('[movies:setMovies] no movies in payload');\n      }\n    },\n    updateComments(state, { payload }: PayloadAction<CommentsItems>) {\n      state.loading = false;\n      if (!payload.id)\n        throw new Error('[movies:updateComments] no id in payload');\n      if (!payload.comments)\n        throw new Error('[movies:updateComments] no comments in payload');\n      const movie = state.movies.find((movie) => movie.en.id === payload.id);\n      if (!movie) throw new Error('[movies:updateComments] no movie found');\n      const newComments = payload.comments.filter((comment) =>\n        movie.en.info.comments\n          ? !movie.en.info.comments.find(\n              (el) => el.commentid === comment.commentid\n            )\n          : !!comment\n      );\n      movie.en.info.comments = movie.en.info.comments\n        ? [...movie.en.info.comments, ...newComments]\n        : [...newComments];\n    },\n    setEndOfMovies(state) {\n      state.isEndOfMovies = true;\n    },\n    resetEndOfMovies(state) {\n      state.isEndOfMovies = false;\n    },\n    setError(state, { payload }: PayloadAction<ErrorItem>) {\n      state.error = payload.error;\n      state.loading = false;\n    },\n    resetError(state) {\n      state.error = null;\n      state.loading = false;\n    },\n    startLoading(state) {\n      state.loading = true;\n    },\n    stopLoading(state) {\n      state.loading = false;\n    },\n  },\n});\n\nconst loadMoviesAsync = async (\n  params?: IFilter\n): Promise<IMoviesResponse | null> => {\n  try {\n    console.log('[loadMoviesAsync] params', params);\n    let res = null;\n    if (params?.search)\n      res = await axiosSearch('find', {\n        params: {\n          category: 'All',\n          search: params?.search,\n        },\n      });\n    else if (params?.letter)\n      res = await movies(`byname`, {\n        params,\n      });\n    else\n      res = await movies('movies', {\n        params,\n      });\n\n    // console.log(res.data);\n    return res.data;\n  } catch (e) {\n    console.log(e);\n    return null;\n  }\n};\n\nexport const loadMovies = ({\n  filter = {\n    limit: 20,\n    offset: 0,\n  },\n  callback,\n}: {\n  filter?: IFilter;\n  callback?: (arg0: boolean) => void;\n}) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const limit = filter.limit || 20;\n  console.log('[loadMovies] filter', filter);\n  const movies = await loadMoviesAsync(filter);\n  console.log('[loadMovies] res', movies);\n\n  if (movies?.status && movies.data) {\n    if (movies.data.length < limit) dispatch(setEndOfMovies());\n    const removedNulls = movies.data?.map((el) =>\n      !el.ru ? { en: el.en, ru: el.en } : el\n    );\n    console.log('[loadMovies] removedNulls:', removedNulls);\n    if (filter.letter) dispatch(addMovies({ byName: removedNulls }));\n    else if (filter.search)\n      filter.offset && filter.offset > 0\n        ? dispatch(addMovies({ search: removedNulls }))\n        : dispatch(setMovies({ search: removedNulls }));\n    else dispatch(addMovies({ popular: removedNulls }));\n    if (callback)\n      callback(movies && movies.data ? movies.data.length < limit : true);\n    return removedNulls;\n  } else {\n    dispatch(stopLoading());\n    if (movies?.error) dispatch(setError({ error: movies.error }));\n    return null;\n  }\n};\n\nexport const loadMovie = (id: string) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const movie = await loadMoviesAsync({ id });\n  console.log('loadMovie', movie);\n  if (movie?.status && movie.data) dispatch(addMovies({ search: movie.data }));\n  else {\n    const error = {\n      ru: '  ',\n      en: 'Cannot load movie',\n    };\n    dispatch(setError({ error }));\n  }\n};\n\n/**\n * loads comments\n * @param params object with values:\n *    @param movieId movieId to find it in redux\n *    @param limit number of comments to fetch, default 5\n *    @param offset comments offset, default 0\n * @param callback fires when end of comments is reached\n */\nexport const loadComments = (\n  {\n    movieId,\n    limit = 5,\n    offset = 0,\n  }: { movieId: string; limit?: number; offset?: number },\n  callback?: (length: number) => void\n) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const res = await movies('comments', {\n    params: {\n      movieId,\n      limit,\n      offset,\n    },\n  });\n  console.log('loadComments', res.data);\n  if (res.data.status) {\n    const comments = res.data.data as IComment[];\n    comments.length && dispatch(updateComments({ comments, id: movieId }));\n    if (callback) callback(comments.length);\n  }\n};\n\nexport const {\n  addMovies,\n  setMovies,\n  updateComments,\n  setEndOfMovies,\n  resetEndOfMovies,\n  setError,\n  resetError,\n  startLoading,\n  stopLoading,\n} = MoviesSlice.actions;\n\nexport default MoviesSlice.reducer;\n","import axios from 'axios';\nexport const CancelToken = axios.CancelToken;\n\nexport const auth = axios.create({\n  baseURL: `/api/auth/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const profile = axios.create({\n  baseURL: `/api/profile/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const passwd = axios.create({\n  baseURL: `/api/passwd/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const email = axios.create({\n  baseURL: `/api/email/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const search = axios.create({\n  baseURL: `/api/search/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const movies = axios.create({\n  baseURL: `/api/movies/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const test = axios.create({\n  baseURL: `/api/test/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const main = axios.create({\n  baseURL: `/api/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\n// GET /api/info\n\n// GET /api/auth/basic\n// GET /api/auth/oauth42\n\n// GET /api/profile/get (       user_id          )\n// PUT /api/profile/create\n// PATCH /api/profile/patch\n// DELETE /api/profile/delete\n\n// PATCH /api/email/patch\n// POST /api/email/confirm\n// POST /api/email/resend\n\n// PATCH /api/passwd/patch\n// POST /api/passwd/repair\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { profile } from '../../axios';\nimport { AppDispatch } from '../store';\n\nconst tokenKey = 'hypertubeAuthToken';\n\ninterface IUserPayload {\n  user: IUser;\n}\n\nexport interface IUser {\n  userId: number;\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  imageBody: string | null;\n}\n\nexport type IUserState = IUser & {\n  isAuth: boolean;\n  isLoading: boolean;\n};\n\nconst initialState: IUserState = {\n  isAuth: false,\n  isLoading: false,\n  userId: 0,\n  email: '',\n  username: '',\n  firstName: '',\n  lastName: '',\n  imageBody: null,\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    saveUserState(state, { payload }: PayloadAction<IUserPayload>) {\n      if (!payload.user)\n        throw new Error('[userSlice:saveState] no user in payload');\n      //   Object.keys(payload.user).map((k) => {\n      //     const key = k as IUserKeys;\n      //     state[key] = payload.user[key];\n      //   });\n      return {\n        isAuth: state.isAuth,\n        isLoading: state.isLoading,\n        userId: payload.user.userId || state.userId,\n        email: payload.user.email || state.email,\n        username: payload.user.username || state.username,\n        firstName: payload.user.firstName || state.firstName,\n        lastName: payload.user.lastName || state.lastName,\n        imageBody: payload.user.imageBody || state.imageBody,\n      };\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n    },\n    authFail(state) {\n      state.isAuth = false;\n    },\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n  },\n});\n\nexport const getSelfInfo = () => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  try {\n    const res = await profile('get', {\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n    console.log(res.data);\n    if (res.data.en) {\n      dispatch(authFail());\n      removeToken();\n    } else {\n      dispatch(\n        saveUserState({\n          user: res.data as IUser,\n        })\n      );\n      dispatch(authSuccess());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  dispatch(stopLoading());\n};\n\nexport const saveToken = (token: string) => {\n  localStorage.setItem(tokenKey, token);\n};\n\nexport const removeToken = (key: string = tokenKey) => {\n  localStorage.removeItem(key);\n};\n\nexport const getToken = () => localStorage.getItem(tokenKey);\n\nexport const {\n  saveUserState,\n  authSuccess,\n  authFail,\n  startLoading,\n  stopLoading,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { createMuiTheme } from '@material-ui/core';\n\nexport const primaryColor = {\n  light: '#05829E',\n  main: '#035263',\n  dark: '#02313B',\n  contrastText: '#fff',\n};\nexport const secondaryColor = {\n  light: '#F19941',\n  main: '#EE851B',\n  dark: '#D17010',\n  contrastText: '#fff',\n  contrastTextLighter: '#333',\n};\nexport const backgroundColor = {\n  light: '#FFFFFF',\n  default: '#FAFAFA',\n  dark: '#DDDDDD',\n  contrastText: '#121212',\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    background: backgroundColor,\n  },\n  typography: {\n    fontFamily: [\n      '\"Quicksand\"',\n      '\"Helvetica Neue\"',\n      'Roboto',\n      'Arial',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n  props: {\n    MuiButton: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n  },\n});\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../rootReducer';\nimport { AppDispatch } from '../store';\nimport { IFilter, loadMovies } from './MoviesSlice';\n\nexport interface IGenres {\n  Action: boolean;\n  Adventure: boolean;\n  Animation: boolean;\n  Biography: boolean;\n  Comedy: boolean;\n  Crime: boolean;\n  Documentary: boolean;\n  Drama: boolean;\n  Family: boolean;\n  Fantasy: boolean;\n  'Film Noir': boolean;\n  History: boolean;\n  Horror: boolean;\n  Music: boolean;\n  Mystery: boolean;\n  Romance: boolean;\n  'Sci-Fi': boolean;\n  Short: boolean;\n  Sport: boolean;\n  Superhero: boolean;\n  Thriller: boolean;\n  War: boolean;\n  Western: boolean;\n}\nexport type GenresKeys = keyof IGenres;\nexport interface IYears {\n  'before 1980': boolean;\n  '1980-1990': boolean;\n  '1990-2000': boolean;\n  '2000-2010': boolean;\n  '2010-2020': boolean;\n}\nexport type YearsKeys = keyof IYears;\nexport interface ICountries {\n  Australia: boolean;\n  Canada: boolean;\n  France: boolean;\n  Germany: boolean;\n  'Great Britain': boolean;\n  India: boolean;\n  Japan: boolean;\n  Russia: boolean;\n  Spain: boolean;\n  USA: boolean;\n  USSR: boolean;\n  other: boolean;\n}\nexport type CountriesKeys = keyof ICountries;\n\nexport const items = {\n  genres: [\n    'Action',\n    'Adventure',\n    'Animation',\n    'Biography',\n    'Comedy',\n    'Crime',\n    'Documentary',\n    'Drama',\n    'Family',\n    'Fantasy',\n    'Film Noir',\n    'History',\n    'Horror',\n    'Music',\n    'Mystery',\n    'Romance',\n    'Sci-Fi',\n    'Short',\n    'Sport',\n    'Superhero',\n    'Thriller',\n    'War',\n    'Western',\n  ] as GenresKeys[],\n  years: [\n    'before 1980',\n    '1980-1990',\n    '1990-2000',\n    '2000-2010',\n    '2010-2020',\n  ] as YearsKeys[],\n  countries: [\n    'Australia',\n    'Canada',\n    'France',\n    'Germany',\n    'Great Britain',\n    'India',\n    'Japan',\n    'Russia',\n    'Spain',\n    'USA',\n    'USSR',\n    'other',\n  ] as CountriesKeys[],\n  // additional: ['subtitles', 'HD', 'Multi-audio'],\n};\n\nexport interface GenresItem {\n  category: 'genres';\n  name: GenresKeys;\n  value: boolean;\n}\n\nexport interface YearsItem {\n  category: 'years';\n  name: YearsKeys;\n  value: boolean;\n}\n\nexport interface CountriesItem {\n  category: 'countries';\n  name: CountriesKeys;\n  value: boolean;\n}\n\nexport interface SetFilterPayload {\n  filter: GenresItem | YearsItem | CountriesItem;\n}\n\nexport interface FilterState {\n  genres: IGenres;\n  years: IYears;\n  countries: ICountries;\n}\nexport type FilterStateKeys = keyof FilterState;\n\nconst initialState = {\n  genres: {\n    Action: false,\n    Adventure: false,\n    Animation: false,\n    Biography: false,\n    Comedy: false,\n    Crime: false,\n    Documentary: false,\n    Drama: false,\n    Family: false,\n    Fantasy: false,\n    'Film Noir': false,\n    History: false,\n    Horror: false,\n    Music: false,\n    Mystery: false,\n    Romance: false,\n    'Sci-Fi': false,\n    Short: false,\n    Sport: false,\n    Superhero: false,\n    Thriller: false,\n    War: false,\n    Western: false,\n  },\n  years: {\n    'before 1980': false,\n    '1980-1990': false,\n    '1990-2000': false,\n    '2000-2010': false,\n    '2010-2020': false,\n  },\n  countries: {\n    Australia: false,\n    Canada: false,\n    France: false,\n    Germany: false,\n    'Great Britain': false,\n    India: false,\n    Japan: false,\n    Russia: false,\n    Spain: false,\n    USA: false,\n    USSR: false,\n    other: false,\n  },\n  // additional: { subtitles: false, HD: false, 'Multi-audio': false },\n};\n\nconst filterSlice = createSlice({\n  name: 'filter',\n  initialState,\n  reducers: {\n    setFilterState(state, { payload }: PayloadAction<SetFilterPayload>) {\n      const { category, name, value } = payload.filter;\n      return {\n        ...state,\n        [category]: {\n          ...state[category],\n          [name]: value,\n        },\n      };\n    },\n    resetFilterState() {\n      return initialState;\n    },\n  },\n});\n// category: 'genres' | 'years' | 'countries',\n\nconst isCountriesKey = (value: string): value is CountriesKeys => {\n  const allowedKeys: string[] = items.countries.filter((el) => el !== 'other');\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isGenresKey = (value: string): value is GenresKeys => {\n  const allowedKeys: string[] = items.genres;\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isYearsKey = (value: string): value is YearsKeys => {\n  const allowedKeys: string[] = items.years;\n  return allowedKeys.indexOf(value) !== -1;\n};\n\nexport const isCountiesStateEmpty = (state: ICountries) => {\n  for (let country in state) {\n    if (isCountriesKey(country) && state[country]) return false;\n  }\n  return true;\n};\nexport const isYearsStateEmpty = (state: IYears) => {\n  for (let year in state) {\n    if (isYearsKey(year) && state[year]) return false;\n  }\n  return true;\n};\nexport const isGenresStateEmpty = (state: IGenres) => {\n  for (let genre in state) {\n    if (isGenresKey(genre) && state[genre]) return false;\n  }\n  return true;\n};\n\nconst getYearsFilter = (years: IYears): number[][] | [] => {\n  const yearsArray = items.years.filter(\n    (value) => years[value] && [value, years[value]]\n  );\n\n  const result: number[][] = [];\n  yearsArray.forEach((year) => {\n    if (year.startsWith('before')) {\n      result.push([0, 1980]);\n    } else if (\n      result.length > 0 &&\n      year.match(`${result[result.length - 1][1]}`)\n    ) {\n      // if last value in result contains one of current years\n      // (actually, if it's true - should find the first one)\n      // then we replace that year with the second one\n      const arr = year.split('-');\n      result[result.length - 1][1] = +arr[1];\n    } else {\n      const arr = year.split('-');\n      result.push([+arr[0], +arr[1]]);\n    }\n  });\n  console.log(result);\n  return result;\n};\n\n/**\n * Requests movies, based on filterState.\n * Empty or object with fields required.\n * @param param0 object with _limit and _start fields\n */\nexport const reqeuestMoviesWithFilters = (\n  filter: IFilter = {\n    limit: 20,\n    offset: 0,\n  }\n) => async (dispatch: AppDispatch, getState: () => RootState) => {\n  const filterState = getState().filter;\n  const genres = items.genres.filter(\n    (value) => filterState.genres[value] && [value, filterState.genres[value]]\n  );\n  const years = getYearsFilter(filterState.years);\n  const countries = items.countries.filter(\n    (value) =>\n      filterState.countries[value] && [value, filterState.countries[value]]\n  );\n  const filterParams = { ...filter, genres, years, countries };\n\n  console.log(filterParams);\n  dispatch(loadMovies({ filter: filterParams }));\n};\n\nexport const yearInRange = (year: number, years: IYears) => {\n  for (let entry of Object.entries(years)) {\n    if (!entry[1]) continue;\n    const rangeNumbers = entry[0].startsWith('before')\n      ? [0, +entry[0].split(' ')[1]]\n      : entry[0].split('-').map((x) => +x);\n    if (year >= rangeNumbers[0] && year < rangeNumbers[1]) return true;\n  }\n  return false;\n};\nexport const genreInGenres = (\n  movieGenres: GenresKeys[],\n  filterGenres: IGenres\n) => {\n  for (let genre of movieGenres) {\n    if (filterGenres[genre]) return true;\n  }\n  return false;\n};\nexport const countryInCountries = (\n  movieCountries: string[],\n  filterCountries: ICountries\n) => {\n  for (let country of movieCountries) {\n    return isCountriesKey(country)\n      ? filterCountries[country]\n      : filterCountries.other;\n  }\n  return false;\n};\n\nexport const { setFilterState, resetFilterState } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport languageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\n\ni18n\n  .use(Backend)\n  .use(languageDetector)\n  .use(initReactI18next)\n  .init({\n    lng: 'en',\n    fallbackLng: 'en',\n    backend: {\n      loadPath: 'http://localhost:3000/locales/{{lng}}/{{ns}}.json',\n    },\n    detection: ['queryString', 'cookie'],\n    cache: ['cookie'],\n    debug: false,\n    interpolation: {\n      escapeValue: false,\n    },\n  });\n\nexport default i18n;\n","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport { theme } from './theme';\n\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport './i18n';\n\nif (process.env.NODE_ENV === 'production') console.log = () => {};\nexport const LIMIT = +(process.env.REACT_APP_LOAD_LIMIT || 5);\n\nconst render = () => {\n  const App = require('./App').default;\n\n  ReactDOM.render(\n    // <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter>\n          <Suspense fallback={<div>Loading...</div>}>\n            <CssBaseline />\n            <App />\n          </Suspense>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>,\n    // </React.StrictMode>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render);\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface SortingItem {\n  sortBy: string | null;\n}\n\nexport interface UIState {\n  sortBy: string | null;\n  view: 'grid' | 'lines';\n}\n\nconst initialState = {\n  sortBy: null,\n  view: 'lines',\n} as UIState;\n\nconst UISlice = createSlice({\n  name: 'UI',\n  initialState,\n  reducers: {\n    setSortingBy(state, { payload }: PayloadAction<SortingItem>) {\n      state.sortBy = payload.sortBy;\n    },\n    changeView(state) {\n      state.view = state.view === 'grid' ? 'lines' : 'grid';\n    },\n  },\n});\n\nexport const { setSortingBy, changeView } = UISlice.actions;\n\nexport default UISlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type IVariant = 'default' | 'info' | 'warning' | 'success' | 'error';\nexport interface INotification {\n  key: string;\n  text: string;\n  variant: IVariant;\n  header?: string;\n  options?: any;\n  dismissed?: boolean;\n}\n\ninterface ISnackState {\n  notifications: INotification[];\n}\n\nconst initialState = {\n  notifications: [],\n} as ISnackState;\n\nconst snackSlice = createSlice({\n  name: 'snack',\n  initialState,\n  reducers: {\n    addSnack(state, { payload }: PayloadAction<INotification>) {\n      const hasSameMessageAndVariant = state.notifications.find(\n        (msg) => msg.text === payload.text && msg.variant === payload.variant\n      );\n      if (!hasSameMessageAndVariant) state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n"],"sourceRoot":""}
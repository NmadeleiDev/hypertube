{"version":3,"sources":["store/rootReducer.ts","store/store.ts","utils.ts","hooks/useToast.ts","components/Dropdown/Dropdown.tsx","components/Input/Input.tsx","components/Form/Form.tsx","components/OAuthButton/OAuthButton.tsx","components/Login/Login.tsx","pages/LoginPage/LoginPage.tsx","components/AlphabetNav/AlphabetNav.tsx","components/Rating/Rating.tsx","components/MovieCardMedium/MovieCardMedium.tsx","components/MovieCard/MovieCard.tsx","components/MovieCard/CardLoader/CardLoader.tsx","components/Cards/Cards.tsx","components/CardsSlider/CardsSlider.tsx","components/Filter/Filter.tsx","components/Sort/Sort.tsx","components/GridToLinesButton/GridToLinesButton.tsx","components/FilterSortPanel/FilterSortPanel.tsx","pages/MainPage/MainPage.tsx","components/Register/Register.tsx","pages/RegisterPage/RegisterPage.tsx","components/Auth/Auth.tsx","components/Footer/Footer.tsx","components/Search/Search.tsx","components/Internationalization/Internationalization.tsx","components/UserInfo/UserInfo.tsx","components/Logo/Logo.tsx","components/Header/Header.tsx","components/CategoryHeader/CategoryHeader.tsx","components/HorizontalGrid/HorizontalGrid.tsx","components/Comments/Comment/Comment.tsx","components/Comments/SendComment/SendComment.tsx","components/Comments/Comments.tsx","components/Player/PlayerControls.tsx","components/Player/Player.tsx","components/Player/ActivePeers.tsx","components/MovieFullInfo/MovieFullInfo.tsx","components/Notifier/SnackMessage/SnackMessage.tsx","components/Notifier/Notifier.tsx","components/ForgotPassword/ForgotPassword.tsx","components/ResetPassword/ResetPassword.tsx","components/ChangeEmail/ChangeEmail.tsx","images/defaultAvatar.png","components/Settings/Settings.tsx","pages/SearchPage/SearchPage.tsx","App.tsx","store/features/MoviesSlice.ts","axios.ts","store/features/UserSlice.ts","theme.ts","store/features/FilterSlice.ts","i18n.ts","index.tsx","store/features/UISlice.ts","store/features/SnackSlice.ts"],"names":["rootReducer","combineReducers","UI","movies","filter","user","snack","store","configureStore","reducer","useAppDispatch","useDispatch","getSearchParam","search","searchString","window","location","params","decodeURI","replaceAll","slice","split","reduce","acc","cur","keyValue","JSON","parse","notEmpty","value","undefined","useToast","dispatch","toast","useCallback","message","variant","options","addSnack","key","uuid","text","header","autoHideDuration","useStyles","makeStyles","root","position","Paper","padding","Open","transform","Item","fontSize","margin","contextValue","onClose","handlersContext","createContext","Dropdown","heroText","icon","items","buttonProps","children","useState","open","setOpen","anchorEl","useRef","classes","handleClose","className","Button","style","ref","onClick","endIcon","Popover","current","anchorOrigin","vertical","horizontal","transformOrigin","Grid","container","direction","alignItems","map","name","e","handleButtonClick","Provider","ButtonListItem","justifyContent","Input","width","SmallSelector","minWidth","FormControl","display","flexDirection","RadioGroup","type","values","onValidate","onChange","rules","ignoreUntouched","rest","touched","setTouched","error","setError","errorText","setErrorText","React","useMemo","helperText","rule","useEffect","err","isRegexValid","regex","match","isFnValid","checkFn","length","minLength","maxLength","validate","TextField","id","onFocus","List","Buttons","Link","textDecoration","color","marginBottom","Form","inputs","buttons","cn","el","ListItem","to","others","OAuthButton","oauth","url","queryParams","facebook","vk","google","Icon42","height","src","alt","IconFacebook","viewBox","xmlns","fill","d","IconVk","cx","cy","r","fillRule","clipRule","IconGoogle","loading","setLoading","disabled","queryString","URLSearchParams","toString","href","aria-label","CircularProgress","Login","email","password","setInputs","valid","setValid","formValid","useContext","useTranslation","t","i18n","history","useHistory","handleInput","preventDefault","target","handleSubmit","a","console","log","authHeader","btoa","encodeURI","auth","headers","Authorization","res","data","accessToken","saveToken","getSelfInfo","push","language","handleForgot","formData","label","placeholder","size","fullWidth","required","isValid","prev","justify","LoginPage","Container","theme","createStyles","borderRadius","overflow","Scroller","flexWrap","overflowX","ShadowLeft","left","background","ShadowRight","right","palette","grey","flex","border","content","paddingTop","float","Active","borderColor","secondaryColor","main","AlphabetNav","useLocation","shadowLeft","shadowRight","shadow","setShadow","handleLinkClick","letter","currentTarget","innerText","currentLetter","pop","resetEndOfMovies","setMovies","byName","resetFilterState","loadMovies","limit","LIMIT","scrollHandler","throttle","stopPropagation","scrollLeft","scrollWidth","offsetWidth","onScroll","onWheel","scrollTo","top","deltaY","behavior","path","pathname","Typography","marginRight","Rating","movieId","imdbRating","ourRating","rating","setRating","isAuth","useSelector","state","handleRatingChange","newRating","patch","getToken","status","emptyIcon","Img","cursor","maxWidth","objectFit","opacity","PlayIconWrapper","backgroundColor","transition","PlayIcon","Info","Caption","Text","fontWeight","Description","maxHeight","flexGrow","Shadow","bottom","marginLeft","textTransform","primaryColor","light","MovieCardMedium","card","en","img","info","title","description","year","genres","item","Divider","Media","Name","MovieCard","movie","find","wrap","bg","ru","Card","backgroundSize","getCard","Header","marginTop","Math","floor","random","CardLoader","Skeleton","animation","Cards","sortBy","view","years","countries","isEndOfMovies","sortedCards","setSortedCards","gridRef","trackScrolling","element","callback1","callback2","delay","reserve","pageYOffset","innerHeight","offsetTop","offsetHeight","throttledDetectBottomLine","offset","then","setEndOfMovies","addEventListener","removeEventListener","cards","isYearsStateEmpty","yearInRange","isGenresStateEmpty","genreInGenres","isCountiesStateEmpty","countryInCountries","sort","cardA","cardB","localeCompare","sortByName","sortByYear","sortByRating","avalibility","sortByAvalibility","overflowY","Movie","CardsSlider","popular","minHeight","Actions","Filter","category","setCategory","filterState","handleShow","reqeuestMoviesWithFilters","handleFilterChange","setFilterState","checked","startIcon","TuneRounded","Dialog","aria-labelledby","paper","DialogTitle","DialogContent","ButtonGroup","xs","sm","FormControlLabel","control","Checkbox","getCheckboxes","DialogActions","Sort","setSortingBy","SortRounded","grow","GridToLinesButton","changeView","DashboardRounded","ViewAgendaRounded","FilterSortPanel","MainPage","route","displayedMovies","setDisplayedMovies","includes","textAlign","Register","username","confirm","body","passwd","profile","put","saveUserState","RegExp","RegisterPage","Auth","document","cookie","startsWith","tokenStart","token","expires","Date","toUTCString","updatedCookie","encodeURIComponent","Object","keys","forEach","optionValue","setCookie","Footer","styles","breakpoints","down","BaseInput","Icon","paddingRight","up","Popper","Search","setSearch","setAnchorEl","handleSearch","Boolean","InputBase","inputProps","input","onKeyPress","SearchRounded","aria-describedby","placement","TransitionProps","Fade","timeout","languages","Internationalization","lang","setLang","nextLang","changeLanguage","Type","marginAuto","UserInfo","avatar","imageBody","Avatar","removeToken","authFail","_0","_1","_2","_3","_4","Logo","SvgIcon","PersonOutlineRounded","h3","CategoryHeader","gridList","HorizontalScroll","Image","GridItem","controls","HorizontalGrid","sources","index","h4","Comment","substr","SendComment","userId","comment","setComment","sendForm","movieid","post","userid","time","getTime","updateComments","comments","onSubmit","multiline","ctrlKey","Comments","offsetRef","maxComments","loadComments","debounce","debouncedDetectBottomLine","commentid","controlsWrapper","zIndex","controlIcons","bottomIcons","volumeSlider","PlayerControls","withStyles","thumb","boxShadow","active","valueLabel","track","rail","Slider","forwardRef","props","IconButton","onRewind","FastRewind","onPlayPause","playing","Pause","onFastForward","FastForward","min","max","played","onSeek","onMouseDown","onSeekMouseDown","onChangeCommitted","onSeekMouseUp","onMuted","muted","VolumeOff","VolumeUp","volume","onVolumeChange","onVolumeSeekUp","onChangeDisplayFormat","elapsedTime","totalDuration","playbackRate","rate","onPlaybackRateChange","onToggleFullScreen","Fullscreen","playerWrapper","Error","format","seconds","isNaN","date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","padStart","Player","seeking","controlsVisible","setState","timeDisplayFormat","setTimeDisplayFormat","playerRef","playerContainerRef","controlsRef","timeoutId","currentTime","getCurrentTime","duration","getDuration","onMouseMove","visibility","clearTimeout","onProgress","setTimeout","onError","onBuffer","onBufferEnd","seekTo","_e","newValue","screenfull","isEnabled","toggle","initialState","activePeers","loadedPercent","ActivePeers","interval","setInterval","loadActivePeers","clearInterval","Poster","MainInfoText","Video","AdditionalInfo","MovieFullInfo","headerRef","loadMovie","resetError","scrollIntoView","backup","mapItems","join","views","pgRating","directorList","directors","cast","stars","photos","videos","default","prompt","success","warning","dark","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","notifications","classnames","CardActions","displayed","Notifier","enqueueSnackbar","dismissed","event","reason","onExited","_event","removeSnack","ForgotPassword","ResetPassword","searchParams","repairToken","ChangeEmail","avatarWrapper","avatarImage","inputNone","uploadIcon","Settings","newPassword","currentPassword","inputRef","validateForm","prevInputs","updateEmail","updateUsername","updatePassword","newPasswd","goBack","toUpperCase","click","defaultAvatar","BackupRounded","accept","files","file","validateUpload","reader","FileReader","onload","result","image","readAsDataURL","SearchPage","Wrapper","App","urlParams","routes","component","render","maxSnack","containerRoot","MoviesSlice","createSlice","reducers","addMovies","payload","add","newMovies","concat","set","Set","Array","from","arr","newComments","startLoading","stopLoading","loadMoviesAsync","axiosSearch","callback","removedNulls","axios","actions","CancelToken","create","baseURL","withCredentials","validateStatus","tokenKey","userSlice","isLoading","firstName","lastName","authSuccess","localStorage","setItem","removeItem","getItem","contrastText","contrastTextLighter","createMuiTheme","primary","secondary","typography","fontFamily","MuiButton","MuiTextField","Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Short","Sport","Superhero","Thriller","War","Western","Australia","Canada","France","Germany","India","Japan","Russia","Spain","USA","USSR","other","filterSlice","isCountriesKey","indexOf","country","genre","getYearsFilter","yearsArray","getState","filterParams","entries","entry","rangeNumbers","x","movieGenres","filterGenres","movieCountries","filterCountries","host","use","Backend","languageDetector","initReactI18next","init","lng","fallbackLng","backend","loadPath","detection","cache","debug","interpolation","escapeValue","process","REACT_APP_LOAD_LIMIT","require","ReactDOM","ThemeProvider","fallback","CssBaseline","getElementById","UISlice","snackSlice","msg","dismissSnack","notificaton","dismissAll"],"mappings":"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","file":"static/js/main.410719d7.chunk.js","sourcesContent":["import { combineReducers } from '@reduxjs/toolkit';\nimport UI from './features/UISlice';\nimport movies from './features/MoviesSlice';\nimport filter from './features/FilterSlice';\nimport user from './features/UserSlice';\nimport snack from './features/SnackSlice';\n\nconst rootReducer = combineReducers({ UI, movies, filter, user, snack });\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { useDispatch } from 'react-redux';\n\nimport rootReducer from './rootReducer';\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./rootReducer', () => {\n    const newRootReducer = require('./rootReducer').default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default store;\n","import { debounce, throttle } from 'lodash';\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const throttledDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  throttle(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\n/**\n * find scroll position at the end of scroll event\n * fires callback1 if we're reaching bottom line of a given element\n * (some pixels reserved to load in advance)\n * isEndOfMoviesRef.current is updated in a callback after fetched result\n */\nexport const debouncedDetectBottomLine = (\n  element: HTMLElement | null,\n  callback1: Function,\n  callback2?: Function,\n  delay: number = 500,\n  reserve: number = 100\n) =>\n  debounce(() => {\n    if (!element) return;\n    const scroll = window.pageYOffset + window.innerHeight;\n    const offset = element.offsetTop + element.offsetHeight;\n\n    if (scroll > offset - reserve) {\n      callback1 && callback1();\n    } else {\n      callback2 && callback2();\n    }\n  }, delay);\n\ninterface KnownOptions {\n  path?: string;\n  expires?: Date | string;\n}\ninterface IOptions extends KnownOptions {\n  [key: string]: string | Date | boolean | undefined;\n}\n\nexport const setCookie = (\n  name: string,\n  value: string,\n  options: IOptions = {}\n) => {\n  options = {\n    path: '/',\n    // при необходимости добавьте другие значения по умолчанию\n    ...options,\n  };\n\n  if (options.expires instanceof Date) {\n    options.expires = options.expires.toUTCString();\n  }\n\n  let updatedCookie =\n    encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\n  Object.keys(options).forEach((key) => {\n    updatedCookie += '; ' + key;\n    let optionValue = options[key];\n    if (optionValue !== true) {\n      updatedCookie += '=' + optionValue;\n    }\n  });\n  document.cookie = updatedCookie;\n};\n\nexport const getSearchParam = (search?: string) => {\n  const searchString = search || window.location.search;\n  const params = searchString ? decodeURI(searchString) : null;\n  return params\n    ? params\n        .replaceAll('%3A', ':')\n        .replaceAll('%2C', ',')\n        .replaceAll('+', ' ')\n        .slice(1)\n        .split('&')\n        .reduce((acc, cur) => {\n          const keyValue = cur.split('=');\n          acc[keyValue[0]] =\n            keyValue[0] === 'error' ? JSON.parse(keyValue[1]) : keyValue[1];\n          return acc;\n        }, {} as { [key: string]: any })\n    : null;\n};\n\nexport const notEmpty = <T>(value: T | null | undefined): value is T => {\n  return value !== null && value !== undefined;\n}\n","import { addSnack, IVariant } from '../store/features/SnackSlice';\nimport { v4 as uuid } from 'uuid';\nimport { useAppDispatch } from '../store/store';\nimport { useCallback } from 'react';\n\ninterface IMessage {\n  text: string;\n  header?: string;\n}\n\nexport const useToast = () => {\n  const dispatch = useAppDispatch();\n\n  const toast = useCallback(\n    (message: IMessage, variant: IVariant = 'success', options = {}) => {\n      dispatch(\n        addSnack({\n          key: uuid(),\n          text: message.text,\n          header: message.header,\n          variant: variant || 'default',\n          options: {\n            autoHideDuration: 3000,\n            ...options,\n          },\n        })\n      );\n    },\n    [dispatch]\n  );\n\n  return { toast };\n};\n","import {\n  Button,\n  ButtonProps,\n  Grid,\n  makeStyles,\n  Paper,\n  Popover,\n} from '@material-ui/core';\nimport React, { createContext, useRef, useState } from 'react';\n\nexport interface IItem {\n  text: string;\n  name: string;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\ninterface Props {\n  heroText?: string;\n  icon?: JSX.Element;\n  items?: IItem[];\n  buttonProps?: ButtonProps;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'relative',\n  },\n  Paper: {\n    padding: 20,\n  },\n  Open: {\n    transform: 'rotate(180deg)',\n  },\n  Item: {\n    fontSize: '1.0rem',\n    margin: 5,\n  },\n});\n\nconst contextValue = {\n  onClose: () => {},\n};\n\nexport const handlersContext = createContext(contextValue);\n\nconst Dropdown: React.FC<Props> = ({\n  heroText = null,\n  icon,\n  items,\n  buttonProps,\n  children,\n}) => {\n  const [open, setOpen] = useState(false);\n  const anchorEl = useRef<HTMLButtonElement>(null);\n  const classes = useStyles();\n\n  const handleButtonClick = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    onClick: undefined | ((e: React.MouseEvent<HTMLButtonElement>) => void)\n  ) => {\n    onClick && onClick(e);\n    setOpen(false);\n  };\n\n  const handleClose = () => setOpen(false);\n  const contextValue = {\n    onClose: handleClose,\n  };\n\n  return (\n    <div className={classes.root}>\n      <Button\n        style={{ margin: '0 10px' }}\n        ref={anchorEl}\n        variant=\"text\"\n        onClick={() => setOpen((open) => !open)}\n        endIcon={heroText && icon}\n        {...buttonProps}\n      >\n        {heroText || icon}\n      </Button>\n      <Popover\n        open={open}\n        anchorEl={anchorEl.current}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n        onClose={handleClose}\n      >\n        <Paper className={classes.Paper}>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {items &&\n              items.map(({ text, name, onClick }: IItem) => (\n                <Button\n                  key={text}\n                  variant=\"text\"\n                  name={name}\n                  className={classes.Item}\n                  onClick={(e) => handleButtonClick(e, onClick)}\n                >\n                  {text}\n                </Button>\n              ))}\n            <handlersContext.Provider value={contextValue}>\n              {children}\n            </handlersContext.Provider>\n          </Grid>\n        </Paper>\n      </Popover>\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import React, { useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  TextField,\n  // MenuItem,\n  // Box,\n  // Slider,\n  // Typography,\n  // Grid,\n  // FormControl,\n  // FormLabel,\n  // RadioGroup,\n  // FormControlLabel,\n  // Radio,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: 'center',\n  },\n  Input: {\n    width: '100%',\n  },\n  SmallSelector: {\n    minWidth: '100px',\n    padding: '10px',\n  },\n  FormControl: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n  },\n  RadioGroup: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n  },\n});\n\nexport interface IRule {\n  minLength: number;\n  maxLength: number;\n  regex?: RegExp;\n  checkFn?: () => boolean;\n}\n\nexport interface IInputProps {\n  name: string;\n  type?: 'text' | 'email' | 'password';\n  label?: string;\n  value: string;\n  size?: 'medium' | 'small';\n  fullWidth?: boolean;\n  required?: boolean;\n  values?: string[];\n  placeholder?: string;\n  ignoreUntouched?: boolean;\n  onValidate?: (arg0: boolean) => {};\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => {};\n  className: string;\n  rules?: {\n    helperText: string;\n    rule: IRule;\n  };\n}\n\n// const getDate = (timestamp: number): string => {\n//   const now = new Date();\n//   const date =\n//     timestamp > now.getTime() + 1000 * 60 * 60 * 24 ? now : new Date(timestamp);\n//   const year = date.getFullYear();\n//   let yearStr = '';\n//   if (year < 10) yearStr = '000' + year;\n//   else if (year < 100) yearStr = '00' + year;\n//   else if (year < 1000) yearStr = '0' + year;\n//   const month = date.getMonth() + 1;\n//   const monthStr = month < 10 ? '0' + month : '' + month;\n//   const day = date.getDate();\n//   const dayStr = day < 10 ? '0' + day : '' + day;\n//   const formattedDate = `${yearStr}-${monthStr}-${dayStr}`;\n//   return formattedDate;\n// };\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {IRule} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value: string, rule: IRule, touched: boolean): boolean => {\n  const isRegexValid = rule.regex ? !!value.match(rule.regex) : true;\n  const isFnValid = rule.checkFn ? rule.checkFn() : true;\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        isRegexValid &&\n        isFnValid\n    : true;\n};\n\nconst Input = ({\n  type = 'text',\n  name,\n  values,\n  value,\n  onValidate,\n  onChange,\n  className,\n  rules,\n  ignoreUntouched,\n  ...rest\n}: IInputProps) => {\n  const classes = useStyles();\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState('');\n\n  const { helperText, rule } = React.useMemo(\n    () => (rules ? { ...rules } : { ...{ helperText: '', rule: null } }),\n    [rules]\n  );\n\n  useEffect(() => {\n    let err;\n    // check *touched* only if *ignoreUntouched* is false\n    err = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    err ? setErrorText(helperText) : setErrorText('');\n    // update inputValid state in Redux\n    onValidate &&\n      onValidate((ignoreUntouched || touched || !!value.length) && !err);\n    if (error !== err) setError(err);\n  }, [value, touched, rule, helperText, onValidate, ignoreUntouched, error]);\n\n  switch (type) {\n    // case 'number':\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => onChange(e)}\n          {...rest}\n        />\n      );\n    /*\n    case 'select':\n      return (\n        <TextField\n          id={name}\n          key={name}\n          label={label}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onChange={(e) => onChange(e)}\n          select\n          {...rest}\n        >\n          {values.map((e) => (\n            <MenuItem key={e} value={e}>\n              {e}\n            </MenuItem>\n          ))}\n        </TextField>\n      );\n    case 'radio':\n      return (\n        <FormControl\n          className={classes.FormControl}\n          key={name}\n          component=\"fieldset\"\n        >\n          <FormLabel component=\"legend\">{capitalize(label)}</FormLabel>\n          <RadioGroup\n            className={classes.RadioGroup}\n            value={value}\n            aria-label={name}\n            name={name}\n            onChange={(e) => onChange(e)}\n          >\n            {values.map((el) => (\n              <FormControlLabel\n                key={el}\n                value={el}\n                control={<Radio checked={value === el} color=\"primary\" />}\n                label={capitalize(el)}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      );\n    case 'date':\n      return (\n        <TextField\n          id={name}\n          type=\"date\"\n          label=\"Birth Date\"\n          name={name}\n          className={classes.Input}\n          InputLabelProps={{ shrink: true }}\n          value={getDate(value)}\n          onChange={(e) => onChange(e)}\n          {...rest}\n        />\n      );\n    case 'slider':\n      return (\n        <Box className={classes.Input}>\n          <Typography id=\"range-slider\" gutterBottom>\n            {label}\n          </Typography>\n          <Slider\n            value={value}\n            onChange={(e, value) => onChange(value)}\n            valueLabelDisplay=\"auto\"\n            aria-labelledby=\"range-slider\"\n            {...rest}\n          />\n        </Box>\n      );\n    case 'doubleSelector':\n      return (\n        <Box key={name} className={classes.Input}>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'min' + name}\n                type=\"number\"\n                value={value.minAge}\n                label=\"Minimum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ minAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={'max' + name}\n                type=\"number\"\n                value={value.maxAge}\n                label=\"Maximum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ maxAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      );\n    case 'autocomplete':\n      return (\n        <TagInput\n          name={name}\n          className={classes.Input}\n          tags={values}\n          onChange={onChange}\n          {...rest}\n        />\n      );\n\n      */\n    default:\n      return null;\n  }\n};\n\nexport default Input;\n","import React from 'react';\nimport {\n  Button,\n  ButtonProps,\n  List,\n  ListItem,\n  makeStyles,\n} from '@material-ui/core';\nimport Input, { IInputProps } from '../Input/Input';\nimport cn from 'classnames';\nimport { NavLink } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  Button: {\n    width: '100%',\n  },\n  List: {\n    width: '100%',\n  },\n  Buttons: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  Link: {\n    textDecoration: 'none',\n    color: 'inherit',\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n});\n\nexport interface IButtonProps extends ButtonProps {\n  text: string;\n  type?: 'submit';\n  to?: string;\n  disabled?: boolean;\n  variant?: 'contained' | 'outlined' | 'text';\n  onClick: (e: React.MouseEvent<HTMLButtonElement>) => {};\n}\n\nexport interface IFormProps {\n  inputs: IInputProps[];\n  buttons: IButtonProps[];\n  className?: string;\n}\n\nconst Form: React.FC<IFormProps> = ({\n  inputs,\n  buttons,\n  className,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <form className={cn(className, classes.root)}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} className={classes.margin} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ variant, type, text, onClick, to, ...others }) =>\n                to ? (\n                  <NavLink\n                    to={to}\n                    key={text}\n                    className={cn(classes.Link, classes.margin)}\n                  >\n                    <Button\n                      className={classes.Button}\n                      variant={variant}\n                      onClick={onClick}\n                      {...others}\n                    >\n                      {text}\n                    </Button>\n                  </NavLink>\n                ) : (\n                  <Button\n                    key={text}\n                    className={cn(classes.Button, classes.margin)}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n              // )\n            )}\n          </ListItem>\n        )}\n        {children}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import { Button, CircularProgress, makeStyles } from '@material-ui/core';\nimport React, { useMemo, useState } from 'react';\n\ninterface Props {\n  variant: '42' | 'facebook' | 'vk' | 'google';\n}\n\nconst useStyles = makeStyles({\n  OAuthButton: {\n    width: '6rem',\n  },\n});\n\nconst oauth = {\n  '42': {\n    url: 'https://api.intra.42.fr/oauth/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauth42',\n      },\n      {\n        name: 'scope',\n        value: 'public',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  facebook: {\n    url: 'https://www.facebook.com/v10.0/dialog/oauth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '737140593612593',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthFb',\n      },\n      {\n        name: 'scope',\n        value: 'email+public_profile',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  vk: {\n    url: 'https://oauth.vk.com/authorize',\n    queryParams: [\n      {\n        name: 'client_id',\n        value: '7781054',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/api/auth/oauthVk',\n      },\n      {\n        name: 'scope',\n        value: 'offline+photos',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'code',\n      },\n    ],\n  },\n  google: {\n    url: 'https://accounts.google.com/o/oauth2/v2/auth',\n    queryParams: [\n      {\n        name: 'client_id',\n        value:\n          '96975efecfd0e5efee67c9ac4cc350ac9372ae559b2fb8a08feba6841a33fb53',\n      },\n      {\n        name: 'redirect_uri',\n        value: 'http://localhost:4000/user/auth/oauthGoogle',\n      },\n      {\n        name: 'scope',\n        value: 'https://www.googleapis.com/auth/drive.metadata.readonly',\n      },\n      {\n        name: 'state',\n        value:\n          'bdcbe28874ab05962b50430b1466a8ebcbda45ba8c3c1beee600699478ad2a4d',\n      },\n      {\n        name: 'response_type',\n        value: 'token',\n      },\n    ],\n  },\n};\n\nconst Icon42: React.FC = () => (\n  <img\n    height=\"30\"\n    width=\"30\"\n    src=\"https://signin.intra.42.fr/assets/42_logo-7dfc9110a5319a308863b96bda33cea995046d1731cebb735e41b16255106c12.svg\"\n    alt=\"42 auth\"\n    style={{ filter: 'invert(1)' }}\n  />\n);\n\nconst IconFacebook: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 409 409\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill=\"#475993\"\n      d=\"M353.701,0H55.087C24.665,0,0.002,24.662,0.002,55.085v298.616c0,30.423,24.662,55.085,55.085,55.085\n\th147.275l0.251-146.078h-37.951c-4.932,0-8.935-3.988-8.954-8.92l-0.182-47.087c-0.019-4.959,3.996-8.989,8.955-8.989h37.882\n\tv-45.498c0-52.8,32.247-81.55,79.348-81.55h38.65c4.945,0,8.955,4.009,8.955,8.955v39.704c0,4.944-4.007,8.952-8.95,8.955\n\tl-23.719,0.011c-25.615,0-30.575,12.172-30.575,30.035v39.389h56.285c5.363,0,9.524,4.683,8.892,10.009l-5.581,47.087\n\tc-0.534,4.506-4.355,7.901-8.892,7.901h-50.453l-0.251,146.078h87.631c30.422,0,55.084-24.662,55.084-55.084V55.085\n\tC408.786,24.662,384.124,0,353.701,0z\"\n    />\n  </svg>\n);\n\nconst IconVk: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 112 112\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g>\n      <circle\n        id=\"XMLID_11_\"\n        fill=\"#4D76A1\"\n        cx=\"56.098\"\n        cy=\"56.098\"\n        r=\"56.098\"\n      />\n      <path\n        fill=\"#FFFFFF\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M53.979,80.702h4.403c0,0,1.33-0.146,2.009-0.878\n\t\tc0.625-0.672,0.605-1.934,0.605-1.934s-0.086-5.908,2.656-6.778c2.703-0.857,6.174,5.71,9.853,8.235\n\t\tc2.782,1.911,4.896,1.492,4.896,1.492l9.837-0.137c0,0,5.146-0.317,2.706-4.363c-0.2-0.331-1.421-2.993-7.314-8.463\n\t\tc-6.168-5.725-5.342-4.799,2.088-14.702c4.525-6.031,6.334-9.713,5.769-11.29c-0.539-1.502-3.867-1.105-3.867-1.105l-11.076,0.069\n\t\tc0,0-0.821-0.112-1.43,0.252c-0.595,0.357-0.978,1.189-0.978,1.189s-1.753,4.667-4.091,8.636c-4.932,8.375-6.904,8.817-7.71,8.297\n\t\tc-1.875-1.212-1.407-4.869-1.407-7.467c0-8.116,1.231-11.5-2.397-12.376c-1.204-0.291-2.09-0.483-5.169-0.514\n\t\tc-3.952-0.041-7.297,0.012-9.191,0.94c-1.26,0.617-2.232,1.992-1.64,2.071c0.732,0.098,2.39,0.447,3.269,1.644\n\t\tc1.135,1.544,1.095,5.012,1.095,5.012s0.652,9.554-1.523,10.741c-1.493,0.814-3.541-0.848-7.938-8.446\n\t\tc-2.253-3.892-3.954-8.194-3.954-8.194s-0.328-0.804-0.913-1.234c-0.71-0.521-1.702-0.687-1.702-0.687l-10.525,0.069\n\t\tc0,0-1.58,0.044-2.16,0.731c-0.516,0.611-0.041,1.875-0.041,1.875s8.24,19.278,17.57,28.993\n\t\tC44.264,81.287,53.979,80.702,53.979,80.702L53.979,80.702z\"\n      />\n    </g>\n  </svg>\n);\n\nconst IconGoogle: React.FC = () => (\n  <svg\n    height=\"30\"\n    width=\"30\"\n    viewBox=\"0 0 512 512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g fill=\"none\" fillRule=\"evenodd\">\n      <path\n        d=\"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z\"\n        fill=\"#4285f4\"\n      ></path>\n      <path\n        d=\"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z\"\n        fill=\"#34a853\"\n      ></path>\n      <path\n        d=\"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z\"\n        fill=\"#fbbc05\"\n      ></path>\n      <path\n        d=\"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z\"\n        fill=\"#ea4335\"\n      ></path>\n      <path d=\"M20 20h472v472H20V20z\"></path>\n    </g>\n  </svg>\n);\n\nconst OAuthButton: React.FC<Props> = ({ variant }) => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    setLoading(true);\n    const queryParams = oauth[variant].queryParams.reduce((acc: any, el) => {\n      acc[el.name] = el.value;\n      return acc;\n    }, {});\n    const queryString = new URLSearchParams(queryParams).toString();\n    const url = `${oauth[variant].url}?${queryString}`;\n    window.location.href = url;\n  };\n\n  const icon = useMemo(() => {\n    switch (variant) {\n      case '42':\n        return <Icon42 />;\n      case 'facebook':\n        return <IconFacebook />;\n      case 'vk':\n        return <IconVk />;\n      case 'google':\n        return <IconGoogle />;\n    }\n  }, [variant]);\n\n  return (\n    <Button\n      type=\"submit\"\n      disabled={loading}\n      onClick={handleClick}\n      className={classes.OAuthButton}\n      aria-label={`${variant} oauth`}\n    >\n      {loading ? <CircularProgress /> : icon}\n    </Button>\n  );\n};\n\nexport default OAuthButton;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { auth } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\n\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { handlersContext } from '../Dropdown/Dropdown';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport OAuthButton from '../OAuthButton/OAuthButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n  padding: {\n    padding: '5px 10px',\n  },\n  Link: {\n    textDecoration: 'none',\n  },\n});\n\nconst Login = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '', password: '' });\n  const [valid, setValid] = useState({ email: false, password: false });\n  const formValid = valid.email && valid.password;\n  const { onClose } = React.useContext(handlersContext);\n  const { t, i18n } = useTranslation();\n  const { toast } = useToast();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Login] handleSubmit', inputs);\n\n      const authHeader =\n        'Basic ' +\n        btoa(encodeURI(inputs.email) + ':' + encodeURI(inputs.password));\n      try {\n        const res = await auth('basic', {\n          headers: {\n            Authorization: authHeader,\n          },\n        });\n        if (res.data.accessToken) {\n          saveToken(res.data.accessToken);\n          dispatch(getSelfInfo());\n          history.push('/');\n        } else {\n          toast({ text: res.data[i18n.language] }, 'error');\n        }\n      } catch (e) {\n        console.log(e);\n        toast({ text: t`Server error` }, 'error');\n      }\n      onClose();\n    },\n    [inputs, toast, i18n.language, dispatch, history, onClose, t]\n  );\n\n  const handleForgot = useCallback(() => {\n    console.log('[Login] handleForgot');\n    history.push('forgot_password');\n    onClose();\n  }, [onClose, history]);\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid: boolean) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Login'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: handleForgot,\n          text: t('Forgot password?'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n          onClick: onClose,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, handleForgot, onClose, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData}>\n        <Grid container alignItems=\"center\" justify=\"space-evenly\">\n          <OAuthButton variant=\"42\" />\n          <OAuthButton variant=\"facebook\" />\n          <OAuthButton variant=\"vk\" />\n          <OAuthButton variant=\"google\" />\n        </Grid>\n      </Form>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Login from '../../components/Login/Login';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst LoginPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Login />\n    </Container>\n  );\n};\n\nexport default LoginPage;\n","import { Container, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { throttle } from 'lodash';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport { secondaryColor, theme } from '../../theme';\nimport { useAppDispatch } from '../../store/store';\nimport {\n  loadMovies,\n  resetEndOfMovies,\n  setMovies,\n} from '../../store/features/MoviesSlice';\nimport { LIMIT } from '../..';\nimport { resetFilterState } from '../../store/features/FilterSlice';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      position: 'relative',\n      borderRadius: 5,\n      overflow: 'hidden',\n    },\n    Scroller: {\n      display: 'inline-flex',\n      flexWrap: 'nowrap',\n      overflowX: 'scroll',\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    },\n    ShadowLeft: {\n      position: 'absolute',\n      height: '100%',\n      left: 0,\n      width: '50px',\n      background: 'linear-gradient(90deg, #00000033, transparent)',\n    },\n    ShadowRight: {\n      position: 'absolute',\n      height: '100%',\n      right: 0,\n      width: '50px',\n      background: 'linear-gradient(-90deg, #00000033, transparent)',\n    },\n    Link: {\n      color: theme.palette.grey[700],\n      fontSize: '1.5rem',\n      textDecoration: 'none',\n      flex: '1 0 50px',\n      margin: 10,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      border: '3px solid transparent',\n      borderRadius: '50%',\n      '&:before': {\n        content: \"''\",\n        paddingTop: '100%',\n        float: 'left',\n      },\n    },\n    Active: {\n      borderColor: secondaryColor.main,\n    },\n  })\n);\n\nconst AlphabetNav = () => {\n  const location = useLocation();\n  const classes = useStyles(theme);\n  const [shadow, setShadow] = useState({\n    shadowLeft: false,\n    shadowRight: true,\n  });\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const dispatch = useAppDispatch();\n\n  const handleLinkClick = async (\n    e: React.SyntheticEvent<HTMLAnchorElement>\n  ) => {\n    const letter = e.currentTarget.innerText;\n    const isByNamePage = window.location.href.match(/byname/);\n    // check if we were on one of 'byname' pages\n    if (isByNamePage) {\n      // check if user clicks the same letter, we're in\n      const currentLetter = window.location.href.split('/').pop();\n      // no need to load same movies twice\n      if (currentLetter && letter === currentLetter) return;\n    }\n    dispatch(resetEndOfMovies());\n    dispatch(setMovies({ byName: [] }));\n    dispatch(resetFilterState());\n    dispatch(loadMovies({ filter: { letter, limit: LIMIT } }));\n  };\n\n  const scrollHandler = throttle((e: React.SyntheticEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    const target = e.target as HTMLDivElement;\n    if (!target) return;\n    if (target.scrollLeft === 0) {\n      setShadow({ ...shadow, shadowLeft: false });\n    } else if (target.scrollLeft > 0) {\n      !shadow.shadowLeft && setShadow({ ...shadow, shadowLeft: true });\n    }\n    if (target.scrollWidth - target.scrollLeft < target.offsetWidth + 1) {\n      setShadow({ ...shadow, shadowRight: false });\n    } else {\n      !shadow.shadowRight && setShadow({ ...shadow, shadowRight: true });\n    }\n  }, 100);\n\n  const horizontalScrollHandler = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTo({\n      top: 0,\n      left: e.currentTarget.scrollLeft + e.deltaY * 4,\n      behavior: 'smooth',\n    });\n  };\n\n  const getItemClassName = (path: string): string => {\n    return location.pathname.search(path) !== -1\n      ? cn(classes.Link, classes.Active)\n      : classes.Link;\n  };\n\n  return (\n    <Container className={classes.root}>\n      {shadow.shadowLeft && <div className={classes.ShadowLeft} />}\n      {shadow.shadowRight && <div className={classes.ShadowRight} />}\n      <Container\n        onScroll={scrollHandler}\n        onWheel={horizontalScrollHandler}\n        className={classes.Scroller}\n      >\n        {letters.split('').map((letter) => (\n          <NavLink\n            to={`/byname/${letter}`}\n            key={letter}\n            onClick={handleLinkClick}\n            className={getItemClassName(`/byname/${letter}`)}\n          >\n            {letter}\n          </NavLink>\n        ))}\n        <div className={classes.Link} />\n      </Container>\n    </Container>\n  );\n};\n\nexport default AlphabetNav;\n","import React, { useState } from 'react';\nimport { movies } from '../../axios';\nimport { getToken } from '../../store/features/UserSlice';\nimport MUIRating from '@material-ui/lab/Rating';\nimport StarBorderRounded from '@material-ui/icons/StarBorderRounded';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\ninterface Props {\n  movieId: string;\n  imdbRating: number;\n  ourRating: number;\n}\n\nconst useStyles = makeStyles({\n  Typography: {\n    padding: 5,\n    marginRight: 5,\n    border: '1px solid #ddd',\n    borderRadius: 5,\n  },\n});\n\nconst Rating = ({ movieId, imdbRating, ourRating }: Props) => {\n  const classes = useStyles();\n  const [rating, setRating] = useState(ourRating);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const handleRatingChange = async (\n    e: React.ChangeEvent<{}>,\n    newRating: number | null\n  ) => {\n    e.stopPropagation();\n    if (newRating !== null) {\n      console.log(newRating);\n      const res = await movies.patch(\n        '/rating',\n        { movieId, rating: newRating },\n        {\n          headers: {\n            accessToken: getToken(),\n          },\n        }\n      );\n      if (res.data.status) setRating(+res.data.data);\n    }\n  };\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"flex-end\">\n      <Typography className={classes.Typography}>IMDB</Typography>\n      <Typography>{imdbRating}</Typography>\n      <MUIRating\n        disabled={!isAuth}\n        value={rating || imdbRating / 2}\n        name={`${movieId}-rating`}\n        emptyIcon={<StarBorderRounded color=\"disabled\" fontSize=\"inherit\" />}\n        onChange={handleRatingChange}\n      />\n    </Grid>\n  );\n};\n\nexport default Rating;\n","import {\n  Divider,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { ITranslatedMovie, IUser } from '../../models/MovieInfo';\nimport { primaryColor } from '../../theme';\nimport Rating from '../Rating/Rating';\n\ninterface MovieCardMediumProps {\n  card: ITranslatedMovie;\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n  },\n  Img: {\n    position: 'relative',\n    cursor: 'pointer',\n    '& img': {\n      height: '15rem',\n      width: '10rem',\n      maxWidth: '15rem',\n      objectFit: 'cover',\n      marginRight: 20,\n      borderRadius: 5,\n    },\n    '&:hover $PlayIconWrapper': {\n      opacity: 1,\n    },\n  },\n  PlayIconWrapper: {\n    position: 'absolute',\n    left: 'calc(50% - 3.5rem)',\n    top: 'calc(50% - 3rem)',\n    fontSize: '1rem',\n    padding: '1rem',\n    borderRadius: '50%',\n    backgroundColor: '#000000aa',\n    color: '#fff',\n    opacity: 0,\n    transition: '0.3s',\n  },\n  PlayIcon: {\n    width: '4rem',\n    height: '4rem',\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n  Caption: {\n    fontSize: '1.5rem',\n    textDecoration: 'none',\n    color: 'inherit',\n    marginBottom: 10,\n  },\n  Text: {\n    fontSize: '1rem',\n    fontWeight: 200,\n  },\n  Description: {\n    maxHeight: '8rem',\n    paddingTop: 10,\n    fontSize: '0.9rem',\n    position: 'relative',\n    flexGrow: 2,\n    overflow: 'hidden',\n  },\n  Shadow: {\n    height: 40,\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    background: 'linear-gradient(0deg, #ffffff, #ffffff33)',\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    fontWeight: 'inherit',\n    color: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n});\n\nconst MovieCardMedium = ({ card }: MovieCardMediumProps) => {\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n\n  const { id, img, info } = card.en;\n  const title = card[i18n.language as 'en' | 'ru'].title;\n  const description = card[i18n.language as 'en' | 'ru'].info.description;\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n\n  return (\n    <Paper className={classes.Paper}>\n      <NavLink to={`/movies/${id}`} className={classes.Img}>\n        <img src={img} alt={`${title} poster`} />\n        <div className={classes.PlayIconWrapper}>\n          <PlayArrow className={classes.PlayIcon} fontSize=\"large\" />\n        </div>\n      </NavLink>\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Grid container alignItems=\"baseline\" justify=\"space-between\">\n          <NavLink to={`/movies/${id}`} className={classes.Caption}>\n            <Typography variant=\"caption\" className={classes.Caption}>\n              {title}\n            </Typography>\n          </NavLink>\n          <Rating\n            movieId={id}\n            imdbRating={info.imdbRating}\n            ourRating={info.rating}\n          />\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Year')}: {info.year}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Genres')}: {mapItemsToLinks(info.genres)}\n        </Grid>\n        <Grid container className={classes.Text}>\n          {t('Length')}: {info.length ? `${info.length}${t('min')}` : 'unknown'}\n        </Grid>\n        <Divider />\n        <Grid container className={classes.Description}>\n          {description}\n          <div className={classes.Shadow} />\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default MovieCardMedium;\n","import React from 'react';\nimport { Card, Grid, makeStyles, Typography } from '@material-ui/core';\nimport cn from 'classnames';\nimport MovieCardMedium from '../MovieCardMedium/MovieCardMedium';\nimport { useTranslation } from 'react-i18next';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface MovieCardProps {\n  display?: 'image' | 'lines' | 'grid';\n  className?: string;\n  id: string;\n}\n\nexport const useStyles = makeStyles({\n  root: {\n    // cursor: 'pointer',\n  },\n  Grid: {\n    maxWidth: 150,\n    marginRight: '1rem',\n    marginBottom: '1rem',\n  },\n  Media: {\n    height: 220,\n    width: 150,\n  },\n  Name: {\n    fontSize: '1rem',\n    fontWeight: 800,\n  },\n});\n\nconst MovieCard: React.FC<MovieCardProps> = ({\n  display = 'image',\n  className,\n  id: card,\n}: MovieCardProps) => {\n  const classes = useStyles();\n  const { i18n } = useTranslation();\n  const { movies } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((el) => el.en.id === card);\n\n  const getCard = () => {\n    if (!movie) return null;\n    if (display === 'lines') return <MovieCardMedium card={movie} />;\n    const bg = movie.en.img || movie.ru.img;\n    return (\n      <NavLink to={`/movies/${movie.en.id}`} className={classes.root}>\n        <Card style={{ height: 'fit-content' }}>\n          <div\n            className={classes.Media}\n            style={{\n              background: `url(${bg})`,\n              backgroundSize: 'cover',\n            }}\n          ></div>\n        </Card>\n        {display !== 'image' && (\n          <Grid container direction=\"column\" alignItems=\"center\">\n            {display === 'grid' && (\n              <Typography className={classes.Name}>\n                {movie[i18n.language as 'en' | 'ru'].title}\n              </Typography>\n            )}\n          </Grid>\n        )}\n      </NavLink>\n    );\n  };\n\n  const getClassName = () =>\n    display === 'lines'\n      ? cn(classes.root, className)\n      : cn(classes.root, className, classes.Grid);\n\n  return (\n    <Grid\n      item\n      container\n      wrap=\"wrap\"\n      direction={display === 'lines' ? 'column' : 'row'}\n      className={getClassName()}\n    >\n      {getCard()}\n    </Grid>\n  );\n};\n\nexport default MovieCard;\n","import { Grid, makeStyles, Paper, Card } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\n\ninterface Props {\n  display?: 'lines' | 'grid';\n}\n\nconst useStyles = makeStyles({\n  Paper: {\n    display: 'flex',\n    marginBottom: 20,\n    padding: 10,\n    width: '100%',\n  },\n  Img: {\n    borderRadius: 5,\n    height: '15rem',\n    width: '13rem',\n    marginRight: '1rem',\n  },\n  Header: {\n    width: '90%',\n    marginBottom: 10,\n    fontSize: 30,\n  },\n  Text: {\n    marginTop: 15,\n    height: 10,\n    width: `${Math.floor(Math.random() * 100)}%`,\n  },\n  Info: {\n    height: '15rem',\n    flexWrap: 'nowrap',\n  },\n});\n\nconst CardLoader = ({ display }: Props) => {\n  const classes = useStyles();\n\n  return display === 'lines' ? (\n    <Paper className={classes.Paper}>\n      <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      <Grid container direction=\"column\" className={classes.Info}>\n        <Skeleton animation=\"wave\" className={classes.Header} />\n        <Skeleton animation=\"wave\" width=\"50%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"60%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"53%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"30%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"40%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"70%\" className={classes.Text} />\n        <Skeleton animation=\"wave\" width=\"47%\" className={classes.Text} />\n      </Grid>\n    </Paper>\n  ) : (\n    <Card style={{ height: 'fit-content' }}>\n      <div\n        className={classes.Img}\n        style={{\n          backgroundSize: 'cover',\n        }}\n      >\n        <Skeleton animation=\"wave\" variant=\"rect\" className={classes.Img} />\n      </div>\n    </Card>\n  );\n};\n\nexport default CardLoader;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport { useAppDispatch } from '../../store/store';\nimport { RootState } from '../../store/rootReducer';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { loadMovies, setEndOfMovies } from '../../store/features/MoviesSlice';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { throttledDetectBottomLine } from '../../utils';\nimport CardLoader from '../MovieCard/CardLoader/CardLoader';\nimport { LIMIT } from '../..';\nimport {\n  countryInCountries,\n  yearInRange,\n  genreInGenres,\n  isCountiesStateEmpty,\n  isGenresStateEmpty,\n  isYearsStateEmpty,\n} from '../../store/features/FilterSlice';\n\ninterface ICardsProps {\n  movies: ITranslatedMovie[];\n}\n\nconst sortByName = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort((cardA, cardB) =>\n    cardA.en.title.localeCompare(cardB.en.title)\n  );\n};\nconst sortByYear = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.year - cardA.en.info.year\n  );\n};\nconst sortByRating = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) =>\n      cardB.en.info.rating - cardA.en.info.rating ||\n      cardB.en.info.imdbRating - cardA.en.info.imdbRating\n  );\n};\nconst sortByAvalibility = (movies: ITranslatedMovie[]) => {\n  return [...movies].sort(\n    (cardA, cardB) => cardB.en.info.avalibility - cardA.en.info.avalibility\n  );\n};\n\nconst Cards = ({ movies }: ICardsProps) => {\n  const { sortBy, view } = useSelector((state: RootState) => state.UI);\n  const { genres, years, countries } = useSelector(\n    (state: RootState) => state.filter\n  );\n  const { loading, isEndOfMovies } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [sortedCards, setSortedCards] = useState<ITranslatedMovie[]>(movies);\n  const dispatch = useAppDispatch();\n  const gridRef = useRef<HTMLDivElement>(null);\n  const location = window.location.href;\n\n  // selected letter if we're at /byname page\n  const letter = location.search(/byname/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // current search string, if we're at /search page\n  const search = location.match(/search/)\n    ? location.split('/').pop()\n    : undefined;\n\n  // track scroll position and load movies if at the bottom\n  useEffect(() => {\n    const endOfMoviesCallback = () => {\n      if (!isEndOfMovies && !loading) {\n        console.log('endOfMoviesCallback');\n        dispatch(\n          loadMovies({\n            filter: {\n              search,\n              letter,\n              limit: LIMIT,\n              offset: movies.length,\n            },\n          })\n        ).then((res) => {\n          console.log('[Cards] loadMovies response', res);\n          if (res && res.length < LIMIT) dispatch(setEndOfMovies());\n        });\n      }\n    };\n    console.log('useEffect track scroll');\n    const trackScrolling = throttledDetectBottomLine(\n      gridRef.current,\n      endOfMoviesCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [movies.length, dispatch, letter, search, isEndOfMovies, loading]);\n\n  useEffect(() => {\n    let cards = !isYearsStateEmpty(years)\n      ? movies.filter((movie) => yearInRange(movie.en.info.year, years))\n      : movies;\n    cards = !isGenresStateEmpty(genres)\n      ? cards.filter((movie) => genreInGenres(movie.en.info.genres, genres))\n      : cards;\n    cards = !isCountiesStateEmpty(countries)\n      ? cards.filter(\n          (movie) =>\n            movie.en.info.countries\n              ? countryInCountries(movie.en.info.countries, countries)\n              : true // if no countries were given - show movie anyway\n        )\n      : cards;\n    console.log('[Cards] filter useEffect', cards);\n    setSortedCards(cards);\n  }, [genres, countries, years, movies]);\n\n  // sort movies on <sortBy> change\n  useEffect(() => {\n    console.log('[Cards] sort useEffect', movies, sortedCards);\n    if (movies.length > sortedCards.length) return;\n    if (sortBy === 'name') setSortedCards(sortByName(sortedCards));\n    else if (sortBy === 'year') setSortedCards(sortByYear(sortedCards));\n    else if (sortBy === 'rating') setSortedCards(sortByRating(sortedCards));\n    else if (sortBy === 'avalibility')\n      setSortedCards(sortByAvalibility(sortedCards));\n  }, [sortBy, movies, sortedCards]);\n\n  return (\n    <Grid ref={gridRef} container justify=\"space-evenly\">\n      {sortedCards.map((card) => (\n        <MovieCard key={card.en.id} id={card.en.id} display={view} />\n      ))}\n      {loading && <CardLoader display={view} />}\n    </Grid>\n  );\n};\n\nexport default Cards;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport MovieCard from '../MovieCard/MovieCard';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nexport interface CardsSliderProps {\n  display?: 'grid' | 'image';\n}\n\nconst useStyles = makeStyles({\n  root: {\n    overflow: 'hidden',\n    flexWrap: 'nowrap',\n    margin: '20px 0',\n    padding: 10,\n    background: '#fafafa',\n    transform: 'translateZ(0)',\n    overflowX: 'scroll',\n    overflowY: 'hidden',\n    transition: '0.3s',\n    '&::-webkit-scrollbar': {\n      display: 'none',\n    },\n  },\n  Movie: {\n    transition: '0.3s',\n    marginRight: 20,\n  },\n});\n\nconst CardsSlider: React.FC<CardsSliderProps> = ({\n  display = 'image',\n}: CardsSliderProps) => {\n  const classes = useStyles();\n  const { popular } = useSelector((state: RootState) => state.movies);\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      {popular.map((card: string) => (\n        <MovieCard\n          display={display}\n          className={classes.Movie}\n          id={card}\n          key={card}\n        />\n      ))}\n    </Grid>\n  );\n};\n\nexport default CardsSlider;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from '@material-ui/core';\nimport { TuneRounded } from '@material-ui/icons';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\n\nimport {\n  setFilterState,\n  resetFilterState,\n  GenresKeys,\n  YearsKeys,\n  CountriesKeys,\n  FilterStateKeys,\n  items,\n  reqeuestMoviesWithFilters,\n} from '../../store/features/FilterSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nconst useStyles = makeStyles({\n  '@media (orientation: portrait)': {\n    root: {\n      width: '80vw',\n      height: '60vh',\n    },\n  },\n  root: {\n    minWidth: 300,\n    minHeight: 300,\n    width: '80vw',\n    height: '60vh',\n    '@media (max-width: 600px)': {\n      width: '90vw',\n      height: '90vh',\n    },\n  },\n  Actions: {\n    justifyContent: 'center',\n  },\n});\n\nconst buttons: ['genres', 'years', 'countries'] = [\n  'genres',\n  'years',\n  'countries',\n];\n\nconst Filter = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [open, setOpen] = useState(false);\n  const [category, setCategory] = useState<FilterStateKeys>('genres');\n  const filterState = useSelector((state: RootState) => state.filter);\n  const { t } = useTranslation();\n\n  const handleReset = () => {\n    dispatch(resetFilterState());\n  };\n  const handleShow = async () => {\n    console.log('[Filter] handleShow', filterState);\n    dispatch(reqeuestMoviesWithFilters());\n    setOpen(false);\n  };\n\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (category) {\n      case 'genres':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as GenresKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'years':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as YearsKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      case 'countries':\n        return dispatch(\n          setFilterState({\n            filter: {\n              category,\n              name: e.currentTarget.name as CountriesKeys,\n              value: e.currentTarget.checked,\n            },\n          })\n        );\n      default:\n        return;\n    }\n  };\n\n  const getCheckboxes = (category: string): JSX.Element[] | null => {\n    switch (category) {\n      case 'genres':\n        return items.genres.map((item: GenresKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['genres'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'years':\n        return items.years.map((item: YearsKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['years'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      case 'countries':\n        return items.countries.map((item: CountriesKeys) => (\n          <Grid key={item} item xs={6} sm={4}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  style={{ marginLeft: 20 }}\n                  checked={filterState['countries'][item]}\n                  onChange={handleFilterChange}\n                  name={item}\n                  color=\"primary\"\n                />\n              }\n              label={t(item)}\n            />\n          </Grid>\n        ));\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div>\n      <Button\n        variant=\"text\"\n        onClick={() => setOpen(true)}\n        startIcon={<TuneRounded />}\n      >\n        {t('filterRoot')}\n      </Button>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"filter-dialog\"\n        classes={{ paper: classes.root }}\n      >\n        <DialogTitle id=\"filter-dialog-title\">{t('filterRoot')}</DialogTitle>\n        <DialogContent>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <ButtonGroup style={{ marginBottom: 20 }}>\n              {buttons.map((text) => (\n                <Button\n                  color=\"primary\"\n                  variant={text === category ? 'contained' : 'outlined'}\n                  key={text}\n                  onClick={() => setCategory(text)}\n                >\n                  {t(text)}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Grid>\n          <Grid container wrap=\"wrap\">\n            {getCheckboxes(category)}\n          </Grid>\n        </DialogContent>\n        <DialogActions className={classes.Actions}>\n          <Button onClick={handleReset} color=\"primary\">\n            Reset filters\n          </Button>\n          <Button onClick={handleShow} color=\"secondary\">\n            Show results\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\nimport { SortRounded } from '@material-ui/icons';\n\nimport { useAppDispatch } from '../../store/store';\nimport { setSortingBy } from '../../store/features/UISlice';\nimport Dropdown, { IItem } from '../Dropdown/Dropdown';\nimport { useTranslation } from 'react-i18next';\n\nconst Sort = () => {\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const onClick = (e: React.MouseEvent<HTMLButtonElement>) =>\n    dispatch(setSortingBy({ sortBy: e.currentTarget.name }));\n\n  const items = [\n    {\n      text: t('By rating'),\n      name: 'rating',\n      onClick,\n    },\n    {\n      text: t('By name'),\n      name: 'name',\n      onClick,\n    },\n    {\n      text: t('By year'),\n      name: 'year',\n      onClick,\n    },\n    {\n      text: t('By avalibility'),\n      name: 'avalibility',\n      onClick,\n    },\n  ] as IItem[];\n\n  return <Dropdown heroText={t('Sort')} icon={<SortRounded />} items={items} />;\n};\n\nexport default Sort;\n","import React from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { DashboardRounded, ViewAgendaRounded } from '@material-ui/icons';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { changeView } from '../../store/features/UISlice';\n\nconst useStyles = makeStyles({\n  right: {\n    grow: 1,\n    marginLeft: 'auto',\n  },\n});\n\nconst GridToLinesButton = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { view } = useSelector((state: RootState) => state.UI);\n\n  const handleClick = () => {\n    dispatch(changeView());\n  };\n\n  return (\n    <Button\n      className={classes.right}\n      variant=\"text\"\n      size=\"large\"\n      onClick={handleClick}\n    >\n      {view === 'grid' ? <DashboardRounded /> : <ViewAgendaRounded />}\n    </Button>\n  );\n};\n\nexport default GridToLinesButton;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport Filter from '../Filter/Filter';\nimport Sort from '../Sort/Sort';\nimport GridToLinesButton from '../GridToLinesButton/GridToLinesButton';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '10px 30px',\n  },\n});\n\nconst FilterSortPanel = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid container className={classes.root} alignItems=\"center\">\n      <Filter />\n      <Sort />\n      <GridToLinesButton />\n    </Grid>\n  );\n};\n\nexport default FilterSortPanel;\n","import { Container, Typography } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { LIMIT } from '../..';\nimport AlphabetNav from '../../components/AlphabetNav/AlphabetNav';\nimport Cards from '../../components/Cards/Cards';\nimport CardsSlider from '../../components/CardsSlider/CardsSlider';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { IFilter, loadMovies } from '../../store/features/MoviesSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { notEmpty } from '../../utils';\n\ninterface IMainPageProps {\n  route?: string;\n}\n\ninterface TParams {\n  id?: string;\n}\n\nconst MainPage = ({\n  route,\n  match,\n}: IMainPageProps & RouteComponentProps<TParams>) => {\n  const dispatch = useAppDispatch();\n  const { movies, search, byName, popular } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const [displayedMovies, setDisplayedMovies] = useState<ITranslatedMovie[]>(\n    []\n  );\n  const { t } = useTranslation();\n\n  console.log(match, route);\n\n  // load movies on component mount\n  useEffect(() => {\n    const location = window.location.href;\n    const filter: IFilter = { limit: LIMIT };\n    switch (route) {\n      // case 'search':\n      //   filter.search = location.split('/').pop();\n      //   break;\n      case 'byname':\n        filter.letter = location.split('/').pop();\n        break;\n      default:\n        break;\n    }\n    console.log('[MainPage] useEffect. movies, filter', movies, filter);\n    // load popular and search/byName\n    dispatch(loadMovies({ filter: { limit: LIMIT + 10 } }));\n    if (route === 'byname')\n      dispatch(loadMovies({ filter })).then((res) => {\n        console.log('[MainPage] useEffect. res, byName', res, byName);\n        setDisplayedMovies(res || []);\n      });\n    // else if (route === 'search')\n    //   dispatch(loadMovies({ filter })).then((res) =>\n    //     setDisplayedMovies(res || [])\n    //   );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    let cards = null;\n    if (match.path.includes('byname')) cards = byName;\n    else if (match.path.includes('search')) cards = search;\n    else cards = popular;\n\n    console.log(cards);\n    const displayedMovies: ITranslatedMovie[] = cards\n      .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n      .filter(notEmpty);\n    console.log(displayedMovies);\n    setDisplayedMovies(displayedMovies);\n  }, [byName, search, popular, match.path, movies]);\n\n  return (\n    <Container>\n      <AlphabetNav />\n      <FilterSortPanel />\n      <CardsSlider />\n      {displayedMovies.length ? (\n        <Cards movies={displayedMovies} />\n      ) : (\n        <Typography\n          variant=\"h5\"\n          style={{ width: '100%', textAlign: 'center' }}\n        >{t`NoMoviesSearch`}</Typography>\n      )}\n    </Container>\n  );\n};\n\nexport default MainPage;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React, { useCallback, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\nimport { profile } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\nimport { saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst Register = () => {\n  const [inputs, setInputs] = useState({\n    email: '',\n    username: '',\n    password: '',\n    confirm: '',\n  });\n  const [valid, setValid] = useState({\n    email: false,\n    password: false,\n    confirm: false,\n  });\n  const formValid = valid.email && valid.password;\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[Register] handleSubmit', inputs);\n\n      const body = {\n        email: inputs.email,\n        username: inputs.username,\n        passwd: inputs.password,\n      };\n      const res = await profile.put('create', body);\n      console.log(res);\n      if (res.data.email) {\n        dispatch(saveUserState({ user: res.data }));\n        history.push('/');\n        toast({ text: t`Check your email` });\n      } else {\n        toast({ text: res.data[i18n.language] }, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language, dispatch, history]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, username: isValid })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 3,\n              maxLength: 20,\n              regex: /^[\\w-+.]+$/,\n            },\n          },\n        },\n        {\n          name: 'password',\n          type: 'password',\n          label: t('Password'),\n          placeholder: t('Enter password'),\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 3,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Register'),\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Register;\n","import { Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport Register from '../../components/Register/Register';\n\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst RegisterPage = () => {\n  const classes = useStyles();\n  return (\n    <Container className={classes.root}>\n      <Register />\n    </Container>\n  );\n};\n\nexport default RegisterPage;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { getSelfInfo, saveToken } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { setCookie } from '../../utils';\n\nconst Auth = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  React.useEffect(() => {\n    console.log('cookie', document.cookie);\n    console.log(window.location.href);\n    const queryParams = decodeURI(window.location.search);\n    console.log('queryParams', queryParams);\n    const accessToken = queryParams\n      .slice(1)\n      .split('&')\n      .find((el) => el.startsWith('accessToken'));\n    if (accessToken) {\n      const tokenStart = accessToken.search(/=(.+)/);\n      const token = accessToken.slice(tokenStart + 1);\n      console.log('tokenStart', token);\n      saveToken(token);\n      dispatch(getSelfInfo());\n      setCookie('accessToken', token, { path: '/' });\n      history.push('/');\n    }\n  }, [dispatch, history]);\n  return null;\n};\n\nexport default Auth;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    position: 'fixed',\n    bottom: 0,\n    right: 0,\n    background: 'linear-gradient(0deg, #ccc, transparent)',\n  },\n});\n\nconst Footer = () => {\n  const styles = useStyles();\n  const { t } = useTranslation();\n  return (\n    <Grid\n      container\n      alignItems=\"flex-end\"\n      justify=\"flex-end\"\n      className={styles.root}\n    >\n      {t`footerCreated`}\n    </Grid>\n  );\n};\n\nexport default Footer;\n","import {\n  Button,\n  Fade,\n  FormControl,\n  Grid,\n  InputBase,\n  makeStyles,\n  Paper,\n  Popper,\n  TextField,\n} from '@material-ui/core';\nimport { SearchRounded } from '@material-ui/icons';\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router';\n\nimport { loadMovies } from '../../store/features/MoviesSlice';\nimport { useToast } from '../../hooks/useToast';\nimport { useAppDispatch } from '../../store/store';\nimport { theme } from '../../theme';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport { movies } from '../../axios';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '10px',\n    border: `1px solid ${theme.palette.grey[500]}`,\n    borderRadius: 5,\n    maxWidth: 300,\n    [theme.breakpoints.down('xs')]: {\n      display: 'none',\n    },\n  },\n  Input: {\n    padding: '5px 1rem',\n    flex: 1,\n  },\n  BaseInput: {\n    padding: 0,\n  },\n  Icon: {\n    fontSize: '2rem',\n    color: theme.palette.grey[700],\n    paddingRight: 5,\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '1.6rem',\n      paddingRight: 0,\n    },\n  },\n  Button: {\n    margin: '10px',\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n  Popper: {\n    [theme.breakpoints.up('sm')]: {\n      display: 'none',\n    },\n  },\n});\n\nconst Search = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const [search, setSearch] = useState('');\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const loading = useSelector((state: RootState) => state.movies.loading);\n  const history = useHistory();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  };\n  /**\n   * TODO:\n   * move this to thunk (think about redux router)\n   * add loader with random text (opening crates, searchng in dark web, ...)\n   */\n\n  const handleSearch = async (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      console.log(`Searching for: ${search}`);\n      const filter = { search };\n      dispatch(loadMovies({ filter }));\n      history.push(encodeURI(`/search/${search}`));\n      setSearch('');\n    }\n  };\n  const handleOpenSearch = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    setAnchorEl(anchorEl ? null : e.currentTarget);\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? 'search-popover' : undefined;\n\n  return (\n    <FormControl>\n      <Grid\n        container\n        alignItems=\"center\"\n        justify=\"flex-end\"\n        className={classes.root}\n      >\n        <InputBase\n          className={classes.Input}\n          inputProps={{ 'aria-label': 'search for a movie' }}\n          value={search}\n          classes={{ input: classes.BaseInput }}\n          onChange={handleInput}\n          onKeyPress={handleSearch}\n          placeholder={t('search')}\n          disabled={loading}\n        />\n        <SearchRounded className={classes.Icon} />\n      </Grid>\n\n      <Button\n        aria-describedby={id}\n        className={classes.Button}\n        onClick={handleOpenSearch}\n        variant=\"outlined\"\n      >\n        <SearchRounded className={classes.Icon} />\n      </Button>\n      <Popper\n        open={open}\n        anchorEl={anchorEl}\n        placement={'bottom-end'}\n        transition\n        className={classes.Popper}\n      >\n        {({ TransitionProps }) => (\n          <Fade {...TransitionProps} timeout={250}>\n            <Paper>\n              <TextField\n                size=\"small\"\n                className={classes.Input}\n                inputProps={{ 'aria-label': 'search for a movie' }}\n                value={search}\n                classes={{ root: classes.BaseInput }}\n                onChange={handleInput}\n                onKeyPress={handleSearch}\n                placeholder={t('search')}\n              />\n            </Paper>\n          </Fade>\n        )}\n      </Popper>\n    </FormControl>\n  );\n};\n\nexport default Search;\n","import React, { useState } from 'react';\nimport { Button, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { theme } from '../../theme';\n\nconst languages = ['en', 'ru'];\n\nconst useStyles = makeStyles({\n  Button: {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.7rem',\n    },\n  },\n});\n\nconst Internationalization = () => {\n  const classes = useStyles();\n  const [lang, setLang] = useState(0);\n  const nextLang = (lang + 1) % languages.length;\n  const { t, i18n } = useTranslation();\n\n  const handleClick = () => {\n    i18n.changeLanguage(languages[nextLang]);\n    setLang(nextLang);\n  };\n  return (\n    <div>\n      <Button onClick={handleClick} className={classes.Button}>{`${t(\n        'translate'\n      )} ${t(languages[nextLang])}`}</Button>\n    </div>\n  );\n};\n\nexport default Internationalization;\n","import {\n  Avatar,\n  Button,\n  Grid,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { authFail, removeToken } from '../../store/features/UserSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\nimport { handlersContext } from '../Dropdown/Dropdown';\n\nconst useStyles = makeStyles({\n  Type: {\n    fontWeight: 100,\n    marginRight: 10,\n  },\n  Text: {\n    fontWeight: 300,\n  },\n  marginAuto: { marginLeft: 'auto', marginRight: 10 },\n});\n\nconst UserInfo = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const { onClose } = React.useContext(handlersContext);\n  const { username, email, imageBody } = useSelector(\n    (state: RootState) => state.user\n  );\n  const avatar = imageBody || undefined;\n\n  const handleLogout = () => {\n    removeToken();\n    dispatch(authFail());\n    onClose();\n  };\n\n  const handleUpdateInfo = () => {\n    onClose();\n    history.push('/settings');\n  };\n\n  return (\n    <Grid container>\n      <Grid item container wrap=\"nowrap\" alignItems=\"center\">\n        <Avatar src={avatar} alt={username} />\n        <Button\n          onClick={handleUpdateInfo}\n          className={classes.marginAuto}\n        >{t`Update info`}</Button>\n        <Button onClick={handleLogout}>{t`Logout`}</Button>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Username`}</Typography>\n        <Typography className={classes.Text}>{username}</Typography>\n      </Grid>\n      <Grid item container alignItems=\"center\">\n        <Typography className={classes.Type}>{t`Email`}</Typography>\n        <Typography className={classes.Text}>{email}</Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UserInfo;\n","import { makeStyles, SvgIcon } from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  width?: number;\n  height?: number;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    color: '#035263',\n    '&:hover>': {\n      '& $_0': {\n        animation: `$forward 1s infinite ease-in-out`,\n      },\n      '& $_1': {\n        animation: `$stretch1 1s infinite ease-out`,\n      },\n      '& $_2': {\n        animation: `$stretch2 0.9s infinite ease-out`,\n      },\n      '& $_3': {\n        animation: `$stretch1 1.1s infinite ease-out`,\n      },\n      '& $_4': {\n        animation: `$stretch1 0.8s infinite ease-out`,\n      },\n    },\n  },\n  _0: {},\n  _1: {},\n  _2: {},\n  _3: {},\n  _4: {},\n  '@keyframes stretch1': {\n    '0%': {\n      opacity: 0.8,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-10px) scaleX(1)',\n    },\n    '70%': {\n      opacity: 0.8,\n    },\n    '80%': {\n      opacity: 0.2,\n      transform: 'translateX(-80px) scaleX(1.5)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n  '@keyframes forward': {\n    '0%': {\n      transform: 'translateX(0)',\n    },\n    '10%': {\n      transform: 'translateX(10px) translateY(3px)',\n    },\n    '50%': {\n      transform: 'translateX(0px) translateY(-3px)',\n    },\n    '80%': {\n      transform: 'translateX(-7px) translateY(4px)',\n    },\n    '100%': {\n      transform: 'translateX(0px) translateY(0)',\n    },\n  },\n  '@keyframes stretch2': {\n    '0%': {\n      opacity: 0.2,\n      transform: 'translateX(0) scaleX(1)',\n    },\n    '10%': {\n      opacity: 1,\n      transform: 'translateX(-15px) scaleX(1.2)',\n    },\n    '80%': {\n      opacity: 0.6,\n    },\n    '90%': {\n      opacity: 0.2,\n      transform: 'translateX(-40px) scaleX(1.4)',\n    },\n    '100%': {\n      opacity: 0,\n    },\n  },\n});\n\nconst Logo = ({ width = 70, height = 50 }: Props) => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      style={{ width, height }}\n      className={classes.root}\n      viewBox={'-100 0 584 384'}\n    >\n      <path\n        className={classes._0}\n        d=\"M376.304,178.327l-224-136c-4.944-3-11.12-3.104-16.152-0.272C131.12,44.887,128,50.215,128,55.999v136    c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V84.431l177.168,107.568L160,299.567v-43.568c0-8.832-7.168-16-16-16    c-8.832,0-16,7.168-16,16v72c0,5.784,3.12,11.112,8.152,13.944c2.44,1.376,5.144,2.056,7.848,2.056    c2.88,0,5.752-0.776,8.304-2.328l224-136c4.776-2.896,7.696-8.08,7.696-13.672C384,186.407,381.08,181.223,376.304,178.327z\"\n      />\n      <path\n        className={classes._1}\n        d=\"M88,279.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h72c8.832,0,16-7.168,16-16    C104,287.167,96.832,279.999,88,279.999z\"\n      />\n      <path\n        className={classes._2}\n        d=\"M56,71.999H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h40c8.832,0,16-7.168,16-16    C72,79.167,64.832,71.999,56,71.999z\"\n      />\n      <path\n        className={classes._3}\n        d=\"M88,135.999h-8c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h8c8.832,0,16-7.168,16-16    C104,143.167,96.832,135.999,88,135.999z\"\n      />\n      <path\n        className={classes._4}\n        d=\"M72,207.999H48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h24c8.832,0,16-7.168,16-16    C88,215.167,80.832,207.999,72,207.999z\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default Logo;\n","import { ButtonProps, Grid, makeStyles } from '@material-ui/core';\nimport { PersonOutlineRounded } from '@material-ui/icons';\nimport React from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport Login from '../Login/Login';\nimport Search from '../Search/Search';\nimport Internationalization from '../../components/Internationalization/Internationalization';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport UserInfo from '../UserInfo/UserInfo';\nimport Logo from '../Logo/Logo';\nimport { NavLink } from 'react-router-dom';\nimport { resetEndOfMovies } from '../../store/features/MoviesSlice';\nimport { useAppDispatch } from '../../store/store';\nconst useStyles = makeStyles({\n  root: {},\n});\n\nconst Header: React.FC = () => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  const buttonProps: ButtonProps = {\n    variant: 'outlined',\n  };\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      <Grid item xs={2}>\n        <NavLink onClick={() => dispatch(resetEndOfMovies())} to=\"/\">\n          <Logo />\n        </NavLink>\n      </Grid>\n      <Grid\n        container\n        justify=\"flex-end\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        item\n        xs={8}\n      >\n        <Internationalization />\n        <Search />\n      </Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}></Grid>\n      <Grid container alignItems=\"center\" justify=\"center\" item xs={1}>\n        <Dropdown icon={<PersonOutlineRounded />} buttonProps={buttonProps}>\n          {isAuth ? <UserInfo /> : <Login />}\n        </Dropdown>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles, Typography } from '@material-ui/core';\n\ninterface Props {\n  text: string;\n}\n\nconst useStyles = makeStyles({\n  h3: {\n    fontSize: '1.6rem',\n    textTransform: 'uppercase',\n    margin: '10px 0',\n    fontWeight: 900,\n  },\n});\n\nconst CategoryHeader = ({ text }: Props) => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"h3\" className={classes.h3}>\n      {text}\n    </Typography>\n  );\n};\n\nexport default CategoryHeader;\n","import { Grid, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\n\ninterface Props {\n  name: string;\n  sources?: string[];\n  type: 'photo' | 'video';\n}\ninterface GridItemProps {\n  name: string;\n  src: string;\n  type: 'photo' | 'video';\n  key?: string | number;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '10px 0',\n  },\n  gridList: {\n    flexWrap: 'nowrap',\n    transform: 'translateZ(0)',\n  },\n  HorizontalScroll: {\n    overflowX: 'auto',\n  },\n  Image: {\n    height: '10rem',\n    marginRight: 10,\n  },\n}));\n\nconst GridItem: React.FC<GridItemProps> = ({\n  src,\n  name,\n  type,\n}: GridItemProps) => {\n  const classes = useStyles();\n\n  switch (type) {\n    case 'photo':\n      return <img src={src} alt={name} className={classes.Image} />;\n    case 'video':\n      return <video controls src={src} className={classes.Image} />;\n    default:\n      return null;\n  }\n};\n\nconst HorizontalGrid = ({ sources, name, type }: Props) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <CategoryHeader text={t(`${type}s`)} />\n      <Grid container wrap=\"nowrap\" className={classes.HorizontalScroll}>\n        {sources?.length\n          ? sources.map((item: string, index: number) => (\n              <GridItem key={item + index} src={item} name={name} type={type} />\n            ))\n          : t`No info`}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default HorizontalGrid;\n","import React from 'react';\nimport { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { IComment } from '../../../models/MovieInfo';\nimport { primaryColor } from '../../../theme';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n    padding: 10,\n    marginBottom: 5,\n  },\n  h4: {\n    fontWeight: 700,\n    fontSize: '1rem',\n    marginBottom: 10,\n  },\n  Image: {\n    marginRight: 10,\n    background: primaryColor.main,\n  },\n  Text: {\n    width: '100%',\n    textAlign: 'justify',\n  },\n});\n\nconst Comment: React.FC<IComment> = ({ username, text, avatar }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container wrap=\"nowrap\" className={classes.root}>\n      <Avatar\n        src={avatar}\n        alt={`${username}'s avatar`}\n        className={classes.Image}\n      >\n        {username.substr(0, 2)}\n      </Avatar>\n      <Grid>\n        <Typography variant=\"h4\" className={classes.h4}>\n          {username}\n        </Typography>\n        <Typography variant=\"body2\" className={classes.Text}>\n          {text}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button, Grid, makeStyles, TextField } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { movies } from '../../../axios';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../store/rootReducer';\nimport { useAppDispatch } from '../../../store/store';\nimport { updateComments } from '../../../store/features/MoviesSlice';\n\nconst useStyles = makeStyles({\n  root: {\n    margin: '1rem 0',\n    minWidth: '30rem',\n  },\n  Form: {\n    width: '100%',\n  },\n  margin: {\n    marginBottom: 10,\n  },\n});\n\nexport interface IComment {\n  id?: number;\n  userid: string;\n  movieid: string;\n  text: string;\n  time?: number;\n}\n\nconst SendComment = () => {\n  const classes = useStyles();\n  const { userId } = useSelector((state: RootState) => state.user);\n  const [comment, setComment] = React.useState('');\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const sendForm = async () => {\n    if (!comment.length) return;\n    console.log(comment);\n    const movieid = window.location.href.split('/').pop();\n    const res = await movies.post('/comment', {\n      userid: `${userId}`,\n      movieid,\n      text: comment,\n      time: new Date().getTime(),\n    } as IComment);\n    if (res.data.status)\n      dispatch(updateComments({ id: movieid, comments: [res.data.data] }));\n    setComment('');\n  };\n\n  const handleInput = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.ctrlKey && e.key === 'Enter') sendForm();\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendForm();\n  };\n\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <form onSubmit={handleSubmit} className={classes.Form}>\n        <TextField\n          fullWidth\n          multiline\n          name=\"comment\"\n          type=\"textarea\"\n          placeholder={t`Leave a comment!`}\n          className={classes.margin}\n          size=\"small\"\n          onChange={(e) => setComment(e.currentTarget.value)}\n          onKeyPress={handleInput}\n          value={comment}\n        />\n        <Button type=\"submit\" className={classes.margin} variant=\"contained\">\n          {t`Send`}\n        </Button>\n      </form>\n    </Grid>\n  );\n};\n\nexport default SendComment;\n","import React, { useEffect, useRef } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport Comment from './Comment/Comment';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport SendComment from './SendComment/SendComment';\nimport { loadComments } from '../../store/features/MoviesSlice';\nimport { debouncedDetectBottomLine } from '../../utils';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch } from '../../store/store';\nimport { IMovie } from '../../models/MovieInfo';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\n\nconst LIMIT = 5;\nexport interface CommentsProps {\n  movie: IMovie;\n}\n\nconst Comments: React.FC<CommentsProps> = ({ movie }) => {\n  const gridRef = useRef<HTMLDivElement>(null);\n  const dispatch = useAppDispatch();\n  const { t } = useTranslation();\n  const offsetRef = useRef(0);\n  const { isAuth } = useSelector((state: RootState) => state.user);\n\n  // load first batch of comments initially\n  // if there's something left to load\n  useEffect(() => {\n    if (!movie?.info.maxComments) return;\n    if (\n      !movie.info.comments ||\n      (movie.info.comments &&\n        movie.info.comments.length < movie.info.maxComments)\n    ) {\n      dispatch(\n        loadComments(\n          { movieId: movie.id, offset: movie.info.comments?.length },\n          (length) => (offsetRef.current += length)\n        )\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!movie || !movie.info.maxComments) return;\n    const endOfCommentsCallback = () => {\n      if (\n        movie.info.comments?.length &&\n        movie.info.comments?.length < movie.info.maxComments\n      ) {\n        dispatch(\n          loadComments({\n            movieId: movie.id,\n            limit: LIMIT,\n            offset: movie.info.comments?.length || 0,\n          })\n        );\n      }\n    };\n    const trackScrolling = debouncedDetectBottomLine(\n      gridRef.current,\n      endOfCommentsCallback\n    );\n    window.addEventListener('scroll', trackScrolling);\n    return () => window.removeEventListener('scroll', trackScrolling);\n  }, [\n    movie,\n    movie.info.comments?.length,\n    movie.info.maxComments,\n    movie.id,\n    dispatch,\n  ]);\n\n  if (!movie) return null;\n  const content = movie.info.comments?.length ? (\n    movie.info.comments.map((comment) => (\n      <Comment {...comment} key={comment.commentid} />\n    ))\n  ) : (\n    <Typography variant=\"body1\" style={{ fontSize: '1.3rem' }}>\n      {t`No comments`}\n    </Typography>\n  );\n\n  return (\n    <Grid ref={gridRef} style={{ marginTop: 10 }} container direction=\"column\">\n      <CategoryHeader text={t`Comments`} />\n      {isAuth && <SendComment />}\n      {content}\n    </Grid>\n  );\n};\n\nexport default Comments;\n","import {\n  Button,\n  Grid,\n  IconButton,\n  makeStyles,\n  Popover,\n  Slider,\n  Tooltip,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport React, { forwardRef } from 'react';\nimport {\n  FastForward,\n  FastRewind,\n  Fullscreen,\n  Pause,\n  PlayArrow,\n  VolumeOff,\n  VolumeUp,\n} from '@material-ui/icons';\n\nconst useStyles = makeStyles({\n  controlsWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    background: 'rgba(0,0,0,0.6)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    zIndex: 1,\n  },\n\n  controlIcons: {\n    color: '#777',\n    fontSize: 50,\n    transform: 'scale(0.9)',\n    '&:hover': {\n      color: 'white',\n      transform: 'scale(1)',\n    },\n  },\n\n  bottomIcons: {\n    color: '#999',\n    '&:hover': {\n      color: 'white',\n    },\n  },\n\n  volumeSlider: {\n    width: 100,\n  },\n});\n\ninterface ValueProps {\n  open: boolean;\n  value: string;\n  children: JSX.Element;\n}\n\nconst ValueLabelComponent: React.FC<ValueProps> = (props2) => {\n  // debugger\n  const { children, open, value } = props2;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n\n    // <Popover\n    //   id=\"mouse-over-popover\"\n    //   // style={{\n    //   //   paper: { padding: 5 },\n    //   // }}\n    //   open={open}\n    //   // anchorEl={anchorEl}\n    //   anchorOrigin={{\n    //     vertical: 'bottom',\n    //     horizontal: 'left',\n    //   }}\n    //   transformOrigin={{\n    //     vertical: 'top',\n    //     horizontal: 'left',\n    //   }}\n    //   // onClose={handlePopoverClose}\n    //   disableRestoreFocus\n    // >\n    //   {children}\n    // </Popover>\n  );\n};\n\nconst PrettoSlider = withStyles({\n  root: {\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus, &:hover, &$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\ninterface Props {\n  onPlayPause: () => void;\n  onMuted: () => void;\n  onRewind: () => void;\n  onFastForward: () => void;\n  onVolumeChange: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onVolumeSeekUp: (e: React.ChangeEvent<{}>, n: number | number[]) => void;\n  onPlaybackRateChange: (n: number) => void;\n  onToggleFullScreen: () => void;\n  onSeek: (n: number | number[]) => void;\n  onSeekMouseDown: () => void;\n  onSeekMouseUp: () => void;\n  onChangeDisplayFormat: () => void;\n  elapsedTime: string;\n  seeking: boolean;\n  playing: boolean;\n  muted: boolean;\n  volume: number;\n  played: number;\n  playbackRate: number;\n  totalDuration: string;\n  title: string;\n}\n\nconst PlayerControls = forwardRef<HTMLDivElement, Props>((props, ref) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<Element | null>(null);\n\n  const handlePopover = (e: React.MouseEvent) => {\n    setAnchorEl(e.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'playbackrate-popover' : undefined;\n  // debugger\n  return (\n    <div className={classes.controlsWrapper} ref={ref}>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item>\n          <Typography variant=\"h5\" style={{ color: 'white' }}>\n            {props.title}\n          </Typography>\n        </Grid>\n        {/* <Grid item>\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<BookmarkIcon />}>\n\t\t\t\t\t\tBookmark\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t</Grid> */}\n      </Grid>\n      <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n        <IconButton\n          onClick={props.onRewind}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastRewind fontSize=\"inherit\" />\n        </IconButton>\n        <IconButton\n          onClick={props.onPlayPause}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          {props.playing ? (\n            <Pause fontSize=\"inherit\" />\n          ) : (\n            <PlayArrow fontSize=\"inherit\" />\n          )}\n        </IconButton>\n        <IconButton\n          onClick={props.onFastForward}\n          className={classes.controlIcons}\n          aria-label=\"reqind\"\n        >\n          <FastForward fontSize=\"inherit\" />\n        </IconButton>\n      </Grid>\n      <Grid\n        container\n        direction=\"row\"\n        alignItems=\"center\"\n        justify=\"space-between\"\n        style={{ padding: 16 }}\n      >\n        <Grid item xs={12}>\n          <Slider\n            min={0}\n            max={100}\n            // ValueLabelComponent={(props2) => (\n            //   <ValueLabelComponent {...props2} value={props.elapsedTime} />\n            // )}\n            value={props.played * 100}\n            onChange={(e, value) => props.onSeek(value)}\n            onMouseDown={props.onSeekMouseDown}\n            onChangeCommitted={props.onSeekMouseUp}\n          />\n        </Grid>\n        <Grid item>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <IconButton\n              onClick={props.onPlayPause}\n              className={classes.bottomIcons}\n            >\n              {props.playing ? (\n                <Pause fontSize=\"large\" />\n              ) : (\n                <PlayArrow fontSize=\"large\" />\n              )}\n            </IconButton>\n            <IconButton onClick={props.onMuted} className={classes.bottomIcons}>\n              {props.muted ? (\n                <VolumeOff fontSize=\"large\" />\n              ) : (\n                <VolumeUp fontSize=\"large\" />\n              )}\n            </IconButton>\n            <Slider\n              min={0}\n              max={100}\n              value={props.volume * 100}\n              className={classes.volumeSlider}\n              onChange={props.onVolumeChange}\n              onChangeCommitted={props.onVolumeSeekUp}\n            />\n            <Button\n              onClick={props.onChangeDisplayFormat}\n              variant=\"text\"\n              style={{ color: '#fff', marginLeft: 16 }}\n            >\n              <Typography>\n                {props.elapsedTime}/{props.totalDuration}\n              </Typography>\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Button\n            onClick={handlePopover}\n            variant=\"text\"\n            className={classes.bottomIcons}\n          >\n            <Typography>{props.playbackRate}X</Typography>\n          </Button>\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n          >\n            <Grid container direction=\"column-reverse\">\n              {[0.5, 1, 1.5, 2].map((rate) => (\n                <Button\n                  key={rate}\n                  onClick={() => props.onPlaybackRateChange(rate)}\n                  variant=\"text\"\n                >\n                  <Typography\n                    color={\n                      rate === props.playbackRate ? 'secondary' : undefined\n                    }\n                  >\n                    {rate}\n                  </Typography>\n                </Button>\n              ))}\n            </Grid>\n          </Popover>\n          <IconButton\n            onClick={props.onToggleFullScreen}\n            className={classes.bottomIcons}\n          >\n            <Fullscreen fontSize=\"large\" />\n          </IconButton>\n        </Grid>\n      </Grid>\n    </div>\n  );\n});\n\nexport default PlayerControls;\n","// ts-nocheck\n\nimport { makeStyles, Typography } from '@material-ui/core';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ReactPlayer from 'react-player';\nimport screenfull from 'screenfull';\nimport ActivePeers from './ActivePeers';\nimport PlayerControls from './PlayerControls';\n\nconst useStyles = makeStyles({\n  playerWrapper: {\n    position: 'relative',\n    width: '100%',\n  },\n  Error: {\n    width: '100%',\n    height: '100%',\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: '#ddd',\n    borderRadius: 5,\n  },\n});\n\ninterface Props {\n  title: string;\n  id?: string | number;\n  src?: string;\n}\n\nconst format = (seconds: number) => {\n  if (isNaN(seconds)) {\n    return '00:00';\n  }\n  const date = new Date(seconds * 1000);\n  const hh = date.getUTCHours();\n  const mm = date.getUTCMinutes();\n  const ss = date.getUTCSeconds().toString().padStart(2, '0');\n  if (hh) {\n    return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\n  }\n  return `${mm}:${ss}`;\n};\n\nfunction Player({ title, id, src }: Props) {\n  const classes = useStyles();\n  const [state, setState] = useState({\n    playing: false,\n    muted: false,\n    volume: 0.5,\n    playbackRate: 1.0,\n    played: 0,\n    seeking: false,\n    controlsVisible: true,\n    error: false,\n  });\n  const [timeDisplayFormat, setTimeDisplayFormat] = useState('normal');\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    seeking,\n    controlsVisible,\n    error,\n  } = state;\n  const playerRef = useRef<ReactPlayer>(null);\n  const playerContainerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n  const timeoutId = useRef<NodeJS.Timeout>();\n  const url = id ? `/api/storage/load/${id}` : src;\n  const { t } = useTranslation();\n\n  const handlePlayPause = () => {\n    setState({ ...state, playing: !state.playing });\n  };\n  const handleRewind = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() - 10);\n  };\n  const handleFastForward = () => {\n    if (playerRef === null || playerRef.current === null) return;\n    playerRef.current.seekTo(playerRef.current.getCurrentTime() + 10);\n  };\n  const handleMute = () => {\n    setState({ ...state, muted: !state.muted });\n  };\n  const handleVolumeChange = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handleVolumeSeekUp = (\n    _e: React.ChangeEvent<{}>,\n    newValue: number | number[]\n  ) => {\n    const value = typeof newValue === 'number' ? newValue : newValue[0];\n    setState({\n      ...state,\n      volume: value / 100,\n      muted: value === 0,\n    });\n  };\n  const handlePlaybackRateChange = (rate: number) => {\n    setState({ ...state, playbackRate: rate });\n  };\n  const toggleFullScreen = () => {\n    if (!playerContainerRef || !playerContainerRef.current) return;\n    if (screenfull && screenfull.isEnabled && playerContainerRef !== null) {\n      screenfull.toggle(playerContainerRef.current);\n    }\n  };\n\n  const handleProgress = ({ played }: { played: number }) => {\n    console.log('handleProgress', played);\n    if (!controlsRef || !controlsRef.current) return;\n    timeoutId.current = setTimeout(() => {\n      if (!controlsRef || !controlsRef.current) return;\n      controlsRef.current.style.visibility = 'hidden';\n    }, 1000);\n    if (!state.seeking) {\n      setState({ ...state, played });\n    }\n  };\n  const handleSeek = (value: number | number[]) => {\n    if (!playerRef || !playerRef.current) return;\n    const played = typeof value === 'number' ? value / 100 : value[0] / 100;\n    if (played === state.played) return;\n    setState({ ...state, played });\n    playerRef.current.seekTo(played, 'fraction');\n  };\n  const handleSeekMouseDown = () => {\n    setState({ ...state, seeking: true });\n  };\n  const handleSeekMouseUp = () => {\n    setState({ ...state, seeking: false });\n  };\n  const handleChangeDisplayFormat = () => {\n    setTimeDisplayFormat(\n      timeDisplayFormat === 'normal' ? 'remaining' : 'normal'\n    );\n  };\n  const handleMouseMove = () => {\n    if (!controlsRef || !controlsRef.current) return;\n    controlsRef.current.style.visibility = 'visible';\n    if (timeoutId.current) clearTimeout(timeoutId.current);\n  };\n  const handleError = (e: Error) => {\n    console.log('handleError', e);\n    setState((prev) => ({ ...prev }));\n  };\n\n  const currentTime =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getCurrentTime();\n  const duration =\n    !playerRef || !playerRef.current ? 0 : playerRef.current.getDuration();\n  const elapsedTime =\n    timeDisplayFormat === 'normal'\n      ? format(currentTime)\n      : `-${format(duration - currentTime)}`;\n  const totalDuration = format(duration);\n  return error ? (\n    <div className={classes.Error}>{t`Cannot load movie`}</div>\n  ) : (\n    <div\n      ref={playerContainerRef}\n      className={classes.playerWrapper}\n      onMouseMove={handleMouseMove}\n    >\n      <ReactPlayer\n        ref={playerRef}\n        width=\"100%\"\n        height=\"100%\"\n        url={url}\n        muted={muted}\n        playing={playing}\n        volume={volume}\n        controls={false}\n        playbackRate={playbackRate}\n        onProgress={handleProgress}\n        onError={handleError}\n        onBuffer={() => console.log('onBuffer')}\n        onBufferEnd={() => console.log('onBufferEnd')}\n      />\n      {controlsVisible && (\n        <PlayerControls\n          ref={controlsRef}\n          onPlayPause={handlePlayPause}\n          onMuted={handleMute}\n          playing={playing}\n          muted={muted}\n          volume={volume}\n          played={played}\n          seeking={seeking}\n          onRewind={handleRewind}\n          onFastForward={handleFastForward}\n          onVolumeChange={handleVolumeChange}\n          onVolumeSeekUp={handleVolumeSeekUp}\n          playbackRate={playbackRate}\n          onPlaybackRateChange={handlePlaybackRateChange}\n          onToggleFullScreen={toggleFullScreen}\n          onSeek={handleSeek}\n          onSeekMouseDown={handleSeekMouseDown}\n          onSeekMouseUp={handleSeekMouseUp}\n          elapsedTime={elapsedTime}\n          totalDuration={totalDuration}\n          onChangeDisplayFormat={handleChangeDisplayFormat}\n          title={title}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Player;\n","import { Grid, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useToast } from '../../hooks/useToast';\nimport { loadActivePeers } from '../../store/features/MoviesSlice';\n\ninterface Props {\n  movieId?: string | number;\n}\n\nconst WARNING_MESSAGE_TIMEOUT = 30000;\nconst STATS_REQUEST_INTERVAL = 10000;\n\nconst initialState = { activePeers: 0, loadedPercent: 0 };\nconst ActivePeers = ({ movieId }: Props) => {\n  const [state, setState] = useState(initialState);\n  const { toast } = useToast();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!movieId) return;\n    const timeout = setTimeout(() => {\n      if (!state.activePeers) {\n        toast({ text: t`loadingTimeoutWarning` }, 'warning', {\n          autoHideDuration: 7000,\n        });\n      }\n    }, WARNING_MESSAGE_TIMEOUT);\n    const interval = setInterval(async () => {\n      const data = await loadActivePeers(`${movieId}`);\n      if (data) setState(data);\n      if (data?.activePeers) clearTimeout(timeout);\n    }, STATS_REQUEST_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <Grid container>\n      <Typography style={{ marginRight: 5 }}>\n        Active peers: {state.activePeers}\n      </Typography>\n      <Typography>Percent loaded: {state.loadedPercent}%</Typography>\n    </Grid>\n  );\n};\n\nexport default ActivePeers;\n","import { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { IUser } from '../../models/MovieInfo';\nimport HorizontalGrid from '../HorizontalGrid/HorizontalGrid';\nimport CategoryHeader from '../CategoryHeader/CategoryHeader';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store/rootReducer';\nimport Comments from '../Comments/Comments';\nimport { useAppDispatch } from '../../store/store';\nimport { loadMovie, resetError } from '../../store/features/MoviesSlice';\nimport { useTranslation } from 'react-i18next';\nimport { primaryColor } from '../../theme';\nimport Player from '../Player/Player';\nimport { useToast } from '../../hooks/useToast';\nimport NativePlayer from '../Player/NativePlayer';\nimport ActivePeers from '../Player/ActivePeers';\n\ninterface TParams {\n  id: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    fontSize: '1.3rem',\n    padding: '10px 0',\n  },\n  Header: {\n    fontSize: '2rem',\n    margin: '0 10px',\n    fontWeight: 700,\n  },\n  Divider: {\n    margin: '10px 0',\n  },\n  Poster: {\n    height: '23rem',\n    marginRight: 10,\n  },\n  MainInfoText: {\n    margin: 5,\n    width: '100%',\n    display: 'flex',\n    alignItems: 'flex-end',\n    fontSize: 'inherit',\n    fontWeight: 200,\n  },\n  Link: {\n    marginLeft: 5,\n    fontSize: 'inherit',\n    color: 'inherit',\n    fontWeight: 'inherit',\n    textTransform: 'capitalize',\n    '&:hover': {\n      color: primaryColor.light,\n    },\n  },\n  Description: {\n    marginTop: 10,\n    fontSize: 'inherit',\n  },\n  Video: {\n    margin: '15px 0',\n  },\n  AdditionalInfo: {\n    margin: '10px 0',\n  },\n});\n\nconst MovieFullInfo = ({ match }: RouteComponentProps<TParams>) => {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const { toast } = useToast();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { movies, error } = useSelector((state: RootState) => state.movies);\n  const movie = movies.find((movie) => movie.en.id === match.params.id);\n  const headerRef = React.useRef<HTMLHeadingElement | null>(null);\n\n  // if no movies in redux - load some, we've landed on movie's page\n  useEffect(() => {\n    if (!movie) dispatch(loadMovie(match.params.id));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (error) {\n      history.push('/');\n      toast({ text: t(error) }, 'error');\n      dispatch(resetError());\n    }\n  }, [error, dispatch, history, t, toast, i18n.language]);\n\n  useEffect(() => {\n    if (!headerRef || !headerRef.current) return;\n    headerRef.current.scrollIntoView(true);\n  }, []);\n\n  const mapItemsToLinks = (\n    items: (string | IUser)[] | undefined,\n    backup?: string\n  ): JSX.Element[] | string => {\n    if (!items || !items.length) return backup || t('No info');\n    return items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return (\n        <Link to={`/genres/${text}`} key={text} className={classes.Link}>\n          {t(text)}\n        </Link>\n      );\n    });\n  };\n  const mapItems = (items?: (string | IUser)[], backup?: string): string => {\n    if (!items || !items.length) return backup || t('No info');\n    const names = items.map((item: string | IUser) => {\n      const text = typeof item === 'string' ? item : item.name;\n      return text;\n    });\n    return names.join(', ');\n  };\n\n  // if (!isAuth)\n  //   return (\n  //     <Grid\n  //       container\n  //       direction=\"column\"\n  //       alignItems=\"center\"\n  //       className={classes.root}\n  //     >\n  //       <Typography className={classes.Description}>{t`AuthOnly`}</Typography>\n  //     </Grid>\n  //   );\n\n  if (!movie) return null;\n  return (\n    <Grid container direction=\"column\" className={classes.root}>\n      <Typography variant=\"h2\" className={classes.Header} ref={headerRef}>\n        {movie[i18n.language as 'en' | 'ru'].title}\n      </Typography>\n      <Divider className={classes.Divider} />\n      <Grid container wrap=\"nowrap\">\n        <img\n          className={classes.Poster}\n          src={movie.en.img}\n          alt={`${movie.en.title} poster`}\n        />\n        <Grid item container direction=\"column\">\n          <Grid container className={classes.MainInfoText}>\n            {t`Year`}: {movie.en.info.year}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Genres`}: {mapItemsToLinks(movie.en.info.genres)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Length`}:{' '}\n            {movie.en.info.length > 0\n              ? `${movie.en.info.length}${t('min')}`\n              : t`unknown`}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Views`}: {movie.en.info.views}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`PG rating`}: {movie.en.info.pgRating}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Directed`}:{' '}\n            {mapItems(movie.en.info.directorList, movie.en.info.directors)}\n          </Grid>\n          <Grid container className={classes.MainInfoText}>\n            {t`Actors`}: {mapItems(movie.en.info.cast, movie.en.info.stars)}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container className={classes.Video}>\n        {/* <NativePlayer id={movie.en.id} />\n        <NativePlayer src={`/api/test/id000`} /> */}\n        <ActivePeers movieId={movie.en.id} />\n\n        <Player\n          id={movie.en.id}\n          title={movie[i18n.language as 'en' | 'ru'].title}\n        />\n      </Grid>\n      <Grid container direction=\"column\" className={classes.AdditionalInfo}>\n        <CategoryHeader text={t`About movie`} />\n        <Typography variant=\"body1\" className={classes.Description}>\n          {movie[i18n.language as 'en' | 'ru'].info.description || t`No info`}\n        </Typography>\n        <Divider className={classes.Divider} />\n        {movie.en.info.photos && (\n          <HorizontalGrid\n            sources={movie.en.info.photos}\n            name={movie.en.title}\n            type={'photo'}\n          />\n        )}\n        {movie.en.info.videos && (\n          <HorizontalGrid\n            sources={movie.en.info.videos}\n            name={movie.en.title}\n            type={'video'}\n          />\n        )}\n        <Comments movie={movie.en} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default MovieFullInfo;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useSelector } from 'react-redux';\nimport classnames from 'classnames';\nimport { RootState } from '../../../store/rootReducer';\nimport { Paper } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up('sm')]: {\n      minWidth: '344px !important',\n    },\n  },\n  card: {\n    display: 'flex',\n    width: '100%',\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  prompt: {\n    backgroundColor: theme.palette.grey[800],\n    width: 550,\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: 'block',\n    fontWeight: 'bold',\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: '8px 8px 8px 26px',\n  },\n  close: {\n    marginLeft: 'auto !important',\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: '1rem',\n    color: theme.palette.common.white,\n  },\n}));\n\ninterface Props {\n  id: string;\n}\n\nconst SnackMessage = React.forwardRef<HTMLDivElement, Props>(({ id }, ref) => {\n  const classes = useStyles();\n  const { closeSnackbar } = useSnackbar();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n\n  const handleDismiss = () => {\n    closeSnackbar(id);\n  };\n\n  return (\n    <Paper ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}:\n            </Typography>\n          )}\n          {text && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {text}\n            </Typography>\n          )}\n        </CardActions>\n\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </Paper>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from 'notistack';\nimport { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { removeSnack } from '../../store/features/SnackSlice';\nimport { RootState } from '../../store/rootReducer';\nimport { useAppDispatch } from '../../store/store';\n\nlet displayed: string[] = [];\n\nconst Notifier = () => {\n  const dispatch = useAppDispatch();\n  const notifications = useSelector(\n    (state: RootState) => state.snack.notifications\n  );\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id: string) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id: string) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (_event, key: string) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ForgotPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      try {\n        const res = await passwd.post('repair', { email: inputs.email });\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Check your email` });\n        } else {\n          console.log(res.data[i18n.language]);\n          toast({ text: res.data[i18n.language] || t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, toast, t, i18n.language]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, email: isValid })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Restore password`,\n          disabled: !formValid,\n        },\n        {\n          to: '/login',\n          variant: 'outlined',\n          text: t('Login'),\n        },\n        {\n          to: '/register',\n          variant: 'outlined',\n          text: t('Register'),\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, handleInput, handleSubmit, formValid, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { passwd } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport { getSearchParam } from '../../utils';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ResetPassword = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ password: '', confirm: '' });\n  const [valid, setValid] = useState({ password: false, confirm: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.password && valid.confirm;\n  const { toast } = useToast();\n  const history = useHistory();\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ForgotPassword] handleSubmit', inputs);\n\n      const searchParams = getSearchParam();\n      if (!searchParams?.repairToken) {\n        toast({ text: t`ServerErrorTry` }, 'error');\n        history.push('/forgot_password');\n        return;\n      }\n      try {\n        const res = await passwd.patch(\n          'repair/patch',\n          { passwd: inputs.password },\n          { headers: { repairToken: searchParams.repairToken } }\n        );\n        console.log(res);\n        if (res.status < 400) {\n          toast({ text: t`Password changed` });\n          history.push('/login');\n        } else {\n          toast({ text: res.data[i18n.language] ?? t`Server error` }, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'password',\n          type: 'password',\n          label: t`New password`,\n          placeholder: t`Enter password`,\n          value: inputs.password,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, password: isValid })),\n          rules: {\n            helperText: t`passwordError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,}$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t`Confirm`,\n          placeholder: t`Confirm password`,\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t`confirmError`,\n            rule: {\n              minLength: 6,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.password}$`),\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new password`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, i18n.language, toast, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ResetPassword;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nimport { email } from '../../axios';\nimport { useToast } from '../../hooks/useToast';\n\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n});\n\nconst ChangeEmail = () => {\n  const classes = useStyles();\n  const [inputs, setInputs] = useState({ email: '' });\n  const [valid, setValid] = useState({ email: false });\n  const { t, i18n } = useTranslation();\n  const formValid = valid.email;\n  const { toast } = useToast();\n\n  const handleInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      setInputs({\n        ...inputs,\n        [e.target.name]: e.target.value,\n      });\n    },\n    [inputs]\n  );\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      console.log('[ChangeEmail] handleSubmit', inputs);\n\n      // use cookie or repairToken to get new email\n      try {\n        const res = await email.post('patch', {\n          body: { email: inputs.email },\n        });\n        console.log(res);\n        if (res.status < 400) {\n          toast(t`Check your email`);\n        } else {\n          console.log(res.data[i18n.language]);\n          const message = {\n            text: res.data[i18n.language] ?? t`Server error`,\n          };\n\n          toast(message, 'error');\n        }\n      } catch (e) {\n        toast(t`Server error`, 'error');\n      }\n    },\n    [inputs, t, i18n.language, toast]\n  );\n\n  const formData = useMemo(\n    () => ({\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          required: true,\n          onValidate: (isValid) => {\n            setValid((prev) => ({ ...prev, email: isValid }));\n          },\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 6,\n              maxLength: 40,\n              regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t`Save new email`,\n          disabled: !formValid,\n        },\n      ] as IButtonProps[],\n    }),\n    [inputs.email, formValid, handleInput, handleSubmit, t]\n  );\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default ChangeEmail;\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.41c95564.png\";","import { Avatar, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React, { useState, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { email, passwd, profile } from '../../axios';\nimport Form, { IButtonProps } from '../Form/Form';\nimport { IInputProps } from '../Input/Input';\nimport defaultAvatar from '../../images/defaultAvatar.png';\nimport { BackupRounded } from '@material-ui/icons';\nimport { RootState } from '../../store/rootReducer';\nimport { useSelector } from 'react-redux';\nimport { useToast } from '../../hooks/useToast';\nimport { getToken, saveUserState } from '../../store/features/UserSlice';\nimport { useAppDispatch } from '../../store/store';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: '2rem 1rem',\n    minWidth: '30rem',\n  },\n  avatarWrapper: {\n    position: 'relative',\n    '&:hover': {\n      cursor: 'pointer',\n      '& $uploadIcon': {\n        opacity: 0.7,\n      },\n      '& $avatarImage': {\n        opacity: 0.5,\n      },\n    },\n  },\n  avatarImage: {\n    width: '100px',\n    height: '100px',\n    border: '2px solid rgba(3, 82, 99, 0.5)',\n    opacity: 1,\n    transition: '0.2s',\n  },\n  inputNone: {\n    display: 'none',\n  },\n  uploadIcon: {\n    position: 'absolute',\n    transition: '0.2s',\n    top: 20,\n    left: 20,\n    width: 60,\n    height: 60,\n    opacity: 0,\n    zIndex: 2,\n  },\n});\n\nconst Settings = () => {\n  const user = useSelector((state: RootState) => state.user);\n  const [inputs, setInputs] = useState({\n    email: user.email,\n    username: user.username,\n    newPassword: '',\n    currentPassword: '',\n    confirm: '',\n    avatarImage: user.imageBody,\n  });\n  const [valid, setValid] = useState({\n    email: true,\n    newPassword: true,\n    currentPassword: true,\n    confirm: true,\n    username: true,\n  });\n  const classes = useStyles();\n  const { t, i18n } = useTranslation();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const validateForm = () => {\n    const { email, username, currentPassword, confirm } = valid;\n    return inputs.newPassword\n      ? currentPassword && confirm && (email || username)\n      : email || username;\n  };\n  const formValid = validateForm();\n\n  const validateUpload = (file: File) => {\n    return (\n      file.type === 'image/png' ||\n      file.type === 'image/jpg' ||\n      file.type === 'image/jpeg'\n    );\n  };\n\n  const uploadAvatar = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!e.target.files) return;\n    let file = e.target.files[0];\n    if (!validateUpload(file)) {\n      e.target.value = '';\n      return toast({ text: 'Please add image only!' });\n    }\n    if (file.size > 2000000) {\n      e.target.value = '';\n      return toast({ text: 'Please upload picture size less then 2 mb!' });\n    }\n    let reader = new FileReader();\n    reader.onload = async function (e) {\n      if (!e.target || !e.target.result) return;\n      const image = e.target.result.toString();\n      setInputs({\n        ...inputs,\n        avatarImage: image,\n      });\n      const body = {\n        imageBody: image,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      // console.log(res.data);\n      if (res.status >= 400) toast({ text: t`Avatar upload error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              imageBody: image,\n            },\n          })\n        );\n        toast({ text: t`Avatar uploaded` });\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const formData = useMemo(() => {\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.preventDefault();\n      setInputs((prevInputs) => ({\n        ...prevInputs,\n        [e.target.name]: e.target.value,\n      }));\n    };\n\n    const updateEmail = async () => {\n      const body = {\n        email: inputs.email,\n      };\n      const res = await email.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              email: inputs.email,\n            },\n          })\n        );\n        toast({ text: t`Check your email` });\n      }\n    };\n\n    const updateUsername = async () => {\n      const body = {\n        username: inputs.username,\n      };\n      const res = await profile.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        dispatch(\n          saveUserState({\n            user: {\n              ...user,\n              username: inputs.username,\n            },\n          })\n        );\n        toast({ text: t`User info updated` });\n      }\n    };\n\n    const updatePassword = async () => {\n      const body = {\n        passwd: inputs.currentPassword,\n        newPasswd: inputs.newPassword,\n      };\n      const res = await passwd.patch('patch', body, {\n        headers: {\n          accessToken: getToken(),\n        },\n      });\n      console.log(res.data);\n      if (res.status >= 400)\n        toast({ text: res.data[i18n.language] || t`Update error` }, 'error');\n      else {\n        toast({ text: t`User info updated` });\n        setInputs({\n          ...inputs,\n          currentPassword: '',\n          confirm: '',\n          newPassword: '',\n        });\n      }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      if (inputs.email !== user.email) updateEmail();\n      if (inputs.username !== user.username) updateUsername();\n      if (inputs.newPassword) updatePassword();\n      console.log('[Settings] handleSubmit', inputs);\n    };\n\n    return {\n      inputs: [\n        {\n          name: 'email',\n          type: 'email',\n          label: t('Email'),\n          placeholder: t('Enter email'),\n          value: inputs.email,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('emailError'),\n            rule: {\n              minLength: 0,\n              maxLength: 40,\n              regex: /^(([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,}))?$/i,\n            },\n          },\n        },\n        {\n          name: 'username',\n          type: 'text',\n          label: t('Username'),\n          placeholder: t('Enter username'),\n          value: inputs.username,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('usernameError'),\n            rule: {\n              minLength: 0,\n              maxLength: 20,\n              regex: /^([\\w-+.]+)?$/,\n            },\n          },\n        },\n        {\n          name: 'newPassword',\n          type: 'password',\n          label: t('New password'),\n          placeholder: t('Enter new password'),\n          value: inputs.newPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('passwordError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: /^((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{6,})?$/,\n            },\n          },\n        },\n        {\n          name: 'confirm',\n          type: 'password',\n          label: t('Confirm'),\n          placeholder: t('Confirm password'),\n          value: inputs.confirm,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({ ...prev, confirm: isValid })),\n          rules: {\n            helperText: t('confirmError'),\n            rule: {\n              minLength: 0,\n              maxLength: 25,\n              regex: new RegExp(`^${inputs.newPassword}$`),\n            },\n          },\n        },\n        {\n          name: 'currentPassword',\n          type: 'password',\n          label: t('Current password'),\n          placeholder: t('Enter current password'),\n          value: inputs.currentPassword,\n          onChange: handleInput,\n          size: 'small',\n          fullWidth: true,\n          onValidate: (isValid) =>\n            setValid((prev) => ({\n              ...prev,\n              currentPassword: isValid,\n            })),\n          rules: {\n            helperText: t('currentPasswordError'),\n            rule: {\n              minLength: inputs.newPassword.length ? 1 : 0,\n              maxLength: 25,\n            },\n          },\n        },\n      ] as IInputProps[],\n      buttons: [\n        {\n          type: 'submit',\n          variant: 'contained',\n          onClick: handleSubmit,\n          text: t('Save'),\n          disabled: !formValid,\n        },\n        {\n          variant: 'outlined',\n          onClick: () => history.goBack(),\n          text: t`Back`,\n        },\n      ] as IButtonProps[],\n    };\n  }, [inputs, formValid, t, dispatch, i18n.language, toast, user, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      <Typography>{t('Settings').toUpperCase()}</Typography>\n      <div\n        className={classes.avatarWrapper}\n        onClick={() => {\n          if (inputRef && inputRef.current) {\n            inputRef.current.click();\n          }\n        }}\n      >\n        <Avatar\n          className={classes.avatarImage}\n          alt=\"profile image\"\n          src={inputs.avatarImage || defaultAvatar}\n        />\n        <BackupRounded className={classes.uploadIcon} />\n        <input\n          className={classes.inputNone}\n          type=\"file\"\n          accept=\"image/png, image/jpeg, image/jpg\"\n          ref={inputRef}\n          onChange={uploadAvatar}\n        />\n      </div>\n      <Form {...formData} />\n    </Grid>\n  );\n};\n\nexport default Settings;\n","import { Container } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport Cards from '../../components/Cards/Cards';\nimport FilterSortPanel from '../../components/FilterSortPanel/FilterSortPanel';\nimport CardLoader from '../../components/MovieCard/CardLoader/CardLoader';\nimport { useToast } from '../../hooks/useToast';\nimport { ITranslatedMovie } from '../../models/MovieInfo';\nimport { RootState } from '../../store/rootReducer';\nimport { notEmpty } from '../../utils';\n\nconst SearchPage = () => {\n  const { movies, search, loading, error } = useSelector(\n    (state: RootState) => state.movies\n  );\n  const history = useHistory();\n  const { toast } = useToast();\n  const { t } = useTranslation();\n  if (!loading && movies.length === 0) history.push('/');\n  if (error) {\n    history.push('/');\n    toast({ text: t(error) }, 'error');\n  }\n\n  const displayedMovies: ITranslatedMovie[] = search\n    .map((movieId) => movies.find((movie) => movie.en.id === movieId))\n    .filter(notEmpty);\n\n  const cards = loading ? (\n    <CardLoader display=\"lines\" />\n  ) : (\n    <Cards movies={displayedMovies} />\n  );\n\n  return (\n    <Container>\n      <FilterSortPanel />\n      {cards}\n    </Container>\n  );\n};\n\nexport default SearchPage;\n","import React, { useEffect } from 'react';\nimport { Container, makeStyles } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { theme } from './theme';\nimport { useSelector } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { getSearchParam } from './utils';\nimport { useAppDispatch } from './store/store';\nimport { RootState } from './store/rootReducer';\nimport { getSelfInfo, getToken } from './store/features/UserSlice';\nimport { useToast } from './hooks/useToast';\n\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport MainPage from './pages/MainPage/MainPage';\nimport RegisterPage from './pages/RegisterPage/RegisterPage';\n\nimport Auth from './components/Auth/Auth';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport MovieFullInfo from './components/MovieFullInfo/MovieFullInfo';\nimport SnackMessage from './components/Notifier/SnackMessage/SnackMessage';\nimport Notifier from './components/Notifier/Notifier';\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ResetPassword from './components/ResetPassword/ResetPassword';\nimport ChangeEmail from './components/ChangeEmail/ChangeEmail';\nimport Settings from './components/Settings/Settings';\nimport SearchPage from './pages/SearchPage/SearchPage';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: '100%',\n    minWidth: 500,\n    margin: 0,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n    },\n  },\n  Wrapper: {\n    maxWidth: 840,\n    [theme.breakpoints.down('xs')]: {\n      padding: 0,\n      margin: 0,\n    },\n  },\n  Slider: {\n    height: 400,\n    minHeight: 300,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const { isAuth } = useSelector((state: RootState) => state.user);\n  const { toast } = useToast();\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    const urlParams = getSearchParam();\n    console.log(urlParams);\n    if (urlParams?.error) {\n      const lang = i18n.language as 'en' | 'ru';\n      toast({ text: urlParams.error[lang] as string }, 'error');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const token = getToken();\n    if (token) {\n      dispatch(getSelfInfo());\n    }\n  }, [dispatch]);\n\n  const routes = isAuth ? (\n    <Switch>\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/change_email\" component={ChangeEmail} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  ) : (\n    <Switch>\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/register\" component={RegisterPage} />\n      <Route path=\"/login\" component={LoginPage} />\n      <Route path=\"/reset_password\" component={ResetPassword} />\n      <Route path=\"/forgot_password\" component={ForgotPassword} />\n      <Route path=\"/search/:id\" component={SearchPage} />\n      <Route path=\"/movies/:id\" component={MovieFullInfo} />\n      <Route\n        path=\"/byname/:id\"\n        render={(props) => <MainPage {...props} route={'byname'} />}\n      />\n      <Route path=\"/\" component={MainPage} />\n    </Switch>\n  );\n\n  return (\n    <Container className={classes.root}>\n      <Container className={classes.Wrapper}>\n        <SnackbarProvider\n          maxSnack={3}\n          classes={{ containerRoot: classes.root }}\n          content={(key: string) => <SnackMessage id={key} />}\n        >\n          <Header />\n          {routes}\n          <Footer />\n          <Notifier />\n        </SnackbarProvider>\n      </Container>\n    </Container>\n  );\n}\n\nexport default App;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { movies, search as axiosSearch } from '../../axios';\nimport { IComment, ITranslatedMovie } from '../../models/MovieInfo';\nimport { AppDispatch } from '../store';\nimport { CountriesKeys, GenresKeys } from './FilterSlice';\n\nexport interface MoviesItems {\n  search?: ITranslatedMovie[];\n  popular?: ITranslatedMovie[];\n  byName?: ITranslatedMovie[];\n}\n\nexport type MovieItemsKeys = keyof MoviesItems;\nexport interface CommentsItems {\n  comments: IComment[];\n  id?: string;\n}\nexport interface ErrorItem {\n  error: string;\n}\n\nexport interface MoviesState {\n  loading: boolean;\n  error: string | null;\n  movies: ITranslatedMovie[];\n  search: string[];\n  popular: string[];\n  byName: string[];\n  isEndOfMovies: boolean;\n}\n\ninterface MoviesError {\n  ru: string;\n  en: string;\n}\n\nexport interface IMoviesResponse {\n  data: ITranslatedMovie[] | null;\n  error?: string;\n  status: boolean;\n}\n\nexport interface IFilter {\n  limit?: number;\n  offset?: number;\n  letter?: string;\n  search?: string;\n  genres?: GenresKeys[];\n  years?: [] | number[][];\n  countries?: CountriesKeys[];\n  id?: string | number;\n}\ninterface ILoaderInfo {\n  activePeers: number;\n  loadedPercent: number;\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  movies: [],\n  search: [],\n  popular: [],\n  byName: [],\n  isEndOfMovies: false,\n} as MoviesState;\n\nconst MoviesSlice = createSlice({\n  name: 'movies',\n  initialState,\n  reducers: {\n    addMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const add = (type: MovieItemsKeys) => {\n        console.log(\n          '[loadMovies] payload, moviesLength',\n          payload,\n          state.movies.length\n        );\n        if (!payload[type] || !payload[type]?.length) return;\n        if (state.movies.length) {\n          const newMovies = payload[type]?.filter(\n            (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n          );\n          console.log('[loadMovies] newMovies', newMovies);\n          if (newMovies?.length) {\n            state.movies = state.movies.concat(newMovies);\n          }\n          // set unique movie ids\n          const set = new Set(\n            state[type].concat((payload[type] || []).map((el) => el.en.id))\n          );\n          state[type] = Array.from(set);\n        } else {\n          const arr = payload[type] || [];\n          state.movies = arr;\n          state[type] = arr.map((el) => el.en.id);\n        }\n      };\n\n      state.loading = false;\n      if (payload.search) {\n        add('search');\n      } else if (payload.byName) {\n        add('byName');\n      } else if (payload.popular) {\n        add('popular');\n      } else {\n        throw new Error('[movies:addMovies] no movies in payload');\n      }\n    },\n    setMovies(state, { payload }: PayloadAction<MoviesItems>) {\n      const set = (type: MovieItemsKeys) => {\n        if (!payload[type]) return;\n        // state[type] = payload[type] || [];\n        const newMovies = payload[type]?.filter(\n          (movie) => !state.movies.find((el) => el.en.id === movie.en.id)\n        );\n        if (newMovies) {\n          state.movies = state.movies.concat(newMovies);\n          state[type] = payload[type]?.map((el) => el.en.id) || [];\n        }\n      };\n      state.loading = false;\n      if (payload.search) {\n        set('search');\n      } else if (payload.byName) {\n        set('byName');\n      } else if (payload.popular) {\n        set('popular');\n      } else {\n        throw new Error('[movies:setMovies] no movies in payload');\n      }\n    },\n    updateComments(state, { payload }: PayloadAction<CommentsItems>) {\n      state.loading = false;\n      if (!payload.id)\n        throw new Error('[movies:updateComments] no id in payload');\n      if (!payload.comments)\n        throw new Error('[movies:updateComments] no comments in payload');\n      const movie = state.movies.find((movie) => movie.en.id === payload.id);\n      if (!movie) throw new Error('[movies:updateComments] no movie found');\n      const newComments = payload.comments.filter((comment) =>\n        movie.en.info.comments\n          ? !movie.en.info.comments.find(\n              (el) => el.commentid === comment.commentid\n            )\n          : !!comment\n      );\n      movie.en.info.comments = movie.en.info.comments\n        ? [...movie.en.info.comments, ...newComments]\n        : [...newComments];\n    },\n    setEndOfMovies(state) {\n      state.isEndOfMovies = true;\n    },\n    resetEndOfMovies(state) {\n      state.isEndOfMovies = false;\n    },\n    setError(state, { payload }: PayloadAction<ErrorItem>) {\n      state.error = payload.error;\n      state.loading = false;\n    },\n    resetError(state) {\n      state.error = null;\n      state.loading = false;\n    },\n    startLoading(state) {\n      state.loading = true;\n    },\n    stopLoading(state) {\n      state.loading = false;\n    },\n  },\n});\n\nconst loadMoviesAsync = async (\n  params?: IFilter\n): Promise<IMoviesResponse | null> => {\n  try {\n    console.log('[loadMoviesAsync] params', params);\n    let res = null;\n    if (params?.search)\n      res = await axiosSearch('find', {\n        params: {\n          category: 'All',\n          search: params?.search,\n        },\n      });\n    else if (params?.letter)\n      res = await movies(`byname`, {\n        params,\n      });\n    else\n      res = await movies('movies', {\n        params,\n      });\n\n    // console.log(res.data);\n    return res.data;\n  } catch (e) {\n    console.log(e);\n    return null;\n  }\n};\n\nexport const loadMovies = ({\n  filter = {\n    limit: 20,\n    offset: 0,\n  },\n  callback,\n}: {\n  filter?: IFilter;\n  callback?: (arg0: boolean) => void;\n}) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const limit = filter.limit || 20;\n  console.log('[loadMovies] filter', filter);\n  const movies = await loadMoviesAsync(filter);\n  console.log('[loadMovies] res', movies);\n\n  if (movies?.status && movies.data) {\n    if (movies.data.length < limit) dispatch(setEndOfMovies());\n    const removedNulls = movies.data?.map((el) =>\n      !el.ru ? { en: el.en, ru: el.en } : el\n    );\n    console.log('[loadMovies] removedNulls:', removedNulls);\n    if (filter.letter) dispatch(addMovies({ byName: removedNulls }));\n    else if (filter.search)\n      filter.offset && filter.offset > 0\n        ? dispatch(addMovies({ search: removedNulls }))\n        : dispatch(setMovies({ search: removedNulls }));\n    else dispatch(addMovies({ popular: removedNulls }));\n    if (callback)\n      callback(movies && movies.data ? movies.data.length < limit : true);\n    return removedNulls;\n  } else {\n    dispatch(stopLoading());\n    const error = {\n      en: 'Loading error',\n      ru: 'Не удалось загрузить фильмы',\n    };\n    dispatch(setError({ error: movies?.error || 'Loading error' }));\n    return null;\n  }\n};\n\nexport const loadActivePeers = async (\n  id: string\n): Promise<ILoaderInfo | null> => {\n  let data = null;\n  try {\n    const res = await axios(`/api/loader/stats/${id}`);\n    if (res.status < 400 && res.data.status) {\n      data = res.data.data as ILoaderInfo;\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  return data;\n};\n\nexport const loadMovie = (id: string) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const movie = await loadMoviesAsync({ id });\n  console.log('loadMovie', movie);\n  if (movie?.status && movie.data) dispatch(addMovies({ search: movie.data }));\n  else {\n    dispatch(setError({ error: 'Loading error' }));\n  }\n};\n\n/**\n * loads comments\n * @param params object with values:\n *    @param movieId movieId to find it in redux\n *    @param limit number of comments to fetch, default 5\n *    @param offset comments offset, default 0\n * @param callback fires when end of comments is reached\n */\nexport const loadComments = (\n  {\n    movieId,\n    limit = 5,\n    offset = 0,\n  }: { movieId: string; limit?: number; offset?: number },\n  callback?: (length: number) => void\n) => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  const res = await movies('comments', {\n    params: {\n      movieId,\n      limit,\n      offset,\n    },\n  });\n  console.log('loadComments', res.data);\n  if (res.data.status) {\n    const comments = res.data.data as IComment[];\n    comments.length && dispatch(updateComments({ comments, id: movieId }));\n    if (callback) callback(comments.length);\n  }\n};\n\nexport const {\n  addMovies,\n  setMovies,\n  updateComments,\n  setEndOfMovies,\n  resetEndOfMovies,\n  setError,\n  resetError,\n  startLoading,\n  stopLoading,\n} = MoviesSlice.actions;\n\nexport default MoviesSlice.reducer;\n","import axios from 'axios';\nexport const CancelToken = axios.CancelToken;\n\nexport const auth = axios.create({\n  baseURL: `/api/auth/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const profile = axios.create({\n  baseURL: `/api/profile/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const passwd = axios.create({\n  baseURL: `/api/passwd/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const email = axios.create({\n  baseURL: `/api/email/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const search = axios.create({\n  baseURL: `/api/search/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const movies = axios.create({\n  baseURL: `/api/movies/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\nexport const test = axios.create({\n  baseURL: `/api/test/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nexport const main = axios.create({\n  baseURL: `/api/`,\n  withCredentials: true,\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\n// GET /api/info\n\n// GET /api/auth/basic\n// GET /api/auth/oauth42\n\n// GET /api/profile/get (в зависимости от того есть ли параметр user_id  в урле или нет возвращает твоего или чужого юзера)\n// PUT /api/profile/create\n// PATCH /api/profile/patch\n// DELETE /api/profile/delete\n\n// PATCH /api/email/patch\n// POST /api/email/confirm\n// POST /api/email/resend\n\n// PATCH /api/passwd/patch\n// POST /api/passwd/repair\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { profile } from '../../axios';\nimport { AppDispatch } from '../store';\n\nconst tokenKey = 'hypertubeAuthToken';\n\ninterface IUserPayload {\n  user: IUser;\n}\n\nexport interface IUser {\n  userId: number;\n  email: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  imageBody: string | null;\n}\n\nexport type IUserState = IUser & {\n  isAuth: boolean;\n  isLoading: boolean;\n};\n\nconst initialState: IUserState = {\n  isAuth: false,\n  isLoading: false,\n  userId: 0,\n  email: '',\n  username: '',\n  firstName: '',\n  lastName: '',\n  imageBody: null,\n};\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    saveUserState(state, { payload }: PayloadAction<IUserPayload>) {\n      if (!payload.user)\n        throw new Error('[userSlice:saveState] no user in payload');\n      //   Object.keys(payload.user).map((k) => {\n      //     const key = k as IUserKeys;\n      //     state[key] = payload.user[key];\n      //   });\n      return {\n        isAuth: state.isAuth,\n        isLoading: state.isLoading,\n        userId: payload.user.userId || state.userId,\n        email: payload.user.email || state.email,\n        username: payload.user.username || state.username,\n        firstName: payload.user.firstName || state.firstName,\n        lastName: payload.user.lastName || state.lastName,\n        imageBody: payload.user.imageBody || state.imageBody,\n      };\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n    },\n    authFail(state) {\n      state.isAuth = false;\n    },\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n  },\n});\n\nexport const getSelfInfo = () => async (dispatch: AppDispatch) => {\n  dispatch(startLoading());\n  try {\n    const res = await profile('get', {\n      headers: {\n        accessToken: getToken(),\n      },\n    });\n    console.log(res.data);\n    if (res.data.en) {\n      dispatch(authFail());\n      removeToken();\n    } else {\n      dispatch(\n        saveUserState({\n          user: res.data as IUser,\n        })\n      );\n      dispatch(authSuccess());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  dispatch(stopLoading());\n};\n\nexport const saveToken = (token: string) => {\n  localStorage.setItem(tokenKey, token);\n};\n\nexport const removeToken = (key: string = tokenKey) => {\n  localStorage.removeItem(key);\n};\n\nexport const getToken = () => localStorage.getItem(tokenKey);\n\nexport const {\n  saveUserState,\n  authSuccess,\n  authFail,\n  startLoading,\n  stopLoading,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { createMuiTheme } from '@material-ui/core';\n\nexport const primaryColor = {\n  light: '#05829E',\n  main: '#035263',\n  dark: '#02313B',\n  contrastText: '#fff',\n};\nexport const secondaryColor = {\n  light: '#F19941',\n  main: '#EE851B',\n  dark: '#D17010',\n  contrastText: '#fff',\n  contrastTextLighter: '#333',\n};\nexport const backgroundColor = {\n  light: '#FFFFFF',\n  default: '#FAFAFA',\n  dark: '#DDDDDD',\n  contrastText: '#121212',\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    background: backgroundColor,\n  },\n  typography: {\n    fontFamily: [\n      '\"Quicksand\"',\n      '\"Helvetica Neue\"',\n      'Roboto',\n      'Arial',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n  props: {\n    MuiButton: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n    MuiTextField: {\n      variant: 'outlined',\n      color: 'primary',\n    },\n  },\n});\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../rootReducer';\nimport { AppDispatch } from '../store';\nimport { IFilter, loadMovies } from './MoviesSlice';\n\nexport interface IGenres {\n  Action: boolean;\n  Adventure: boolean;\n  Animation: boolean;\n  Biography: boolean;\n  Comedy: boolean;\n  Crime: boolean;\n  Documentary: boolean;\n  Drama: boolean;\n  Family: boolean;\n  Fantasy: boolean;\n  'Film Noir': boolean;\n  History: boolean;\n  Horror: boolean;\n  Music: boolean;\n  Mystery: boolean;\n  Romance: boolean;\n  'Sci-Fi': boolean;\n  Short: boolean;\n  Sport: boolean;\n  Superhero: boolean;\n  Thriller: boolean;\n  War: boolean;\n  Western: boolean;\n}\nexport type GenresKeys = keyof IGenres;\nexport interface IYears {\n  'before 1980': boolean;\n  '1980-1990': boolean;\n  '1990-2000': boolean;\n  '2000-2010': boolean;\n  '2010-2020': boolean;\n}\nexport type YearsKeys = keyof IYears;\nexport interface ICountries {\n  Australia: boolean;\n  Canada: boolean;\n  France: boolean;\n  Germany: boolean;\n  'Great Britain': boolean;\n  India: boolean;\n  Japan: boolean;\n  Russia: boolean;\n  Spain: boolean;\n  USA: boolean;\n  USSR: boolean;\n  other: boolean;\n}\nexport type CountriesKeys = keyof ICountries;\n\nexport const items = {\n  genres: [\n    'Action',\n    'Adventure',\n    'Animation',\n    'Biography',\n    'Comedy',\n    'Crime',\n    'Documentary',\n    'Drama',\n    'Family',\n    'Fantasy',\n    'Film Noir',\n    'History',\n    'Horror',\n    'Music',\n    'Mystery',\n    'Romance',\n    'Sci-Fi',\n    'Short',\n    'Sport',\n    'Superhero',\n    'Thriller',\n    'War',\n    'Western',\n  ] as GenresKeys[],\n  years: [\n    'before 1980',\n    '1980-1990',\n    '1990-2000',\n    '2000-2010',\n    '2010-2020',\n  ] as YearsKeys[],\n  countries: [\n    'Australia',\n    'Canada',\n    'France',\n    'Germany',\n    'Great Britain',\n    'India',\n    'Japan',\n    'Russia',\n    'Spain',\n    'USA',\n    'USSR',\n    'other',\n  ] as CountriesKeys[],\n  // additional: ['subtitles', 'HD', 'Multi-audio'],\n};\n\nexport interface GenresItem {\n  category: 'genres';\n  name: GenresKeys;\n  value: boolean;\n}\n\nexport interface YearsItem {\n  category: 'years';\n  name: YearsKeys;\n  value: boolean;\n}\n\nexport interface CountriesItem {\n  category: 'countries';\n  name: CountriesKeys;\n  value: boolean;\n}\n\nexport interface SetFilterPayload {\n  filter: GenresItem | YearsItem | CountriesItem;\n}\n\nexport interface FilterState {\n  genres: IGenres;\n  years: IYears;\n  countries: ICountries;\n}\nexport type FilterStateKeys = keyof FilterState;\n\nconst initialState = {\n  genres: {\n    Action: false,\n    Adventure: false,\n    Animation: false,\n    Biography: false,\n    Comedy: false,\n    Crime: false,\n    Documentary: false,\n    Drama: false,\n    Family: false,\n    Fantasy: false,\n    'Film Noir': false,\n    History: false,\n    Horror: false,\n    Music: false,\n    Mystery: false,\n    Romance: false,\n    'Sci-Fi': false,\n    Short: false,\n    Sport: false,\n    Superhero: false,\n    Thriller: false,\n    War: false,\n    Western: false,\n  },\n  years: {\n    'before 1980': false,\n    '1980-1990': false,\n    '1990-2000': false,\n    '2000-2010': false,\n    '2010-2020': false,\n  },\n  countries: {\n    Australia: false,\n    Canada: false,\n    France: false,\n    Germany: false,\n    'Great Britain': false,\n    India: false,\n    Japan: false,\n    Russia: false,\n    Spain: false,\n    USA: false,\n    USSR: false,\n    other: false,\n  },\n  // additional: { subtitles: false, HD: false, 'Multi-audio': false },\n};\n\nconst filterSlice = createSlice({\n  name: 'filter',\n  initialState,\n  reducers: {\n    setFilterState(state, { payload }: PayloadAction<SetFilterPayload>) {\n      const { category, name, value } = payload.filter;\n      return {\n        ...state,\n        [category]: {\n          ...state[category],\n          [name]: value,\n        },\n      };\n    },\n    resetFilterState() {\n      return initialState;\n    },\n  },\n});\n// category: 'genres' | 'years' | 'countries',\n\nconst isCountriesKey = (value: string): value is CountriesKeys => {\n  const allowedKeys: string[] = items.countries.filter((el) => el !== 'other');\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isGenresKey = (value: string): value is GenresKeys => {\n  const allowedKeys: string[] = items.genres;\n  return allowedKeys.indexOf(value) !== -1;\n};\nconst isYearsKey = (value: string): value is YearsKeys => {\n  const allowedKeys: string[] = items.years;\n  return allowedKeys.indexOf(value) !== -1;\n};\n\nexport const isCountiesStateEmpty = (state: ICountries) => {\n  for (let country in state) {\n    if (isCountriesKey(country) && state[country]) return false;\n  }\n  return true;\n};\nexport const isYearsStateEmpty = (state: IYears) => {\n  for (let year in state) {\n    if (isYearsKey(year) && state[year]) return false;\n  }\n  return true;\n};\nexport const isGenresStateEmpty = (state: IGenres) => {\n  for (let genre in state) {\n    if (isGenresKey(genre) && state[genre]) return false;\n  }\n  return true;\n};\n\nconst getYearsFilter = (years: IYears): number[][] | [] => {\n  const yearsArray = items.years.filter(\n    (value) => years[value] && [value, years[value]]\n  );\n\n  const result: number[][] = [];\n  yearsArray.forEach((year) => {\n    if (year.startsWith('before')) {\n      result.push([0, 1980]);\n    } else if (\n      result.length > 0 &&\n      year.match(`${result[result.length - 1][1]}`)\n    ) {\n      // if last value in result contains one of current years\n      // (actually, if it's true - should find the first one)\n      // then we replace that year with the second one\n      const arr = year.split('-');\n      result[result.length - 1][1] = +arr[1];\n    } else {\n      const arr = year.split('-');\n      result.push([+arr[0], +arr[1]]);\n    }\n  });\n  console.log(result);\n  return result;\n};\n\n/**\n * Requests movies, based on filterState.\n * Empty or object with fields required.\n * @param param0 object with _limit and _start fields\n */\nexport const reqeuestMoviesWithFilters = (\n  filter: IFilter = {\n    limit: 20,\n    offset: 0,\n  }\n) => async (dispatch: AppDispatch, getState: () => RootState) => {\n  const filterState = getState().filter;\n  const genres = items.genres.filter(\n    (value) => filterState.genres[value] && [value, filterState.genres[value]]\n  );\n  const years = getYearsFilter(filterState.years);\n  const countries = items.countries.filter(\n    (value) =>\n      filterState.countries[value] && [value, filterState.countries[value]]\n  );\n  const filterParams = { ...filter, genres, years, countries };\n\n  console.log(filterParams);\n  dispatch(loadMovies({ filter: filterParams }));\n};\n\nexport const yearInRange = (year: number, years: IYears) => {\n  for (let entry of Object.entries(years)) {\n    if (!entry[1]) continue;\n    const rangeNumbers = entry[0].startsWith('before')\n      ? [0, +entry[0].split(' ')[1]]\n      : entry[0].split('-').map((x) => +x);\n    if (year >= rangeNumbers[0] && year < rangeNumbers[1]) return true;\n  }\n  return false;\n};\nexport const genreInGenres = (\n  movieGenres: GenresKeys[],\n  filterGenres: IGenres\n) => {\n  for (let genre of movieGenres) {\n    if (filterGenres[genre]) return true;\n  }\n  return false;\n};\nexport const countryInCountries = (\n  movieCountries: string[],\n  filterCountries: ICountries\n) => {\n  for (let country of movieCountries) {\n    return isCountriesKey(country)\n      ? filterCountries[country]\n      : filterCountries.other;\n  }\n  return false;\n};\n\nexport const { setFilterState, resetFilterState } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport languageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\n\nconst host = window.location.host;\ni18n\n    .use(Backend)\n    .use(languageDetector)\n    .use(initReactI18next)\n    .init({\n        lng: 'en',\n        fallbackLng: 'en',\n        backend: {\n            loadPath: `http://${host}/locales/{{lng}}/{{ns}}.json`,\n},\ndetection: ['queryString', 'cookie'],\n    cache: ['cookie'],\n    debug: false,\n    interpolation: {\n    escapeValue: false,\n},\n});\n\nexport default i18n;","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport { theme } from './theme';\n\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport './i18n';\n\nif (process.env.NODE_ENV === 'production') console.log = () => {};\nexport const LIMIT = +(process.env.REACT_APP_LOAD_LIMIT || 5);\n\n// console.log = () => {};\n\nconst render = () => {\n  const App = require('./App').default;\n\n  ReactDOM.render(\n    // <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter>\n          <Suspense fallback={<div>Loading...</div>}>\n            <CssBaseline />\n            <App />\n          </Suspense>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>,\n    // </React.StrictMode>,\n    document.getElementById('root')\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === 'development' && module.hot) {\n  module.hot.accept('./App', render);\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface SortingItem {\n  sortBy: string | null;\n}\n\nexport interface UIState {\n  sortBy: string | null;\n  view: 'grid' | 'lines';\n}\n\nconst initialState = {\n  sortBy: null,\n  view: 'lines',\n} as UIState;\n\nconst UISlice = createSlice({\n  name: 'UI',\n  initialState,\n  reducers: {\n    setSortingBy(state, { payload }: PayloadAction<SortingItem>) {\n      state.sortBy = payload.sortBy;\n    },\n    changeView(state) {\n      state.view = state.view === 'grid' ? 'lines' : 'grid';\n    },\n  },\n});\n\nexport const { setSortingBy, changeView } = UISlice.actions;\n\nexport default UISlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type IVariant = 'default' | 'info' | 'warning' | 'success' | 'error';\nexport interface INotification {\n  key: string;\n  text: string;\n  variant: IVariant;\n  header?: string;\n  options?: any;\n  dismissed?: boolean;\n}\n\ninterface ISnackState {\n  notifications: INotification[];\n}\n\nconst initialState = {\n  notifications: [],\n} as ISnackState;\n\nconst snackSlice = createSlice({\n  name: 'snack',\n  initialState,\n  reducers: {\n    addSnack(state, { payload }: PayloadAction<INotification>) {\n      const hasSameMessageAndVariant = state.notifications.find(\n        (msg) => msg.text === payload.text && msg.variant === payload.variant\n      );\n      if (!hasSameMessageAndVariant) state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n"],"sourceRoot":""}